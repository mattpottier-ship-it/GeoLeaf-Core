/* =======================================================================
   GeoLeaf – Fichier de thème centralisé (Theme v1 – Palette VERTE)
   -----------------------------------------------------------------------
   Variante full-green : UI en tons verts cohérents en Light & Dark
   Structure strictement identique au thème bleu d’origine.
   ======================================================================= */

/* -----------------------------------------------------------------------
   Palette par défaut (fallback) – très proche du thème LIGHT vert
   ----------------------------------------------------------------------- */
:root {
    /* Couleurs générales */
    --gl-color-bg-page: #ffffff;
    --gl-color-bg-surface: #e2f3e8;          /* remplace le bleu clair par un vert très pâle */
    --gl-color-bg-surface-muted: #f1faf5;
    --gl-color-bg-overlay: rgba(255, 255, 255, 0.82);

    --gl-color-text-main: #0f172a;
    --gl-color-text-muted: #64748b;
    --gl-color-text-inverse: #f9fafb;

    --gl-color-border-soft: rgba(15, 23, 42, 0.08);
    --gl-color-border-strong: rgba(15, 23, 42, 0.22);

    /* Accent (boutons, icônes, toggles actifs) – VERT */
    --gl-color-accent: #16a34a;              /* Vert principal (green-600) */
    --gl-color-accent-soft: rgba(22, 163, 74, 0.16);

    /* POI – palette verte */
    --gl-color-poi-fill: #22c55e;            /* Vert marqueur (green-500) */
    --gl-color-poi-stroke: #ffffff;
    --gl-color-poi-fill-default: #16a34a;    /* Couleur par défaut si aucune catégorie */
    --gl-color-poi-stroke-default: #ffffff;  /* Contour par défaut si aucune catégorie */

    /* Badges POI par défaut (verts) */
    --gl-color-badge-category-bg: rgba(34, 197, 94, 0.12);
    --gl-color-badge-category-border: rgba(34, 197, 94, 0.3);
    --gl-color-badge-subcategory-bg: rgba(15, 23, 42, 0.04);
    --gl-color-badge-subcategory-border: rgba(15, 23, 42, 0.08);

    /* Panneau latéral POI */
    --gl-sidepanel-width: 420px;

    /* Itinéraire – vert contrasté */
    --gl-color-route-line: #15803d;          /* green-700 */
    --gl-color-route-outline: rgba(15, 23, 42, 0.6);

    /* Légende */
    --gl-color-legend-bg: rgba(255, 255, 255, 0.78);
    --gl-color-legend-border: rgba(187, 247, 208, 0.9);   /* basé sur green-200 */
    --gl-color-legend-text: #0f172a;

    /* Popup POI */
    --gl-color-popup-bg: rgba(255, 255, 255, 0.8);
    --gl-color-popup-border: rgba(187, 247, 208, 0.9);
    --gl-color-popup-text: #0f172a;
    /* Trait sous le titre de la popup POI (fallback ≈ light) */
    --gl-poi-title-border: #1f2937;

   /* Cluster POI – dégradé vert */
    --gl-color-poi-cluster-center: rgba(34, 197, 94, 1.0);   /* green-400 */
    --gl-color-poi-cluster-mid: rgba(34, 197, 94, 0.75);
    --gl-color-poi-cluster-outer: rgba(34, 197, 94, 0.35);
    --gl-color-poi-cluster-edge: rgba(34, 197, 94, 0.0);
    --gl-size-poi-cluster: 40px;
    --gl-color-poi-cluster-text: #0f172a;

    /* Bouton toggle thème (soleil/lune) */
    --gl-color-theme-toggle-track: #e2e8f0;
    --gl-color-theme-toggle-thumb: #0f172a;

    /* Focus ring (accessibilité) – Vert */
    --gl-color-focus-ring: #16a34a;

    /* Ombres */
    --gl-shadow-soft: 0 1px 3px rgba(15, 23, 42, 0.12);
    --gl-shadow-medium: 0 2px 6px rgba(15, 23, 42, 0.18);

    /* Additional theme-aware variables used across the UI */
    --gl-shadow-panel: -8px 0 30px rgba(15, 23, 42, 0.30);
    --gl-color-gallery-item-bg: rgba(15, 23, 42, 0.04);
    --gl-color-accent-contrast: #f9fafb;
    --gl-color-accent-hover: #15803d;

    /* Aliases utilitaires pour harmoniser toutes les couches UI */
    --gl-color-text: var(--gl-color-text-main);
    --gl-color-text-secondary: var(--gl-color-text-muted);
    --gl-color-border: var(--gl-color-border-soft);
    --gl-color-border-subtle: var(--gl-color-border-soft);
    --gl-panel-border: var(--gl-color-border-soft);
    --gl-color-surface-elevated: var(--gl-color-bg-surface-muted);

    /* Opacités / overlays génériques dérivés du thème */
    --gl-color-overlay-soft: color-mix(in srgb, var(--gl-color-bg-overlay) 50%, transparent);
    --gl-color-overlay-strong: color-mix(in srgb, var(--gl-color-bg-overlay) 85%, transparent);
    --gl-color-overlay-stronger: color-mix(in srgb, var(--gl-color-bg-overlay) 95%, transparent);

    /* Accent en alpha réutilisable (focus, halos) */
    --gl-color-accent-alpha: color-mix(in srgb, var(--gl-color-accent) 20%, transparent);
}

/* -----------------------------------------------------------------------
   Thème LIGHT – appliqué quand le <body> a la classe .gl-theme-light
   Aussi disponible directement sur .gl-theme-light pour support fullscreen
   ----------------------------------------------------------------------- */
body.gl-theme-light,
.gl-theme-light {
    --gl-color-bg-page: #ffffff;                 /* fond blanc */
    --gl-color-bg-surface: #f3fbf6;             /* surface vert très pâle */
    --gl-color-bg-surface-muted: #f3fbf6;
    --gl-color-bg-overlay: rgba(255, 255, 255, 0.82);

    --gl-color-text-main: #0f172a;
    --gl-color-text-muted: #64748b;
    --gl-color-text-inverse: #f9fafb;

    --gl-color-border-soft: rgba(15, 23, 42, 0.08);
    --gl-color-border-strong: rgba(15, 23, 42, 0.22);

    /* Accent vert */
    --gl-color-accent: #16a34a;
    --gl-color-accent-soft: rgba(22, 163, 74, 0.16);

    /* POI / itinéraire en vert */
    --gl-color-poi-fill: #22c55e;
    --gl-color-poi-stroke: #ffffff;
    --gl-color-poi-fill-default: #16a34a;
    --gl-color-poi-stroke-default: #ffffff;

    --gl-color-route-line: #15803d;
    --gl-color-route-outline: rgba(15, 23, 42, 0.6);

    --gl-color-legend-bg: rgba(255, 255, 255, 0.8);
    --gl-color-legend-border: rgba(187, 247, 208, 0.9);
    --gl-color-legend-text: #0f172a;

    --gl-color-popup-bg: rgba(255, 255, 255, 0.82);
    --gl-color-popup-border: rgba(187, 247, 208, 0.9);
    --gl-color-popup-text: #0f172a;
    /* Gris anthracite en light */
    --gl-poi-title-border: #1f2937;

    /* Cluster POI light theme – vert */
    --gl-color-poi-cluster-center: rgba(34, 197, 94, 1.0);
    --gl-color-poi-cluster-mid: rgba(34, 197, 94, 0.75);
    --gl-color-poi-cluster-outer: rgba(34, 197, 94, 0.35);
    --gl-color-poi-cluster-edge: rgba(34, 197, 94, 0.0);
    --gl-size-poi-cluster: 40px;
    --gl-color-poi-cluster-text: #0f172a;

    --gl-color-theme-toggle-track: #e2e8f0;
    --gl-color-theme-toggle-thumb: #0f172a;

    /* Badges POI – déclinaison verte */
    --gl-color-badge-category-bg: rgba(34, 197, 94, 0.16);
    --gl-color-badge-category-border: rgba(34, 197, 94, 0.35);
    --gl-color-badge-subcategory-bg: rgba(15, 23, 42, 0.06);
    --gl-color-badge-subcategory-border: rgba(15, 23, 42, 0.12);

    /* Focus ring (accessibilité) */
    --gl-color-focus-ring: #16a34a;
}

/* -----------------------------------------------------------------------
   Thème DARK – appliqué quand le <body> a la classe .gl-theme-dark
   Aussi disponible directement sur .gl-theme-dark pour support fullscreen
   ----------------------------------------------------------------------- */
body.gl-theme-dark,
.gl-theme-dark {
    --gl-color-bg-page: #022c22;                /* vert très sombre type "forêt" */
    --gl-color-bg-surface: #022c22;
    --gl-color-bg-surface-muted: #022c22;
    --gl-color-bg-overlay: rgba(6, 78, 59, 0.78);

    --gl-color-text-main: #e5e7eb;
    --gl-color-text-muted: #9ca3af;
    --gl-color-text-inverse: #020617;

    --gl-color-border-soft: rgba(148, 163, 184, 0.35);
    --gl-color-border-strong: rgba(148, 163, 184, 0.55);

    /* POI / itinéraire verts, plus lumineux pour le dark */
    --gl-color-poi-fill: #22c55e;
    --gl-color-poi-stroke: #022c22;
    --gl-color-poi-fill-default: #4ade80;
    --gl-color-poi-stroke-default: #022c22;
    --gl-color-border-strong: rgba(148, 163, 184, 0.55);

    /* Accent vert adouci pour le dark */
    --gl-color-accent: #4ade80;
    --gl-color-accent-soft: rgba(74, 222, 128, 0.22);

    --gl-color-route-line: #4ade80;
    --gl-color-route-outline: rgba(6, 78, 59, 0.9);

    --gl-color-legend-bg: rgba(6, 78, 59, 0.82);
    --gl-color-legend-border: rgba(21, 128, 61, 0.9);
    --gl-color-legend-text: #e5e7eb;

    --gl-color-popup-bg: rgba(6, 78, 59, 0.86);
    --gl-color-popup-border: rgba(21, 128, 61, 0.9);
    --gl-color-popup-text: #e5e7eb;
    /* Blanc en dark */
    --gl-poi-title-border: #e5e7eb;

    /* Cluster POI dark theme – vert */
    --gl-color-poi-cluster-center: rgba(74, 222, 128, 1.0);
    --gl-color-poi-cluster-mid: rgba(74, 222, 128, 0.8);
    --gl-color-poi-cluster-outer: rgba(74, 222, 128, 0.4);
    --gl-color-poi-cluster-edge: rgba(74, 222, 128, 0.0);
    --gl-size-poi-cluster: 40px;
    --gl-color-poi-cluster-text: #022c22;

    --gl-color-theme-toggle-track: #111827;
    --gl-color-theme-toggle-thumb: #e5e7eb;

    /* Badges POI – déclinaison verte en dark */
    --gl-color-badge-category-bg: rgba(34, 197, 94, 0.45);
    --gl-color-badge-category-border: rgba(34, 197, 94, 0.75);
    --gl-color-badge-subcategory-bg: rgba(15, 23, 42, 0.65);
    --gl-color-badge-subcategory-border: rgba(15, 23, 42, 0.9);

    /* Focus ring (accessibilité) - identique mais vert */
    --gl-color-focus-ring: #4ade80;
}
