/*!
 * GeoLeaf Baselayers – Styles des contrôles de fond de carte
 * ----------------------------------------------------------
 * Ce fichier gère uniquement l’apparence des contrôles liés aux basemaps.
 * Tout est piloté par les variables de thème définies dans geoleaf-theme.css.
 *
 * Le JavaScript GeoLeaf.Baselayers utilise :
 *   - l’attribut data-gl-baselayer="street|topo|satellite"
 *   - les classes gl-baselayer-active et is-active (ajoutées automatiquement)
 *
 * Objectifs :
 *   - boutons type "pill" modernes, cohérents avec le reste de l’UI
 *   - aucun code couleur en dur (uniquement des variables CSS)
 *   - état actif clairement visible, thème light/dark pris en charge
 */

/* ========================================================================== */
/* 1. Conteneur principal                                                     */
/* ========================================================================== */

/* Wrapper générique pouvant être utilisé dans le header ou la légende */
.gl-baselayers {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
}

/* Variante en pile verticale (si utilisée dans un panneau latéral, par ex.) */
.gl-baselayers--stacked {
    flex-direction: column;
    align-items: stretch;
}

/* ========================================================================== */
/* 2. Boutons basemap (data-gl-baselayer)                                     */
/* ========================================================================== */

/* Base commune à tout élément cliquable contrôlant une basemap */
[data-gl-baselayer] {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.3rem;

    padding: 0.2rem 0.5rem;
    border-radius: 9999px;

    border: 1px solid var(--gl-color-border-soft);
    background: var(--gl-color-bg-surface);
    color: var(--gl-color-text-main);

    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    font-size: 0.7rem;
    font-weight: 500;
    line-height: 1.2;
    text-decoration: none;

    cursor: pointer;
    white-space: nowrap;

    box-shadow: var(--gl-shadow-soft);
    transition:
        background-color 140ms ease,
        border-color 140ms ease,
        box-shadow 140ms ease,
        transform 100ms ease,
        color 140ms ease;
}

/* Hover : légère mise en avant */
[data-gl-baselayer]:hover {
    background: var(--gl-color-bg-surface-muted);
    border-color: var(--gl-color-border-strong);
    box-shadow: var(--gl-shadow-medium);
    transform: translateY(-1px);
}

/* Active/pressed : retour à plat, sans “coller” visuellement */
[data-gl-baselayer]:active {
    transform: translateY(0);
    box-shadow: var(--gl-shadow-soft);
}

/* Pour compatibilité avec les <button> natifs */
[data-gl-baselayer]:disabled,
[data-gl-baselayer][aria-disabled="true"] {
    opacity: 0.5;
    cursor: default;
    box-shadow: none;
}

/* ========================================================================== */
/* 3. État sélectionné (couche de fond active)                                */
/* ========================================================================== */

/* Le JS ajoute gl-baselayer-active et is-active sur l’élément correspondant */
[data-gl-baselayer].gl-baselayer-active,
[data-gl-baselayer].is-active {
    background: var(--gl-color-accent-soft);
    color: var(--gl-color-text-main);
    border-color: var(--gl-color-border-strong);
    box-shadow: var(--gl-shadow-medium);
}

/* Survol de l’élément déjà actif : accent légèrement renforcé */
[data-gl-baselayer].gl-baselayer-active:hover,
[data-gl-baselayer].is-active:hover {
    background: var(--gl-color-accent);
    color: var(--gl-color-text-inverse);
}

/* ========================================================================== */
/* 4. Icônes et labels internes (optionnels)                                  */
/* ========================================================================== */

.gl-baselayer__icon {
    display: inline-block;
    font-size: 0.8em;
    line-height: 1;
}

.gl-baselayer__label {
    display: inline-block;
    font-size: 0.7rem;
}

/* Variante plus compacte si utilisée dans des zones étroites */
.gl-baselayer--compact [data-gl-baselayer] {
    padding-inline: 0.4rem;
    font-size: 0.68rem;
}

/* ========================================================================== */
/* 5. Intégration possible dans la légende                                    */
/* ========================================================================== */

/* Si les basemaps sont rendus dans un bloc interne à la légende */
.gl-layer-manager__baselayers {
    display: flex;
    flex-wrap: wrap;
    gap: 0.25rem;
    margin-top: 4px;
}

/* Sur mobile, basemaps en pleine largeur dans la légende */
@media (max-width: 768px) {
    .gl-layer-manager__baselayers {
        justify-content: flex-start;
    }

    .gl-layer-manager__baselayers [data-gl-baselayer] {
        flex: 0 0 auto;
    }
}
