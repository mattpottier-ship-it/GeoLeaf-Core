{"version":3,"file":"geoleaf.umd.js","sources":["../src/static/js/geoleaf.log.js","../src/static/js/geoleaf.log.config.js","../src/static/js/geoleaf.security.js","../src/static/js/geoleaf.constants.js","../src/static/js/geoleaf.utils.js","../src/static/js/utils/dom-security.js","../src/static/js/utils/dom-helpers.js","../src/static/js/utils/event-listener-manager.js","../src/static/js/utils/timer-manager.js","../src/static/js/utils/scale-utils.js","../src/static/js/helpers/style-resolver.js","../src/static/js/validators/style-validator-rules.js","../src/static/js/validators/style-validator.js","../src/static/js/geoleaf.core.js","../src/static/js/ui/theme.js","../src/static/js/ui/controls.js","../src/static/js/ui/panel-builder.js","../src/static/js/ui/dom-utils.js","../src/static/js/ui/coordinates-display.js","../src/static/js/ui/branding.js","../src/static/js/ui/content-builder/core.js","../src/static/js/ui/content-builder/templates.js","../src/static/js/ui/content-builder/assemblers.js","../src/static/js/ui/content-builder.js","../src/static/js/ui/components.js","../src/static/js/ui/notifications.js","../src/static/js/ui/event-delegation.js","../src/static/js/ui/filter-state-manager.js","../src/static/js/map/scale-control.js","../src/static/js/ui/filter-control-builder.js","../src/static/js/ui/filter-panel/shared.js","../src/static/js/ui/filter-panel/state-reader.js","../src/static/js/ui/filter-panel/lazy-loader.js","../src/static/js/ui/filter-panel/applier.js","../src/static/js/ui/filter-panel/renderer.js","../src/static/js/ui/filter-panel/proximity.js","../src/static/js/ui/filter-panel/core.js","../src/static/js/ui/filter-panel.js","../src/static/js/geoleaf.ui.js","../src/static/js/data/normalizer.js","../src/static/js/loaders/style-loader.js","../src/static/js/config/loader.js","../src/static/js/config/storage.js","../src/static/js/config/normalization.js","../src/static/js/config/taxonomy.js","../src/static/js/config/profile-v3-loader.js","../src/static/js/config/profile.js","../src/static/js/config/data-converter.js","../src/static/js/config/geoleaf-config/config-core.js","../src/static/js/config/geoleaf-config/config-validation.js","../src/static/js/config/geoleaf-config/config-loaders.js","../src/static/js/config/geoleaf-config/config-accessors.js","../src/static/js/geoleaf.baselayers.js","../src/static/js/geoleaf.filters.js","../src/static/js/poi/shared.js","../src/static/js/poi/normalizers.js","../src/static/js/poi/popup.js","../src/static/js/poi/markers.js","../src/static/js/renderers/abstract-renderer.js","../src/static/js/poi/renderers/field-renderers.js","../src/static/js/poi/renderers/media-renderers.js","../src/static/js/poi/renderers/lightbox-manager.js","../src/static/js/poi/renderers/ui-behaviors.js","../src/static/js/poi/renderers/component-renderers.js","../src/static/js/poi/renderers/section-orchestrator.js","../src/static/js/poi/renderers/links.js","../src/static/js/poi/renderers/core.js","../src/static/js/poi/renderers.js","../src/static/js/poi/sidepanel.js","../src/static/js/poi/core.js","../src/static/js/geoleaf.poi.js","../src/static/js/geojson/shared.js","../src/static/js/geojson/style-resolver.js","../src/static/js/geojson/visibility-manager.js","../src/static/js/geojson/layer-manager/store.js","../src/static/js/geojson/layer-manager/visibility.js","../src/static/js/geojson/layer-manager/style.js","../src/static/js/geojson/layer-manager/integration.js","../src/static/js/geojson/popup-tooltip.js","../src/static/js/geojson/clustering.js","../src/static/js/geojson/layer-config-manager.js","../src/static/js/geojson/feature-validator.js","../src/static/js/geojson/loader/config-helpers.js","../src/static/js/geojson/loader/data.js","../src/static/js/geojson/loader/single-layer.js","../src/static/js/geojson/loader/profile.js","../src/static/js/geojson/core.js","../src/static/js/route/style-resolver.js","../src/static/js/route/popup-builder.js","../src/static/js/route/loaders.js","../src/static/js/route/layer-manager.js","../src/static/js/geoleaf.route.js","../src/static/js/layer-manager/shared.js","../src/static/js/layer-manager/renderer.js","../src/static/js/layer-manager/cache-section.js","../src/static/js/layer-manager/basemap-selector.js","../src/static/js/layer-manager/style-selector.js","../src/static/js/layer-manager/control.js","../src/static/js/geoleaf.layer-manager.js","../src/static/js/legend/legend-generator.js","../src/static/js/legend/legend-renderer.js","../src/static/js/legend/legend-control.js","../src/static/js/geoleaf.legend.js","../src/static/js/labels/label-renderer.js","../src/static/js/labels/label-button-manager.js","../src/static/js/labels/labels.js","../src/static/js/themes/theme-loader.js","../src/static/js/themes/theme-applier/core.js","../src/static/js/themes/theme-applier/visibility.js","../src/static/js/themes/theme-applier/deferred.js","../src/static/js/themes/theme-applier/ui-sync.js","../src/static/js/themes/theme-selector.js","../src/static/js/table/panel.js","../src/static/js/table/renderer.js","../src/static/js/geoleaf.table.js","../src/static/js/api/module-manager.js","../src/static/js/api/initialization-manager.js","../src/static/js/api/namespace-manager.js","../src/static/js/api/factory-manager.js","../src/static/js/api/controller.js","../src/static/js/geoleaf.api.js","../src/app/helpers.js","../src/app/init.js","../src/app/boot.js","../src/bundle-entry.js"],"sourcesContent":["/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * GeoLeaf.Log ‚Äî gestion centralis√©e des logs\r\n     *\r\n     * Objectif :\r\n     * - remplacer tous les console.log/console.warn/... du projet\r\n     * - fournir un niveau de verbosit√© configurable via la config JSON\r\n     * - s‚Äôassurer que chaque message poss√®de un pr√©fixe normalis√© [GeoLeaf.X]\r\n     */\r\n\r\n    if (!global.GeoLeaf) global.GeoLeaf = {};\r\n\r\n    const LEVELS = {\r\n        DEBUG: 0,\r\n        INFO: 1,\r\n        WARN: 2,\r\n        ERROR: 3\r\n    };\r\n\r\n    let currentLevel = LEVELS.INFO; // niveau par d√©faut\r\n    let quietMode = false; // mode silencieux pour les logs r√©p√©titifs\r\n    let suppressedMessages = new Set(); // pour √©viter les r√©p√©titions\r\n    let groupedMessageCounts = new Map(); // pour grouper les messages similaires\r\n\r\n    const formatPrefix = (type) => `[GeoLeaf.${type}]`;\r\n\r\n    // D√©tecte si un message est r√©p√©titif ou informatif non critique\r\n    const isRepetitiveMessage = (message) => {\r\n        const patterns = [\r\n            /Chargement du sprite SVG/,\r\n            /Sprite SVG d√©tect√©/,\r\n            /IconsConfig r√©cup√©r√©/,\r\n            /Module.*charg√©/,\r\n            /Module.*initialis√©/,\r\n            /Contr√¥le.*ajout√©/,\r\n            /Bouton.*ajout√©/,\r\n            /Panneau.*cr√©√©/,\r\n            /Section.*remplie/,\r\n            /Profil.*charg√©/,\r\n            /Couche.*charg√©e/,\r\n            /Style.*appliqu√©/,\r\n            /ThemeApplier/,\r\n            /LayerManager/,\r\n            /Storage/,\r\n            /CacheButton/,\r\n            /Renderers\\./,\r\n            /FormRenderer/,\r\n            /ResourceEnumerator/,\r\n            /LayerSelector/,\r\n            /CacheControl/,\r\n            /POI.*DEBUG/,\r\n            /AddForm/\r\n        ];\r\n        return patterns.some(pattern => pattern.test(message));\r\n    };\r\n\r\n    // Messages critiques qui doivent toujours √™tre affich√©s\r\n    const isCriticalMessage = (message) => {\r\n        const criticalPatterns = [\r\n            /ERROR/,\r\n            /WARN/,\r\n            /Failed/,\r\n            /Error/,\r\n            /Exception/,\r\n            /Carte initialis√©e avec succ√®s/,\r\n            /All.*modules loaded/,\r\n            /Mode.*activ√©/\r\n        ];\r\n        return criticalPatterns.some(pattern => pattern.test(message));\r\n    };\r\n\r\n    // G√®re les messages group√©s\r\n    const handleGroupedMessage = (message, args) => {\r\n        const key = message.replace(/\\d+/g, 'X').replace(/[{}:,]/g, ''); // normalise\r\n        const count = (groupedMessageCounts.get(key) || 0) + 1;\r\n        groupedMessageCounts.set(key, count);\r\n\r\n        if (count === 1) {\r\n            return true; // affiche le premier\r\n        } else if (count === 3 && !isCriticalMessage(message)) {\r\n            console.info(`${formatPrefix('INFO')} [Group√©] Message r√©p√©t√© - suite masqu√©e: ${message.substring(0, 60)}...`);\r\n            return false;\r\n        } else if (count > 3) {\r\n            return false; // supprime apr√®s 3 occurrences pour les non-critiques\r\n        }\r\n        return count <= 2; // affiche max 2 fois les messages non critiques\r\n    };\r\n\r\n    const Log = {\r\n        /**\r\n         * D√©finir le niveau de logs global\r\n         * @param {string} level  \"debug\" | \"info\" | \"warn\" | \"error\"\r\n         */\r\n        setLevel(level) {\r\n            const lvl = String(level).toLowerCase();\r\n            switch (lvl) {\r\n                case \"debug\":\r\n                    currentLevel = LEVELS.DEBUG;\r\n                    break;\r\n                case \"info\":\r\n                    currentLevel = LEVELS.INFO;\r\n                    break;\r\n                case \"warn\":\r\n                    currentLevel = LEVELS.WARN;\r\n                    break;\r\n                case \"error\":\r\n                    currentLevel = LEVELS.ERROR;\r\n                    break;\r\n                case \"production\":\r\n                    currentLevel = LEVELS.WARN; // En production, seulement WARN et ERROR\r\n                    quietMode = true;\r\n                    break;\r\n                default:\r\n                    console.warn(`${formatPrefix(\"WARN\")} Niveau de log inconnu :`, level);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Active/d√©sactive le mode silencieux pour les messages r√©p√©titifs\r\n         */\r\n        setQuietMode(enabled) {\r\n            if (quietMode === enabled) return; // √©viter les r√©p√©titions\r\n            quietMode = enabled;\r\n            if (enabled) {\r\n                console.info(`${formatPrefix(\"INFO\")} Mode silencieux activ√© - logs r√©p√©titifs r√©duits`);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Affiche un r√©sum√© des messages group√©s\r\n         */\r\n        showSummary() {\r\n            if (groupedMessageCounts.size > 0) {\r\n                console.group(`${formatPrefix(\"INFO\")} R√©sum√© des logs group√©s:`);\r\n                for (const [message, count] of groupedMessageCounts) {\r\n                    if (count > 3) {\r\n                        console.info(`‚Ä¢ ${count}x: ${message.substring(0, 60)}...`);\r\n                    }\r\n                }\r\n                console.groupEnd();\r\n            }\r\n        },\r\n\r\n        debug(...args) {\r\n            if (currentLevel <= LEVELS.DEBUG) {\r\n                const message = args.join(' ');\r\n                if (quietMode && isRepetitiveMessage(message)) {\r\n                    if (!handleGroupedMessage(message, args)) return;\r\n                }\r\n                console.debug(formatPrefix(\"DEBUG\"), ...args);\r\n            }\r\n        },\r\n\r\n        info(...args) {\r\n            if (currentLevel <= LEVELS.INFO) {\r\n                const message = args.join(' ');\r\n\r\n                // En mode silencieux, filtrer plus agressivement\r\n                if (quietMode) {\r\n                    // Toujours afficher les messages critiques\r\n                    if (isCriticalMessage(message)) {\r\n                        console.info(formatPrefix(\"INFO\"), ...args);\r\n                        return;\r\n                    }\r\n\r\n                    // Grouper/masquer les messages r√©p√©titifs\r\n                    if (isRepetitiveMessage(message)) {\r\n                        if (!handleGroupedMessage(message, args)) return;\r\n                    }\r\n                }\r\n\r\n                console.info(formatPrefix(\"INFO\"), ...args);\r\n            }\r\n        },\r\n\r\n        warn(...args) {\r\n            if (currentLevel <= LEVELS.WARN) {\r\n                console.warn(formatPrefix(\"WARN\"), ...args);\r\n            }\r\n        },\r\n\r\n        error(...args) {\r\n            if (currentLevel <= LEVELS.ERROR) {\r\n                console.error(formatPrefix(\"ERROR\"), ...args);\r\n            }\r\n        }\r\n    };\r\n\r\n    global.GeoLeaf.Log = Log;\r\n\r\n})(typeof globalThis !== \"undefined\" ? globalThis : window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * Configuration globale des logs pour GeoLeaf\r\n * Applique automatiquement les bonnes configurations de log selon l'environnement\r\n */\r\n\r\n(function() {\r\n    \"use strict\";\r\n\r\n    // Attendre que GeoLeaf.Log soit charg√©\r\n    function configureLogging() {\r\n        if (!window.GeoLeaf || !window.GeoLeaf.Log) {\r\n            setTimeout(configureLogging, 50);\r\n            return;\r\n        }\r\n\r\n        const Log = window.GeoLeaf.Log;\r\n\r\n        // D√©tecter l'environnement\r\n        const isProduction = location.hostname !== 'localhost' && !location.hostname.includes('127.0.0.1') && !location.search.includes('debug=true');\r\n        const isDebug = location.search.includes('debug=true') || location.search.includes('verbose=true');\r\n\r\n        if (isProduction) {\r\n            // Production: seulement warnings et erreurs + mode silencieux\r\n            Log.setLevel('production');\r\n            if (window.GeoLeaf && GeoLeaf.Log && GeoLeaf.Log.info) { GeoLeaf.Log.info(\"üîß [GeoLeaf] Mode production activ√© - logs r√©duits\"); }\r\n        } else if (isDebug) {\r\n            // Debug explicite: tous les logs\r\n            Log.setLevel('debug');\r\n            Log.setQuietMode(false);\r\n            if (window.GeoLeaf && GeoLeaf.Log && GeoLeaf.Log.info) { GeoLeaf.Log.info(\"üîß [GeoLeaf] Mode debug activ√© - tous les logs visibles\"); }\r\n        } else {\r\n            // D√©veloppement: logs informatifs avec mode silencieux pour r√©duire les r√©p√©titions\r\n            Log.setLevel('info');\r\n            Log.setQuietMode(true);\r\n            if (window.GeoLeaf && GeoLeaf.Log && GeoLeaf.Log.info) { GeoLeaf.Log.info(\"üîß [GeoLeaf] Mode d√©veloppement - logs optimis√©s\"); }\r\n        }\r\n\r\n        // Afficher un r√©sum√© apr√®s chargement complet\r\n        setTimeout(() => {\r\n            if (Log.showSummary) {\r\n                Log.showSummary();\r\n            }\r\n\r\n            // Afficher un r√©sum√© de d√©marrage concis\r\n            const endTime = performance.now();\r\n            if (window.GeoLeaf && GeoLeaf.Log && GeoLeaf.Log.info) {\r\n                GeoLeaf.Log.info(\"üéØ [GeoLeaf] D√©marrage termin√©:\", {\r\n                    \"‚è±Ô∏è Temps total\": Math.round(endTime) + \"ms\",\r\n                    \"üì¶ Modules\": \"122 charg√©s\",\r\n                    \"üîá Logs\": isProduction ? \"mode production\" : (isDebug ? \"mode debug\" : \"mode optimis√©\"),\r\n                    \"üí° Conseil\": isDebug ? \"\" : \"Ajoutez ?debug=true pour les logs d√©taill√©s\"\r\n                });\r\n            }\r\n        }, 3000);\r\n    }\r\n\r\n    // D√©marrer la configuration d√®s que possible\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', configureLogging);\r\n    } else {\r\n        configureLogging();\r\n    }\r\n})();\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * @fileoverview Module de s√©curit√© GeoLeaf\r\n * G√®re l'√©chappement HTML, validation URLs, sanitization\r\n *\r\n * @module GeoLeaf.Security\r\n * @version 2.0.0\r\n * @author GeoLeaf Project\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // Logger (d√©fini par geoleaf.logger-shim.js charg√© en premier)\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module Security - Fonctions de s√©curit√© centralis√©es\r\n     * @namespace\r\n     */\r\n    const Security = {\r\n        /**\r\n         * √âchappe les caract√®res HTML dangereux pour pr√©venir XSS\r\n         * @param {string} str - Cha√Æne √† √©chapper\r\n         * @returns {string} Cha√Æne √©chapp√©e\r\n         * @example\r\n         * Security.escapeHtml('<script>alert(1)</script>')\r\n         * // Returns: '&lt;script&gt;alert(1)&lt;/script&gt;'\r\n         */\r\n        escapeHtml(str) {\r\n            if (str === null || str === undefined) {\r\n                return \"\";\r\n            }\r\n\r\n            if (typeof str !== \"string\") {\r\n                str = String(str);\r\n            }\r\n\r\n            const div = document.createElement(\"div\");\r\n            div.textContent = str;\r\n            // SAFE: innerHTML here gets the escaped version of textContent\r\n            return div.innerHTML;\r\n        },\r\n\r\n        /**\r\n         * √âchappe les attributs HTML pour utilisation dans des attributs\r\n         * @param {string} str - Cha√Æne √† √©chapper\r\n         * @returns {string} Cha√Æne √©chapp√©e\r\n         * @example\r\n         * Security.escapeAttribute('value\"onclick=\"alert(1)')\r\n         * // Returns: 'value&quot;onclick=&quot;alert(1)'\r\n         */\r\n        escapeAttribute(str) {\r\n            if (str === null || str === undefined) {\r\n                return \"\";\r\n            }\r\n\r\n            if (typeof str !== \"string\") {\r\n                str = String(str);\r\n            }\r\n\r\n            return str\r\n                .replace(/&/g, \"&amp;\")\r\n                .replace(/'/g, \"&#39;\")\r\n                .replace(/\"/g, \"&quot;\")\r\n                .replace(/</g, \"&lt;\")\r\n                .replace(/>/g, \"&gt;\");\r\n        },\r\n\r\n        /**\r\n         * Valide une URL strictement avec whitelist de protocoles\r\n         * @param {string} url - URL √† valider\r\n         * @param {string} [baseUrl] - URL de base pour r√©solution relative\r\n         * @returns {string} URL valid√©e\r\n         * @throws {Error} Si URL invalide ou protocole non autoris√©\r\n         * @example\r\n         * Security.validateUrl('https://example.com/data.json')\r\n         * // Returns: 'https://example.com/data.json'\r\n         *\r\n         * Security.validateUrl('javascript:alert(1)')\r\n         * // Throws: Error\r\n         */\r\n        validateUrl(url, baseUrl) {\r\n            if (!url || typeof url !== \"string\") {\r\n                throw new TypeError(\"URL must be a non-empty string\");\r\n            }\r\n\r\n            // Normaliser l'URL\r\n            url = url.trim();\r\n\r\n            const base = baseUrl || global.location.origin;\r\n\r\n            try {\r\n                const parsed = new URL(url, base);\r\n\r\n                // Whitelist de protocoles autoris√©s\r\n                const ALLOWED_PROTOCOLS = [\"http:\", \"https:\", \"data:\"];\r\n\r\n                if (!ALLOWED_PROTOCOLS.includes(parsed.protocol)) {\r\n                    throw new Error(\r\n                        `Protocol \"${parsed.protocol}\" not allowed. ` +\r\n                            `Allowed protocols: ${ALLOWED_PROTOCOLS.join(\", \")}`\r\n                    );\r\n                }\r\n\r\n                // Validation suppl√©mentaire pour data: URLs\r\n                if (parsed.protocol === \"data:\") {\r\n                    // Autoriser uniquement les images\r\n                    const allowedDataTypes = [\r\n                        \"image/png\",\r\n                        \"image/jpeg\",\r\n                        \"image/jpg\",\r\n                        \"image/gif\",\r\n                        \"image/svg+xml\",\r\n                        \"image/webp\",\r\n                    ];\r\n\r\n                    const dataPrefix = url.split(\",\")[0];\r\n                    const mimeMatch = dataPrefix.match(/data:([^;,]+)/);\r\n\r\n                    if (!mimeMatch) {\r\n                        throw new Error(\"Invalid data URL format\");\r\n                    }\r\n\r\n                    const mimeType = mimeMatch[1];\r\n\r\n                    if (!allowedDataTypes.includes(mimeType)) {\r\n                        throw new Error(\r\n                            `Data URL type \"${mimeType}\" not allowed. ` +\r\n                                `Allowed: ${allowedDataTypes.join(\", \")}`\r\n                        );\r\n                    }\r\n                }\r\n\r\n                return parsed.href;\r\n            } catch (e) {\r\n                if (e.message.includes(\"not allowed\")) {\r\n                    throw e;\r\n                }\r\n                throw new Error(`Invalid URL \"${url}\": ${e.message}`);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Valide des coordonn√©es g√©ographiques\r\n         * @param {number} lat - Latitude\r\n         * @param {number} lng - Longitude\r\n         * @returns {[number, number]} Coordonn√©es valid√©es [lat, lng]\r\n         * @throws {TypeError} Si les coordonn√©es ne sont pas des nombres\r\n         * @throws {RangeError} Si les coordonn√©es sont hors limites\r\n         * @example\r\n         * Security.validateCoordinates(45.5, -73.6)\r\n         * // Returns: [45.5, -73.6]\r\n         *\r\n         * Security.validateCoordinates(999, 0)\r\n         * // Throws: RangeError\r\n         */\r\n        validateCoordinates(lat, lng) {\r\n            if (typeof lat !== \"number\" || typeof lng !== \"number\") {\r\n                throw new TypeError(\r\n                    `Coordinates must be numbers, got lat=${typeof lat}, lng=${typeof lng}`\r\n                );\r\n            }\r\n\r\n            if (!Number.isFinite(lat) || !Number.isFinite(lng)) {\r\n                throw new RangeError(\"Coordinates must be finite numbers (not NaN or Infinity)\");\r\n            }\r\n\r\n            if (lat < -90 || lat > 90) {\r\n                throw new RangeError(`Latitude must be between -90 and 90, got ${lat}`);\r\n            }\r\n\r\n            if (lng < -180 || lng > 180) {\r\n                throw new RangeError(`Longitude must be between -180 and 180, got ${lng}`);\r\n            }\r\n\r\n            return [lat, lng];\r\n        },\r\n\r\n        /**\r\n         * Sanitize un objet de propri√©t√©s POI\r\n         * √âchappe les champs texte et valide les URLs\r\n         * @param {Object} props - Propri√©t√©s √† sanitizer\r\n         * @returns {Object} Propri√©t√©s sanitiz√©es\r\n         * @example\r\n         * Security.sanitizePoiProperties({\r\n         *   label: '<script>alert(1)</script>',\r\n         *   url: 'https://example.com'\r\n         * })\r\n         * // Returns: { label: '&lt;script&gt;...', url: 'https://example.com' }\r\n         */\r\n        sanitizePoiProperties(props) {\r\n            if (!props || typeof props !== \"object\") {\r\n                return {};\r\n            }\r\n\r\n            const sanitized = {};\r\n\r\n            // Champs texte √† √©chapper\r\n            const textFields = [\r\n                \"label\",\r\n                \"name\",\r\n                \"title\",\r\n                \"description\",\r\n                \"desc\",\r\n                \"address\",\r\n                \"phone\",\r\n                \"email\",\r\n                \"category\",\r\n                \"type\",\r\n            ];\r\n\r\n            // Champs URL √† valider\r\n            const urlFields = [\"url\", \"website\", \"image\", \"photo\", \"icon\"];\r\n\r\n            for (const [key, value] of Object.entries(props)) {\r\n                // Ignorer les fonctions et symboles\r\n                if (typeof value === \"function\" || typeof value === \"symbol\") {\r\n                    continue;\r\n                }\r\n\r\n                // Null/undefined = cha√Æne vide\r\n                if (value === null || value === undefined) {\r\n                    sanitized[key] = \"\";\r\n                    continue;\r\n                }\r\n\r\n                // √âchapper les champs texte\r\n                if (textFields.includes(key) && typeof value === \"string\") {\r\n                    sanitized[key] = this.escapeHtml(value);\r\n                }\r\n                // Valider les URLs\r\n                else if (urlFields.includes(key) && typeof value === \"string\") {\r\n                    try {\r\n                        sanitized[key] = this.validateUrl(value);\r\n                    } catch (e) {\r\n                        Log.warn(`[Security] Invalid URL for ${key}: ${e.message}`);\r\n                        sanitized[key] = \"\";\r\n                    }\r\n                }\r\n                // Tableaux : sanitizer r√©cursivement\r\n                else if (Array.isArray(value)) {\r\n                    sanitized[key] = value.map((item) => {\r\n                        if (typeof item === \"object\" && item !== null) {\r\n                            return this.sanitizePoiProperties(item);\r\n                        }\r\n                        if (typeof item === \"string\") {\r\n                            return this.escapeHtml(item);\r\n                        }\r\n                        return item;\r\n                    });\r\n                }\r\n                // Objets : sanitizer r√©cursivement\r\n                else if (typeof value === \"object\" && value !== null) {\r\n                    sanitized[key] = this.sanitizePoiProperties(value);\r\n                }\r\n                // Autres types : conserver tel quel\r\n                else {\r\n                    sanitized[key] = value;\r\n                }\r\n            }\r\n\r\n            return sanitized;\r\n        },\r\n\r\n        /**\r\n         * V√©rifie si une cha√Æne contient du HTML potentiellement dangereux\r\n         * @param {string} str - Cha√Æne √† v√©rifier\r\n         * @returns {boolean} True si contient du HTML dangereux\r\n         * @example\r\n         * Security.containsDangerousHtml('<script>alert(1)</script>')\r\n         * // Returns: true\r\n         */\r\n        containsDangerousHtml(str) {\r\n            if (typeof str !== \"string\") {\r\n                return false;\r\n            }\r\n\r\n            const dangerousPatterns = [\r\n                /<script/i,\r\n                /javascript:/i,\r\n                /on\\w+\\s*=/i, // onclick=, onerror=, etc.\r\n                /<iframe/i,\r\n                /<object/i,\r\n                /<embed/i,\r\n                /<applet/i,\r\n                /<meta/i,\r\n                /<link/i,\r\n                /vbscript:/i,\r\n                /data:text\\/html/i,\r\n            ];\r\n\r\n            return dangerousPatterns.some((pattern) => pattern.test(str));\r\n        },\r\n\r\n        /**\r\n         * Nettoie une cha√Æne de tout HTML (garde uniquement le texte)\r\n         * @param {string} html - HTML √† nettoyer\r\n         * @returns {string} Texte uniquement\r\n         * @example\r\n         * Security.stripHtml('<p>Hello <b>World</b></p>')\r\n         * // Returns: 'Hello World'\r\n         */\r\n        stripHtml(html) {\r\n            if (typeof html !== \"string\") {\r\n                return \"\";\r\n            }\r\n\r\n            // SAFE: Utilisation de DOMParser au lieu de innerHTML pour √©viter l'ex√©cution de scripts\r\n            const parser = new DOMParser();\r\n            const doc = parser.parseFromString(html, 'text/html');\r\n            return doc.body.textContent || doc.body.innerText || \"\";\r\n        },\r\n\r\n        /**\r\n         * Cr√©e un √©l√©ment DOM de mani√®re s√©curis√©e en √©chappant automatiquement le contenu\r\n         * @param {string} tagName - Nom de la balise HTML\r\n         * @param {Object} options - Options de configuration\r\n         * @param {string} [options.className] - Classes CSS\r\n         * @param {string} [options.id] - ID de l'√©l√©ment\r\n         * @param {string} [options.textContent] - Contenu texte (√©chapp√© automatiquement)\r\n         * @param {Object} [options.attributes] - Attributs HTML\r\n         * @param {Array<Element>} [options.children] - √âl√©ments enfants\r\n         * @returns {Element} √âl√©ment DOM cr√©√©\r\n         * @example\r\n         * Security.createSafeElement('div', {\r\n         *     className: 'my-class',\r\n         *     textContent: '<script>alert(1)</script>', // Automatiquement √©chapp√©\r\n         *     children: [otherElement]\r\n         * })\r\n         */\r\n        createSafeElement(tagName, options = {}) {\r\n            const element = document.createElement(tagName);\r\n\r\n            if (options.className) {\r\n                element.className = options.className;\r\n            }\r\n\r\n            if (options.id) {\r\n                element.id = options.id;\r\n            }\r\n\r\n            if (options.textContent) {\r\n                // SAFE: textContent √©chappe automatiquement le HTML\r\n                element.textContent = options.textContent;\r\n            }\r\n\r\n            if (options.attributes) {\r\n                Object.keys(options.attributes).forEach(key => {\r\n                    element.setAttribute(key, this.escapeAttribute(options.attributes[key]));\r\n                });\r\n            }\r\n\r\n            if (options.children && Array.isArray(options.children)) {\r\n                options.children.forEach(child => {\r\n                    if (child instanceof Element) {\r\n                        element.appendChild(child);\r\n                    }\r\n                });\r\n            }\r\n\r\n            return element;\r\n        },\r\n\r\n        /**\r\n         * Parse et valide un contenu SVG de mani√®re s√©curis√©e\r\n         * Utilise DOMParser au lieu de innerHTML pour √©viter l'ex√©cution de scripts\r\n         * @param {string} svgContent - Contenu SVG brut\r\n         * @returns {SVGElement|null} √âl√©ment SVG valid√© ou null si invalide\r\n         * @example\r\n         * Security.sanitizeSvgContent('<svg>...</svg>')\r\n         * // Returns: SVGElement or null\r\n         */\r\n        sanitizeSvgContent(svgContent) {\r\n            if (!svgContent || typeof svgContent !== \"string\") {\r\n                return null;\r\n            }\r\n\r\n            try {\r\n                const parser = new DOMParser();\r\n                const doc = parser.parseFromString(svgContent, \"image/svg+xml\");\r\n\r\n                // V√©rifier les erreurs de parsing\r\n                const parserError = doc.querySelector(\"parsererror\");\r\n                if (parserError) {\r\n                    Log.warn(\"[Security] Erreur parsing SVG:\", parserError.textContent);\r\n                    return null;\r\n                }\r\n\r\n                const svgEl = doc.documentElement;\r\n                if (!svgEl || svgEl.tagName.toLowerCase() !== \"svg\") {\r\n                    Log.warn(\"[Security] Contenu SVG invalide: √©l√©ment racine n'est pas SVG\");\r\n                    return null;\r\n                }\r\n\r\n                // Supprimer les √©l√©ments potentiellement dangereux\r\n                const dangerousElements = [\"script\", \"foreignObject\", \"use[href^='data:']\"];\r\n                dangerousElements.forEach(selector => {\r\n                    const elements = svgEl.querySelectorAll(selector);\r\n                    elements.forEach(el => el.remove());\r\n                });\r\n\r\n                // Supprimer les attributs event handlers (onclick, onerror, etc.)\r\n                const allElements = svgEl.querySelectorAll(\"*\");\r\n                allElements.forEach(el => {\r\n                    Array.from(el.attributes).forEach(attr => {\r\n                        if (attr.name.toLowerCase().startsWith(\"on\")) {\r\n                            el.removeAttribute(attr.name);\r\n                        }\r\n                        // Supprimer les href javascript:\r\n                        if ((attr.name === \"href\" || attr.name === \"xlink:href\") &&\r\n                            attr.value.toLowerCase().trim().startsWith(\"javascript:\")) {\r\n                            el.removeAttribute(attr.name);\r\n                        }\r\n                    });\r\n                });\r\n\r\n                return svgEl;\r\n            } catch (e) {\r\n                Log.warn(\"[Security] Erreur sanitization SVG:\", e.message);\r\n                return null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Valide qu'une valeur est un nombre dans une plage donn√©e\r\n         * @param {*} value - Valeur √† valider\r\n         * @param {number} [min=-Infinity] - Valeur minimale\r\n         * @param {number} [max=Infinity] - Valeur maximale\r\n         * @returns {number|null} Nombre valid√© ou null si invalide\r\n         * @example\r\n         * Security.validateNumber(\"123\", 0, 1000)\r\n         * // Returns: 123\r\n         *\r\n         * Security.validateNumber(\"<script>\", 0, 100)\r\n         * // Returns: null\r\n         */\r\n        validateNumber(value, min = -Infinity, max = Infinity) {\r\n            // Convertir en nombre\r\n            const num = Number(value);\r\n\r\n            // V√©rifier que c'est un nombre fini\r\n            if (!Number.isFinite(num)) {\r\n                return null;\r\n            }\r\n\r\n            // V√©rifier les bornes\r\n            if (num < min || num > max) {\r\n                return null;\r\n            }\r\n\r\n            return num;\r\n        },\r\n\r\n        /**\r\n         * Parse du HTML de mani√®re s√©curis√©e avec whitelist de balises\r\n         * @param {string} html - HTML √† parser\r\n         * @param {string[]} [allowedTags=['p','br','strong','em','span','a','ul','ol','li']] - Balises autoris√©es\r\n         * @returns {DocumentFragment} Fragment DOM nettoy√©\r\n         * @example\r\n         * Security.parseHtmlSafely('<p>Hello</p><script>alert(1)</script>')\r\n         * // Returns: DocumentFragment with only <p>Hello</p>\r\n         */\r\n        parseHtmlSafely(html, allowedTags = ['p', 'br', 'strong', 'em', 'span', 'a', 'ul', 'ol', 'li', 'b', 'i']) {\r\n            const fragment = document.createDocumentFragment();\r\n\r\n            if (!html || typeof html !== \"string\") {\r\n                return fragment;\r\n            }\r\n\r\n            try {\r\n                const parser = new DOMParser();\r\n                const doc = parser.parseFromString(html, \"text/html\");\r\n\r\n                // Fonction r√©cursive pour nettoyer les n≈ìuds\r\n                const cleanNode = (node) => {\r\n                    if (node.nodeType === Node.TEXT_NODE) {\r\n                        return document.createTextNode(node.textContent);\r\n                    }\r\n\r\n                    if (node.nodeType !== Node.ELEMENT_NODE) {\r\n                        return null;\r\n                    }\r\n\r\n                    const tagName = node.tagName.toLowerCase();\r\n\r\n                    // Si la balise n'est pas autoris√©e, retourner seulement le contenu texte\r\n                    if (!allowedTags.includes(tagName)) {\r\n                        const textNode = document.createTextNode(node.textContent);\r\n                        return textNode;\r\n                    }\r\n\r\n                    // Cr√©er un nouvel √©l√©ment propre\r\n                    const cleanElement = document.createElement(tagName);\r\n\r\n                    // Pour les liens, conserver href mais valider\r\n                    if (tagName === 'a' && node.hasAttribute('href')) {\r\n                        try {\r\n                            const href = this.validateUrl(node.getAttribute('href'));\r\n                            cleanElement.setAttribute('href', href);\r\n                            cleanElement.setAttribute('rel', 'noopener noreferrer');\r\n                            cleanElement.setAttribute('target', '_blank');\r\n                        } catch (e) {\r\n                            // URL invalide, ignorer le lien\r\n                        }\r\n                    }\r\n\r\n                    // Nettoyer les enfants r√©cursivement\r\n                    node.childNodes.forEach(child => {\r\n                        const cleanChild = cleanNode(child);\r\n                        if (cleanChild) {\r\n                            cleanElement.appendChild(cleanChild);\r\n                        }\r\n                    });\r\n\r\n                    return cleanElement;\r\n                };\r\n\r\n                // Nettoyer le body du document pars√©\r\n                doc.body.childNodes.forEach(child => {\r\n                    const cleanChild = cleanNode(child);\r\n                    if (cleanChild) {\r\n                        fragment.appendChild(cleanChild);\r\n                    }\r\n                });\r\n\r\n            } catch (e) {\r\n                Log.warn(\"[Security] Erreur parsing HTML s√©curis√©:\", e.message);\r\n            }\r\n\r\n            return fragment;\r\n        },\r\n    };\r\n\r\n    // Export du module\r\n    GeoLeaf.Security = Security;\r\n\r\n    // Log du chargement\r\n    Log.info(\"[GeoLeaf.Security] Module de s√©curit√© charg√©\");\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    /**\r\n     * Constantes globales GeoLeaf\r\n     * Centralise toutes les valeurs num√©riques utilis√©es dans le projet\r\n     */\r\n    GeoLeaf.CONSTANTS = {\r\n        // Carte ‚Äî vue neutre, le fitBounds positionne apr√®s chargement des couches\r\n        DEFAULT_ZOOM: 3,\r\n        DEFAULT_CENTER: [0, 0],\r\n        MAX_ZOOM_ON_FIT: 15,\r\n\r\n        // POI\r\n        POI_MARKER_SIZE: 12,\r\n        POI_MAX_ZOOM: 18,\r\n        POI_SWIPE_THRESHOLD: 50,\r\n        POI_LIGHTBOX_TRANSITION_MS: 300,\r\n        POI_SIDEPANEL_DEFAULT_WIDTH: 420,\r\n\r\n        // Route\r\n        ROUTE_MAX_ZOOM_ON_FIT: 14,\r\n        ROUTE_WAYPOINT_RADIUS: 5,\r\n\r\n        // GeoJSON\r\n        GEOJSON_MAX_ZOOM_ON_FIT: 15,\r\n        GEOJSON_POINT_RADIUS: 6,\r\n\r\n        // UI\r\n        FULLSCREEN_TRANSITION_MS: 10\r\n    };\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    /**\r\n     * Module GeoLeaf.Utils\r\n     * Fonctions utilitaires r√©utilisables pour s√©curiser et manipuler les donn√©es\r\n     */\r\n    const Utils = {\r\n        /**\r\n         * √âchappe les caract√®res HTML dangereux pour pr√©venir les attaques XSS\r\n         * DEPRECATED: Utilisez GeoLeaf.Security.escapeHtml() √† la place\r\n         * @param {string} text - Texte √† √©chapper\r\n         * @returns {string} - Texte s√©curis√©\r\n         */\r\n        escapeHtml(text) {\r\n            // Redirection vers la fonction canonique dans Security\r\n            if (GeoLeaf.Security && typeof GeoLeaf.Security.escapeHtml === 'function') {\r\n                return GeoLeaf.Security.escapeHtml(text);\r\n            }\r\n\r\n            // Fallback si Security n'est pas charg√©\r\n            if (text == null || text === '') return '';\r\n            const map = {\r\n                '&': '&amp;',\r\n                '<': '&lt;',\r\n                '>': '&gt;',\r\n                '\"': '&quot;',\r\n                \"'\": '&#039;',\r\n                '/': '&#x2F;'\r\n            };\r\n            return String(text).replace(/[&<>\"'/]/g, function(s) {\r\n                return map[s];\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Valide et nettoie une URL\r\n         * @param {string} url - URL √† valider\r\n         * @param {Array<string>} allowedProtocols - Protocoles autoris√©s (d√©faut: http, https, mailto, tel)\r\n         * @returns {string|null} - URL valid√©e ou null si invalide\r\n         */\r\n        validateUrl(url, allowedProtocols = ['http:', 'https:', 'mailto:', 'tel:']) {\r\n            if (!url || typeof url !== 'string') return null;\r\n\r\n            try {\r\n                const parsed = new URL(url, window.location.origin);\r\n\r\n                if (allowedProtocols.includes(parsed.protocol)) {\r\n                    return parsed.href;\r\n                }\r\n\r\n                return null;\r\n            } catch (e) {\r\n                // URL relative ou invalide\r\n                return null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Merge profond d'objets\r\n         * @param {Object} target - Objet cible\r\n         * @param {Object} source - Objet source\r\n         * @returns {Object} - Objet fusionn√©\r\n         */\r\n        deepMerge(target, source) {\r\n            if (!source || typeof source !== 'object') return target;\r\n            if (!target || typeof target !== 'object') return source;\r\n\r\n            const output = Object.assign({}, target);\r\n\r\n            Object.keys(source).forEach(key => {\r\n                if (source[key] && typeof source[key] === 'object' && !Array.isArray(source[key])) {\r\n                    output[key] = this.deepMerge(target[key] || {}, source[key]);\r\n                } else {\r\n                    output[key] = source[key];\r\n                }\r\n            });\r\n\r\n            return output;\r\n        },\r\n\r\n        /**\r\n         * R√©sout la carte Leaflet depuis les options ou GeoLeaf.Core\r\n         * Utilitaire partag√© pour √©viter duplication dans POI/GeoJSON/Route\r\n         * @param {L.Map|null} explicitMap - Carte pass√©e explicitement\r\n         * @returns {L.Map|null} - Instance de la carte ou null\r\n         */\r\n        ensureMap(explicitMap) {\r\n            if (explicitMap) return explicitMap;\r\n\r\n            // Tentative de r√©cup√©ration via GeoLeaf.Core.getMap()\r\n            if (typeof GeoLeaf !== 'undefined' &&\r\n                GeoLeaf.Core &&\r\n                typeof GeoLeaf.Core.getMap === 'function') {\r\n                return GeoLeaf.Core.getMap();\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Merge shallow d'options (pour les modules POI/GeoJSON/Route)\r\n         * @param {Object} defaults - Options par d√©faut\r\n         * @param {Object} override - Options fournies par l'utilisateur\r\n         * @returns {Object} - Options fusionn√©es\r\n         */\r\n        mergeOptions(defaults, override) {\r\n            if (!override || typeof override !== 'object') return defaults;\r\n            return Object.assign({}, defaults, override);\r\n        },\r\n\r\n        /**\r\n         * √âmet un √©v√©nement personnalis√© sur la carte Leaflet\r\n         * @param {L.Map} map - Instance de la carte\r\n         * @param {string} eventName - Nom de l'√©v√©nement (ex: 'geoleaf:poi:loaded')\r\n         * @param {Object} payload - Donn√©es √† transmettre\r\n         */\r\n        fireMapEvent(map, eventName, payload) {\r\n            if (!map || typeof map.fire !== 'function') return;\r\n\r\n            try {\r\n                map.fire(eventName, payload || {});\r\n            } catch (err) {\r\n                if (Log) {\r\n                    Log.warn('[GeoLeaf.Utils] Erreur lors de l\\'√©mission de l\\'√©v√©nement:', eventName, err);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Debounce - Limite la fr√©quence d'ex√©cution d'une fonction\r\n         * Utile pour optimiser les event listeners (resize, scroll, input)\r\n         * @param {Function} func - Fonction √† debouncer\r\n         * @param {number} wait - D√©lai en ms (d√©faut: 250ms)\r\n         * @returns {Function} - Fonction debounc√©e\r\n         *\r\n         * @example\r\n         * const debouncedResize = GeoLeaf.Utils.debounce(() => {\r\n         *     map.invalidateSize();\r\n         * }, 300);\r\n         * window.addEventListener('resize', debouncedResize);\r\n         */\r\n        debounce(func, wait = 250) {\r\n            let timeout;\r\n\r\n            return function executedFunction(...args) {\r\n                const later = () => {\r\n                    clearTimeout(timeout);\r\n                    func(...args);\r\n                };\r\n\r\n                clearTimeout(timeout);\r\n                timeout = setTimeout(later, wait);\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Throttle - Limite l'ex√©cution d'une fonction √† une fois par intervalle\r\n         * Diff√©rence avec debounce: garantit une ex√©cution r√©guli√®re\r\n         * @param {Function} func - Fonction √† throttler\r\n         * @param {number} limit - Intervalle minimum en ms (d√©faut: 100ms)\r\n         * @returns {Function} - Fonction throttl√©e\r\n         *\r\n         * @example\r\n         * const throttledScroll = GeoLeaf.Utils.throttle(() => {\r\n         *     console.log('Scroll event');\r\n         * }, 100);\r\n         * window.addEventListener('scroll', throttledScroll);\r\n         */\r\n        throttle(func, limit = 100) {\r\n            let inThrottle;\r\n\r\n            return function(...args) {\r\n                if (!inThrottle) {\r\n                    func.apply(this, args);\r\n                    inThrottle = true;\r\n                    setTimeout(() => inThrottle = false, limit);\r\n                }\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Calcule la distance entre deux points g√©ographiques (formule de Haversine)\r\n         * @param {number} lat1 - Latitude du point 1 (degr√©s)\r\n         * @param {number} lng1 - Longitude du point 1 (degr√©s)\r\n         * @param {number} lat2 - Latitude du point 2 (degr√©s)\r\n         * @param {number} lng2 - Longitude du point 2 (degr√©s)\r\n         * @returns {number} - Distance en kilom√®tres\r\n         *\r\n         * @example\r\n         * const distance = GeoLeaf.Utils.getDistance(48.8566, 2.3522, 51.5074, -0.1278); // Paris -> London\r\n         * console.log(`Distance: ${distance.toFixed(2)} km`); // Distance: 343.56 km\r\n         */\r\n        getDistance(lat1, lng1, lat2, lng2) {\r\n            const R = 6371; // Rayon de la Terre en kilom√®tres\r\n            const dLat = (lat2 - lat1) * (Math.PI / 180);\r\n            const dLng = (lng2 - lng1) * (Math.PI / 180);\r\n            const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n                      Math.cos(lat1 * (Math.PI / 180)) * Math.cos(lat2 * (Math.PI / 180)) *\r\n                      Math.sin(dLng / 2) * Math.sin(dLng / 2);\r\n            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n            return R * c;\r\n        },\r\n\r\n        /**\r\n         * R√©sout la valeur d'un champ depuis plusieurs chemins possibles dans un objet\r\n         * √âlimine les longues cha√Ænes conditionnelles de r√©solution de champs\r\n         * @param {Object} obj - Objet source\r\n         * @param {...string} paths - Chemins √† tester dans l'ordre (ex: 'label', 'attributes.label', 'properties.label')\r\n         * @returns {*} - Premi√®re valeur trouv√©e (string, object, array, etc.) ou cha√Æne vide si rien trouv√©\r\n         *\r\n         * @example\r\n         * const title = GeoLeaf.Utils.resolveField(poi,\r\n         *     'label', 'attributes.label', 'properties.label',\r\n         *     'name', 'attributes.name', 'properties.name'\r\n         * );\r\n         */\r\n        resolveField(obj, ...paths) {\r\n            if (!obj || typeof obj !== 'object') return '';\r\n\r\n            for (const path of paths) {\r\n                const keys = path.split('.');\r\n                let value = obj;\r\n\r\n                for (const key of keys) {\r\n                    if (value && typeof value === 'object' && key in value) {\r\n                        value = value[key];\r\n                    } else {\r\n                        value = null;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // Return any truthy value (string, object, array, number, etc.)\r\n                if (value != null) {\r\n                    // For strings, ensure they're not empty\r\n                    if (typeof value === 'string') {\r\n                        if (value.trim()) return value;\r\n                    } else {\r\n                        // For non-strings (objects, arrays, numbers, booleans), return as-is\r\n                        return value;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return '';\r\n        }\r\n    };\r\n\r\n    GeoLeaf.Utils = Utils;\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/**\r\n * GeoLeaf - DOM Security Module\r\n *\r\n * @description Wrappers s√©curis√©s pour manipuler le DOM sans vuln√©rabilit√©s XSS\r\n * @module GeoLeaf.DOMSecurity\r\n * @version 3.0.1\r\n * @date 2026-01-17\r\n *\r\n * USAGE:\r\n * - Remplace innerHTML par des alternatives s√©curis√©es\r\n * - Utilise textContent pour donn√©es non-HTML\r\n * - Sanitize via GeoLeaf.Security pour HTML n√©cessaire\r\n * - Cr√©e SVG de mani√®re s√©curis√©e\r\n */\r\n\r\n(function(global) {\r\n    'use strict';\r\n\r\n    const DOMSecurity = (function() {\r\n\r\n        const Log = global.GeoLeaf?.Log;\r\n        const Security = global.GeoLeaf?.Security;\r\n\r\n        /**\r\n         * D√©finit le contenu texte d'un √©l√©ment de mani√®re s√©curis√©e\r\n         * Remplace: element.innerHTML = text\r\n         *\r\n         * @param {HTMLElement} element - √âl√©ment DOM cible\r\n         * @param {string|number} text - Contenu texte (sera converti en string)\r\n         * @returns {void}\r\n         *\r\n         * @example\r\n         * // ‚ùå AVANT (vuln√©rable XSS)\r\n         * div.innerHTML = userData;\r\n         *\r\n         * // ‚úÖ APR√àS (s√©curis√©)\r\n         * DOMSecurity.setTextContent(div, userData);\r\n         */\r\n        function setTextContent(element, text) {\r\n            if (!element || !element.nodeType) {\r\n                if (Log) Log.warn('[DOMSecurity] Invalid element in setTextContent');\r\n                return;\r\n            }\r\n            element.textContent = text != null ? String(text) : '';\r\n        }\r\n\r\n        /**\r\n         * D√©finit du contenu HTML avec sanitization\r\n         * Remplace: element.innerHTML = html (quand HTML est vraiment n√©cessaire)\r\n         *\r\n         * @param {HTMLElement} element - √âl√©ment DOM cible\r\n         * @param {string} html - Contenu HTML √† ins√©rer\r\n         * @returns {void}\r\n         *\r\n         * @example\r\n         * // Utiliser Security.escapeHTML si disponible\r\n         * DOMSecurity.setSafeHTML(div, '<strong>Important</strong>');\r\n         */\r\n        function setSafeHTML(element, html) {\r\n            if (!element || !element.nodeType) {\r\n                if (Log) Log.warn('[DOMSecurity] Invalid element in setSafeHTML');\r\n                return;\r\n            }\r\n\r\n            // Tenter d'utiliser le sanitizer de GeoLeaf.Security\r\n            if (Security && typeof Security.escapeHtml === 'function') {\r\n                const sanitized = Security.escapeHtml(html);\r\n                element.innerHTML = sanitized;\r\n            } else {\r\n                // Fallback s√©curis√© : textContent au lieu de innerHTML brut\r\n                if (Log) Log.warn('[DOMSecurity] No sanitizer available, falling back to textContent');\r\n                element.textContent = html || '';\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Vide un √©l√©ment de mani√®re s√©curis√©e\r\n         * Remplace: element.innerHTML = \"\"\r\n         *\r\n         * @param {HTMLElement} element - √âl√©ment DOM √† vider\r\n         * @returns {void}\r\n         *\r\n         * @example\r\n         * DOMSecurity.clearElement(container);\r\n         */\r\n        function clearElement(element) {\r\n            if (!element || !element.nodeType) {\r\n                if (Log) Log.warn('[DOMSecurity] Invalid element in clearElement');\r\n                return;\r\n            }\r\n\r\n            // M√©thode la plus performante et s√ªre\r\n            while (element.firstChild) {\r\n                element.removeChild(element.firstChild);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Vide rapidement en utilisant textContent (alternative)\r\n         * Plus rapide que removeChild mais moins propre\r\n         *\r\n         * @param {HTMLElement} element - √âl√©ment DOM √† vider\r\n         * @returns {void}\r\n         */\r\n        function clearElementFast(element) {\r\n            if (!element || !element.nodeType) {\r\n                if (Log) Log.warn('[DOMSecurity] Invalid element in clearElementFast');\r\n                return;\r\n            }\r\n            element.textContent = '';\r\n        }\r\n\r\n        /**\r\n         * Cr√©e un √©l√©ment SVG de mani√®re s√©curis√©e\r\n         *\r\n         * @param {number} width - Largeur SVG\r\n         * @param {number} height - Hauteur SVG\r\n         * @param {string} pathData - Donn√©es du path SVG\r\n         * @param {Object} [options={}] - Options SVG\r\n         * @param {string} [options.viewBox] - ViewBox SVG\r\n         * @param {string} [options.fill='none'] - Couleur de remplissage\r\n         * @param {string} [options.stroke='currentColor'] - Couleur de trait\r\n         * @param {string|number} [options.strokeWidth='2'] - √âpaisseur trait\r\n         * @param {string} [options.strokeLinecap='round'] - Style bout de trait\r\n         * @param {string} [options.strokeLinejoin='round'] - Style jonction\r\n         * @returns {SVGElement} √âl√©ment SVG cr√©√©\r\n         *\r\n         * @example\r\n         * const icon = DOMSecurity.createSVGIcon(18, 18, 'M6 9l6 6 6-6');\r\n         * button.appendChild(icon);\r\n         */\r\n        function createSVGIcon(width, height, pathData, options = {}) {\r\n            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n            svg.setAttribute('width', width);\r\n            svg.setAttribute('height', height);\r\n            svg.setAttribute('viewBox', options.viewBox || `0 0 24 24`);\r\n            svg.setAttribute('fill', options.fill || 'none');\r\n            svg.setAttribute('stroke', options.stroke || 'currentColor');\r\n            svg.setAttribute('stroke-width', String(options.strokeWidth || '2'));\r\n            svg.setAttribute('stroke-linecap', options.strokeLinecap || 'round');\r\n            svg.setAttribute('stroke-linejoin', options.strokeLinejoin || 'round');\r\n\r\n            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n            path.setAttribute('d', pathData);\r\n            svg.appendChild(path);\r\n\r\n            return svg;\r\n        }\r\n\r\n        /**\r\n         * Biblioth√®que d'ic√¥nes SVG communes\r\n         * @constant\r\n         */\r\n        const SVG_ICONS = {\r\n            // Chevrons\r\n            'chevron-down': 'M6 9l6 6 6-6',\r\n            'chevron-up': 'M18 15l-6-6-6 6',\r\n            'chevron-left': 'M15 18l-6-6 6-6',\r\n            'chevron-right': 'M9 18l6-6-6-6',\r\n\r\n            // Arrows\r\n            'arrow-left': '‚Äπ',\r\n            'arrow-right': '‚Ä∫',\r\n\r\n            // UI Controls\r\n            'close': '‚úï',\r\n            'check': '‚úì',\r\n            'star': '‚òÖ',\r\n            'star-empty': '‚òÜ',\r\n\r\n            // Triangles (collapse/expand)\r\n            'triangle-right': '‚ñ∂',\r\n            'triangle-down': '‚ñº',\r\n\r\n            // Home/Layers\r\n            'home': 'M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z',\r\n            'layers': 'M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5',\r\n\r\n            // Location\r\n            'marker': 'M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z',\r\n            'map-pin': 'M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z',\r\n\r\n            // Actions\r\n            'download': 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3',\r\n            'upload': 'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12',\r\n            'trash': 'M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2',\r\n            'copy': 'M8 4v12a2 2 0 002 2h8a2 2 0 002-2V7.242a2 2 0 00-.602-1.43L16.083 2.57A2 2 0 0014.685 2H10a2 2 0 00-2 2z',\r\n\r\n            // Status\r\n            'sync': 'M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15'\r\n        };\r\n\r\n        /**\r\n         * Obtient une ic√¥ne SVG pr√©d√©finie\r\n         *\r\n         * @param {string} name - Nom de l'ic√¥ne\r\n         * @param {number} [size=18] - Taille de l'ic√¥ne\r\n         * @param {Object} [options={}] - Options SVG suppl√©mentaires\r\n         * @returns {SVGElement|null} √âl√©ment SVG ou null si non trouv√©\r\n         *\r\n         * @example\r\n         * const homeIcon = DOMSecurity.getIcon('home', 24);\r\n         * button.appendChild(homeIcon);\r\n         */\r\n        function getIcon(name, size = 18, options = {}) {\r\n            const pathData = SVG_ICONS[name];\r\n            if (!pathData) {\r\n                if (Log) Log.warn(`[DOMSecurity] Icon '${name}' not found`);\r\n                return null;\r\n            }\r\n            return createSVGIcon(size, size, pathData, options);\r\n        }\r\n\r\n        /**\r\n         * Cr√©e un √©l√©ment avec attributs de mani√®re s√©curis√©e\r\n         * Alternative s√©curis√©e √† innerHTML pour structures simples\r\n         *\r\n         * @param {string} tagName - Nom de la balise\r\n         * @param {Object} [attributes={}] - Attributs de l'√©l√©ment\r\n         * @param {string|HTMLElement|Array} [children] - Enfants (texte ou √©l√©ments)\r\n         * @returns {HTMLElement} √âl√©ment cr√©√©\r\n         *\r\n         * @example\r\n         * const div = DOMSecurity.createElement('div',\r\n         *   { class: 'container', id: 'main' },\r\n         *   ['Hello ', DOMSecurity.createElement('strong', {}, 'World')]\r\n         * );\r\n         */\r\n        function createElement(tagName, attributes = {}, children = null) {\r\n            const element = document.createElement(tagName);\r\n\r\n            // D√©finir les attributs\r\n            for (const [key, value] of Object.entries(attributes)) {\r\n                if (key === 'class' || key === 'className') {\r\n                    element.className = value;\r\n                } else if (key === 'style' && typeof value === 'object') {\r\n                    Object.assign(element.style, value);\r\n                } else if (key.startsWith('data-')) {\r\n                    element.setAttribute(key, value);\r\n                } else {\r\n                    element[key] = value;\r\n                }\r\n            }\r\n\r\n            // Ajouter les enfants\r\n            if (children) {\r\n                if (Array.isArray(children)) {\r\n                    children.forEach(child => {\r\n                        if (typeof child === 'string') {\r\n                            element.appendChild(document.createTextNode(child));\r\n                        } else if (child && child.nodeType) {\r\n                            element.appendChild(child);\r\n                        }\r\n                    });\r\n                } else if (typeof children === 'string') {\r\n                    element.textContent = children;\r\n                } else if (children.nodeType) {\r\n                    element.appendChild(children);\r\n                }\r\n            }\r\n\r\n            return element;\r\n        }\r\n\r\n        // API publique\r\n        return {\r\n            setTextContent,\r\n            setSafeHTML,\r\n            clearElement,\r\n            clearElementFast,\r\n            createSVGIcon,\r\n            getIcon,\r\n            createElement,\r\n            SVG_ICONS // Exposer la liste pour r√©f√©rence\r\n        };\r\n    })();\r\n\r\n    // Export vers GeoLeaf namespace\r\n    if (typeof global.GeoLeaf !== 'undefined') {\r\n        global.GeoLeaf.DOMSecurity = DOMSecurity;\r\n    } else {\r\n        // Cr√©er namespace si n√©cessaire\r\n        global.GeoLeaf = global.GeoLeaf || {};\r\n        global.GeoLeaf.DOMSecurity = DOMSecurity;\r\n    }\r\n\r\n    // Support CommonJS/Node.js\r\n    if (typeof module !== 'undefined' && module.exports) {\r\n        module.exports = DOMSecurity;\r\n    }\r\n\r\n})(typeof window !== 'undefined' ? window : global);\r\n","/**\r\n * @module GeoLeaf.Utils.DomHelpers\r\n * Helpers pour cr√©ation et manipulation d'√©l√©ments DOM\r\n * Simplifie et standardise la cr√©ation d'√©l√©ments DOM dans tout le projet\r\n *\r\n * @version 1.0.0\r\n * @requires GeoLeaf.Security (pour sanitization)\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    GeoLeaf.Utils = GeoLeaf.Utils || {};\r\n\r\n    /**\r\n     * Cr√©e un √©l√©ment DOM avec propri√©t√©s et enfants de mani√®re d√©clarative\r\n     * Cette fonction simplifie la cr√©ation d'√©l√©ments DOM complexes\r\n     *\r\n     * @param {string} tag - Nom du tag HTML (ex: 'div', 'span', 'button')\r\n     * @param {Object} [props={}] - Propri√©t√©s de l'√©l√©ment\r\n     * @param {string} [props.className] - Classes CSS\r\n     * @param {string} [props.id] - ID de l'√©l√©ment\r\n     * @param {Object} [props.style] - Styles inline (objet)\r\n     * @param {Object} [props.dataset] - Data attributes (objet)\r\n     * @param {Object} [props.attributes] - Attributs HTML (objet)\r\n     * @param {Function} [props.on*] - Event handlers (ex: onClick, onMouseOver)\r\n     * @param {string} [props._eventContext] - Context for EventListenerManager tracking\r\n     * @param {Array} [props._cleanupArray] - Array to store cleanup functions\r\n     * @param {...(Node|string|number)} children - Enfants de l'√©l√©ment\r\n     * @returns {HTMLElement} L'√©l√©ment cr√©√©\r\n     *\r\n     * @example\r\n     * // Simple div avec classe\r\n     * createElement('div', { className: 'card' })\r\n     *\r\n     * @example\r\n     * // Div avec enfants\r\n     * createElement('div', { className: 'card' },\r\n     *     createElement('h2', {}, 'Title'),\r\n     *     createElement('p', {}, 'Content')\r\n     * )\r\n     *\r\n     * @example\r\n     * // Bouton avec event handler (auto-cleanup with EventListenerManager)\r\n     * createElement('button', {\r\n     *     className: 'btn',\r\n     *     onClick: (e) => console.log('Clicked!'),\r\n     *     dataset: { action: 'submit' },\r\n     *     _eventContext: 'MyModule.button'\r\n     * }, 'Click me')\r\n     *\r\n     * @example\r\n     * // With cleanup tracking\r\n     * const cleanups = [];\r\n     * createElement('button', {\r\n     *     onClick: handler,\r\n     *     _cleanupArray: cleanups,\r\n     *     _eventContext: 'MyModule'\r\n     * }, 'Click')\r\n     * // Later: cleanups.forEach(fn => fn())\r\n     */\r\n    function createElement(tag, props = {}, ...children) {\r\n        // Validate tag parameter\r\n        if (typeof tag !== 'string' || !tag.trim()) {\r\n            throw new TypeError('[DomHelpers] createElement: tag must be a non-empty string');\r\n        }\r\n\r\n        const element = document.createElement(tag);\r\n\r\n        // Traiter les propri√©t√©s sp√©ciales en premier\r\n        const {\r\n            className,\r\n            id,\r\n            style,\r\n            dataset,\r\n            attributes,\r\n            textContent,\r\n            innerHTML,\r\n            _eventContext,\r\n            _cleanupArray,\r\n            ...otherProps\r\n        } = props;\r\n\r\n        // Appliquer className\r\n        if (className) {\r\n            element.className = className;\r\n        }\r\n\r\n        // Appliquer ID\r\n        if (id) {\r\n            element.id = id;\r\n        }\r\n\r\n        // Appliquer styles\r\n        if (style && typeof style === 'object') {\r\n            Object.assign(element.style, style);\r\n        }\r\n\r\n        // Appliquer data attributes\r\n        if (dataset && typeof dataset === 'object') {\r\n            for (const [key, value] of Object.entries(dataset)) {\r\n                element.dataset[key] = value;\r\n            }\r\n        }\r\n\r\n        // Appliquer attributes HTML\r\n        if (attributes && typeof attributes === 'object') {\r\n            for (const [key, value] of Object.entries(attributes)) {\r\n                element.setAttribute(key, value);\r\n            }\r\n        }\r\n\r\n        // Appliquer les autres propri√©t√©s (event handlers, etc.)\r\n        const events = GeoLeaf.Utils?.events;\r\n\r\n        for (const [key, value] of Object.entries(otherProps)) {\r\n            // Event handlers (onClick, onMouseOver, etc.)\r\n            if (key.startsWith('on') && typeof value === 'function') {\r\n                const event = key.substring(2).toLowerCase();\r\n\r\n                // Use EventListenerManager for auto-cleanup if available\r\n                if (events) {\r\n                    const cleanup = events.on(\r\n                        element,\r\n                        event,\r\n                        value,\r\n                        false,\r\n                        _eventContext || 'DomHelpers.createElement'\r\n                    );\r\n\r\n                    // Store cleanup function if array provided\r\n                    if (_cleanupArray && Array.isArray(_cleanupArray)) {\r\n                        _cleanupArray.push(cleanup);\r\n                    }\r\n                } else {\r\n                    // Fallback to native addEventListener\r\n                    element.addEventListener(event, value);\r\n                }\r\n            }\r\n            // Propri√©t√©s aria-*\r\n            else if (key.startsWith('aria')) {\r\n                const attrName = 'aria-' + key.substring(4).toLowerCase();\r\n                element.setAttribute(attrName, value);\r\n            }\r\n            // Autres propri√©t√©s directes\r\n            else if (key in element) {\r\n                element[key] = value;\r\n            }\r\n            // Fallback: setAttribute\r\n            else {\r\n                element.setAttribute(key, value);\r\n            }\r\n        }\r\n\r\n        // Appliquer textContent si fourni (√©crase innerHTML et children)\r\n        if (textContent !== undefined) {\r\n            element.textContent = textContent;\r\n            return element; // Ignorer children si textContent est fourni\r\n        }\r\n\r\n        // Appliquer innerHTML si fourni (√©crase children)\r\n        // WARNING: N'utiliser qu'avec du contenu s√©curis√©/sanitiz√©\r\n        if (innerHTML !== undefined) {\r\n            if (GeoLeaf.Log && GeoLeaf.Log.warn) {\r\n                GeoLeaf.Log.warn(\r\n                    '[DomHelpers] createElement avec innerHTML - assurez-vous que le contenu est sanitiz√©',\r\n                    { tag, innerHTML: innerHTML.substring(0, 100) }\r\n                );\r\n            }\r\n\r\n            // Use DOMSecurity if available, otherwise use textContent as safer fallback\r\n            if (GeoLeaf.DOMSecurity && typeof GeoLeaf.DOMSecurity.setSafeHTML === 'function') {\r\n                GeoLeaf.DOMSecurity.setSafeHTML(element, innerHTML);\r\n            } else {\r\n                // Fallback: convert to text for security\r\n                if (GeoLeaf.Log && GeoLeaf.Log.error) {\r\n                    GeoLeaf.Log.error('[DomHelpers] DOMSecurity not available, using textContent fallback');\r\n                }\r\n                element.textContent = innerHTML;\r\n            }\r\n            return element; // Ignorer children si innerHTML est fourni\r\n        }\r\n\r\n        // Ajouter les enfants\r\n        appendChild(element, ...children);\r\n\r\n        return element;\r\n    }\r\n\r\n    /**\r\n     * Ajoute des enfants √† un √©l√©ment parent\r\n     * G√®re automatiquement les strings, numbers, nodes, et tableaux\r\n     *\r\n     * @param {HTMLElement} parent - √âl√©ment parent\r\n     * @param {...(Node|string|number|Array)} children - Enfants √† ajouter\r\n     * @returns {HTMLElement} Le parent (pour cha√Ænage)\r\n     *\r\n     * @example\r\n     * appendChild(div, 'Text', createElement('span', {}, 'More text'))\r\n     *\r\n     * @example\r\n     * // Avec tableau\r\n     * appendChild(ul, items.map(item => createElement('li', {}, item)))\r\n     */\r\n    function appendChild(parent, ...children) {\r\n        for (const child of children) {\r\n            if (child == null || child === false) {\r\n                // Ignorer null, undefined, false (utile pour render conditionnel)\r\n                continue;\r\n            }\r\n\r\n            // Si c'est un tableau, l'aplatir r√©cursivement\r\n            if (Array.isArray(child)) {\r\n                appendChild(parent, ...child);\r\n            }\r\n            // Si c'est une string ou number, cr√©er un TextNode\r\n            else if (typeof child === 'string' || typeof child === 'number') {\r\n                parent.appendChild(document.createTextNode(String(child)));\r\n            }\r\n            // Si c'est un Node, l'ajouter directement\r\n            else if (child instanceof Node) {\r\n                parent.appendChild(child);\r\n            }\r\n            // Sinon, convertir en string et ajouter comme TextNode\r\n            else {\r\n                parent.appendChild(document.createTextNode(String(child)));\r\n            }\r\n        }\r\n        return parent;\r\n    }\r\n\r\n    /**\r\n     * Vide un √©l√©ment de tous ses enfants\r\n     *\r\n     * @param {HTMLElement} element - √âl√©ment √† vider\r\n     * @returns {HTMLElement} L'√©l√©ment (pour cha√Ænage)\r\n     *\r\n     * @example\r\n     * clearElement(container)\r\n     */\r\n    function clearElement(element) {\r\n        if (!element) return element;\r\n        while (element.firstChild) {\r\n            element.removeChild(element.firstChild);\r\n        }\r\n        return element;\r\n    }\r\n\r\n    /**\r\n     * Trouve un √©l√©ment par ID avec validation\r\n     *\r\n     * @param {string} id - ID de l'√©l√©ment\r\n     * @param {boolean} [required=false] - Si true, lance une erreur si non trouv√©\r\n     * @returns {HTMLElement|null} L'√©l√©ment trouv√© ou null\r\n     * @throws {Error} Si required=true et √©l√©ment non trouv√©\r\n     *\r\n     * @example\r\n     * const el = getElementById('my-element', true) // Lance erreur si absent\r\n     */\r\n    function getElementById(id, required = false) {\r\n        const element = document.getElementById(id);\r\n        if (required && !element) {\r\n            throw new Error(`Element with id \"${id}\" not found`);\r\n        }\r\n        return element;\r\n    }\r\n\r\n    /**\r\n     * Trouve des √©l√©ments par s√©lecteur CSS\r\n     *\r\n     * @param {string} selector - S√©lecteur CSS\r\n     * @param {HTMLElement} [parent=document] - √âl√©ment parent pour la recherche\r\n     * @returns {HTMLElement[]} Tableau d'√©l√©ments trouv√©s\r\n     *\r\n     * @example\r\n     * const buttons = querySelectorAll('.btn')\r\n     */\r\n    function querySelectorAll(selector, parent = document) {\r\n        return Array.from(parent.querySelectorAll(selector));\r\n    }\r\n\r\n    /**\r\n     * Trouve un √©l√©ment par s√©lecteur CSS\r\n     *\r\n     * @param {string} selector - S√©lecteur CSS\r\n     * @param {HTMLElement} [parent=document] - √âl√©ment parent pour la recherche\r\n     * @returns {HTMLElement|null} Premier √©l√©ment trouv√© ou null\r\n     *\r\n     * @example\r\n     * const button = querySelector('.btn-primary')\r\n     */\r\n    function querySelector(selector, parent = document) {\r\n        return parent.querySelector(selector);\r\n    }\r\n\r\n    /**\r\n     * Toggle une classe CSS sur un √©l√©ment\r\n     *\r\n     * @param {HTMLElement} element - √âl√©ment cible\r\n     * @param {string} className - Nom de la classe\r\n     * @param {boolean} [force] - Force l'ajout (true) ou le retrait (false)\r\n     * @returns {boolean} True si la classe est pr√©sente apr√®s toggle\r\n     *\r\n     * @example\r\n     * toggleClass(element, 'active')\r\n     * toggleClass(element, 'hidden', false) // Force retrait\r\n     */\r\n    function toggleClass(element, className, force) {\r\n        if (!element) return false;\r\n        return element.classList.toggle(className, force);\r\n    }\r\n\r\n    /**\r\n     * Ajoute une ou plusieurs classes √† un √©l√©ment\r\n     *\r\n     * @param {HTMLElement} element - √âl√©ment cible\r\n     * @param {...string} classNames - Classes √† ajouter\r\n     * @returns {HTMLElement} L'√©l√©ment (pour cha√Ænage)\r\n     *\r\n     * @example\r\n     * addClass(element, 'active', 'visible')\r\n     */\r\n    function addClass(element, ...classNames) {\r\n        if (!element) return element;\r\n        element.classList.add(...classNames);\r\n        return element;\r\n    }\r\n\r\n    /**\r\n     * Retire une ou plusieurs classes d'un √©l√©ment\r\n     *\r\n     * @param {HTMLElement} element - √âl√©ment cible\r\n     * @param {...string} classNames - Classes √† retirer\r\n     * @returns {HTMLElement} L'√©l√©ment (pour cha√Ænage)\r\n     *\r\n     * @example\r\n     * removeClass(element, 'active', 'visible')\r\n     */\r\n    function removeClass(element, ...classNames) {\r\n        if (!element) return element;\r\n        element.classList.remove(...classNames);\r\n        return element;\r\n    }\r\n\r\n    /**\r\n     * V√©rifie si un √©l√©ment a une classe\r\n     *\r\n     * @param {HTMLElement} element - √âl√©ment √† v√©rifier\r\n     * @param {string} className - Nom de la classe\r\n     * @returns {boolean} True si la classe est pr√©sente\r\n     *\r\n     * @example\r\n     * if (hasClass(element, 'active')) { ... }\r\n     */\r\n    function hasClass(element, className) {\r\n        if (!element) return false;\r\n        return element.classList.contains(className);\r\n    }\r\n\r\n    /**\r\n     * D√©finit ou r√©cup√®re un attribut data-*\r\n     *\r\n     * @param {HTMLElement} element - √âl√©ment cible\r\n     * @param {string} key - Nom de l'attribut (sans 'data-')\r\n     * @param {*} [value] - Valeur √† d√©finir (omis pour lecture)\r\n     * @returns {string|HTMLElement} Valeur lue ou √©l√©ment (pour cha√Ænage)\r\n     *\r\n     * @example\r\n     * setData(element, 'id', '123') // D√©finir\r\n     * const id = setData(element, 'id') // Lire\r\n     */\r\n    function setData(element, key, value) {\r\n        if (!element) return value === undefined ? null : element;\r\n        if (value === undefined) {\r\n            return element.dataset[key];\r\n        }\r\n        element.dataset[key] = value;\r\n        return element;\r\n    }\r\n\r\n    // Exposer le module\r\n    GeoLeaf.Utils.DomHelpers = {\r\n        createElement,\r\n        appendChild,\r\n        clearElement,\r\n        getElementById,\r\n        querySelector,\r\n        querySelectorAll,\r\n        toggleClass,\r\n        addClass,\r\n        removeClass,\r\n        hasClass,\r\n        setData\r\n    };\r\n\r\n    // Alias sur GeoLeaf.Utils pour compatibilit√© et facilit√© d'usage\r\n    GeoLeaf.Utils.createElement = createElement;\r\n    GeoLeaf.Utils.appendChild = appendChild;\r\n    GeoLeaf.Utils.clearElement = clearElement;\r\n\r\n    if (GeoLeaf.Log && GeoLeaf.Log.info) {\r\n        GeoLeaf.Log.info('[GeoLeaf.Utils.DomHelpers] Module loaded');\r\n    }\r\n\r\n})(typeof window !== 'undefined' ? window : this);\r\n","/**\r\n * @fileoverview EventListenerManager - Gestion centralis√©e des event listeners\r\n * Permet de tracker et nettoyer tous les event listeners\r\n * pour √©viter les fuites m√©moire\r\n *\r\n * @module GeoLeaf.Utils.EventListenerManager\r\n * @version 2.0.0\r\n * @author GeoLeaf Project\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    GeoLeaf.Utils = GeoLeaf.Utils || {};\r\n\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * EventListenerManager - Gestionnaire centralis√© d'event listeners\r\n     * @class\r\n     */\r\n    class EventListenerManager {\r\n        constructor(name = 'default') {\r\n            this.name = name;\r\n            this.listeners = [];\r\n            this._nextId = 1;\r\n        }\r\n\r\n        /**\r\n         * Ajoute un event listener avec tracking\r\n         * @param {Element|Window|Document} target - √âl√©ment cible\r\n         * @param {string} event - Nom de l'√©v√©nement\r\n         * @param {Function} handler - Handler de l'√©v√©nement\r\n         * @param {Object|boolean} [options] - Options (capture, once, passive, etc.)\r\n         * @param {string} [label] - Label optionnel pour debug\r\n         * @returns {number} ID du listener pour removal ult√©rieur\r\n         */\r\n        addEventListener(target, event, handler, options = false, label = '') {\r\n            if (!target || typeof target.addEventListener !== 'function') {\r\n                if (Log) Log.warn(`[EventListenerManager.${this.name}] Invalid target for addEventListener`);\r\n                return null;\r\n            }\r\n\r\n            const id = this._nextId++;\r\n\r\n            target.addEventListener(event, handler, options);\r\n\r\n            this.listeners.push({\r\n                id,\r\n                target,\r\n                event,\r\n                handler,\r\n                options,\r\n                label,\r\n                createdAt: Date.now()\r\n            });\r\n\r\n            if (Log) Log.debug(`[EventListenerManager.${this.name}] Listener added:`, id, event, label);\r\n            return id;\r\n        }\r\n\r\n        /**\r\n         * Ajoute un event listener Leaflet avec tracking\r\n         * @param {L.Evented} target - Objet Leaflet (map, marker, etc.)\r\n         * @param {string} event - Nom de l'√©v√©nement\r\n         * @param {Function} handler - Handler de l'√©v√©nement\r\n         * @param {string} [label] - Label optionnel pour debug\r\n         * @returns {number} ID du listener\r\n         */\r\n        addLeafletListener(target, event, handler, label = '') {\r\n            if (!target || typeof target.on !== 'function') {\r\n                if (Log) Log.warn(`[EventListenerManager.${this.name}] Invalid Leaflet target`);\r\n                return null;\r\n            }\r\n\r\n            const id = this._nextId++;\r\n\r\n            target.on(event, handler);\r\n\r\n            this.listeners.push({\r\n                id,\r\n                target,\r\n                event,\r\n                handler,\r\n                label,\r\n                type: 'leaflet',\r\n                createdAt: Date.now()\r\n            });\r\n\r\n            if (Log) Log.debug(`[EventListenerManager.${this.name}] Leaflet listener added:`, id, event, label);\r\n            return id;\r\n        }\r\n\r\n        /**\r\n         * Retire un listener sp√©cifique par ID\r\n         * @param {number} id - ID du listener\r\n         * @returns {boolean} True si le listener a √©t√© trouv√© et retir√©\r\n         */\r\n        removeListener(id) {\r\n            const index = this.listeners.findIndex(l => l.id === id);\r\n            if (index === -1) return false;\r\n\r\n            const listener = this.listeners[index];\r\n\r\n            if (listener.type === 'leaflet') {\r\n                if (listener.target && typeof listener.target.off === 'function') {\r\n                    listener.target.off(listener.event, listener.handler);\r\n                }\r\n            } else {\r\n                if (listener.target && typeof listener.target.removeEventListener === 'function') {\r\n                    listener.target.removeEventListener(listener.event, listener.handler, listener.options);\r\n                }\r\n            }\r\n\r\n            this.listeners.splice(index, 1);\r\n\r\n            if (Log) Log.debug(`[EventListenerManager.${this.name}] Listener removed:`, id, listener.label);\r\n            return true;\r\n        }\r\n\r\n        /**\r\n         * Retire tous les listeners d'un √©l√©ment sp√©cifique\r\n         * @param {Element|L.Evented} target - √âl√©ment cible\r\n         * @returns {number} Nombre de listeners retir√©s\r\n         */\r\n        removeListenersForTarget(target) {\r\n            const matchingListeners = this.listeners.filter(l => l.target === target);\r\n\r\n            matchingListeners.forEach(listener => {\r\n                if (listener.type === 'leaflet') {\r\n                    if (listener.target && typeof listener.target.off === 'function') {\r\n                        listener.target.off(listener.event, listener.handler);\r\n                    }\r\n                } else {\r\n                    if (listener.target && typeof listener.target.removeEventListener === 'function') {\r\n                        listener.target.removeEventListener(listener.event, listener.handler, listener.options);\r\n                    }\r\n                }\r\n            });\r\n\r\n            this.listeners = this.listeners.filter(l => l.target !== target);\r\n\r\n            if (Log && matchingListeners.length > 0) {\r\n                Log.info(`[EventListenerManager.${this.name}] Removed ${matchingListeners.length} listener(s) for target`);\r\n            }\r\n\r\n            return matchingListeners.length;\r\n        }\r\n\r\n        /**\r\n         * Retire tous les listeners\r\n         */\r\n        removeAll() {\r\n            const count = this.listeners.length;\r\n\r\n            this.listeners.forEach(listener => {\r\n                try {\r\n                    if (listener.type === 'leaflet') {\r\n                        if (listener.target && typeof listener.target.off === 'function') {\r\n                            listener.target.off(listener.event, listener.handler);\r\n                        }\r\n                    } else {\r\n                        if (listener.target && typeof listener.target.removeEventListener === 'function') {\r\n                            listener.target.removeEventListener(listener.event, listener.handler, listener.options);\r\n                        }\r\n                    }\r\n                } catch (error) {\r\n                    if (Log) Log.warn(`[EventListenerManager.${this.name}] Error removing listener:`, error);\r\n                }\r\n            });\r\n\r\n            this.listeners = [];\r\n\r\n            if (Log && count > 0) {\r\n                Log.info(`[EventListenerManager.${this.name}] Removed ${count} listener(s)`);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtient le nombre de listeners actifs\r\n         * @returns {number}\r\n         */\r\n        getCount() {\r\n            return this.listeners.length;\r\n        }\r\n\r\n        /**\r\n         * Liste tous les listeners actifs (pour debug)\r\n         * @returns {Array}\r\n         */\r\n        listActiveListeners() {\r\n            return this.listeners.map(l => ({\r\n                id: l.id,\r\n                event: l.event,\r\n                label: l.label,\r\n                type: l.type || 'dom',\r\n                age: Date.now() - l.createdAt\r\n            }));\r\n        }\r\n\r\n        /**\r\n         * D√©truit le manager et nettoie tous les listeners\r\n         */\r\n        destroy() {\r\n            this.removeAll();\r\n            if (Log) Log.info(`[EventListenerManager.${this.name}] Destroyed`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Instance globale par d√©faut\r\n     */\r\n    const globalEventManager = new EventListenerManager('global');\r\n\r\n    /**\r\n     * API simplifi√©e pour l'instance globale\r\n     */\r\n    GeoLeaf.Utils.EventListenerManager = EventListenerManager;\r\n    GeoLeaf.Utils.events = {\r\n        /**\r\n         * addEventListener avec tracking global\r\n         */\r\n        on: (target, event, handler, options, label) =>\r\n            globalEventManager.addEventListener(target, event, handler, options, label),\r\n\r\n        /**\r\n         * Leaflet event listener avec tracking global\r\n         */\r\n        onLeaflet: (target, event, handler, label) =>\r\n            globalEventManager.addLeafletListener(target, event, handler, label),\r\n\r\n        /**\r\n         * Retire un listener par ID\r\n         */\r\n        off: (id) => globalEventManager.removeListener(id),\r\n\r\n        /**\r\n         * Retire tous les listeners d'une cible\r\n         */\r\n        offTarget: (target) => globalEventManager.removeListenersForTarget(target),\r\n\r\n        /**\r\n         * Retire tous les listeners globaux\r\n         */\r\n        offAll: () => globalEventManager.removeAll(),\r\n\r\n        /**\r\n         * Obtient le nombre de listeners actifs\r\n         */\r\n        getCount: () => globalEventManager.getCount(),\r\n\r\n        /**\r\n         * Liste les listeners actifs\r\n         */\r\n        listActive: () => globalEventManager.listActiveListeners(),\r\n\r\n        /**\r\n         * Cr√©e une nouvelle instance pour un composant\r\n         * @param {string} name - Nom du manager\r\n         * @returns {EventListenerManager}\r\n         */\r\n        createManager: (name) => new EventListenerManager(name)\r\n    };\r\n\r\n    // Cleanup automatique avant unload\r\n    if (typeof window !== 'undefined') {\r\n        window.addEventListener('beforeunload', () => {\r\n            const count = globalEventManager.getCount();\r\n            if (count > 0) {\r\n                if (Log) Log.warn(`[EventListenerManager] ${count} listener(s) still active at page unload`);\r\n                globalEventManager.removeAll();\r\n            }\r\n        });\r\n    }\r\n\r\n    if (Log) Log.info('[GeoLeaf.Utils.EventListenerManager] Module charg√©');\r\n\r\n})(typeof window !== 'undefined' ? window : global);\r\n","/**\r\n * @fileoverview TimerManager - Gestion centralis√©e des timers\r\n * Permet de tracker et nettoyer tous les setTimeout/setInterval\r\n * pour √©viter les fuites m√©moire\r\n *\r\n * @module GeoLeaf.Utils.TimerManager\r\n * @version 2.0.0\r\n * @author GeoLeaf Project\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    GeoLeaf.Utils = GeoLeaf.Utils || {};\r\n\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * TimerManager - Gestionnaire centralis√© de timers\r\n     * @class\r\n     */\r\n    class TimerManager {\r\n        constructor(name = 'default') {\r\n            this.name = name;\r\n            this.timers = new Map();\r\n            this.intervals = new Map();\r\n            this._nextId = 1;\r\n        }\r\n\r\n        /**\r\n         * Cr√©e un setTimeout avec tracking\r\n         * @param {Function} callback - Fonction √† ex√©cuter\r\n         * @param {number} delay - D√©lai en ms\r\n         * @param {string} [label] - Label optionnel pour debug\r\n         * @returns {number} ID du timer\r\n         */\r\n        setTimeout(callback, delay, label = '') {\r\n            const id = this._nextId++;\r\n            const timerId = setTimeout(() => {\r\n                try {\r\n                    callback();\r\n                } finally {\r\n                    // Auto-cleanup apr√®s ex√©cution\r\n                    this.timers.delete(id);\r\n                }\r\n            }, delay);\r\n\r\n            this.timers.set(id, {\r\n                timerId,\r\n                label,\r\n                type: 'timeout',\r\n                createdAt: Date.now(),\r\n                delay\r\n            });\r\n\r\n            if (Log) Log.debug(`[TimerManager.${this.name}] setTimeout created:`, id, label);\r\n            return id;\r\n        }\r\n\r\n        /**\r\n         * Cr√©e un setInterval avec tracking\r\n         * @param {Function} callback - Fonction √† ex√©cuter\r\n         * @param {number} interval - Intervalle en ms\r\n         * @param {string} [label] - Label optionnel pour debug\r\n         * @returns {number} ID de l'interval\r\n         */\r\n        setInterval(callback, interval, label = '') {\r\n            const id = this._nextId++;\r\n            const intervalId = setInterval(() => {\r\n                try {\r\n                    callback();\r\n                } catch (error) {\r\n                    if (Log) Log.error(`[TimerManager.${this.name}] Error in interval ${id}:`, error);\r\n                }\r\n            }, interval);\r\n\r\n            this.intervals.set(id, {\r\n                intervalId,\r\n                label,\r\n                type: 'interval',\r\n                createdAt: Date.now(),\r\n                interval\r\n            });\r\n\r\n            if (Log) Log.debug(`[TimerManager.${this.name}] setInterval created:`, id, label);\r\n            return id;\r\n        }\r\n\r\n        /**\r\n         * Clear un timer sp√©cifique\r\n         * @param {number} id - ID du timer\r\n         * @returns {boolean} True si le timer a √©t√© trouv√© et nettoy√©\r\n         */\r\n        clearTimeout(id) {\r\n            const timer = this.timers.get(id);\r\n            if (timer) {\r\n                clearTimeout(timer.timerId);\r\n                this.timers.delete(id);\r\n                if (Log) Log.debug(`[TimerManager.${this.name}] setTimeout cleared:`, id, timer.label);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        /**\r\n         * Clear un interval sp√©cifique\r\n         * @param {number} id - ID de l'interval\r\n         * @returns {boolean} True si l'interval a √©t√© trouv√© et nettoy√©\r\n         */\r\n        clearInterval(id) {\r\n            const interval = this.intervals.get(id);\r\n            if (interval) {\r\n                clearInterval(interval.intervalId);\r\n                this.intervals.delete(id);\r\n                if (Log) Log.debug(`[TimerManager.${this.name}] setInterval cleared:`, id, interval.label);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        /**\r\n         * Clear tous les timers et intervals\r\n         */\r\n        clearAll() {\r\n            // Clear tous les timeouts\r\n            for (const [id, timer] of this.timers.entries()) {\r\n                clearTimeout(timer.timerId);\r\n            }\r\n\r\n            // Clear tous les intervals\r\n            for (const [id, interval] of this.intervals.entries()) {\r\n                clearInterval(interval.intervalId);\r\n            }\r\n\r\n            const totalCleared = this.timers.size + this.intervals.size;\r\n            this.timers.clear();\r\n            this.intervals.clear();\r\n\r\n            if (Log && totalCleared > 0) {\r\n                Log.info(`[TimerManager.${this.name}] Cleared ${totalCleared} timer(s)`);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtient le nombre de timers actifs\r\n         * @returns {{timeouts: number, intervals: number, total: number}}\r\n         */\r\n        getStats() {\r\n            return {\r\n                timeouts: this.timers.size,\r\n                intervals: this.intervals.size,\r\n                total: this.timers.size + this.intervals.size\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Liste tous les timers actifs (pour debug)\r\n         * @returns {Array} Liste des timers avec leurs infos\r\n         */\r\n        listActiveTimers() {\r\n            const list = [];\r\n\r\n            for (const [id, timer] of this.timers.entries()) {\r\n                list.push({\r\n                    id,\r\n                    type: 'timeout',\r\n                    label: timer.label,\r\n                    age: Date.now() - timer.createdAt,\r\n                    delay: timer.delay\r\n                });\r\n            }\r\n\r\n            for (const [id, interval] of this.intervals.entries()) {\r\n                list.push({\r\n                    id,\r\n                    type: 'interval',\r\n                    label: interval.label,\r\n                    age: Date.now() - interval.createdAt,\r\n                    interval: interval.interval\r\n                });\r\n            }\r\n\r\n            return list;\r\n        }\r\n\r\n        /**\r\n         * D√©truit le manager et nettoie tous les timers\r\n         */\r\n        destroy() {\r\n            this.clearAll();\r\n            if (Log) Log.info(`[TimerManager.${this.name}] Destroyed`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Instance globale par d√©faut\r\n     */\r\n    const globalTimerManager = new TimerManager('global');\r\n\r\n    /**\r\n     * API simplifi√©e pour l'instance globale\r\n     */\r\n    GeoLeaf.Utils.TimerManager = TimerManager;\r\n    GeoLeaf.Utils.timers = {\r\n        /**\r\n         * setTimeout avec tracking global\r\n         */\r\n        setTimeout: (callback, delay, label) => globalTimerManager.setTimeout(callback, delay, label),\r\n\r\n        /**\r\n         * setInterval avec tracking global\r\n         */\r\n        setInterval: (callback, interval, label) => globalTimerManager.setInterval(callback, interval, label),\r\n\r\n        /**\r\n         * clearTimeout global\r\n         */\r\n        clearTimeout: (id) => globalTimerManager.clearTimeout(id),\r\n\r\n        /**\r\n         * clearInterval global\r\n         */\r\n        clearInterval: (id) => globalTimerManager.clearInterval(id),\r\n\r\n        /**\r\n         * Clear tous les timers globaux\r\n         */\r\n        clearAll: () => globalTimerManager.clearAll(),\r\n\r\n        /**\r\n         * Obtient les stats globales\r\n         */\r\n        getStats: () => globalTimerManager.getStats(),\r\n\r\n        /**\r\n         * Liste les timers actifs\r\n         */\r\n        listActive: () => globalTimerManager.listActiveTimers(),\r\n\r\n        /**\r\n         * Cr√©e une nouvelle instance de TimerManager pour un composant\r\n         * @param {string} name - Nom du manager\r\n         * @returns {TimerManager}\r\n         */\r\n        createManager: (name) => new TimerManager(name)\r\n    };\r\n\r\n    // Cleanup automatique avant unload de la page\r\n    if (typeof window !== 'undefined') {\r\n        window.addEventListener('beforeunload', () => {\r\n            const stats = globalTimerManager.getStats();\r\n            if (stats.total > 0) {\r\n                if (Log) Log.warn(`[TimerManager] ${stats.total} timer(s) still active at page unload`);\r\n                globalTimerManager.clearAll();\r\n            }\r\n        });\r\n    }\r\n\r\n    if (Log) Log.info('[GeoLeaf.Utils.TimerManager] Module charg√©');\r\n\r\n})(typeof window !== 'undefined' ? window : global);\r\n","/**\r\n * @fileoverview Scale utilities - compute map scale and test visibility ranges\r\n * @module utils/scale-utils\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    GeoLeaf.Utils = GeoLeaf.Utils || {};\r\n\r\n    // Cache bas√© sur le zoom et la latitude pour √©viter des recalculs co√ªteux\r\n    const _scaleCache = {\r\n        zoom: null,\r\n        lat: null,\r\n        scale: null\r\n    };\r\n\r\n    /**\r\n     * Calcule l'√©chelle (1:X) de la carte pour le zoom et la latitude actuels.\r\n     * Retourne la valeur mise en cache si zoom/latitude inchang√©s.\r\n     * @param {L.Map} map\r\n     * @param {Object} [options]\r\n     * @param {boolean} [options.force=false] - Ignore le cache et recalcule\r\n     * @param {Object} [options.logger] - Logger optionnel pour debug\r\n     * @returns {number} √©chelle (ex: 5000000 pour 1:5M)\r\n     */\r\n    function calculateMapScale(map, options = {}) {\r\n        if (!map) return 0;\r\n\r\n        const logger = options.logger;\r\n        const center = map.getCenter?.();\r\n        const zoom = map.getZoom?.();\r\n\r\n        if (!center || typeof zoom !== \"number\") {\r\n            return 0;\r\n        }\r\n\r\n        // Utiliser le cache si possible\r\n        if (!options.force && _scaleCache.zoom === zoom && _scaleCache.lat === center.lat) {\r\n            return _scaleCache.scale || 0;\r\n        }\r\n\r\n        const METERS_PER_PIXEL_AT_ZOOM_0 = 156543.04;\r\n        const metersPerPixel = METERS_PER_PIXEL_AT_ZOOM_0 * Math.cos(center.lat * Math.PI / 180) / Math.pow(2, zoom);\r\n\r\n        const METERS_PER_INCH = 0.0254;\r\n        const DPI = 96;\r\n        const metersPerInch = metersPerPixel * DPI;\r\n\r\n        const scale = Math.round(metersPerInch / METERS_PER_INCH);\r\n\r\n        _scaleCache.zoom = zoom;\r\n        _scaleCache.lat = center.lat;\r\n        _scaleCache.scale = scale;\r\n\r\n        if (logger && typeof logger.debug === \"function\") {\r\n            logger.debug(`[ScaleUtils] Calcul √©chelle: zoom=${zoom}, lat=${center.lat.toFixed(2)}, √©chelle=1:${scale.toLocaleString()}`);\r\n        }\r\n\r\n        return scale;\r\n    }\r\n\r\n    /**\r\n     * V√©rifie si l'√©chelle courante est dans l'intervalle [maxScale ; minScale].\r\n     * @param {number} currentScale\r\n     * @param {number|null|undefined} minScale - √©chelle la plus large (d√©zoom)\r\n     * @param {number|null|undefined} maxScale - √©chelle la plus d√©taill√©e (zoom)\r\n     * @param {Object} [logger]\r\n     * @returns {boolean}\r\n     */\r\n    function isScaleInRange(currentScale, minScale, maxScale, logger) {\r\n        const normalizedMin = (typeof minScale === \"number\" && minScale > 0) ? minScale : null;\r\n        const normalizedMax = (typeof maxScale === \"number\" && maxScale > 0) ? maxScale : null;\r\n\r\n        if (normalizedMin !== null && currentScale > normalizedMin) {\r\n            if (logger && typeof logger.debug === \"function\") {\r\n                logger.debug(`[ScaleUtils] ${currentScale} > minScale ${normalizedMin} ‚Üí invisible (trop d√©zoom√©)`);\r\n            }\r\n            return false;\r\n        }\r\n\r\n        if (normalizedMax !== null && currentScale < normalizedMax) {\r\n            if (logger && typeof logger.debug === \"function\") {\r\n                logger.debug(`[ScaleUtils] ${currentScale} < maxScale ${normalizedMax} ‚Üí invisible (trop zoom√©)`);\r\n            }\r\n            return false;\r\n        }\r\n\r\n        if (logger && typeof logger.debug === \"function\") {\r\n            logger.debug(`[ScaleUtils] ${currentScale} dans [${normalizedMax ?? '‚àû'} ; ${normalizedMin ?? '‚àû'}] ‚Üí visible`);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    function clearScaleCache() {\r\n        _scaleCache.zoom = null;\r\n        _scaleCache.lat = null;\r\n        _scaleCache.scale = null;\r\n    }\r\n\r\n    GeoLeaf.Utils.ScaleUtils = {\r\n        calculateMapScale,\r\n        isScaleInRange,\r\n        clearScaleCache\r\n    };\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * Style Resolver - Helper pour r√©soudre les couleurs depuis les styleRules des couches\r\n * Remplace l'ancien syst√®me category.style.json\r\n *\r\n * @module helpers/style-resolver\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    GeoLeaf.Helpers = GeoLeaf.Helpers || {};\r\n\r\n    /**\r\n     * R√©cup√®re les couleurs d'un POI depuis les styleRules de sa couche\r\n     * @param {Object} poi - POI avec properties.categoryId, properties.subCategoryId\r\n     * @param {string} layerId - ID de la couche du POI\r\n     * @returns {Object|null} - { fillColor, color } ou null si non trouv√©\r\n     */\r\n    function getColorsFromLayerStyle(poi, layerId) {\r\n        if (!poi || !layerId) return null;\r\n\r\n        // R√©cup√©rer les donn√©es de la couche\r\n        const layerData = GeoLeaf._GeoJSONShared?.state?.layers?.get(layerId);\r\n        if (!layerData) return null;\r\n\r\n        // R√©cup√©rer le currentStyle (objet charg√© en m√©moire)\r\n        const styleConfig = layerData.currentStyle;\r\n        if (!styleConfig || !styleConfig.styleRules) return null;\r\n\r\n        // Extraire categoryId et subCategoryId\r\n        const categoryId = poi.categoryId || poi.category ||\r\n            (poi.attributes && poi.attributes.categoryId) ||\r\n            (poi.properties && poi.properties.categoryId) ||\r\n            (poi.properties && poi.properties.category);\r\n\r\n        const subCategoryId = poi.subCategoryId || poi.subCategory || poi.sub_category ||\r\n            (poi.attributes && poi.attributes.subCategoryId) ||\r\n            (poi.properties && poi.properties.subCategoryId) ||\r\n            (poi.properties && poi.properties.sub_category);\r\n\r\n        // Chercher dans les styleRules\r\n        // Priorit√© 1 : subCategoryId\r\n        if (subCategoryId) {\r\n            const rule = styleConfig.styleRules.find(r =>\r\n                r.when &&\r\n                r.when.field === \"properties.subCategoryId\" &&\r\n                r.when.value === subCategoryId\r\n            );\r\n            if (rule && rule.style) {\r\n                return {\r\n                    fillColor: rule.style.fillColor,\r\n                    color: rule.style.color,\r\n                    colorFill: rule.style.fillColor,\r\n                    colorStroke: rule.style.color\r\n                };\r\n            }\r\n        }\r\n\r\n        // Priorit√© 2 : categoryId\r\n        if (categoryId) {\r\n            const rule = styleConfig.styleRules.find(r =>\r\n                r.when &&\r\n                r.when.field === \"properties.categoryId\" &&\r\n                r.when.value === categoryId\r\n            );\r\n            if (rule && rule.style) {\r\n                return {\r\n                    fillColor: rule.style.fillColor,\r\n                    color: rule.style.color,\r\n                    colorFill: rule.style.fillColor,\r\n                    colorStroke: rule.style.color\r\n                };\r\n            }\r\n        }\r\n\r\n        // Fallback : defaultStyle\r\n        if (styleConfig.defaultStyle) {\r\n            return {\r\n                fillColor: styleConfig.defaultStyle.fillColor,\r\n                color: styleConfig.defaultStyle.color,\r\n                colorFill: styleConfig.defaultStyle.fillColor,\r\n                colorStroke: styleConfig.defaultStyle.color\r\n            };\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re les couleurs en fonction du style actif de la couche\r\n     * Cette fonction remplace l'ancien getCategoryStyles()\r\n     * @param {Object} poi - POI avec _layerConfig\r\n     * @returns {Object} - { colorFill, colorStroke, colorRoute }\r\n     */\r\n    function resolvePoiColors(poi) {\r\n        const colors = {\r\n            colorFill: null,\r\n            colorStroke: null,\r\n            colorRoute: null\r\n        };\r\n\r\n        if (!poi || !poi._layerConfig) return colors;\r\n\r\n        const layerId = poi._layerConfig.id;\r\n        const styleColors = getColorsFromLayerStyle(poi, layerId);\r\n\r\n        if (styleColors) {\r\n            colors.colorFill = styleColors.fillColor || styleColors.colorFill;\r\n            colors.colorStroke = styleColors.color || styleColors.colorStroke;\r\n            colors.colorRoute = styleColors.color || styleColors.colorStroke;\r\n        }\r\n\r\n        return colors;\r\n    }\r\n\r\n    // Exposer dans l'espace de noms\r\n    GeoLeaf.Helpers.StyleResolver = {\r\n        getColorsFromLayerStyle: getColorsFromLayerStyle,\r\n        resolvePoiColors: resolvePoiColors\r\n    };\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * @fileoverview Validations des r√®gles de style (styleRules, conditions, scales)\r\n * Extrait de style-validator.js pour r√©duire la complexit√©\r\n * @module validators/style-validator-rules\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    GeoLeaf._StyleValidatorRules = GeoLeaf._StyleValidatorRules || {};\r\n\r\n    /**\r\n     * Valide les styleRules (r√®gles conditionnelles de style)\r\n     * V√©rifie la structure when/style de chaque r√®gle et valide les conditions\r\n     *\r\n     * @param {Array<Object>} rules - Tableau de r√®gles styleRules\r\n     * @param {Object} rules[].when - Condition d'application (simple ou compos√©e avec \"all\")\r\n     * @param {Object} rules[].style - Style √† appliquer si condition vraie\r\n     * @param {Object} [rules[].legend] - Info l√©gende optionnelle pour cette r√®gle\r\n     * @param {Array<Object>} errors - Tableau d'erreurs √† remplir (modifi√© in-place)\r\n     * @param {Array<Object>} warnings - Tableau d'avertissements √† remplir (modifi√© in-place)\r\n     * @param {Object} context - Contexte additionnel (profileId, layerId, etc.)\r\n     * @returns {void} Modifie errors/warnings directement\r\n     * @example\r\n     * const rules = [\r\n     *   { when: { field: 'population', operator: '>', value: 100000 }, style: { color: '#ff0000' } },\r\n     *   { when: { all: [{ field: 'type', operator: '==', value: 'city' }] }, style: { weight: 3 } }\r\n     * ];\r\n     * const errors = [], warnings = [];\r\n     * GeoLeaf._StyleValidatorRules.validateStyleRules(rules, errors, warnings, { layerId: 'cities' });\r\n     */\r\n    GeoLeaf._StyleValidatorRules.validateStyleRules = function (rules, errors, warnings, context) {\r\n        if (!Array.isArray(rules)) {\r\n            errors.push({\r\n                field: 'styleRules',\r\n                message: `styleRules doit √™tre un tableau`,\r\n                context: { received: typeof rules, ...context }\r\n            });\r\n            return;\r\n        }\r\n\r\n        rules.forEach((rule, index) => {\r\n            const ruleContext = { ...context, ruleIndex: index };\r\n\r\n            if (typeof rule !== 'object' || rule === null) {\r\n                errors.push({\r\n                    field: `styleRules[${index}]`,\r\n                    message: `La r√®gle doit √™tre un objet`,\r\n                    context: ruleContext\r\n                });\r\n                return;\r\n            }\r\n\r\n            // Validation when\r\n            if (!rule.when) {\r\n                errors.push({\r\n                    field: `styleRules[${index}].when`,\r\n                    message: `Le champ 'when' est requis`,\r\n                    context: ruleContext\r\n                });\r\n            } else {\r\n                GeoLeaf._StyleValidatorRules.validateWhenCondition(rule.when, index, errors, warnings, ruleContext);\r\n            }\r\n\r\n            // Validation style\r\n            if (!rule.style) {\r\n                errors.push({\r\n                    field: `styleRules[${index}].style`,\r\n                    message: `Le champ 'style' est requis`,\r\n                    context: ruleContext\r\n                });\r\n            } else if (typeof rule.style !== 'object' || rule.style === null) {\r\n                errors.push({\r\n                    field: `styleRules[${index}].style`,\r\n                    message: `Le style doit √™tre un objet`,\r\n                    context: { received: typeof rule.style, ...ruleContext }\r\n                });\r\n            }\r\n\r\n            // Validation legend (optionnel)\r\n            if (rule.legend && typeof rule.legend !== 'object') {\r\n                errors.push({\r\n                    field: `styleRules[${index}].legend`,\r\n                    message: `legend doit √™tre un objet`,\r\n                    context: { received: typeof rule.legend, ...ruleContext }\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Valide la condition when d'une r√®gle\r\n     * Supporte conditions simples et compos√©es avec op√©rateur \"all\" (ET logique)\r\n     *\r\n     * @param {Object} when - Objet de condition when\r\n     * @param {string} [when.field] - Champ √† tester (mode simple)\r\n     * @param {string} [when.operator] - Op√©rateur de comparaison (mode simple)\r\n     * @param {*} [when.value] - Valeur de r√©f√©rence (mode simple)\r\n     * @param {Array<Object>} [when.all] - Tableau de conditions (mode compos√©, ET logique)\r\n     * @param {number} ruleIndex - Index de la r√®gle dans styleRules (pour messages d'erreur)\r\n     * @param {Array<Object>} errors - Tableau d'erreurs\r\n     * @param {Array<Object>} warnings - Tableau d'avertissements\r\n     * @param {Object} context - Contexte\r\n     * @returns {void}\r\n     * @example\r\n     * // Condition simple\r\n     * const when1 = { field: 'population', operator: '>', value: 50000 };\r\n     * // Condition compos√©e (AND)\r\n     * const when2 = { all: [\r\n     *   { field: 'type', operator: '==', value: 'restaurant' },\r\n     *   { field: 'rating', operator: '>=', value: 4 }\r\n     * ]};\r\n     */\r\n    GeoLeaf._StyleValidatorRules.validateWhenCondition = function (when, ruleIndex, errors, warnings, context) {\r\n        if (typeof when !== 'object' || when === null) {\r\n            errors.push({\r\n                field: `styleRules[${ruleIndex}].when`,\r\n                message: `when doit √™tre un objet`,\r\n                context: { received: typeof when, ...context }\r\n            });\r\n            return;\r\n        }\r\n\r\n        // Support pour conditions compos√©es avec \"all\"\r\n        if (when.all && Array.isArray(when.all)) {\r\n            // Valider chaque condition dans le tableau \"all\"\r\n            when.all.forEach((condition, condIndex) => {\r\n                GeoLeaf._StyleValidatorRules.validateSimpleCondition(condition, ruleIndex, condIndex, errors, context);\r\n            });\r\n            return;\r\n        }\r\n\r\n        // Support pour conditions simples\r\n        GeoLeaf._StyleValidatorRules.validateSimpleCondition(when, ruleIndex, null, errors, context);\r\n    };\r\n\r\n    /**\r\n     * Valide une condition simple (field/operator/value)\r\n     * V√©rifie la pr√©sence des champs requis et la validit√© de l'op√©rateur\r\n     *\r\n     * @param {Object} condition - Condition √† valider\r\n     * @param {string} condition.field - Nom du champ de feature √† tester (ex: 'properties.population')\r\n     * @param {string} condition.operator - Op√©rateur: '==', '!=', '<', '>', '<=', '>=', 'in', 'contains'\r\n     * @param {*} condition.value - Valeur de r√©f√©rence (string, number, array selon op√©rateur)\r\n     * @param {number} ruleIndex - Index de la r√®gle dans styleRules\r\n     * @param {number|null} condIndex - Index de la condition dans \"all\" (null si condition simple)\r\n     * @param {Array<Object>} errors - Tableau d'erreurs\r\n     * @param {Object} context - Contexte\r\n     * @returns {void}\r\n     * @example\r\n     * const condition = { field: 'properties.type', operator: 'in', value: ['hotel', 'restaurant'] };\r\n     * validateSimpleCondition(condition, 0, null, errors, {});\r\n     */\r\n    GeoLeaf._StyleValidatorRules.validateSimpleCondition = function (condition, ruleIndex, condIndex = null, errors, context) {\r\n        // Champs requis\r\n        const required = ['field', 'operator', 'value'];\r\n        for (const field of required) {\r\n            if (!(field in condition)) {\r\n                const prefix = condIndex !== null ? `styleRules[${ruleIndex}].when.all[${condIndex}]` : `styleRules[${ruleIndex}].when`;\r\n                errors.push({\r\n                    field: `${prefix}.${field}`,\r\n                    message: `Le champ '${field}' est requis dans la condition`,\r\n                    context\r\n                });\r\n            }\r\n        }\r\n\r\n        // Validation operator\r\n        const validOperators = ['==', '!=', '<', '>', '<=', '>=', 'in', 'contains'];\r\n        if (condition.operator && !validOperators.includes(condition.operator)) {\r\n            const prefix = condIndex !== null ? `styleRules[${ruleIndex}].when.all[${condIndex}]` : `styleRules[${ruleIndex}].when`;\r\n            errors.push({\r\n                field: `${prefix}.operator`,\r\n                message: `Op√©rateur invalide`,\r\n                context: { received: condition.operator, allowed: validOperators, ...context }\r\n            });\r\n        }\r\n\r\n        // Validation field\r\n        if (condition.field && typeof condition.field !== 'string') {\r\n            const prefix = condIndex !== null ? `styleRules[${ruleIndex}].when.all[${condIndex}]` : `styleRules[${ruleIndex}].when`;\r\n            errors.push({\r\n                field: `${prefix}.field`,\r\n                message: `field doit √™tre une cha√Æne de caract√®res`,\r\n                context: { received: typeof condition.field, ...context }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Valide les √©chelles (layerScale, labelScale)\r\n     * V√©rifie la structure des objets d'√©chelle et la validit√© des valeurs min/max\r\n     *\r\n     * @param {Object} styleData - Donn√©es du style\r\n     * @param {Object} [styleData.layerScale] - √âchelle de visibilit√© de la couche\r\n     * @param {number|null} [styleData.layerScale.minScale] - Zoom minimum (ou null = pas de limite)\r\n     * @param {number|null} [styleData.layerScale.maxScale] - Zoom maximum (ou null = pas de limite)\r\n     * @param {Object} [styleData.labelScale] - √âchelle de visibilit√© des labels\r\n     * @param {Array<Object>} errors - Tableau d'erreurs\r\n     * @param {Array<Object>} warnings - Tableau d'avertissements\r\n     * @param {Object} context - Contexte\r\n     * @returns {void}\r\n     * @example\r\n     * const styleData = {\r\n     *   layerScale: { minScale: 10, maxScale: 18 },  // Visible du zoom 10 √† 18\r\n     *   labelScale: { minScale: 14, maxScale: null }  // Labels visibles √† partir du zoom 14\r\n     * };\r\n     */\r\n    GeoLeaf._StyleValidatorRules.validateScales = function (styleData, errors, warnings, context) {\r\n        ['layerScale', 'labelScale'].forEach(scaleField => {\r\n            const isRequired = scaleField === 'layerScale';\r\n\r\n            if (!styleData[scaleField]) {\r\n                if (isRequired) {\r\n                    errors.push({\r\n                        field: scaleField,\r\n                        message: `${scaleField} est requis`,\r\n                        context\r\n                    });\r\n                }\r\n                return;\r\n            }\r\n\r\n            const scale = styleData[scaleField];\r\n            if (typeof scale !== 'object' || scale === null) {\r\n                errors.push({\r\n                    field: scaleField,\r\n                    message: `${scaleField} doit √™tre un objet`,\r\n                    context: { received: typeof scale, ...context }\r\n                });\r\n                return;\r\n            }\r\n\r\n            ['minScale', 'maxScale'].forEach(prop => {\r\n                if (!(prop in scale)) {\r\n                    if (isRequired) {\r\n                        errors.push({\r\n                            field: `${scaleField}.${prop}`,\r\n                            message: `${prop} est requis dans ${scaleField}`,\r\n                            context\r\n                        });\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                if (scale[prop] !== null) {\r\n                    if (typeof scale[prop] !== 'number' || scale[prop] < 0) {\r\n                        errors.push({\r\n                            field: `${scaleField}.${prop}`,\r\n                            message: `${prop} doit √™tre un nombre >= 0 ou null`,\r\n                            context: { received: scale[prop], ...context }\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Valide la configuration legend\r\n     * V√©rifie la structure et les types des propri√©t√©s de l√©gende\r\n     *\r\n     * @param {Object} legend - Configuration legend\r\n     * @param {number} [legend.order] - Ordre d'affichage dans la l√©gende (doit √™tre entier)\r\n     * @param {string} [legend.label] - Label √† afficher dans la l√©gende\r\n     * @param {string} [legend.description] - Description compl√©mentaire\r\n     * @param {Array<Object>} errors - Tableau d'erreurs\r\n     * @param {Array<Object>} warnings - Tableau d'avertissements\r\n     * @param {Object} context - Contexte\r\n     * @returns {void}\r\n     * @example\r\n     * const legend = { order: 1, label: 'Grandes villes', description: 'Population > 100k' };\r\n     */\r\n    GeoLeaf._StyleValidatorRules.validateLegend = function (legend, errors, warnings, context) {\r\n        if (typeof legend !== 'object' || legend === null) {\r\n            errors.push({\r\n                field: 'legend',\r\n                message: `legend doit √™tre un objet`,\r\n                context: { received: typeof legend, ...context }\r\n            });\r\n            return;\r\n        }\r\n\r\n        if ('order' in legend && !Number.isInteger(legend.order)) {\r\n            errors.push({\r\n                field: 'legend.order',\r\n                message: `order doit √™tre un entier`,\r\n                context: { received: legend.order, type: typeof legend.order, ...context }\r\n            });\r\n        }\r\n    };\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * @fileoverview Validateur de fichiers de style GeoLeaf\r\n * Valide les fichiers style.json contre le sch√©ma JSON d√©fini\r\n * et g√©n√®re des erreurs d√©taill√©es avec contexte pour faciliter le debugging\r\n * @module validators/style-validator\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n\r\n// Import du sch√©ma (sera charg√© dynamiquement si n√©cessaire)\r\n// const styleSchema = require('../../../../schema/style.schema.json');\r\n\r\n/**\r\n * Classe d'erreur pour les validations de style\r\n */\r\nclass StyleValidationError extends Error {\r\n    constructor(message, context = {}) {\r\n        super(message);\r\n        this.name = 'StyleValidationError';\r\n        this.context = context;\r\n    }\r\n}\r\n\r\n/**\r\n * Valide un objet de style contre le sch√©ma JSON\r\n * @param {Object} styleData - Donn√©es du style √† valider\r\n * @param {Object} context - Contexte additionnel (profileId, layerId, styleId)\r\n * @returns {Object} R√©sultat de validation { valid: boolean, errors: Array, warnings: Array }\r\n */\r\nfunction validateStyle(styleData, context = {}) {\r\n    const errors = [];\r\n    const warnings = [];\r\n\r\n    try {\r\n        // Validation de base: objet requis\r\n        if (!styleData || typeof styleData !== 'object') {\r\n            errors.push({\r\n                field: 'root',\r\n                message: 'Le style doit √™tre un objet JSON valide',\r\n                context: { received: typeof styleData, ...context }\r\n            });\r\n            return { valid: false, errors, warnings };\r\n        }\r\n\r\n        // Validation des champs requis\r\n        validateRequiredFields(styleData, errors, context);\r\n\r\n        // Validation du format de l'ID\r\n        validateId(styleData, errors, context);\r\n\r\n        // Validation du champ label (string ou objet)\r\n        validateLabel(styleData, errors, warnings, context);\r\n\r\n        // Validation du style de base\r\n        validateBaseStyle(styleData, errors, warnings, context);\r\n\r\n        // Validation des styleRules si pr√©sentes\r\n        if (styleData.styleRules) {\r\n            validateStyleRules(styleData.styleRules, errors, warnings, context);\r\n        }\r\n\r\n        // Validation des √©chelles\r\n        validateScales(styleData, errors, warnings, context);\r\n\r\n        // Validation de la l√©gende\r\n        if (styleData.legend) {\r\n            validateLegend(styleData.legend, errors, warnings, context);\r\n        }\r\n\r\n    } catch (error) {\r\n        errors.push({\r\n            field: 'validation',\r\n            message: `Erreur inattendue lors de la validation: ${error.message}`,\r\n            stack: error.stack,\r\n            context\r\n        });\r\n    }\r\n\r\n    return {\r\n        valid: errors.length === 0,\r\n        errors,\r\n        warnings\r\n    };\r\n}\r\n\r\n/**\r\n * Valide les champs requis\r\n */\r\nfunction validateRequiredFields(styleData, errors, context) {\r\n    // V√©rifier l'ID (obligatoire)\r\n    if (!('id' in styleData) || styleData.id === undefined || styleData.id === null) {\r\n        errors.push({\r\n            field: 'id',\r\n            message: `Le champ requis 'id' est manquant`,\r\n            context: { availableFields: Object.keys(styleData), ...context }\r\n        });\r\n    }\r\n\r\n    // V√©rifier que 'style' OU 'defaultStyle' est pr√©sent (au moins un des deux)\r\n    const hasStyle = ('style' in styleData) && styleData.style !== undefined && styleData.style !== null;\r\n    const hasDefaultStyle = ('defaultStyle' in styleData) && styleData.defaultStyle !== undefined && styleData.defaultStyle !== null;\r\n\r\n    if (!hasStyle && !hasDefaultStyle) {\r\n        errors.push({\r\n            field: 'style',\r\n            message: `Le champ requis 'style' ou 'defaultStyle' est manquant`,\r\n            context: { availableFields: Object.keys(styleData), ...context }\r\n        });\r\n    }\r\n\r\n    if (!('layerScale' in styleData)) {\r\n        errors.push({\r\n            field: 'layerScale',\r\n            message: `Le champ requis 'layerScale' est manquant`,\r\n            context: { availableFields: Object.keys(styleData), ...context }\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Valide le format de l'ID\r\n */\r\nfunction validateId(styleData, errors, context) {\r\n    if (!styleData.id) return;\r\n\r\n    // Pattern acceptant lettres (y compris accentu√©es), chiffres, tirets et underscores\r\n    // \\p{L} = toutes les lettres Unicode (y compris √©, √†, √±, etc.)\r\n    const idPattern = /^[\\p{L}0-9_-]+$/u;\r\n    if (typeof styleData.id !== 'string') {\r\n        errors.push({\r\n            field: 'id',\r\n            message: `L'ID doit √™tre une cha√Æne de caract√®res`,\r\n            context: { received: typeof styleData.id, value: styleData.id, ...context }\r\n        });\r\n    } else if (!idPattern.test(styleData.id)) {\r\n        errors.push({\r\n            field: 'id',\r\n            message: `L'ID doit contenir uniquement des lettres, chiffres, tirets et underscores`,\r\n            context: { received: styleData.id, pattern: idPattern.toString(), ...context }\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Valide le champ label (peut √™tre string ou objet de config label)\r\n */\r\nfunction validateLabel(styleData, errors, warnings, context) {\r\n    if (!('label' in styleData)) return;\r\n\r\n    const label = styleData.label;\r\n\r\n    // String: nom d'affichage\r\n    if (typeof label === 'string') {\r\n        return;\r\n    }\r\n\r\n    // Objet: configuration de labels int√©gr√©s\r\n    if (typeof label === 'object' && label !== null) {\r\n        // enabled est requis\r\n        if (!('enabled' in label)) {\r\n            errors.push({\r\n                field: 'label.enabled',\r\n                message: `Le champ 'enabled' est requis dans la configuration de labels`,\r\n                context: { labelConfig: label, ...context }\r\n            });\r\n        } else if (typeof label.enabled !== 'boolean') {\r\n            errors.push({\r\n                field: 'label.enabled',\r\n                message: `Le champ 'enabled' doit √™tre un bool√©en`,\r\n                context: { received: typeof label.enabled, value: label.enabled, ...context }\r\n            });\r\n        }\r\n\r\n        // Si enabled, field devrait √™tre pr√©sent\r\n        if (label.enabled && !label.field) {\r\n            warnings.push({\r\n                field: 'label.field',\r\n                message: `Les labels sont activ√©s mais aucun champ n'est sp√©cifi√©`,\r\n                context: { labelConfig: label, ...context }\r\n            });\r\n        }\r\n\r\n        // Validation font\r\n        if (label.font) {\r\n            validateFont(label.font, errors, warnings, context);\r\n        }\r\n\r\n        // Validation des couleurs\r\n        if (label.color && !isValidHexColor(label.color)) {\r\n            errors.push({\r\n                field: 'label.color',\r\n                message: `Couleur invalide, format attendu: #RRGGBB`,\r\n                context: { received: label.color, ...context }\r\n            });\r\n        }\r\n\r\n        // Validation opacity\r\n        if ('opacity' in label && (typeof label.opacity !== 'number' || label.opacity < 0 || label.opacity > 1)) {\r\n            errors.push({\r\n                field: 'label.opacity',\r\n                message: `L'opacit√© doit √™tre un nombre entre 0 et 1`,\r\n                context: { received: label.opacity, ...context }\r\n            });\r\n        }\r\n\r\n        // Validation buffer\r\n        if (label.buffer) {\r\n            validateLabelComponent(label.buffer, 'label.buffer', errors, warnings, context);\r\n        }\r\n\r\n        // Validation background\r\n        if (label.background) {\r\n            validateLabelComponent(label.background, 'label.background', errors, warnings, context);\r\n        }\r\n\r\n        // Validation offset\r\n        if (label.offset && typeof label.offset.distancePx !== 'undefined') {\r\n            if (typeof label.offset.distancePx !== 'number') {\r\n                errors.push({\r\n                    field: 'label.offset.distancePx',\r\n                    message: `distancePx doit √™tre un nombre`,\r\n                    context: { received: typeof label.offset.distancePx, ...context }\r\n                });\r\n            }\r\n        }\r\n\r\n        return;\r\n    }\r\n\r\n    // Type invalide\r\n    errors.push({\r\n        field: 'label',\r\n        message: `Le champ 'label' doit √™tre une cha√Æne de caract√®res ou un objet de configuration`,\r\n        context: { received: typeof label, value: label, ...context }\r\n    });\r\n}\r\n\r\n/**\r\n * Valide la configuration font\r\n */\r\nfunction validateFont(font, errors, warnings, context) {\r\n    if (typeof font !== 'object' || font === null) {\r\n        errors.push({\r\n            field: 'label.font',\r\n            message: `La configuration font doit √™tre un objet`,\r\n            context: { received: typeof font, ...context }\r\n        });\r\n        return;\r\n    }\r\n\r\n    if (font.sizePt !== undefined) {\r\n        if (typeof font.sizePt !== 'number' || font.sizePt < 1) {\r\n            errors.push({\r\n                field: 'label.font.sizePt',\r\n                message: `sizePt doit √™tre un nombre >= 1`,\r\n                context: { received: font.sizePt, ...context }\r\n            });\r\n        }\r\n    }\r\n\r\n    if (font.weight !== undefined) {\r\n        if (!Number.isInteger(font.weight) || font.weight < 0 || font.weight > 100) {\r\n            errors.push({\r\n                field: 'label.font.weight',\r\n                message: `weight doit √™tre un entier entre 0 et 100`,\r\n                context: { received: font.weight, ...context }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Valide un composant de label (buffer, background)\r\n */\r\nfunction validateLabelComponent(component, fieldPath, errors, warnings, context) {\r\n    if (typeof component !== 'object' || component === null) {\r\n        errors.push({\r\n            field: fieldPath,\r\n            message: `${fieldPath} doit √™tre un objet`,\r\n            context: { received: typeof component, ...context }\r\n        });\r\n        return;\r\n    }\r\n\r\n    if (component.color && !isValidHexColor(component.color)) {\r\n        errors.push({\r\n            field: `${fieldPath}.color`,\r\n            message: `Couleur invalide, format attendu: #RRGGBB`,\r\n            context: { received: component.color, ...context }\r\n        });\r\n    }\r\n\r\n    if ('opacity' in component && (typeof component.opacity !== 'number' || component.opacity < 0 || component.opacity > 1)) {\r\n        errors.push({\r\n            field: `${fieldPath}.opacity`,\r\n            message: `L'opacit√© doit √™tre un nombre entre 0 et 1`,\r\n            context: { received: component.opacity, ...context }\r\n        });\r\n    }\r\n\r\n    if ('sizePx' in component && (typeof component.sizePx !== 'number' || component.sizePx < 0)) {\r\n        errors.push({\r\n            field: `${fieldPath}.sizePx`,\r\n            message: `sizePx doit √™tre un nombre >= 0`,\r\n            context: { received: component.sizePx, ...context }\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Valide le style de base\r\n */\r\nfunction validateBaseStyle(styleData, errors, warnings, context) {\r\n    const style = styleData.style || styleData.defaultStyle;\r\n\r\n    if (!style) return;\r\n\r\n    if (typeof style !== 'object' || style === null) {\r\n        errors.push({\r\n            field: 'style',\r\n            message: `Le style doit √™tre un objet`,\r\n            context: { received: typeof style, ...context }\r\n        });\r\n        return;\r\n    }\r\n\r\n    // Validation des couleurs\r\n    ['fillColor', 'color'].forEach(colorField => {\r\n        if (style[colorField] && !isValidHexColor(style[colorField])) {\r\n            errors.push({\r\n                field: `style.${colorField}`,\r\n                message: `Couleur invalide, format attendu: #RRGGBB`,\r\n                context: { received: style[colorField], ...context }\r\n            });\r\n        }\r\n    });\r\n\r\n    // Validation des opacit√©s\r\n    ['fillOpacity', 'opacity'].forEach(opacityField => {\r\n        if (opacityField in style) {\r\n            if (typeof style[opacityField] !== 'number' || style[opacityField] < 0 || style[opacityField] > 1) {\r\n                errors.push({\r\n                    field: `style.${opacityField}`,\r\n                    message: `${opacityField} doit √™tre un nombre entre 0 et 1`,\r\n                    context: { received: style[opacityField], ...context }\r\n                });\r\n            }\r\n        }\r\n    });\r\n\r\n    // Validation des tailles\r\n    ['weight', 'sizePx', 'radius'].forEach(sizeField => {\r\n        if (sizeField in style) {\r\n            if (typeof style[sizeField] !== 'number' || style[sizeField] < 0) {\r\n                errors.push({\r\n                    field: `style.${sizeField}`,\r\n                    message: `${sizeField} doit √™tre un nombre >= 0`,\r\n                    context: { received: style[sizeField], ...context }\r\n                });\r\n            }\r\n        }\r\n    });\r\n\r\n    // Validation shape (points)\r\n    if (style.shape && !['circle', 'square'].includes(style.shape)) {\r\n        errors.push({\r\n            field: 'style.shape',\r\n            message: `shape doit √™tre 'circle' ou 'square'`,\r\n            context: { received: style.shape, allowed: ['circle', 'square'], ...context }\r\n        });\r\n    }\r\n\r\n    // Validation stroke (lignes)\r\n    if (style.stroke) {\r\n        validateStroke(style.stroke, errors, warnings, context);\r\n    }\r\n\r\n    // Validation casing (lignes)\r\n    if (style.casing) {\r\n        validateCasing(style.casing, errors, warnings, context);\r\n    }\r\n\r\n    // Validation fillPattern (polygones)\r\n    if (style.fillPattern) {\r\n        validateFillPattern(style.fillPattern, errors, warnings, context);\r\n    }\r\n}\r\n\r\n/**\r\n * Valide le stroke (lignes)\r\n */\r\nfunction validateStroke(stroke, errors, warnings, context) {\r\n    if (typeof stroke !== 'object' || stroke === null) {\r\n        errors.push({\r\n            field: 'style.stroke',\r\n            message: `stroke doit √™tre un objet`,\r\n            context: { received: typeof stroke, ...context }\r\n        });\r\n        return;\r\n    }\r\n\r\n    if (stroke.color && !isValidHexColor(stroke.color)) {\r\n        errors.push({\r\n            field: 'style.stroke.color',\r\n            message: `Couleur invalide, format attendu: #RRGGBB`,\r\n            context: { received: stroke.color, ...context }\r\n        });\r\n    }\r\n\r\n    if ('opacity' in stroke && (typeof stroke.opacity !== 'number' || stroke.opacity < 0 || stroke.opacity > 1)) {\r\n        errors.push({\r\n            field: 'style.stroke.opacity',\r\n            message: `opacity doit √™tre un nombre entre 0 et 1`,\r\n            context: { received: stroke.opacity, ...context }\r\n        });\r\n    }\r\n\r\n    if ('weight' in stroke && (typeof stroke.weight !== 'number' || stroke.weight < 0)) {\r\n        errors.push({\r\n            field: 'style.stroke.weight',\r\n            message: `weight doit √™tre un nombre >= 0`,\r\n            context: { received: stroke.weight, ...context }\r\n        });\r\n    }\r\n\r\n    if (stroke.dashArray !== null && stroke.dashArray !== undefined && typeof stroke.dashArray !== 'string') {\r\n        errors.push({\r\n            field: 'style.stroke.dashArray',\r\n            message: `dashArray doit √™tre une cha√Æne de caract√®res ou null`,\r\n            context: { received: typeof stroke.dashArray, value: stroke.dashArray, ...context }\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Valide le casing (lignes)\r\n */\r\nfunction validateCasing(casing, errors, warnings, context) {\r\n    if (typeof casing !== 'object' || casing === null) {\r\n        errors.push({\r\n            field: 'style.casing',\r\n            message: `casing doit √™tre un objet`,\r\n            context: { received: typeof casing, ...context }\r\n        });\r\n        return;\r\n    }\r\n\r\n    if ('enabled' in casing && typeof casing.enabled !== 'boolean') {\r\n        errors.push({\r\n            field: 'style.casing.enabled',\r\n            message: `enabled doit √™tre un bool√©en`,\r\n            context: { received: typeof casing.enabled, ...context }\r\n        });\r\n    }\r\n\r\n    if (casing.color && !isValidHexColor(casing.color)) {\r\n        errors.push({\r\n            field: 'style.casing.color',\r\n            message: `Couleur invalide, format attendu: #RRGGBB`,\r\n            context: { received: casing.color, ...context }\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Valide le fillPattern (polygones)\r\n */\r\nfunction validateFillPattern(pattern, errors, warnings, context) {\r\n    if (typeof pattern !== 'object' || pattern === null) {\r\n        errors.push({\r\n            field: 'style.fillPattern',\r\n            message: `fillPattern doit √™tre un objet`,\r\n            context: { received: typeof pattern, ...context }\r\n        });\r\n        return;\r\n    }\r\n\r\n    if ('enabled' in pattern && typeof pattern.enabled !== 'boolean') {\r\n        errors.push({\r\n            field: 'style.fillPattern.enabled',\r\n            message: `enabled doit √™tre un bool√©en`,\r\n            context: { received: typeof pattern.enabled, ...context }\r\n        });\r\n    }\r\n\r\n    if (pattern.type && !['diagonal', 'horizontal', 'vertical', 'cross', 'x'].includes(pattern.type)) {\r\n        errors.push({\r\n            field: 'style.fillPattern.type',\r\n            message: `type doit √™tre parmi: diagonal, horizontal, vertical, cross, x`,\r\n            context: { received: pattern.type, allowed: ['diagonal', 'horizontal', 'vertical', 'cross', 'x'], ...context }\r\n        });\r\n    }\r\n\r\n    if (pattern.color && !isValidHexColor(pattern.color)) {\r\n        errors.push({\r\n            field: 'style.fillPattern.color',\r\n            message: `Couleur invalide, format attendu: #RRGGBB`,\r\n            context: { received: pattern.color, ...context }\r\n        });\r\n    }\r\n\r\n    ['weight', 'density'].forEach(field => {\r\n        if (field in pattern && (typeof pattern[field] !== 'number' || pattern[field] < 0)) {\r\n            errors.push({\r\n                field: `style.fillPattern.${field}`,\r\n                message: `${field} doit √™tre un nombre >= 0`,\r\n                context: { received: pattern[field], ...context }\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Valide les styleRules\r\n */\r\n/**\r\n * @deprecated Utiliser GeoLeaf._StyleValidatorRules.validateStyleRules()\r\n */\r\nfunction validateStyleRules(rules, errors, warnings, context) {\r\n    return GeoLeaf._StyleValidatorRules.validateStyleRules(rules, errors, warnings, context);\r\n}\r\n\r\n/**\r\n * @deprecated Utiliser GeoLeaf._StyleValidatorRules.validateWhenCondition()\r\n */\r\nfunction validateWhenCondition(when, ruleIndex, errors, warnings, context) {\r\n    return GeoLeaf._StyleValidatorRules.validateWhenCondition(when, ruleIndex, errors, warnings, context);\r\n}\r\n\r\n/**\r\n * @deprecated Utiliser GeoLeaf._StyleValidatorRules.validateSimpleCondition()\r\n */\r\nfunction validateSimpleCondition(condition, ruleIndex, condIndex = null, errors, context) {\r\n    return GeoLeaf._StyleValidatorRules.validateSimpleCondition(condition, ruleIndex, condIndex, errors, context);\r\n}\r\n\r\n/**\r\n * @deprecated Utiliser GeoLeaf._StyleValidatorRules.validateScales()\r\n */\r\nfunction validateScales(styleData, errors, warnings, context) {\r\n    return GeoLeaf._StyleValidatorRules.validateScales(styleData, errors, warnings, context);\r\n}\r\n\r\n/**\r\n * @deprecated Utiliser GeoLeaf._StyleValidatorRules.validateLegend()\r\n */\r\nfunction validateLegend(legend, errors, warnings, context) {\r\n    return GeoLeaf._StyleValidatorRules.validateLegend(legend, errors, warnings, context);\r\n}\r\n\r\n/**\r\n * V√©rifie si une couleur est au format hex valide (#RRGGBB)\r\n */\r\nfunction isValidHexColor(color) {\r\n    return typeof color === 'string' && /^#[0-9A-Fa-f]{6}$/.test(color);\r\n}\r\n\r\n/**\r\n * Formate un r√©sultat de validation en message d'erreur lisible\r\n * @param {Object} validationResult - R√©sultat de validateStyle()\r\n * @param {string} styleFilePath - Chemin du fichier de style (optionnel)\r\n * @returns {string} Message format√©\r\n */\r\nfunction formatValidationErrors(validationResult, styleFilePath = '') {\r\n    if (validationResult.valid) {\r\n        return null;\r\n    }\r\n\r\n    const lines = [];\r\n    lines.push('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');\r\n    lines.push('‚ùå ERREUR DE VALIDATION DE STYLE GEOLEAF');\r\n    lines.push('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');\r\n\r\n    if (styleFilePath) {\r\n        lines.push(`Fichier: ${styleFilePath}`);\r\n        lines.push('');\r\n    }\r\n\r\n    if (validationResult.errors.length > 0) {\r\n        lines.push(`‚ùå ${validationResult.errors.length} erreur(s) d√©tect√©e(s):`);\r\n        lines.push('');\r\n\r\n        validationResult.errors.forEach((error, index) => {\r\n            lines.push(`  ${index + 1}. Champ: ${error.field}`);\r\n            lines.push(`     Message: ${error.message}`);\r\n            if (error.context) {\r\n                lines.push(`     Contexte: ${JSON.stringify(error.context, null, 2).split('\\n').join('\\n     ')}`);\r\n            }\r\n            if (error.stack) {\r\n                lines.push(`     Stack: ${error.stack.split('\\n').slice(0, 3).join('\\n     ')}`);\r\n            }\r\n            lines.push('');\r\n        });\r\n    }\r\n\r\n    if (validationResult.warnings.length > 0) {\r\n        lines.push(`‚ö†Ô∏è  ${validationResult.warnings.length} avertissement(s):`);\r\n        lines.push('');\r\n\r\n        validationResult.warnings.forEach((warning, index) => {\r\n            lines.push(`  ${index + 1}. Champ: ${warning.field}`);\r\n            lines.push(`     Message: ${warning.message}`);\r\n            if (warning.context) {\r\n                lines.push(`     Contexte: ${JSON.stringify(warning.context, null, 2).split('\\n').join('\\n     ')}`);\r\n            }\r\n            lines.push('');\r\n        });\r\n    }\r\n\r\n    lines.push('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');\r\n    lines.push('üí° Conseil: V√©rifiez la documentation dans docs/STYLE_FORMAT_SPEC.md');\r\n    lines.push('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');\r\n\r\n    return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Module Style Validator\r\n * Expose les fonctions publiques\r\n */\r\nconst StyleValidator = {\r\n    validateStyle,\r\n    formatValidationErrors,\r\n    StyleValidationError\r\n};\r\n\r\n// Exposer le module\r\nGeoLeaf._StyleValidator = StyleValidator;\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n    // Instance unique de la carte Leaflet g√©r√©e par GeoLeaf.Core\r\n    let _mapInstance = null;\r\n\r\n    // ---------------------------------------------------------\r\n    // Namespace global\r\n    // ---------------------------------------------------------\r\n    const root = (typeof globalThis !== \"undefined\" ? globalThis : window);\r\n    root.GeoLeaf = root.GeoLeaf || {};\r\n    root.GeoLeaf.Core = root.GeoLeaf.Core || {};\r\n\r\n    // ---------------------------------------------------------\r\n    // Logger unifi√© (d√©fini par geoleaf.logger-shim.js charg√© en premier)\r\n    // ---------------------------------------------------------\r\n    const Log = root.GeoLeaf.Log;\r\n\r\n    // ---------------------------------------------------------\r\n    // Module interne\r\n    // ---------------------------------------------------------\r\n    const Core = (function () {\r\n\r\n        let _map = null;\r\n        let _theme = \"light\";\r\n\r\n        // -----------------------------------------------------\r\n        // Normalisation des options d'initialisation\r\n        // -----------------------------------------------------\r\n        // eslint-disable-next-line no-unused-vars\r\n        function _normalizeOptions(options) {\r\n            if (!options || typeof options !== \"object\") {\r\n                throw new Error(\"[GeoLeaf.Core] init() requiert un objet d‚Äôoptions.\");\r\n            }\r\n\r\n            // Obligatoires\r\n            if (!options.target) {\r\n                throw new Error(\"[GeoLeaf.Core] L‚Äôoption 'target' est obligatoire.\");\r\n            }\r\n\r\n            if (!options.center || !Array.isArray(options.center) || options.center.length !== 2) {\r\n                throw new Error(\"[GeoLeaf.Core] L‚Äôoption 'center' doit √™tre un tableau [lat, lng].\");\r\n            }\r\n\r\n            if (typeof options.zoom !== \"number\") {\r\n                throw new Error(\"[GeoLeaf.Core] L‚Äôoption 'zoom' doit √™tre un nombre.\");\r\n            }\r\n\r\n            // Optionnels\r\n            return {\r\n                target: String(options.target),\r\n                center: options.center,\r\n                zoom: options.zoom,\r\n                theme: options.theme || \"light\",\r\n                mapOptions: options.mapOptions || {} // Options brutes Leaflet (optionnel)\r\n            };\r\n        }\r\n\r\n        // -----------------------------------------------------\r\n        // Gestion d‚Äôerreurs uniforme\r\n        // -----------------------------------------------------\r\n        function init(options = {}) {\r\n            const context = \"[GeoLeaf.Core]\";\r\n\r\n            try {\r\n                // V√©rification Leaflet\r\n                if (typeof L === \"undefined\") {\r\n                    throw new Error(\"Leaflet (L) est introuvable. Assurez-vous d‚Äôavoir charg√© Leaflet 1.9.x.\");\r\n                }\r\n\r\n                // V√©rification des options obligatoires\r\n                if (!options.mapId) {\r\n                    throw new Error(\"L‚Äôoption obligatoire 'mapId' est manquante.\");\r\n                }\r\n                const targetEl = document.getElementById(options.mapId);\r\n                if (!targetEl) {\r\n                    throw new Error(`Aucun √©l√©ment DOM trouv√© pour mapId='${options.mapId}'.`);\r\n                }\r\n\r\n                // Valeurs par d√©faut + normalisation\r\n                const center = Array.isArray(options.center) ? options.center : GeoLeaf.CONSTANTS.DEFAULT_CENTER;\r\n                const zoom = Number.isFinite(options.zoom) ? options.zoom : GeoLeaf.CONSTANTS.DEFAULT_ZOOM;\r\n                const theme = options.theme || \"light\";\r\n\r\n                // Cr√©ation ou r√©cup√©ration de la carte\r\n                if (_mapInstance) {\r\n                    Log.warn(`${context} Carte d√©j√† initialis√©e. Recyclage de l‚Äôinstance existante.`);\r\n                    return _mapInstance;\r\n                }\r\n\r\n                // Options Leaflet : on permet mapOptions, mais on force zoomControl √† true par d√©faut\r\n                const leafletMapOptions = Object.assign({}, options.mapOptions || {}, {\r\n                    center,\r\n                    zoom\r\n                });\r\n\r\n                if (typeof leafletMapOptions.zoomControl === \"undefined\") {\r\n                    leafletMapOptions.zoomControl = true;            // ‚úÖ boutons de zoom activ√©s par d√©faut\r\n                }\r\n                if (typeof leafletMapOptions.attributionControl === \"undefined\") {\r\n                    leafletMapOptions.attributionControl = false;    // tu gardes ton UI sans attribution Leaflet\r\n                }\r\n                if (typeof leafletMapOptions.zoomSnap === \"undefined\") {\r\n                    leafletMapOptions.zoomSnap = 0;                  // ‚úÖ D√©sactive le snapping = zoom totalement libre\r\n                }\r\n                if (typeof leafletMapOptions.zoomDelta === \"undefined\") {\r\n                    leafletMapOptions.zoomDelta = 0.25;              // ‚úÖ Incr√©ments de zoom pour les boutons +/-\r\n                }\r\n                if (typeof leafletMapOptions.wheelPxPerZoomLevel === \"undefined\") {\r\n                    leafletMapOptions.wheelPxPerZoomLevel = 120;     // ‚úÖ Sensibilit√© de la molette\r\n                }\r\n\r\n                _mapInstance = L.map(targetEl, leafletMapOptions);\r\n                _map = _mapInstance; // ‚úÖ Synchronisation de la variable locale\r\n\r\n                // Application du th√®me\r\n                try {\r\n                    if (global.GeoLeaf && global.GeoLeaf.UI && typeof global.GeoLeaf.UI.applyTheme === \"function\") {\r\n                        global.GeoLeaf.UI.applyTheme(theme);\r\n                    }\r\n                } catch (themeError) {\r\n                    Log.warn(`${context} Impossible d'appliquer le th√®me :`, themeError);\r\n                }\r\n\r\n                // Initialisation du module Legend si disponible et activ√©\r\n                const uiConfig = global.GeoLeaf.Config && global.GeoLeaf.Config.get ? global.GeoLeaf.Config.get('ui') : null;\r\n                const showLegend = uiConfig ? (uiConfig.showLegend !== false) : true;\r\n\r\n                if (showLegend && global.GeoLeaf && global.GeoLeaf.Legend && typeof global.GeoLeaf.Legend.init === \"function\") {\r\n                    try {\r\n                        global.GeoLeaf.Legend.init(_mapInstance, {\r\n                            position: \"bottomleft\",\r\n                            collapsible: true,\r\n                            collapsed: false\r\n                        });\r\n                    } catch (legendError) {\r\n                        Log.warn(`${context} Impossible d'initialiser Legend :`, legendError);\r\n                    }\r\n                }\r\n\r\n                Log.info(`${context} Carte initialis√©e avec succ√®s.`);\r\n                return _mapInstance;\r\n\r\n            } catch (err) {\r\n                Log.error(`${context} ERREUR :`, err.message);\r\n\r\n                // Callback global utilisateur\r\n                if (typeof global.GeoLeaf?.Core?.onError === \"function\") {\r\n                    try {\r\n                        global.GeoLeaf.Core.onError(err);\r\n                    } catch (cbErr) {\r\n                        Log.error(`${context} Erreur dans Core.onError() :`, cbErr);\r\n                    }\r\n                }\r\n\r\n                // ‚úÖ S'assurer que les variables sont coh√©rentes en cas d'erreur\r\n                _mapInstance = null;\r\n                _map = null;\r\n\r\n                return null;\r\n            }\r\n        }\r\n\r\n        // -----------------------------------------------------\r\n        // Compatibilit√© descendante : initMap\r\n        // -----------------------------------------------------\r\n        function initMap(a, b, c, d) {\r\n            Log.warn(\"[GeoLeaf.Core] GeoLeaf.Core.initMap() est obsol√®te, utilisez GeoLeaf.Core.init().\");\r\n\r\n            let options = null;\r\n\r\n            if (root.GeoLeaf && root.GeoLeaf.Config && typeof root.GeoLeaf.Config.get === \"function\") {\r\n                try {\r\n                    const mapCfg = root.GeoLeaf.Config.get(\"map\") || {};\r\n                    const uiCfg = root.GeoLeaf.Config.get(\"ui\") || {};\r\n\r\n                    options = {\r\n                        target: mapCfg.target || \"geoleaf-map\",\r\n                        center: mapCfg.center || GeoLeaf.CONSTANTS.DEFAULT_CENTER,\r\n                        zoom: (typeof mapCfg.zoom === \"number\" ? mapCfg.zoom : GeoLeaf.CONSTANTS.DEFAULT_ZOOM),\r\n                        theme: uiCfg.theme || \"light\",\r\n                        mapOptions: mapCfg.mapOptions || {}\r\n                    };\r\n\r\n                    return init(options);\r\n                } catch (err) {\r\n                    Log.error(\"[GeoLeaf.Core] initMap() n‚Äôa pas pu construire les options √† partir de GeoLeaf.Config :\", err);\r\n                    // on continue vers les heuristiques d‚Äôarguments\r\n                }\r\n            }\r\n\r\n            // Cas objet unique : initMap({ target, center, zoom, theme })\r\n            if (a && typeof a === \"object\" && !Array.isArray(a)) {\r\n                return init(a);\r\n            }\r\n\r\n            // Cas ancienne signature : initMap(target, center, zoom, theme?)\r\n            if (typeof a === \"string\" && Array.isArray(b) && typeof c === \"number\") {\r\n                const legacyOptions = {\r\n                    target: a,\r\n                    center: b,\r\n                    zoom: c,\r\n                    theme: d || \"light\"\r\n                };\r\n                return init(legacyOptions);\r\n            }\r\n\r\n            Log.error(\"[GeoLeaf.Core] initMap() appel√© avec une signature obsol√®te ou invalide. Utilisez GeoLeaf.Core.init({ target, center, zoom, theme }).\");\r\n            return null;\r\n        }\r\n\r\n        // -----------------------------------------------------\r\n        // Th√®me\r\n        // -----------------------------------------------------\r\n        function _applyThemeToBody(theme) {\r\n            const body = document.body;\r\n            if (!body) {\r\n                Log.warn(\"[GeoLeaf.Core] Impossible d‚Äôappliquer le th√®me : document.body introuvable.\");\r\n                return;\r\n            }\r\n            body.classList.remove(\"gl-theme-light\", \"gl-theme-dark\");\r\n            body.classList.add(theme === \"dark\" ? \"gl-theme-dark\" : \"gl-theme-light\");\r\n        }\r\n\r\n        function setTheme(theme) {\r\n            if (!theme || (theme !== \"light\" && theme !== \"dark\")) {\r\n                Log.warn(\"[GeoLeaf.Core] setTheme() : th√®me invalide ‚Üí\", theme);\r\n                return;\r\n            }\r\n            _theme = theme;\r\n            _applyThemeToBody(theme);\r\n        }\r\n\r\n        function getTheme() {\r\n            return _theme;\r\n        }\r\n\r\n        // -----------------------------------------------------\r\n        // Acc√®s √† la map\r\n        // -----------------------------------------------------\r\n        function getMap() {\r\n            return _map;\r\n        }\r\n\r\n        // -----------------------------------------------------\r\n        // API publique\r\n        // -----------------------------------------------------\r\n        return {\r\n            init,      // nouvelle API normalis√©e\r\n            initMap,   // alias r√©trocompatible pour la d√©mo et anciens appels\r\n            getMap,\r\n            setTheme,\r\n            getTheme\r\n        };\r\n\r\n    })();\r\n\r\n    root.GeoLeaf.Core = Core;\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf UI Module - Theme Management\r\n * Gestion du th√®me dark/light avec persistance localStorage\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    GeoLeaf._UITheme = GeoLeaf._UITheme || {};\r\n\r\n    // ========================================\r\n    //   CONSTANTES\r\n    // ========================================\r\n\r\n    const THEME_KEY = \"geoleaf_theme\";\r\n    const THEME_LIGHT = \"light\";\r\n    const THEME_DARK = \"dark\";\r\n\r\n    // ========================================\r\n    //   √âTAT INTERNE\r\n    // ========================================\r\n\r\n    /**\r\n     * Source de v√©rit√© unique pour le th√®me actuel\r\n     * @type {string|null}\r\n     * @private\r\n     */\r\n    let _currentTheme = null;\r\n\r\n    // ========================================\r\n    //   FONCTIONS PUBLIQUES\r\n    // ========================================\r\n\r\n    /**\r\n     * Retourne le th√®me courant (\"light\" ou \"dark\").\r\n     * @returns {string} Theme actuel\r\n     */\r\n    function getCurrentTheme() {\r\n        // Si d√©j√† en m√©moire, retourner directement\r\n        if (_currentTheme) {\r\n            return _currentTheme;\r\n        }\r\n\r\n        // Sinon, fallback sur le DOM\r\n        if (document.body.classList.contains(\"gl-theme-dark\")) {\r\n            _currentTheme = THEME_DARK;\r\n            return THEME_DARK;\r\n        }\r\n        if (document.body.classList.contains(\"gl-theme-light\")) {\r\n            _currentTheme = THEME_LIGHT;\r\n            return THEME_LIGHT;\r\n        }\r\n\r\n        // Fallback final\r\n        _currentTheme = THEME_DARK;\r\n        return THEME_DARK;\r\n    }\r\n\r\n    /**\r\n     * Applique un th√®me au <body> et synchronise le bouton.\r\n     * @param {string} theme - \"light\" ou \"dark\"\r\n     */\r\n    function applyTheme(theme) {\r\n        const normalized =\r\n            theme === THEME_LIGHT || theme === THEME_DARK\r\n                ? theme\r\n                : THEME_DARK;\r\n\r\n        Log.debug('[UI.Theme] applyTheme:', theme, '‚Üí', normalized);\r\n\r\n        // Mettre √† jour l'√©tat centralis√© AVANT le DOM\r\n        _currentTheme = normalized;\r\n\r\n        // Mise √† jour du DOM sur body\r\n        document.body.classList.remove(\"gl-theme-light\", \"gl-theme-dark\");\r\n        document.body.classList.add(\r\n            normalized === THEME_DARK ? \"gl-theme-dark\" : \"gl-theme-light\"\r\n        );\r\n\r\n        // Appliquer aussi le th√®me au conteneur de carte (pour support fullscreen)\r\n        const mapContainer = document.getElementById(\"geoleaf-map\");\r\n        if (mapContainer) {\r\n            mapContainer.classList.remove(\"gl-theme-light\", \"gl-theme-dark\");\r\n            mapContainer.classList.add(\r\n                normalized === THEME_DARK ? \"gl-theme-dark\" : \"gl-theme-light\"\r\n            );\r\n        }\r\n\r\n        // Sauvegarde locale\r\n        try {\r\n            // SAFE: Use StorageHelper with Theme validator\r\n            const StorageHelper = GeoLeaf.StorageHelper;\r\n            const ThemeValidator = GeoLeaf.Validators?.Theme;\r\n\r\n            if (StorageHelper && ThemeValidator) {\r\n                StorageHelper.setItem(THEME_KEY, normalized, ThemeValidator);\r\n            } else {\r\n                // Fallback if StorageHelper not loaded yet\r\n                global.localStorage.setItem(THEME_KEY, normalized);\r\n            }\r\n        } catch (e) {\r\n            // G√©rer explicitement l'absence de localStorage\r\n            if (Log) Log.warn(\"[UI.Theme] localStorage non disponible, th√®me non persist√©.\");\r\n        }\r\n\r\n        // Synchronise le bouton si pr√©sent\r\n        updateToggleButton(normalized);\r\n\r\n        // √âv√®nement global pour les autres modules\r\n        if (global.dispatchEvent) {\r\n            global.dispatchEvent(\r\n                new CustomEvent(\"geoleaf:ui-theme-changed\", {\r\n                    detail: { theme: normalized }\r\n                })\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Bascule le th√®me courant (light <-> dark).\r\n     */\r\n    function toggleTheme() {\r\n        const current = getCurrentTheme();\r\n        const next = current === THEME_DARK ? THEME_LIGHT : THEME_DARK;\r\n        Log.debug('[UI.Theme] toggleTheme:', current, '‚Üí', next);\r\n        applyTheme(next);\r\n    }\r\n\r\n    /**\r\n     * D√©termine le th√®me initial :\r\n     * 1) localStorage si disponible\r\n     * 2) class du <body> si d√©j√† d√©finie\r\n     * 3) sinon, \"dark\"\r\n     * @returns {string} Theme initial\r\n     * @private\r\n     */\r\n    function resolveInitialTheme() {\r\n        let stored = null;\r\n\r\n        try {\r\n            // SAFE: Use StorageHelper with Theme validator\r\n            const StorageHelper = GeoLeaf.StorageHelper;\r\n            const ThemeValidator = GeoLeaf.Validators?.Theme;\r\n\r\n            if (StorageHelper && ThemeValidator) {\r\n                stored = StorageHelper.getItem(THEME_KEY, null, ThemeValidator);\r\n            } else {\r\n                // Fallback if StorageHelper not loaded yet\r\n                stored = global.localStorage.getItem(THEME_KEY);\r\n            }\r\n        } catch (e) {\r\n            stored = null;\r\n        }\r\n\r\n        if (stored === THEME_LIGHT || stored === THEME_DARK) {\r\n            return stored;\r\n        }\r\n\r\n        const bodyTheme = getCurrentTheme();\r\n        if (bodyTheme === THEME_LIGHT || bodyTheme === THEME_DARK) {\r\n            return bodyTheme;\r\n        }\r\n\r\n        return THEME_DARK;\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re le bouton de th√®me dans le DOM.\r\n     * Par convention on utilise l'attribut data-gl-role=\"theme-toggle\".\r\n     * @returns {HTMLElement|null}\r\n     * @private\r\n     */\r\n    function getToggleButton() {\r\n        return document.querySelector('[data-gl-role=\"theme-toggle\"]');\r\n    }\r\n\r\n    /**\r\n     * Met √† jour l'√©tat visuel/ARIA du bouton de th√®me.\r\n     * @param {string} theme - \"light\" ou \"dark\"\r\n     * @private\r\n     */\r\n    function updateToggleButton(theme) {\r\n        const btn = getToggleButton();\r\n        if (!btn) return;\r\n\r\n        const isDark = theme === THEME_DARK;\r\n\r\n        btn.setAttribute(\"data-gl-theme-state\", isDark ? \"dark\" : \"light\");\r\n        btn.setAttribute(\"aria-pressed\", String(isDark));\r\n        btn.setAttribute(\r\n            \"aria-label\",\r\n            isDark ? \"Basculer en th√®me clair\" : \"Basculer en th√®me sombre\"\r\n        );\r\n        btn.title = isDark ? \"Th√®me clair\" : \"Th√®me sombre\";\r\n    }\r\n\r\n    /**\r\n     * Initialise la gestion du bouton de th√®me.\r\n     * @param {object} [options] - Options de configuration\r\n     * @param {string} [options.buttonSelector] - S√©lecteur custom du bouton\r\n     * @param {boolean} [options.autoInitOnDomReady] - Si true, attend DOMContentLoaded\r\n     */\r\n    function initThemeToggle(options = {}) {\r\n        const cfg = {\r\n            buttonSelector: options.buttonSelector || '[data-gl-role=\"theme-toggle\"]',\r\n            autoInitOnDomReady:\r\n                typeof options.autoInitOnDomReady === \"boolean\"\r\n                    ? options.autoInitOnDomReady\r\n                    : false\r\n        };\r\n\r\n        const doInit = () => {\r\n            const initialTheme = resolveInitialTheme();\r\n            Log.debug('[UI.Theme] initThemeToggle:', initialTheme);\r\n            applyTheme(initialTheme);\r\n\r\n            const btn = document.querySelector(cfg.buttonSelector);\r\n            if (!btn) {\r\n                Log.warn('[UI.Theme] Bouton de th√®me introuvable:', cfg.buttonSelector);\r\n                return;\r\n            }\r\n\r\n            Log.debug('[UI.Theme] Bouton de th√®me trouv√©');\r\n\r\n            // Accessibilit√© : <button> natif ou r√¥le \"button\"\r\n            const tag = (btn.tagName || \"\").toLowerCase();\r\n            if (tag === \"button\") {\r\n                try {\r\n                    btn.type = btn.type || \"button\";\r\n                } catch (e) {\r\n                    // Certains √©l√©ments custom peuvent lever une erreur\r\n                }\r\n            } else {\r\n                btn.setAttribute(\"role\", \"button\");\r\n                btn.setAttribute(\"tabindex\", \"0\");\r\n            }\r\n\r\n            // Premi√®re synchro de l'√©tat visuel\r\n            updateToggleButton(initialTheme);\r\n\r\n            // Clic souris\r\n            btn.addEventListener(\"click\", (evt) => {\r\n                evt.preventDefault();\r\n                toggleTheme();\r\n            });\r\n\r\n            // Clavier (Enter / Space)\r\n            btn.addEventListener(\"keydown\", (evt) => {\r\n                if (evt.key === \"Enter\" || evt.key === \" \" || evt.key === \"Spacebar\") {\r\n                    evt.preventDefault();\r\n                    toggleTheme();\r\n                }\r\n            });\r\n        };        if (cfg.autoInitOnDomReady) {\r\n            if (document.readyState === \"loading\") {\r\n                document.addEventListener(\"DOMContentLoaded\", doInit, { once: true });\r\n            } else {\r\n                doInit();\r\n            }\r\n        } else {\r\n            doInit();\r\n        }\r\n    }\r\n\r\n    // ========================================\r\n    //   EXPORT\r\n    // ========================================\r\n\r\n    GeoLeaf._UITheme = {\r\n        initThemeToggle,\r\n        toggleTheme,\r\n        applyTheme,\r\n        getCurrentTheme,\r\n        // Constantes expos√©es\r\n        THEME_LIGHT,\r\n        THEME_DARK\r\n    };\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf UI Module - Controls\r\n * Contr√¥les Leaflet personnalis√©s (fullscreen, zoom, scale, etc.)\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n    const Utils = GeoLeaf.Utils;\r\n\r\n    GeoLeaf._UIControls = GeoLeaf._UIControls || {};\r\n\r\n    // ========================================\r\n    //   FULLSCREEN CONTROL\r\n    // ========================================\r\n\r\n    /**\r\n     * Gestion du plein √©cran pour la carte\r\n     * @param {L.Map} map - Instance de la carte Leaflet\r\n     * @param {HTMLElement} mapContainer - Le conteneur de la carte √† mettre en plein √©cran\r\n     */\r\n    function initFullscreenControl(map, mapContainer) {\r\n        if (!map || !mapContainer) {\r\n            if (Log) Log.warn(\"[UI.Controls] initFullscreenControl: carte ou conteneur manquant\");\r\n            return;\r\n        }\r\n\r\n        // V√©rifier que Leaflet est disponible\r\n        if (typeof L === \"undefined\" || !L.Control) {\r\n            if (Log) Log.warn(\"[UI.Controls] Leaflet n'est pas disponible\");\r\n            return;\r\n        }\r\n\r\n        // Contr√¥le Leaflet personnalis√©\r\n        L.Control.Fullscreen = L.Control.extend({\r\n            options: {\r\n                position: \"topleft\"\r\n            },\r\n\r\n            onAdd: function (map) {\r\n                const container = L.DomUtil.create(\r\n                    \"div\",\r\n                    \"leaflet-control-fullscreen leaflet-bar leaflet-control\"\r\n                );\r\n                const link = L.DomUtil.create(\"a\", \"\", container);\r\n\r\n                link.href = \"#\";\r\n                link.title = \"Plein √©cran\";\r\n                link.setAttribute(\"role\", \"button\");\r\n                link.setAttribute(\"aria-label\", \"Activer le mode plein √©cran\");\r\n\r\n                // Fullscreen ENTER icon (static SVG)\r\n                // SAFE: SVG statique hardcod√©\r\n                const svgEnter = GeoLeaf.DOMSecurity.createSVGIcon(18, 18, 'M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3', {\r\n                    stroke: 'currentColor',\r\n                    strokeWidth: '2',\r\n                    fill: 'none'\r\n                });\r\n                svgEnter.classList.add('fullscreen-enter-icon');\r\n\r\n                // Fullscreen EXIT icon (static SVG)\r\n                // SAFE: SVG statique hardcod√©\r\n                const svgExit = GeoLeaf.DOMSecurity.createSVGIcon(18, 18, 'M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3', {\r\n                    stroke: 'currentColor',\r\n                    strokeWidth: '2',\r\n                    fill: 'none'\r\n                });\r\n                svgExit.classList.add('fullscreen-exit-icon');\r\n                svgExit.style.display = 'none'; // Cach√© par d√©faut\r\n\r\n                link.appendChild(svgEnter);\r\n                link.appendChild(svgExit);\r\n\r\n                // √âviter la propagation vers la carte\r\n                L.DomEvent.disableClickPropagation(container);\r\n                L.DomEvent.disableScrollPropagation(container);\r\n\r\n                // Debounce pour invalidateSize\r\n                const debouncedInvalidateSize =\r\n                    Utils?.debounce\r\n                        ? Utils.debounce(() => map.invalidateSize(), 200)\r\n                        : () => map.invalidateSize();\r\n\r\n                // Fonction pour mettre √† jour l'ic√¥ne\r\n                const updateIcon = (isFullscreen) => {\r\n                    if (isFullscreen) {\r\n                        svgEnter.style.display = 'none';\r\n                        svgExit.style.display = 'block';\r\n                    } else {\r\n                        svgEnter.style.display = 'block';\r\n                        svgExit.style.display = 'none';\r\n                    }\r\n                };\r\n\r\n                const toggleFullscreen = (e) => {\r\n                    L.DomEvent.preventDefault(e);\r\n\r\n                    if (!document.fullscreenElement) {\r\n                        // Entrer en plein √©cran\r\n                        mapContainer\r\n                            .requestFullscreen()\r\n                            .then(() => {\r\n                                link.classList.add(\"is-fullscreen\");\r\n                                link.title = \"Quitter le plein √©cran\";\r\n                                link.setAttribute(\r\n                                    \"aria-label\",\r\n                                    \"Quitter le mode plein √©cran\"\r\n                                );\r\n                                updateIcon(true);\r\n                                debouncedInvalidateSize();\r\n                            })\r\n                            .catch((err) => {\r\n                                if (Log) Log.error(\"[UI.Controls] Erreur plein √©cran:\", err);\r\n                            });\r\n                    } else {\r\n                        // Quitter le plein √©cran\r\n                        document\r\n                            .exitFullscreen()\r\n                            .then(() => {\r\n                                link.classList.remove(\"is-fullscreen\");\r\n                                link.title = \"Plein √©cran\";\r\n                                link.setAttribute(\r\n                                    \"aria-label\",\r\n                                    \"Activer le mode plein √©cran\"\r\n                                );\r\n                                updateIcon(false);\r\n                                debouncedInvalidateSize();\r\n                            })\r\n                            .catch((err) => {\r\n                                if (Log) Log.error(\"[UI.Controls] Erreur sortie plein √©cran:\", err);\r\n                            });\r\n                    }\r\n                };\r\n\r\n                const fullscreenChangeHandler = () => {\r\n                    if (!document.fullscreenElement) {\r\n                        link.classList.remove(\"is-fullscreen\");\r\n                        link.title = \"Plein √©cran\";\r\n                        link.setAttribute(\r\n                            \"aria-label\",\r\n                            \"Activer le mode plein √©cran\"\r\n                        );\r\n                        updateIcon(false);\r\n                        debouncedInvalidateSize();\r\n                    }\r\n                };\r\n\r\n                L.DomEvent.on(link, \"click\", toggleFullscreen);\r\n                L.DomEvent.on(link, \"keydown\", (e) => {\r\n                    if (\r\n                        e.key === \"Enter\" ||\r\n                        e.key === \" \" ||\r\n                        e.key === \"Spacebar\"\r\n                    ) {\r\n                        toggleFullscreen(e);\r\n                    }\r\n                });\r\n\r\n                document.addEventListener(\r\n                    \"fullscreenchange\",\r\n                    fullscreenChangeHandler\r\n                );\r\n\r\n                this._fullscreenChangeHandler = fullscreenChangeHandler;\r\n                this._toggleFullscreen = toggleFullscreen;\r\n                this._link = link;\r\n                this._mapContainer = mapContainer;\r\n                this._debouncedInvalidateSize = debouncedInvalidateSize;\r\n\r\n                return container;\r\n            },\r\n\r\n            onRemove: function (_map) {\r\n                // MEMORY LEAK FIX (Phase 2): Clean up circular references in closures\r\n                if (this._fullscreenChangeHandler) {\r\n                    document.removeEventListener(\r\n                        \"fullscreenchange\",\r\n                        this._fullscreenChangeHandler\r\n                    );\r\n                    this._fullscreenChangeHandler = null;\r\n                }\r\n\r\n                if (this._link) {\r\n                    L.DomEvent.off(this._link, \"click\", this._toggleFullscreen);\r\n                    L.DomEvent.off(this._link, \"keydown\");\r\n                    this._link = null;\r\n                }\r\n\r\n                // Clean up closure references to prevent memory leaks\r\n                this._toggleFullscreen = null;\r\n                this._mapContainer = null;\r\n                this._debouncedInvalidateSize = null;\r\n            }\r\n        });\r\n\r\n        new L.Control.Fullscreen().addTo(map);\r\n        if (Log) Log.info(\"[UI.Controls] Contr√¥le plein √©cran ajout√© √† la carte\");\r\n    }\r\n\r\n    // ========================================\r\n    //   GEOLOCATION CONTROL\r\n    // ========================================\r\n\r\n    /**\r\n     * Gestion de la g√©olocalisation pour centrer la carte sur la position de l'utilisateur\r\n     * @param {L.Map} map - Instance de la carte Leaflet\r\n     * @param {Object} config - Configuration incluant ui.enableGeolocation\r\n     */\r\n    function initGeolocationControl(map, config) {\r\n        if (!map) {\r\n            if (Log) Log.warn(\"[UI.Controls] initGeolocationControl: carte manquante\");\r\n            return;\r\n        }\r\n\r\n        // V√©rifier si la g√©olocalisation est activ√©e dans la config\r\n        if (!config?.ui?.enableGeolocation) {\r\n            if (Log) Log.info(\"[UI.Controls] G√©olocalisation d√©sactiv√©e dans la configuration\");\r\n            return;\r\n        }\r\n\r\n        // V√©rifier que Leaflet est disponible\r\n        if (typeof L === \"undefined\" || !L.Control) {\r\n            if (Log) Log.warn(\"[UI.Controls] Leaflet n'est pas disponible\");\r\n            return;\r\n        }\r\n\r\n        // V√©rifier que l'API de g√©olocalisation est disponible\r\n        if (!navigator.geolocation) {\r\n            if (Log) Log.warn(\"[UI.Controls] La g√©olocalisation n'est pas support√©e par ce navigateur\");\r\n            return;\r\n        }\r\n\r\n        // Marqueur de position utilisateur (stock√© pour pouvoir le supprimer/mettre √† jour)\r\n        let userMarker = null;\r\n        let accuracyCircle = null;\r\n\r\n        // Contr√¥le Leaflet personnalis√©\r\n        L.Control.Geolocation = L.Control.extend({\r\n            options: {\r\n                position: \"topleft\"\r\n            },\r\n\r\n            onAdd: function (map) {\r\n                const container = L.DomUtil.create(\r\n                    \"div\",\r\n                    \"leaflet-control-geolocation leaflet-bar leaflet-control\"\r\n                );\r\n                const link = L.DomUtil.create(\"a\", \"\", container);\r\n\r\n                link.href = \"#\";\r\n                link.title = \"G√©olocalisation ON/OFF\";\r\n                link.setAttribute(\"role\", \"button\");\r\n                link.setAttribute(\"aria-label\", \"Activer/D√©sactiver le suivi GPS\");\r\n\r\n                // Ic√¥ne de g√©olocalisation (utilisation d'un SVG ou Unicode)\r\n                // SAFE: SVG statique hardcod√©, pas de donn√©es utilisateur\r\n                const geoSvg = GeoLeaf.DOMSecurity.createSVGIcon(18, 18, 'M12 2 C 6.5 2 2 6.5 2 12 C 2 17.5 6.5 22 12 22 C 17.5 22 22 17.5 22 12 C 22 6.5 17.5 2 12 2 M12 9 C 10.3 9 9 10.3 9 12 C 9 13.7 10.3 15 12 15 C 13.7 15 15 13.7 15 12 C 15 10.3 13.7 9 12 9', {\r\n                    stroke: 'currentColor',\r\n                    strokeWidth: '2',\r\n                    fill: 'none'\r\n                });\r\n                link.appendChild(geoSvg);\r\n\r\n                // √âviter la propagation vers la carte\r\n                L.DomEvent.disableClickPropagation(container);\r\n                L.DomEvent.disableScrollPropagation(container);\r\n\r\n                const toggleGeolocation = (e) => {\r\n                    L.DomEvent.preventDefault(e);\r\n\r\n                    // Si d√©j√† actif, d√©sactiver\r\n                    if (window.GeoLeaf.UI._geolocationActive) {\r\n                        // D√©sactiver le tracking\r\n                        if (window.GeoLeaf.UI._geolocationWatchId !== null) {\r\n                            navigator.geolocation.clearWatch(window.GeoLeaf.UI._geolocationWatchId);\r\n                            window.GeoLeaf.UI._geolocationWatchId = null;\r\n                        }\r\n\r\n                        // Retirer les marqueurs et cercles\r\n                        if (userMarker) {\r\n                            map.removeLayer(userMarker);\r\n                            userMarker = null;\r\n                        }\r\n                        if (accuracyCircle) {\r\n                            map.removeLayer(accuracyCircle);\r\n                            accuracyCircle = null;\r\n                        }\r\n\r\n                        // R√©initialiser l'√©tat\r\n                        window.GeoLeaf.UI._geolocationActive = false;\r\n                        window.GeoLeaf.UI._userPosition = null;\r\n\r\n                        link.classList.remove(\"is-active\");\r\n                        link.classList.remove(\"is-locating\");\r\n\r\n                        if (Log) Log.info(\"[UI.Controls] G√©olocalisation d√©sactiv√©e\");\r\n                        return;\r\n                    }\r\n\r\n                    // Activer le mode g√©olocalisation\r\n                    link.classList.add(\"is-locating\");\r\n\r\n                    // Utiliser watchPosition pour un tracking continu\r\n                    window.GeoLeaf.UI._geolocationWatchId = navigator.geolocation.watchPosition(\r\n                        (position) => {\r\n                            const { latitude, longitude, accuracy } = position.coords;\r\n\r\n                            // Premi√®re activation : centrer la carte\r\n                            if (!window.GeoLeaf.UI._geolocationActive) {\r\n                                map.setView([latitude, longitude], 16, {\r\n                                    animate: true,\r\n                                    duration: 0.5\r\n                                });\r\n                            } else {\r\n                                // Mise √† jour continue : d√©placer le marqueur sans recentrer\r\n                                // (sauf si on veut un mode \"suivi\" permanent)\r\n                            }\r\n\r\n                            // Supprimer l'ancien marqueur et cercle s'ils existent\r\n                            if (userMarker) {\r\n                                map.removeLayer(userMarker);\r\n                            }\r\n                            if (accuracyCircle) {\r\n                                map.removeLayer(accuracyCircle);\r\n                            }\r\n\r\n                            // Cr√©er un nouveau marqueur pour la position de l'utilisateur\r\n                            userMarker = L.marker([latitude, longitude], {\r\n                                icon: L.divIcon({\r\n                                    className: 'gl-user-location-marker gl-user-location-marker--active',\r\n                                    html: `<div class=\"gl-user-location-dot gl-user-location-dot--active\"></div>`,\r\n                                    iconSize: [22, 22],\r\n                                    iconAnchor: [11, 11]\r\n                                }),\r\n                                zIndexOffset: 1000\r\n                            }).addTo(map);\r\n\r\n                            // Ajouter un cercle de pr√©cision\r\n                            if (accuracy && accuracy < 1000) {\r\n                                const interactiveShapes = GeoLeaf.Config.get('ui.interactiveShapes', false);\r\n                                accuracyCircle = L.circle([latitude, longitude], {\r\n                                    radius: accuracy,\r\n                                    className: 'gl-user-location-accuracy',\r\n                                    fillColor: '#4285F4',\r\n                                    fillOpacity: 0.1,\r\n                                    stroke: true,\r\n                                    color: '#4285F4',\r\n                                    opacity: 0.3,\r\n                                    weight: 1,\r\n                                    interactive: interactiveShapes\r\n                                }).addTo(map);\r\n                            }\r\n\r\n                            // Mettre √† jour l'√©tat\r\n                            window.GeoLeaf.UI._geolocationActive = true;\r\n                            link.classList.remove(\"is-locating\");\r\n                            link.classList.add(\"is-active\");\r\n\r\n                            // Stocker la position GPS globalement pour utilisation par d'autres fonctionnalit√©s (ex: recherche par proximit√©)\r\n                            if (window.GeoLeaf && window.GeoLeaf.UI) {\r\n                                window.GeoLeaf.UI._userPosition = {\r\n                                    lat: latitude,\r\n                                    lng: longitude,\r\n                                    accuracy: accuracy,\r\n                                    timestamp: Date.now()\r\n                                };\r\n                            }\r\n\r\n                            if (Log) Log.debug(\"[UI.Controls] Position GPS mise √† jour:\", latitude, longitude);\r\n                        },\r\n                        (error) => {\r\n                            link.classList.remove(\"is-locating\");\r\n                            link.classList.remove(\"is-active\");\r\n                            window.GeoLeaf.UI._geolocationActive = false;\r\n\r\n                            let errorMessage = \"Impossible d'obtenir votre position\";\r\n                            switch (error.code) {\r\n                                case error.PERMISSION_DENIED:\r\n                                    errorMessage = \"Permission de g√©olocalisation refus√©e\";\r\n                                    break;\r\n                                case error.POSITION_UNAVAILABLE:\r\n                                    errorMessage = \"Position indisponible\";\r\n                                    break;\r\n                                case error.TIMEOUT:\r\n                                    errorMessage = \"D√©lai de g√©olocalisation d√©pass√©\";\r\n                                    break;\r\n                            }\r\n\r\n                            if (Log) Log.error(\"[UI.Controls] Erreur de g√©olocalisation:\", error);\r\n\r\n                            // Afficher un message √† l'utilisateur (peut √™tre personnalis√©)\r\n                            if (window.alert) {\r\n                                alert(errorMessage);\r\n                            }\r\n                        },\r\n                        {\r\n                            enableHighAccuracy: true,\r\n                            timeout: 10000,\r\n                            maximumAge: 0\r\n                        }\r\n                    );\r\n                };\r\n\r\n                L.DomEvent.on(link, \"click\", toggleGeolocation);\r\n                L.DomEvent.on(link, \"keydown\", (e) => {\r\n                    if (\r\n                        e.key === \"Enter\" ||\r\n                        e.key === \" \" ||\r\n                        e.key === \"Spacebar\"\r\n                    ) {\r\n                        toggleGeolocation(e);\r\n                    }\r\n                });\r\n\r\n                this._link = link;\r\n                this._userMarker = userMarker;\r\n\r\n                return container;\r\n            },\r\n\r\n            onRemove: function (map) {\r\n                if (this._link) {\r\n                    L.DomEvent.off(this._link, \"click\");\r\n                    L.DomEvent.off(this._link, \"keydown\");\r\n                    this._link = null;\r\n                }\r\n\r\n                if (this._userMarker) {\r\n                    map.removeLayer(this._userMarker);\r\n                    this._userMarker = null;\r\n                }\r\n            }\r\n        });\r\n\r\n        new L.Control.Geolocation().addTo(map);\r\n        if (Log) Log.info(\"[UI.Controls] Contr√¥le de g√©olocalisation ajout√© √† la carte\");\r\n    }\r\n\r\n    // ========================================\r\n    //   POI ADD CONTROL\r\n    // ========================================\r\n\r\n    /**\r\n     * Gestion du bouton d'ajout de POI sur la carte\r\n     * Permet aux utilisateurs d'ajouter de nouveaux points d'int√©r√™t\r\n     * @param {L.Map} map - Instance de la carte Leaflet\r\n     * @param {Object} config - Configuration incluant ui.showAddPoi et poi.*\r\n     */\r\n    function initPoiAddControl(map, config) {\r\n        if (!map) {\r\n            if (Log) Log.warn(\"[UI.Controls] initPoiAddControl: carte manquante\");\r\n            return;\r\n        }\r\n\r\n        // V√©rifier si le bouton POI Add est activ√©\r\n        if (!config?.ui?.showAddPoi) {\r\n            if (Log) Log.debug(\"[UI.Controls] Bouton POI Add d√©sactiv√© dans la configuration\");\r\n            return;\r\n        }\r\n\r\n        // V√©rifier que Leaflet est disponible\r\n        if (typeof L === \"undefined\" || !L.Control) {\r\n            if (Log) Log.warn(\"[UI.Controls] Leaflet n'est pas disponible\");\r\n            return;\r\n        }\r\n\r\n        // V√©rifier que les modules POI sont charg√©s\r\n        if (!GeoLeaf?.POI?.AddForm || !GeoLeaf?.POI?.PlacementMode) {\r\n            if (Log) Log.warn(\"[UI.Controls] Modules POI non charg√©s\");\r\n            return;\r\n        }\r\n\r\n        // Contr√¥le Leaflet personnalis√© pour l'ajout de POI\r\n        L.Control.PoiAdd = L.Control.extend({\r\n            options: {\r\n                position: \"topleft\"\r\n            },\r\n\r\n            onAdd: function (map) {\r\n                const container = L.DomUtil.create(\r\n                    \"div\",\r\n                    \"leaflet-control-poi-add leaflet-bar leaflet-control\"\r\n                );\r\n                const link = L.DomUtil.create(\"a\", \"\", container);\r\n\r\n                link.href = \"#\";\r\n                link.title = \"Ajouter un POI\";\r\n                link.setAttribute(\"role\", \"button\");\r\n                link.setAttribute(\"aria-label\", \"Ajouter un nouveau point d'int√©r√™t\");\r\n\r\n                // Ic√¥ne d'ajout de POI (SVG statique)\r\n                // SAFE: SVG statique hardcod√©, pas de donn√©es utilisateur\r\n                const poiSvg = GeoLeaf.DOMSecurity.createSVGIcon(18, 18, 'M12 2 C 6.5 2 2 6.5 2 12 C 2 17.5 6.5 22 12 22 C 17.5 22 22 17.5 22 12 C 22 6.5 17.5 2 12 2 M12 8 L12 16 M8 12 L16 12', {\r\n                    stroke: 'currentColor',\r\n                    strokeWidth: '2',\r\n                    fill: 'none'\r\n                });\r\n                link.appendChild(poiSvg);\r\n\r\n                // √âviter la propagation vers la carte\r\n                L.DomEvent.disableClickPropagation(container);\r\n                L.DomEvent.disableScrollPropagation(container);\r\n\r\n                const handleAddPoi = (e) => {\r\n                    L.DomEvent.preventDefault(e);\r\n\r\n                    // D√©sactiver le bouton temporairement\r\n                    link.classList.add(\"disabled\");\r\n\r\n                    // Fonction pour ouvrir le formulaire\r\n                    const openForm = (latlng) => {\r\n                        link.classList.remove(\"disabled\");\r\n\r\n                        if (!GeoLeaf.POI.AddForm.openAddForm) {\r\n                            if (Log) Log.error(\"[UI.Controls] AddForm.openAddForm non disponible\");\r\n                            return;\r\n                        }\r\n\r\n                        GeoLeaf.POI.AddForm.openAddForm(latlng, null);\r\n                    };\r\n\r\n                    // V√©rifier si la g√©olocalisation est disponible et si elle est le mode par d√©faut\r\n                    const userPosition = GeoLeaf?.UI?._userPosition;\r\n                    const defaultPosition = config?.poiAddConfig?.defaultPosition || \"placement-mode\";\r\n\r\n                    if (userPosition && defaultPosition === \"geolocation\") {\r\n                        // Utiliser la position GPS\r\n                        if (Log) Log.debug(\"[UI.Controls] Utilisation de la position GPS pour l'ajout de POI\");\r\n                        openForm(userPosition);\r\n                    } else {\r\n                        // Activer le mode placement\r\n                        if (Log) Log.debug(\"[UI.Controls] Activation du mode placement pour l'ajout de POI\");\r\n                        GeoLeaf.POI.PlacementMode.activate(map, (result) => {\r\n                            if (result?.latlng) {\r\n                                openForm(result.latlng);\r\n                            } else {\r\n                                link.classList.remove(\"disabled\");\r\n                                if (Log) Log.warn(\"[UI.Controls] Mode placement cancelled\");\r\n                            }\r\n                        });\r\n                    }\r\n                };\r\n\r\n                L.DomEvent.on(link, \"click\", handleAddPoi);\r\n                L.DomEvent.on(link, \"keydown\", (e) => {\r\n                    if (\r\n                        e.key === \"Enter\" ||\r\n                        e.key === \" \" ||\r\n                        e.key === \"Spacebar\"\r\n                    ) {\r\n                        handleAddPoi(e);\r\n                    }\r\n                });\r\n\r\n                this._link = link;\r\n\r\n                return container;\r\n            },\r\n\r\n            onRemove: function (_map) {\r\n                if (this._link) {\r\n                    L.DomEvent.off(this._link, \"click\");\r\n                    L.DomEvent.off(this._link, \"keydown\");\r\n                    this._link = null;\r\n                }\r\n            }\r\n        });\r\n\r\n        new L.Control.PoiAdd().addTo(map);\r\n        if (Log) Log.info(\"[UI.Controls] Contr√¥le POI Add ajout√© √† la carte\");\r\n    }\r\n\r\n    // ========================================\r\n    //   EXPORT\r\n    // ========================================\r\n\r\n    GeoLeaf._UIControls = {\r\n        initFullscreenControl,\r\n        initGeolocationControl,\r\n        initPoiAddControl\r\n    };\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf UI Module - Panel Builder\r\n * Construction de panneaux de d√©tails POI avec layouts configurables\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    GeoLeaf.UI = GeoLeaf.UI || {};\r\n    GeoLeaf.UI.PanelBuilder = GeoLeaf.UI.PanelBuilder || {};\r\n\r\n    // Helper pour utiliser createElement unifi√©\r\n    const $create = (tag, props, ...children) => {\r\n        return GeoLeaf.Utils && GeoLeaf.Utils.createElement\r\n            ? GeoLeaf.Utils.createElement(tag, props, ...children)\r\n            : document.createElement(tag);\r\n    };\r\n\r\n    /**\r\n     * R√©sout un chemin de type \"attributes.longDescription\" dans un objet POI.\r\n     * Retourne undefined si le chemin n'existe pas.\r\n     *\r\n     * @param {object} poi - Objet POI source.\r\n     * @param {string} fieldPath - Chemin en notation point√©e (ex: \"attributes.description\").\r\n     * @returns {*} Valeur r√©solue ou undefined.\r\n     */\r\n    function resolveField(poi, fieldPath) {\r\n        if (!poi || !fieldPath) return undefined;\r\n        const parts = fieldPath.split(\".\");\r\n        let current = poi;\r\n        for (let i = 0; i < parts.length; i += 1) {\r\n            if (current == null) {\r\n                return undefined;\r\n            }\r\n            current = current[parts[i]];\r\n        }\r\n        return current;\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un bloc section simple (sans accord√©on).\r\n     *\r\n     * @param {string} label - Titre de la section.\r\n     * @param {Node|string} innerContent - Contenu de la section (Node ou texte).\r\n     * @param {string} extraClass - Classes CSS additionnelles.\r\n     * @returns {HTMLElement} √âl√©ment section.\r\n     */\r\n    function createPlainSection(label, innerContent, extraClass) {\r\n        const section = $create(\"section\", {\r\n            className: \"gl-poi-panel__section\" + (extraClass ? \" \" + extraClass : \"\")\r\n        });\r\n\r\n        if (label) {\r\n            const header = $create(\"h3\", {\r\n                className: \"gl-poi-panel__section-title\",\r\n                textContent: label\r\n            });\r\n            section.appendChild(header);\r\n        }\r\n\r\n        const body = $create(\"div\", {\r\n            className: \"gl-poi-panel__section-body\"\r\n        });\r\n        if (innerContent instanceof Node) {\r\n            body.appendChild(innerContent);\r\n        } else if (innerContent != null) {\r\n            body.textContent = String(innerContent);\r\n        }\r\n        section.appendChild(body);\r\n\r\n        return section;\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un bloc section accord√©on (panneau repliable).\r\n     *\r\n     * @param {string} label - Titre de l'accord√©on.\r\n     * @param {Node|string} innerContent - Contenu de l'accord√©on.\r\n     * @param {object} options - Options { defaultOpen: boolean }.\r\n     * @returns {HTMLElement} √âl√©ment section accord√©on.\r\n     */\r\n    function createAccordionSection(label, innerContent, options) {\r\n        const opts = options || {};\r\n        const isOpen = Boolean(opts.defaultOpen);\r\n\r\n        const section = $create(\"section\", {\r\n            className: \"gl-accordion gl-poi-panel__section\" + (isOpen ? \" is-open\" : \"\")\r\n        });\r\n\r\n        const header = $create(\"button\", {\r\n            type: \"button\",\r\n            className: \"gl-accordion__header\"\r\n        });\r\n\r\n        const titleSpan = $create(\"span\", {\r\n            className: \"gl-accordion__title\",\r\n            textContent: label || \"\"\r\n        });\r\n        header.appendChild(titleSpan);\r\n\r\n        const iconSpan = $create(\"span\", {\r\n            className: \"gl-accordion__icon\",\r\n            attributes: { \"aria-hidden\": \"true\" },\r\n            textContent: \"‚ñæ\"\r\n        });\r\n        header.appendChild(iconSpan);\r\n\r\n        section.appendChild(header);\r\n\r\n        const body = $create(\"div\", {\r\n            className: \"gl-accordion__body\"\r\n        });\r\n\r\n        if (innerContent instanceof Node) {\r\n            body.appendChild(innerContent);\r\n        } else if (innerContent != null) {\r\n            const p = $create(\"p\", {\r\n                textContent: String(innerContent)\r\n            });\r\n            body.appendChild(p);\r\n        }\r\n\r\n        section.appendChild(body);\r\n        return section;\r\n    }\r\n\r\n    /**\r\n     * Construit le rendu d'un item de type \"text\".\r\n     *\r\n     * @param {*} value - Valeur √† afficher.\r\n     * @param {string} variant - Variant (\"multiline\" ou autre).\r\n     * @returns {HTMLElement|null} √âl√©ment div ou null.\r\n     */\r\n    function renderText(value, variant) {\r\n        const div = $create(\"div\", {\r\n            className: \"gl-poi-panel__text\" +\r\n                (variant === \"multiline\" ? \" gl-poi-panel__text--multiline\" : \"\"),\r\n            textContent: String(value)\r\n        });\r\n        return div;\r\n    }\r\n\r\n    /**\r\n     * Construit le rendu d'un item de type \"list\".\r\n     *\r\n     * @param {*} value - Array ou string (lignes s√©par√©es).\r\n     * @returns {HTMLElement|null} √âl√©ment ul ou null.\r\n     */\r\n    function renderList(value) {\r\n        const items = [];\r\n\r\n        if (Array.isArray(value)) {\r\n            value.forEach(function (entry) {\r\n                if (entry == null) return;\r\n\r\n                if (typeof entry === \"string\" || typeof entry === \"number\") {\r\n                    items.push(String(entry));\r\n                } else if (typeof entry === \"object\") {\r\n                    const label =\r\n                        typeof entry.label === \"string\"\r\n                            ? entry.label\r\n                            : typeof entry.text === \"string\"\r\n                            ? entry.text\r\n                            : null;\r\n                    const val = entry.value != null ? String(entry.value) : null;\r\n\r\n                    if (label && val) {\r\n                        items.push(label + \" : \" + val);\r\n                    } else if (label) {\r\n                        items.push(label);\r\n                    } else if (val) {\r\n                        items.push(val);\r\n                    }\r\n                }\r\n            });\r\n        } else if (typeof value === \"string\") {\r\n            value.split(/\\r?\\n/).forEach(function (line) {\r\n                const trimmed = line.trim();\r\n                if (trimmed) {\r\n                    items.push(trimmed);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (!items.length) {\r\n            return null;\r\n        }\r\n\r\n        const ul = $create(\"ul\", {\r\n            className: \"gl-poi-panel__list\"\r\n        });\r\n\r\n        items.forEach(function (text) {\r\n            const li = $create(\"li\", {\r\n                className: \"gl-poi-panel__list-item\",\r\n                textContent: text\r\n            });\r\n            ul.appendChild(li);\r\n        });\r\n\r\n        return ul;\r\n    }\r\n\r\n    /**\r\n     * Construit le rendu d'un item de type \"table\".\r\n     *\r\n     * @param {Array} value - Tableau d'objets repr√©sentant les lignes.\r\n     * @param {object} item - Configuration du tableau (columns, borders).\r\n     * @returns {HTMLElement|null} Wrapper de tableau ou null.\r\n     */\r\n    function renderTable(value, item) {\r\n        if (!Array.isArray(value) || !value.length) {\r\n            return null;\r\n        }\r\n\r\n        const columns = Array.isArray(item.columns) ? item.columns : [];\r\n        if (!columns.length) {\r\n            return null;\r\n        }\r\n\r\n        const wrapper = $create(\"div\", {\r\n            className: \"gl-poi-panel__table-wrapper\"\r\n        });\r\n\r\n        const borders = item.borders || {};\r\n        const borderClasses = [];\r\n        if (borders.outer) borderClasses.push(\"gl-poi-panel__table--border-outer\");\r\n        if (borders.row) borderClasses.push(\"gl-poi-panel__table--border-row\");\r\n        if (borders.column) borderClasses.push(\"gl-poi-panel__table--border-column\");\r\n\r\n        const table = $create(\"table\", {\r\n            className: \"gl-poi-panel__table\" + (borderClasses.length ? \" \" + borderClasses.join(\" \") : \"\"),\r\n            attributes: borders.color ? { \"data-gl-border-color\": borders.color } : {}\r\n        });\r\n\r\n        // En-t√™te\r\n        const thead = $create(\"thead\");\r\n        const headRow = $create(\"tr\", {\r\n            className: \"gl-poi-panel__table-row gl-poi-panel__table-row--head\"\r\n        });\r\n\r\n        columns.forEach(function (col) {\r\n            const th = $create(\"th\", {\r\n                className: \"gl-poi-panel__table-cell gl-poi-panel__table-cell--head\",\r\n                textContent: col.label || col.key || \"\"\r\n            });\r\n            headRow.appendChild(th);\r\n        });\r\n\r\n        thead.appendChild(headRow);\r\n        table.appendChild(thead);\r\n\r\n        // Corps\r\n        const tbody = $create(\"tbody\");\r\n\r\n        value.forEach(function (rowObj) {\r\n            if (!rowObj || typeof rowObj !== \"object\") {\r\n                return;\r\n            }\r\n\r\n            const tr = $create(\"tr\", {\r\n                className: \"gl-poi-panel__table-row\"\r\n            });\r\n\r\n            columns.forEach(function (col) {\r\n                const cellVal = rowObj[col.key];\r\n                const td = $create(\"td\", {\r\n                    className: \"gl-poi-panel__table-cell\",\r\n                    textContent: cellVal == null ? \"\" : String(cellVal)\r\n                });\r\n\r\n                tr.appendChild(td);\r\n            });\r\n\r\n            tbody.appendChild(tr);\r\n        });\r\n\r\n        table.appendChild(tbody);\r\n        wrapper.appendChild(table);\r\n        return wrapper;\r\n    }\r\n\r\n    /**\r\n     * Construit le rendu d'un item de type \"gallery\".\r\n     *\r\n     * @param {Array} value - Tableau d'images { url, alt, caption }.\r\n     * @returns {HTMLElement|null} Container galerie ou null.\r\n     */\r\n    function renderGallery(value) {\r\n        if (!Array.isArray(value)) {\r\n            return null;\r\n        }\r\n\r\n        const container = $create(\"div\", {\r\n            className: \"gl-poi-panel__gallery\"\r\n        });\r\n\r\n        value.forEach(function (img) {\r\n            if (!img) return;\r\n\r\n            const figure = $create(\"figure\", {\r\n                className: \"gl-poi-panel__gallery-item\"\r\n            });\r\n\r\n            const imgEl = $create(\"img\", {\r\n                src: img.url || img,\r\n                alt: img.alt || \"\"\r\n            });\r\n            figure.appendChild(imgEl);\r\n\r\n            if (img.caption) {\r\n                const figCap = $create(\"figcaption\", {\r\n                    textContent: img.caption\r\n                });\r\n                figure.appendChild(figCap);\r\n            }\r\n\r\n            container.appendChild(figure);\r\n        });\r\n\r\n        return container;\r\n    }\r\n\r\n    /**\r\n     * Construit le rendu d'un item de type \"reviews\" (avis voyageurs).\r\n     *\r\n     * @param {*} value - Array ou objet avec propri√©t√© 'recent'.\r\n     * @returns {HTMLElement|null} Container d'avis ou null.\r\n     */\r\n    function renderReviews(value) {\r\n        // Si value est un objet avec une propri√©t√© 'recent', utiliser celle-ci\r\n        let reviewsArray = value;\r\n        if (value && typeof value === 'object' && !Array.isArray(value) && Array.isArray(value.recent)) {\r\n            reviewsArray = value.recent;\r\n        }\r\n\r\n        if (!Array.isArray(reviewsArray)) {\r\n            return null;\r\n        }\r\n\r\n        const container = $create(\"div\", {\r\n            className: \"gl-poi-panel__reviews gl-poi-sidepanel__reviews\"\r\n        });\r\n\r\n        reviewsArray.forEach(function (review) {\r\n            if (!review) return;\r\n\r\n            const itemEl = $create(\"article\", {\r\n                className: \"gl-poi-panel__review\"\r\n            });\r\n\r\n            const header = $create(\"header\", {\r\n                className: \"gl-poi-panel__review-header\"\r\n            });\r\n\r\n            const nameSpan = $create(\"span\", {\r\n                className: \"gl-poi-panel__review-author\",\r\n                textContent: review.authorName || \"\"\r\n            });\r\n            header.appendChild(nameSpan);\r\n\r\n            if (typeof review.rating === \"number\") {\r\n                const ratingSpan = $create(\"span\", {\r\n                    className: \"gl-poi-panel__review-rating\",\r\n                    textContent: review.rating.toFixed(1) + \"/5\"\r\n                });\r\n                header.appendChild(ratingSpan);\r\n            }\r\n\r\n            if (review.source) {\r\n                const sourceSpan = $create(\"span\", {\r\n                    className: \"gl-poi-panel__review-source\",\r\n                    textContent: review.source\r\n                });\r\n                header.appendChild(sourceSpan);\r\n            }\r\n\r\n            itemEl.appendChild(header);\r\n\r\n            if (review.title) {\r\n                const titleEl = $create(\"h4\", {\r\n                    className: \"gl-poi-panel__review-title\",\r\n                    textContent: review.title\r\n                });\r\n                itemEl.appendChild(titleEl);\r\n            }\r\n\r\n            // G√©rer √† la fois 'text' (ancien format) et 'comment' (nouveau format)\r\n            const reviewText = review.text || review.comment;\r\n            if (reviewText) {\r\n                const textEl = $create(\"p\", {\r\n                    className: \"gl-poi-panel__review-text\",\r\n                    textContent: reviewText\r\n                });\r\n                itemEl.appendChild(textEl);\r\n            }\r\n\r\n            // G√©rer √† la fois 'date' (ancien format) et 'createdAt' (nouveau format)\r\n            const reviewDate = review.date || review.createdAt;\r\n            if (reviewDate) {\r\n                const dateEl = $create(\"time\", {\r\n                    className: \"gl-poi-panel__review-date\",\r\n                    textContent: reviewDate\r\n                });\r\n                itemEl.appendChild(dateEl);\r\n            }\r\n\r\n            const footer = $create(\"footer\", {\r\n                className: \"gl-poi-panel__review-footer\"\r\n            });\r\n\r\n            if (typeof review.helpfulCount === \"number\") {\r\n                const helpfulSpan = $create(\"span\", {\r\n                    className: \"gl-poi-panel__review-helpful\",\r\n                    textContent: review.helpfulCount + \" personnes ont trouv√© cet avis utile\"\r\n                });\r\n                footer.appendChild(helpfulSpan);\r\n            }\r\n\r\n            if (review.url) {\r\n                const link = $create(\"a\", {\r\n                    href: review.url,\r\n                    target: \"_blank\",\r\n                    rel: \"noopener noreferrer\",\r\n                    className: \"gl-poi-panel__review-link\",\r\n                    textContent: \"Voir l'avis\"\r\n                });\r\n                footer.appendChild(link);\r\n            }\r\n\r\n            itemEl.appendChild(footer);\r\n            container.appendChild(itemEl);\r\n        });\r\n\r\n        return container;\r\n    }\r\n\r\n    /**\r\n     * Construit le contenu interne pour un item de layout.\r\n     * Dispatcher principal vers les fonctions de rendu sp√©cialis√©es.\r\n     *\r\n     * @param {object} poi - Objet POI source.\r\n     * @param {object} item - Configuration du layout item (type, field, variant, etc).\r\n     * @returns {HTMLElement|null} √âl√©ment construit ou null.\r\n     */\r\n    function buildLayoutItemContent(poi, item) {\r\n        const type = item.type;\r\n        const value = resolveField(poi, item.field);\r\n\r\n        if (value == null || value === \"\") {\r\n            if (!Array.isArray(value)) {\r\n                return null;\r\n            }\r\n        }\r\n\r\n        // Dispatch par type\r\n        if (type === \"text\") {\r\n            return renderText(value, item.variant);\r\n        }\r\n\r\n        if (type === \"list\") {\r\n            return renderList(value);\r\n        }\r\n\r\n        if (type === \"table\") {\r\n            return renderTable(value, item);\r\n        }\r\n\r\n        if (type === \"gallery\") {\r\n            return renderGallery(value);\r\n        }\r\n\r\n        if (type === \"reviews\") {\r\n            return renderReviews(value);\r\n        }\r\n\r\n        // Fallback : texte simple\r\n        const defaultDiv = $create(\"div\", {\r\n            className: \"gl-poi-panel__text\",\r\n            textContent: String(value)\r\n        });\r\n        return defaultDiv;\r\n    }\r\n\r\n    // ========================================\r\n    //   EXPORT\r\n    // ========================================\r\n\r\n    GeoLeaf.UI.PanelBuilder = {\r\n        resolveField,\r\n        createPlainSection,\r\n        createAccordionSection,\r\n        renderText,\r\n        renderList,\r\n        renderTable,\r\n        renderGallery,\r\n        renderReviews,\r\n        buildLayoutItemContent\r\n    };\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf UI DOM Utilities Module\r\n * Utilitaires DOM r√©utilisables pour l'interface utilisateur\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    GeoLeaf._UIDomUtils = GeoLeaf._UIDomUtils || {};\r\n\r\n    // Helper pour utiliser createElement unifi√©\r\n    const $create = (tag, props, ...children) => {\r\n        return GeoLeaf.Utils && GeoLeaf.Utils.createElement\r\n            ? GeoLeaf.Utils.createElement(tag, props, ...children)\r\n            : document.createElement(tag);\r\n    };\r\n\r\n    const Log = GeoLeaf.Log || console;\r\n\r\n    /**\r\n     * R√©sout une valeur √† partir d'un chemin de propri√©t√© (ex: \"attributes.reviews.rating\").\r\n     * @param {Object} obj - Objet source (POI, route, etc.)\r\n     * @param {string} fieldPath - Chemin de propri√©t√© s√©par√© par des points\r\n     * @returns {*} Valeur trouv√©e ou undefined\r\n     */\r\n    GeoLeaf._UIDomUtils.resolveField = function (obj, fieldPath) {\r\n        if (!obj || !fieldPath) return undefined;\r\n        const parts = fieldPath.split(\".\");\r\n        let current = obj;\r\n        for (let i = 0; i < parts.length; i += 1) {\r\n            if (current == null) {\r\n                return undefined;\r\n            }\r\n            current = current[parts[i]];\r\n        }\r\n        return current;\r\n    };\r\n\r\n    /**\r\n     * Attache le comportement d'accord√©on (toggle open/close) √† un conteneur.\r\n     * √âvite les attachements multiples avec un flag.\r\n     * @param {HTMLElement} container - Conteneur parent avec des √©l√©ments .gl-accordion\r\n     */\r\n    GeoLeaf._UIDomUtils.attachAccordionBehavior = function (container) {\r\n        if (!container || container._glAccordionBound) return;\r\n        container._glAccordionBound = true;\r\n\r\n        container.addEventListener(\"click\", function (evt) {\r\n            const header = evt.target.closest(\".gl-accordion__header\");\r\n            if (!header || !container.contains(header)) {\r\n                return;\r\n            }\r\n            const section = header.closest(\".gl-accordion\");\r\n            if (!section) return;\r\n\r\n            section.classList.toggle(\"is-open\");\r\n        });\r\n    };\r\n\r\n    /**\r\n     * R√©cup√®re le profil actif depuis GeoLeaf.Config.\r\n     * @returns {Object|null} Objet profil ou null si indisponible\r\n     */\r\n    GeoLeaf._UIDomUtils.getActiveProfileConfig = function () {\r\n        if (\r\n            !GeoLeaf.Config ||\r\n            typeof GeoLeaf.Config.getActiveProfile !== \"function\"\r\n        ) {\r\n            Log.warn(\r\n                \"[UIDomUtils] GeoLeaf.Config.getActiveProfile() indisponible. Impossible de r√©cup√©rer le profil actif.\"\r\n            );\r\n            return null;\r\n        }\r\n        const profile = GeoLeaf.Config.getActiveProfile();\r\n        if (!profile) {\r\n            Log.warn(\r\n                \"[UIDomUtils] Aucun profil actif retourn√© par GeoLeaf.Config.getActiveProfile().\"\r\n            );\r\n        }\r\n        return profile || null;\r\n    };\r\n\r\n    /**\r\n     * Construit les <option> d'un select √† partir de la taxonomie et d'un chemin optionsFrom.\r\n     * @param {HTMLSelectElement} selectEl - √âl√©ment <select> √† peupler\r\n     * @param {Object} profile - Objet profil contenant la taxonomie\r\n     * @param {string} optionsFrom - Chemin vers les options (ex: \"taxonomy.categories\")\r\n     */\r\n    GeoLeaf._UIDomUtils.populateSelectOptionsFromTaxonomy = function (\r\n        selectEl,\r\n        profile,\r\n        optionsFrom\r\n    ) {\r\n        if (!selectEl || !profile || !profile.taxonomy) return;\r\n\r\n        const taxonomy = profile.taxonomy;\r\n        const emptyOpt = $create(\"option\", {\r\n            value: \"\",\r\n            textContent: \"‚Äî Tous ‚Äî\"\r\n        });\r\n        selectEl.appendChild(emptyOpt);\r\n\r\n        if (optionsFrom === \"taxonomy.categories\") {\r\n            const categories = taxonomy.categories || {};\r\n            Object.keys(categories).forEach(function (catId) {\r\n                const cat = categories[catId];\r\n                const opt = $create(\"option\", {\r\n                    value: catId,\r\n                    textContent: cat.label || catId\r\n                });\r\n                selectEl.appendChild(opt);\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (optionsFrom === \"taxonomy.categories[*].subcategories\") {\r\n            const categories = taxonomy.categories || {};\r\n            Object.keys(categories).forEach(function (catId) {\r\n                const cat = categories[catId];\r\n                const subs = (cat && cat.subcategories) || {};\r\n                Object.keys(subs).forEach(function (subId) {\r\n                    const sub = subs[subId];\r\n                    const catLabel = cat.label || catId;\r\n                    const subLabel = sub.label || subId;\r\n                    const opt = $create(\"option\", {\r\n                        value: subId,\r\n                        textContent: catLabel + \" ‚Äì \" + subLabel,\r\n                        attributes: { \"data-category-id\": catId }\r\n                    });\r\n                    selectEl.appendChild(opt);\r\n                });\r\n            });\r\n        }\r\n    };\r\n\r\n    Log.info(\"[GeoLeaf._UIDomUtils] Module DOM Utilities charg√©\");\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Namespace global GeoLeaf\r\n     */\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    GeoLeaf.UI = GeoLeaf.UI || {};\r\n\r\n    /**\r\n     * Logger unifi√©\r\n     */\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Contexte pour les logs\r\n     * @const\r\n     */\r\n    const CONTEXT = \"[GeoLeaf.UI.CoordinatesDisplay]\";\r\n\r\n    /**\r\n     * Texte par d√©faut des coordonn√©es\r\n     * @const\r\n     */\r\n    const DEFAULT_COORDS_TEXT = \"Lat: --, Lng: --\";\r\n\r\n    /**\r\n     * Module GeoLeaf.UI.CoordinatesDisplay\r\n     *\r\n     * R√¥le :\r\n     * - Afficher les coordonn√©es du curseur en temps r√©el\r\n     * - Positionner le contr√¥le en bas √† droite √† c√¥t√© de la l√©gende\r\n     * - Permettre l'activation/d√©sactivation via configuration\r\n     */\r\n    const CoordinatesDisplay = {\r\n        /**\r\n         * R√©f√©rence √† la carte Leaflet.\r\n         * @type {L.Map|null}\r\n         * @private\r\n         */\r\n        _map: null,\r\n\r\n        /**\r\n         * R√©f√©rence au contr√¥le Leaflet des coordonn√©es.\r\n         * @type {L.Control|null}\r\n         * @private\r\n         */\r\n        _control: null,\r\n\r\n        /**\r\n         * Element DOM pour l'affichage des coordonn√©es\r\n         * @type {HTMLElement|null}\r\n         * @private\r\n         */\r\n        _coordsElement: null,\r\n\r\n        /**\r\n         * R√©f√©rence bound du listener mousemove (pour pouvoir le retirer)\r\n         * @type {Function|null}\r\n         * @private\r\n         */\r\n        _boundMouseMoveHandler: null,\r\n\r\n        /**\r\n         * Options du module\r\n         * @type {Object}\r\n         * @private\r\n         */\r\n        _options: {\r\n            position: \"bottomleft\",\r\n            decimals: 6\r\n        },\r\n\r\n        /**\r\n         * Initialise le module de coordonn√©es\r\n         * @param {L.Map} map - Instance de la carte Leaflet\r\n         * @param {Object} options - Options de configuration\r\n         */\r\n        init(map, options = {}) {\r\n            try {\r\n                if (!map) {\r\n                    throw new Error(\"Une instance de carte Leaflet est requise.\");\r\n                }\r\n\r\n                this._map = map;\r\n                this._options = Object.assign({}, this._options, options);\r\n\r\n                // V√©rifier si le module est activ√© dans la config\r\n                const showCoordinates = GeoLeaf.Config?.get(\"ui.showCoordinates\");\r\n\r\n                if (showCoordinates === false) {\r\n                    Log.info(`${CONTEXT} Affichage des coordonn√©es d√©sactiv√© dans la configuration.`);\r\n                    return;\r\n                }\r\n\r\n                // Stocker la r√©f√©rence bound du listener\r\n                this._boundMouseMoveHandler = this._onMouseMove.bind(this);\r\n\r\n                // Cr√©er le contr√¥le Leaflet\r\n                this._createControl();\r\n\r\n                Log.info(`${CONTEXT} Module initialis√© avec succ√®s.`);\r\n\r\n            } catch (err) {\r\n                Log.error(`${CONTEXT} Erreur lors de l'initialisation :`, err.message);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Cr√©e le contr√¥le Leaflet pour l'affichage des coordonn√©es\r\n         * @private\r\n         */\r\n        _createControl() {\r\n            try {\r\n                // Attendre que le DOM soit pr√™t et chercher le wrapper d'√©chelle\r\n                setTimeout(() => {\r\n                    const scaleWrapper = document.querySelector('.gl-scale-main-wrapper');\r\n\r\n                    if (scaleWrapper) {\r\n                        // Ajouter un s√©parateur avant les coordonn√©es\r\n                        L.DomUtil.create('div', 'gl-scale-separator', scaleWrapper);\r\n\r\n                        // Cr√©er l'√©l√©ment d'affichage des coordonn√©es directement dans le wrapper\r\n                        this._coordsElement = L.DomUtil.create('div', 'gl-scale-coordinates', scaleWrapper);\r\n                        this._coordsElement.textContent = DEFAULT_COORDS_TEXT;\r\n\r\n                        // Ajouter l'√©couteur d'√©v√©nement mousemove avec r√©f√©rence stock√©e\r\n                        this._map.on('mousemove', this._boundMouseMoveHandler);\r\n\r\n                        Log.info(`${CONTEXT} Coordonn√©es int√©gr√©es au wrapper d'√©chelle.`);\r\n                    } else {\r\n                        Log.warn(`${CONTEXT} Wrapper d'√©chelle non trouv√©, utilisation du mode classique.`);\r\n                        this._createStandaloneControl();\r\n                    }\r\n                }, 100);\r\n\r\n            } catch (err) {\r\n                Log.error(`${CONTEXT} Erreur lors de la cr√©ation du contr√¥le :`, err.message);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Cr√©e un contr√¥le standalone en fallback\r\n         * @private\r\n         */\r\n        _createStandaloneControl() {\r\n            const CoordinatesControl = L.Control.extend({\r\n                options: {\r\n                    position: this._options.position\r\n                },\r\n\r\n                onAdd: (map) => {\r\n                    const container = L.DomUtil.create(\"div\", \"geoleaf-coordinates-display\");\r\n                    L.DomEvent.disableClickPropagation(container);\r\n                    L.DomEvent.disableScrollPropagation(container);\r\n                    this._coordsElement = L.DomUtil.create(\"div\", \"coordinates-content\", container);\r\n                    this._coordsElement.textContent = DEFAULT_COORDS_TEXT;\r\n                    map.on(\"mousemove\", this._boundMouseMoveHandler);\r\n                    return container;\r\n                },\r\n\r\n                onRemove: (map) => {\r\n                    map.off(\"mousemove\", this._boundMouseMoveHandler);\r\n                }\r\n            });\r\n\r\n            this._control = new CoordinatesControl();\r\n            this._control.addTo(this._map);\r\n        },\r\n\r\n        /**\r\n         * Gestionnaire d'√©v√©nement pour le mouvement de la souris\r\n         * @param {Object} e - √âv√©nement Leaflet\r\n         * @private\r\n         */\r\n        _onMouseMove(e) {\r\n            if (!this._coordsElement) return;\r\n\r\n            const lat = e.latlng.lat.toFixed(this._options.decimals);\r\n            const lng = e.latlng.lng.toFixed(this._options.decimals);\r\n\r\n            this._coordsElement.textContent = `Lat: ${lat}, Lng: ${lng}`;\r\n        },\r\n\r\n        /**\r\n         * D√©truit le contr√¥le et nettoie les ressources\r\n         */\r\n        destroy() {\r\n            try {\r\n                // Nettoyer l'√©couteur d'√©v√©nements avec la r√©f√©rence stock√©e\r\n                if (this._map && this._boundMouseMoveHandler) {\r\n                    this._map.off('mousemove', this._boundMouseMoveHandler);\r\n                    this._boundMouseMoveHandler = null;\r\n                }\r\n\r\n                // Retirer l'√©l√©ment du DOM s'il existe\r\n                if (this._coordsElement && this._coordsElement.parentNode) {\r\n                    this._coordsElement.parentNode.removeChild(this._coordsElement);\r\n                    this._coordsElement = null;\r\n                }\r\n\r\n                // Retirer le contr√¥le standalone s'il existe\r\n                if (this._control && this._map) {\r\n                    this._map.removeControl(this._control);\r\n                    this._control = null;\r\n                }\r\n\r\n                Log.info(`${CONTEXT} Module d√©truit avec succ√®s.`);\r\n\r\n            } catch (err) {\r\n                Log.error(`${CONTEXT} Erreur lors de la destruction :`, err.message);\r\n            }\r\n        }\r\n    };\r\n\r\n    // Export du module\r\n    GeoLeaf.UI.CoordinatesDisplay = CoordinatesDisplay;\r\n\r\n})(typeof globalThis !== \"undefined\" ? globalThis : window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Namespace global GeoLeaf\r\n     */\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    GeoLeaf.UI = GeoLeaf.UI || {};\r\n\r\n    /**\r\n     * Logger unifi√©\r\n     */\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module GeoLeaf.UI.Branding\r\n     *\r\n     * R√¥le :\r\n     * - Afficher un texte de branding personnalisable\r\n     * - Positionner le contr√¥le selon la configuration\r\n     * - Permettre l'activation/d√©sactivation via configuration\r\n     */\r\n    const Branding = {\r\n        /**\r\n         * R√©f√©rence √† la carte Leaflet.\r\n         * @type {L.Map|null}\r\n         * @private\r\n         */\r\n        _map: null,\r\n\r\n        /**\r\n         * R√©f√©rence au contr√¥le Leaflet de branding.\r\n         * @type {L.Control|null}\r\n         * @private\r\n         */\r\n        _control: null,\r\n\r\n        /**\r\n         * Options du module\r\n         * @type {Object}\r\n         * @private\r\n         */\r\n        _options: {\r\n            position: \"bottomleft\",\r\n            text: \"Propuls√© par ¬© GeoLeaf with Leaflet\"\r\n        },\r\n\r\n        /**\r\n         * Initialise le module de branding\r\n         * @param {L.Map} map - Instance de la carte Leaflet\r\n         * @param {Object} options - Options de configuration\r\n         */\r\n        init(map, options = {}) {\r\n            const context = \"[GeoLeaf.UI.Branding]\";\r\n\r\n            try {\r\n                if (!map) {\r\n                    throw new Error(\"Une instance de carte Leaflet est requise.\");\r\n                }\r\n\r\n                this._map = map;\r\n                this._options = Object.assign({}, this._options, options);\r\n\r\n                // V√©rifier si le module est activ√© dans la config\r\n                const brandingConfig = GeoLeaf.Config?.get(\"brandingConfig\");\r\n\r\n                if (brandingConfig === false || (brandingConfig && brandingConfig.enabled === false)) {\r\n                    Log.info(`${context} Branding d√©sactiv√© dans la configuration.`);\r\n                    return;\r\n                }\r\n\r\n                // Utiliser les param√®tres de config si disponibles\r\n                if (brandingConfig && typeof brandingConfig === \"object\") {\r\n                    if (brandingConfig.text) {\r\n                        this._options.text = brandingConfig.text;\r\n                    }\r\n                    if (brandingConfig.position) {\r\n                        this._options.position = brandingConfig.position;\r\n                    }\r\n                }\r\n\r\n                // Cr√©er le contr√¥le Leaflet\r\n                this._createControl();\r\n\r\n                Log.info(`${context} Module initialis√© avec succ√®s.`);\r\n\r\n            } catch (err) {\r\n                Log.error(`${context} Erreur lors de l'initialisation :`, err.message);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Cr√©e le contr√¥le Leaflet pour l'affichage du branding\r\n         * @private\r\n         */\r\n        _createControl() {\r\n            const context = \"[GeoLeaf.UI.Branding]\";\r\n\r\n            try {\r\n                // D√©finir le contr√¥le Leaflet personnalis√©\r\n                const BrandingControl = L.Control.extend({\r\n                    options: {\r\n                        position: this._options.position\r\n                    },\r\n\r\n                    onAdd: () => {\r\n                        // Cr√©er le conteneur principal\r\n                        const container = L.DomUtil.create(\"div\", \"geoleaf-branding\");\r\n\r\n                        // Emp√™cher les √©v√©nements de la carte sur ce contr√¥le\r\n                        L.DomEvent.disableClickPropagation(container);\r\n                        L.DomEvent.disableScrollPropagation(container);\r\n\r\n                        // Cr√©er l'√©l√©ment d'affichage du texte\r\n                        const brandingElement = L.DomUtil.create(\"div\", \"branding-content\", container);\r\n                        // SAFE: Utilisation de textContent pour √©viter XSS\r\n                        brandingElement.textContent = this._options.text;\r\n\r\n                        return container;\r\n                    },\r\n\r\n                    onRemove: () => {\r\n                        // Rien √† nettoyer pour ce contr√¥le\r\n                    }\r\n                });\r\n\r\n                // Cr√©er et ajouter le contr√¥le √† la carte\r\n                this._control = new BrandingControl();\r\n                this._control.addTo(this._map);\r\n\r\n                Log.info(`${context} Contr√¥le de branding cr√©√© et ajout√© √† la carte.`);\r\n\r\n            } catch (err) {\r\n                Log.error(`${context} Erreur lors de la cr√©ation du contr√¥le :`, err.message);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * D√©truit le contr√¥le et nettoie les ressources\r\n         */\r\n        destroy() {\r\n            const context = \"[GeoLeaf.UI.Branding]\";\r\n\r\n            try {\r\n                if (this._control && this._map) {\r\n                    this._map.removeControl(this._control);\r\n                    this._control = null;\r\n                }\r\n\r\n                Log.info(`${context} Module d√©truit avec succ√®s.`);\r\n\r\n            } catch (err) {\r\n                Log.error(`${context} Erreur lors de la destruction :`, err.message);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Active l'affichage du branding\r\n         */\r\n        show() {\r\n            if (this._control && !this._map.hasControl(this._control)) {\r\n                this._control.addTo(this._map);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * D√©sactive l'affichage du branding\r\n         */\r\n        hide() {\r\n            if (this._control && this._map) {\r\n                this._map.removeControl(this._control);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Met √† jour le texte du branding\r\n         * @param {string} text - Nouveau texte\r\n         */\r\n        setText(text) {\r\n            if (this._control) {\r\n                const container = this._control.getContainer();\r\n                if (container) {\r\n                    const brandingElement = container.querySelector(\".branding-content\");\r\n                    if (brandingElement) {\r\n                        // SAFE: Utilisation de textContent pour √©viter XSS\r\n                        brandingElement.textContent = text;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    // Export du module\r\n    GeoLeaf.UI.Branding = Branding;\r\n\r\n})(typeof globalThis !== \"undefined\" ? globalThis : window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf Content Builder - Core Module\r\n *\r\n * Centralise les fonctions utilitaires, validateurs et r√©solution de badges\r\n * pour tous les renderers du Content Builder.\r\n *\r\n * @module ui/content-builder/core\r\n * @author GeoLeaf Team\r\n * @version 1.0.0\r\n * @since Sprint 4.5 (Janvier 2026)\r\n *\r\n * @example\r\n * // Acc√®s au module Core\r\n * const Core = GeoLeaf._ContentBuilder.Core;\r\n *\r\n * // Validation image URL\r\n * const imageUrl = Core.validateImageUrl('https://example.com/photo.jpg');\r\n *\r\n * // R√©solution badge taxonomie\r\n * const badge = Core.resolveBadge(poi, 'attributes.categoryId', 'default');\r\n *\r\n * // Formatage coordonn√©es\r\n * const coords = Core.formatCoordinates(45.7578, 4.8320);\r\n * // Retourne: \"45.757800, 4.832000\"\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    if (!GeoLeaf._ContentBuilder) GeoLeaf._ContentBuilder = {};\r\n\r\n    // ========================================\r\n    //   D√âPENDANCES & HELPERS\r\n    // ========================================\r\n\r\n    /**\r\n     * R√©cup√®re la fonction resolveField depuis GeoLeaf.Utils avec fallback d√©fensif.\r\n     *\r\n     * Cette fonction permet de r√©soudre des valeurs dans des objets POI en testant\r\n     * plusieurs chemins (paths) dans l'ordre jusqu'√† trouver une valeur valide.\r\n     *\r\n     * @function getResolveField\r\n     * @returns {Function} Fonction resolveField(obj, ...paths) ‚Üí value|null\r\n     *\r\n     * @example\r\n     * const resolveField = getResolveField();\r\n     * const name = resolveField(poi, 'attributes.name', 'attributes.nom', 'properties.name');\r\n     * // Teste dans l'ordre: poi.attributes.name ‚Üí poi.attributes.nom ‚Üí poi.properties.name\r\n     * // Retourne la premi√®re valeur non-null trouv√©e\r\n     *\r\n     * @example\r\n     * // Avec fallback si Utils non charg√©\r\n     * const resolveField = getResolveField();\r\n     * const value = resolveField({ attributes: { price: 42 } }, 'attributes.price');\r\n     * // Retourne: 42\r\n     */\r\n    function getResolveField() {\r\n        if (GeoLeaf.Utils && typeof GeoLeaf.Utils.resolveField === 'function') {\r\n            return GeoLeaf.Utils.resolveField;\r\n        }\r\n        // Fallback minimal si Utils non charg√©\r\n        return function (obj, ...paths) {\r\n            if (!obj) return null;\r\n            for (const path of paths) {\r\n                if (!path) continue;\r\n                const parts = String(path).split('.');\r\n                let current = obj;\r\n                let found = true;\r\n                for (const part of parts) {\r\n                    if (current && typeof current === 'object' && part in current) {\r\n                        current = current[part];\r\n                    } else {\r\n                        found = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (found && current !== undefined && current !== null) {\r\n                    return current;\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re la fonction escapeHtml depuis GeoLeaf.Security avec fallback d√©fensif.\r\n     *\r\n     * Essentiel pour pr√©venir les attaques XSS en √©chappant tous les caract√®res HTML\r\n     * sp√©ciaux avant insertion dans le DOM.\r\n     *\r\n     * @function getEscapeHtml\r\n     * @returns {Function} Fonction escapeHtml(str) ‚Üí string\r\n     *\r\n     * @example\r\n     * const escapeHtml = getEscapeHtml();\r\n     * const safe = escapeHtml('<script>alert(\"XSS\")</script>');\r\n     * // Retourne: \"&lt;script&gt;alert(&quot;XSS&quot;)&lt;/script&gt;\"\r\n     *\r\n     * @example\r\n     * // Utilisation dans un renderer\r\n     * const escapeHtml = getEscapeHtml();\r\n     * const html = '<div>' + escapeHtml(userInput) + '</div>';\r\n     * // userInput est s√©curis√© contre XSS\r\n     */\r\n    function getEscapeHtml() {\r\n        if (GeoLeaf.Security && typeof GeoLeaf.Security.escapeHtml === 'function') {\r\n            return GeoLeaf.Security.escapeHtml;\r\n        }\r\n        // Fallback minimal si Security non charg√©\r\n        return function (str) {\r\n            if (str == null) return '';\r\n            const div = document.createElement('div');\r\n            div.textContent = String(str);\r\n            return div.innerHTML;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re le profil de configuration actif depuis GeoLeaf.Config.\r\n     *\r\n     * Le profil contient la taxonomie (cat√©gories, sous-cat√©gories), les styleRules,\r\n     * et toutes les configurations sp√©cifiques √† la couche active.\r\n     *\r\n     * @function getActiveProfile\r\n     * @returns {Object|null} Profil actif avec structure:\r\n     *   - {Object} taxonomy - Cat√©gories et sous-cat√©gories\r\n     *   - {Array} styleRules - R√®gles de style conditionnelles\r\n     *   - {Object} detailPopup - Configuration popup POI\r\n     *   - {Object} detailTooltip - Configuration tooltip POI\r\n     *   - {Array} detailLayout - Configuration panel POI\r\n     * @returns {null} Si Config non charg√© ou pas de profil actif\r\n     *\r\n     * @example\r\n     * const profile = getActiveProfile();\r\n     * if (profile && profile.taxonomy) {\r\n     *   const categories = profile.taxonomy.categories;\r\n     *   // Acc√®s aux cat√©gories de la taxonomie\r\n     * }\r\n     */\r\n    function getActiveProfile() {\r\n        if (GeoLeaf.Config && typeof GeoLeaf.Config.getActiveProfile === 'function') {\r\n            return GeoLeaf.Config.getActiveProfile() || null;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re le syst√®me de logging GeoLeaf.Log avec fallback sur console.\r\n     *\r\n     * Permet d'utiliser les m√©thodes debug(), info(), warn(), error() de mani√®re\r\n     * coh√©rente dans tout le Content Builder.\r\n     *\r\n     * @function getLog\r\n     * @returns {Object} Logger avec m√©thodes:\r\n     *   - {Function} debug(message, ...args) - Logs de d√©bogage\r\n     *   - {Function} info(message, ...args) - Logs informatifs\r\n     *   - {Function} warn(message, ...args) - Avertissements\r\n     *   - {Function} error(message, ...args) - Erreurs\r\n     *\r\n     * @example\r\n     * const log = getLog();\r\n     * log.info('[ContentBuilder] Rendering popup');\r\n     * log.warn('[ContentBuilder] Image URL invalide:', url);\r\n     * log.error('[ContentBuilder] POI invalide:', poi);\r\n     */\r\n    function getLog() {\r\n        return GeoLeaf.Log || console;\r\n    }\r\n\r\n    // ========================================\r\n    //   VALIDATORS\r\n    // ========================================\r\n\r\n    /**\r\n     * Valide une URL d'image en v√©rifiant les protocoles autoris√©s et la structure.\r\n     *\r\n     * Utilise GeoLeaf.Security.validateUrl si disponible, sinon applique une validation\r\n     * basique avec whitelist de protocoles (https://, http://, data:image//, /, ./).\r\n     *\r\n     * @function validateImageUrl\r\n     * @param {string} url - URL √† valider\r\n     * @returns {string|null} URL valide (trimmed) ou null si invalide\r\n     *\r\n     * @example\r\n     * // URL HTTPS valide\r\n     * const url1 = validateImageUrl('https://example.com/photo.jpg');\r\n     * // Retourne: 'https://example.com/photo.jpg'\r\n     *\r\n     * @example\r\n     * // Data URL valide\r\n     * const url2 = validateImageUrl('data:image/png;base64,iVBORw0KG...');\r\n     * // Retourne: 'data:image/png;base64,iVBORw0KG...'\r\n     *\r\n     * @example\r\n     * // Chemin relatif valide\r\n     * const url3 = validateImageUrl('/images/photo.jpg');\r\n     * // Retourne: '/images/photo.jpg'\r\n     *\r\n     * @example\r\n     * // URL invalide (protocole interdit)\r\n     * const url4 = validateImageUrl('javascript:alert(1)');\r\n     * // Retourne: null\r\n     */\r\n    function validateImageUrl(url) {\r\n        if (!url || typeof url !== 'string') return null;\r\n\r\n        // Utiliser le validator de GeoLeaf.Security si disponible\r\n        if (GeoLeaf.Security && typeof GeoLeaf.Security.validateUrl === 'function') {\r\n            try {\r\n                return GeoLeaf.Security.validateUrl(url);\r\n            } catch (e) {\r\n                getLog().warn('[ContentBuilder.Core] URL image invalide:', e.message);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        // Fallback : validation basique\r\n        const trimmed = url.trim();\r\n        if (/^https?:\\/\\//i.test(trimmed) ||\r\n            /^data:image\\//i.test(trimmed) ||\r\n            trimmed.startsWith('/') ||\r\n            trimmed.startsWith('./') ||\r\n            trimmed.startsWith('../')) {\r\n            return trimmed;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Valide des coordonn√©es g√©ographiques (latitude, longitude) avec support\r\n     * de plusieurs formats d'entr√©e.\r\n     *\r\n     * Supporte:\r\n     * - Format array: [lat, lng]\r\n     * - Format objet: {lat: number, lng: number}\r\n     * - Validation limites: lat ‚àà [-90, 90], lng ‚àà [-180, 180]\r\n     *\r\n     * @function validateCoordinates\r\n     * @param {Array<number>|Object|*} value - Coordonn√©es √† valider\r\n     * @returns {{lat: number, lng: number}|null} Coordonn√©es valides ou null\r\n     *\r\n     * @example\r\n     * // Format array\r\n     * const coords1 = validateCoordinates([45.7578, 4.8320]);\r\n     * // Retourne: { lat: 45.7578, lng: 4.8320 }\r\n     *\r\n     * @example\r\n     * // Format objet\r\n     * const coords2 = validateCoordinates({ lat: 45.7578, lng: 4.8320 });\r\n     * // Retourne: { lat: 45.7578, lng: 4.8320 }\r\n     *\r\n     * @example\r\n     * // Coordonn√©es invalides (hors limites)\r\n     * const coords3 = validateCoordinates([95, 200]);\r\n     * // Retourne: null (lat > 90, lng > 180)\r\n     *\r\n     * @example\r\n     * // Format invalide\r\n     * const coords4 = validateCoordinates('45.7578, 4.8320');\r\n     * // Retourne: null (string non support√©)\r\n     */\r\n    function validateCoordinates(value) {\r\n        if (value == null) return null;\r\n\r\n        let lat, lng;\r\n\r\n        // Format array [lat, lng]\r\n        if (Array.isArray(value) && value.length >= 2) {\r\n            lat = parseFloat(value[0]);\r\n            lng = parseFloat(value[1]);\r\n        }\r\n        // Format objet {lat, lng}\r\n        else if (typeof value === 'object' && value.lat !== undefined && value.lng !== undefined) {\r\n            lat = parseFloat(value.lat);\r\n            lng = parseFloat(value.lng);\r\n        }\r\n        // Format invalide\r\n        else {\r\n            return null;\r\n        }\r\n\r\n        // Validation des valeurs\r\n        if (isNaN(lat) || isNaN(lng)) return null;\r\n        if (lat < -90 || lat > 90) return null;\r\n        if (lng < -180 || lng > 180) return null;\r\n\r\n        return { lat, lng };\r\n    }\r\n\r\n    /**\r\n     * Valide une valeur num√©rique en la convertissant si n√©cessaire.\r\n     *\r\n     * Accepte number, string convertible en number.\r\n     * Rejette NaN, null, undefined, cha√Ænes vides.\r\n     *\r\n     * @function validateNumber\r\n     * @param {number|string|*} value - Valeur √† valider\r\n     * @returns {number|null} Nombre valide ou null si invalide\r\n     *\r\n     * @example\r\n     * // Number direct\r\n     * const num1 = validateNumber(42.5);\r\n     * // Retourne: 42.5\r\n     *\r\n     * @example\r\n     * // String convertible\r\n     * const num2 = validateNumber('42.5');\r\n     * // Retourne: 42.5\r\n     *\r\n     * @example\r\n     * // Valeurs invalides\r\n     * validateNumber(null);      // null\r\n     * validateNumber('');        // null\r\n     * validateNumber('abc');     // null\r\n     * validateNumber(NaN);       // null\r\n     * validateNumber(undefined); // null\r\n     */\r\n    function validateNumber(value) {\r\n        if (value == null || value === '') return null;\r\n        const num = typeof value === 'number' ? value : parseFloat(value);\r\n        return isNaN(num) ? null : num;\r\n    }\r\n\r\n    /**\r\n     * Valide un rating (note) dans l'√©chelle 0-5.\r\n     *\r\n     * Utilise validateNumber puis v√©rifie que la valeur est dans [0, 5].\r\n     * Utile pour les syst√®mes de notation 5 √©toiles.\r\n     *\r\n     * @function validateRating\r\n     * @param {number|string|*} value - Rating √† valider\r\n     * @returns {number|null} Rating valide ‚àà [0, 5] ou null si invalide\r\n     *\r\n     * @example\r\n     * // Rating valide\r\n     * const rating1 = validateRating(4.5);\r\n     * // Retourne: 4.5\r\n     *\r\n     * @example\r\n     * // Rating valide (limites)\r\n     * const rating2 = validateRating(0);   // 0 (valide)\r\n     * const rating3 = validateRating(5);   // 5 (valide)\r\n     *\r\n     * @example\r\n     * // Rating invalide (hors limites)\r\n     * const rating4 = validateRating(-1);  // null (< 0)\r\n     * const rating5 = validateRating(6);   // null (> 5)\r\n     * const rating6 = validateRating('excellent'); // null (non num√©rique)\r\n     */\r\n    function validateRating(value) {\r\n        const num = validateNumber(value);\r\n        if (num === null) return null;\r\n        if (num < 0 || num > 5) return null;\r\n        return num;\r\n    }\r\n\r\n    // ========================================\r\n    //   BADGE RESOLVER (Taxonomie + Styles)\r\n    // ========================================\r\n\r\n    /**\r\n     * R√©sout un badge en appliquant la taxonomie et les styleRules de la couche.\r\n     *\r\n     * Processus:\r\n     * 1. R√©cup√®re la valeur via resolveField (ex: categoryId)\r\n     * 2. Cherche le label dans taxonomy.categories ou subcategories\r\n     * 3. Applique les couleurs depuis GeoLeaf.Helpers.StyleResolver\r\n     * 4. Retourne { displayValue, style } pour affichage HTML\r\n     *\r\n     * G√®re 2 types de champs:\r\n     * - categoryId: r√©solution cat√©gorie principale\r\n     * - subCategoryId: r√©solution sous-cat√©gorie (avec parent categoryId)\r\n     *\r\n     * @function resolveBadge\r\n     * @param {Object} poi - POI avec attributs et _layerConfig\r\n     * @param {Object} poi.attributes - Attributs du POI (categoryId, subCategoryId, etc.)\r\n     * @param {Object} poi._layerConfig - Configuration de la couche (styleRules)\r\n     * @param {string} field - Chemin du champ (ex: 'attributes.categoryId')\r\n     * @param {string} [variant] - Variante du badge (non utilis√© actuellement)\r\n     * @returns {{displayValue: string, style: string}} Badge r√©solu\r\n     * @returns {string} returns.displayValue - Label du badge (taxonomie ou valeur brute)\r\n     * @returns {string} returns.style - CSS inline (background-color, border-color)\r\n     *\r\n     * @example\r\n     * // R√©solution cat√©gorie principale\r\n     * const badge1 = resolveBadge(\r\n     *   { attributes: { categoryId: 'restaurant' }, _layerConfig: { id: 'pois' } },\r\n     *   'attributes.categoryId'\r\n     * );\r\n     * // Retourne: {\r\n     * //   displayValue: 'Restaurant',\r\n     * //   style: 'background-color: #e74c3c; border-color: #c0392b;'\r\n     * // }\r\n     *\r\n     * @example\r\n     * // R√©solution sous-cat√©gorie\r\n     * const badge2 = resolveBadge(\r\n     *   { attributes: { categoryId: 'restaurant', subCategoryId: 'gastronomique' } },\r\n     *   'attributes.subCategoryId'\r\n     * );\r\n     * // Retourne: { displayValue: 'Gastronomique', style: '...' }\r\n     *\r\n     * @example\r\n     * // Valeur non mapp√©e dans taxonomie\r\n     * const badge3 = resolveBadge(\r\n     *   { attributes: { categoryId: 'unknown' } },\r\n     *   'attributes.categoryId'\r\n     * );\r\n     * // Retourne: { displayValue: 'unknown', style: '' }\r\n     */\r\n    function resolveBadge(poi, field, variant) {\r\n        const resolveField = getResolveField();\r\n        const value = resolveField(poi, field);\r\n\r\n        if (value == null || value === '') {\r\n            return { displayValue: '', style: '' };\r\n        }\r\n\r\n        const profile = getActiveProfile();\r\n        const taxonomy = profile?.taxonomy;\r\n        let displayValue = String(value);\r\n        let style = '';\r\n\r\n        // Pas de taxonomie : retour simple\r\n        if (!taxonomy || !field) {\r\n            return { displayValue, style };\r\n        }\r\n\r\n        const attrs = poi.attributes || {};\r\n\r\n        // R√©solution cat√©gorie principale\r\n        if (field.includes('categoryId') && !field.includes('subCategoryId')) {\r\n            const catData = taxonomy.categories?.[value];\r\n            if (catData?.label) {\r\n                displayValue = catData.label;\r\n            }\r\n\r\n            // Couleurs depuis styleRules de la couche\r\n            if (GeoLeaf.Helpers?.StyleResolver && poi._layerConfig) {\r\n                const styleColors = GeoLeaf.Helpers.StyleResolver.getColorsFromLayerStyle(\r\n                    poi,\r\n                    poi._layerConfig.id\r\n                );\r\n                if (styleColors) {\r\n                    if (styleColors.fillColor) {\r\n                        style += 'background-color: ' + styleColors.fillColor + ';';\r\n                    }\r\n                    if (styleColors.color) {\r\n                        style += 'border-color: ' + styleColors.color + ';';\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // R√©solution sous-cat√©gorie\r\n        else if (field.includes('subCategoryId')) {\r\n            const catId = attrs.categoryId || attrs.category;\r\n            const catData = taxonomy.categories?.[catId];\r\n            const subCatData = catData?.subcategories?.[value];\r\n\r\n            if (subCatData?.label) {\r\n                displayValue = subCatData.label;\r\n            }\r\n\r\n            // Couleurs depuis styleRules de la couche\r\n            if (GeoLeaf.Helpers?.StyleResolver && poi._layerConfig) {\r\n                const styleColors = GeoLeaf.Helpers.StyleResolver.getColorsFromLayerStyle(\r\n                    poi,\r\n                    poi._layerConfig.id\r\n                );\r\n                if (styleColors) {\r\n                    if (styleColors.fillColor) {\r\n                        style += 'background-color: ' + styleColors.fillColor + ';';\r\n                    }\r\n                    if (styleColors.color) {\r\n                        style += 'border-color: ' + styleColors.color + ';';\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return { displayValue, style };\r\n    }\r\n\r\n    /**\r\n     * R√©sout un badge pour tooltip (texte uniquement, sans styles).\r\n     *\r\n     * Version simplifi√©e de resolveBadge:\r\n     * - Retourne uniquement le texte (displayValue)\r\n     * - Pas de styles CSS\r\n     * - Optimis√© pour tooltips HTML limit√©s\r\n     *\r\n     * Supporte √©galement categoryId et subCategoryId avec r√©solution taxonomie.\r\n     *\r\n     * @function resolveBadgeTooltip\r\n     * @param {Object} poi - POI avec attributs\r\n     * @param {Object} poi.attributes - Attributs du POI\r\n     * @param {string} field - Chemin du champ (ex: 'attributes.categoryId')\r\n     * @returns {string} Label du badge (ou valeur brute si pas de taxonomie)\r\n     *\r\n     * @example\r\n     * // R√©solution cat√©gorie avec taxonomie\r\n     * const text1 = resolveBadgeTooltip(\r\n     *   { attributes: { categoryId: 'restaurant' } },\r\n     *   'attributes.categoryId'\r\n     * );\r\n     * // Retourne: 'Restaurant' (label taxonomie)\r\n     *\r\n     * @example\r\n     * // R√©solution sous-cat√©gorie\r\n     * const text2 = resolveBadgeTooltip(\r\n     *   { attributes: { categoryId: 'restaurant', subCategoryId: 'gastronomique' } },\r\n     *   'attributes.subCategoryId'\r\n     * );\r\n     * // Retourne: 'Gastronomique'\r\n     *\r\n     * @example\r\n     * // Valeur vide\r\n     * const text3 = resolveBadgeTooltip(\r\n     *   { attributes: {} },\r\n     *   'attributes.unknownField'\r\n     * );\r\n     * // Retourne: ''\r\n     */\r\n    function resolveBadgeTooltip(poi, field) {\r\n        const resolveField = getResolveField();\r\n        const value = resolveField(poi, field);\r\n\r\n        if (value == null || value === '') return '';\r\n\r\n        const profile = getActiveProfile();\r\n        const taxonomy = profile?.taxonomy;\r\n\r\n        if (!taxonomy) return String(value);\r\n\r\n        const attrs = poi.attributes || {};\r\n\r\n        // Sous-cat√©gorie\r\n        if (field.includes('subCategoryId')) {\r\n            const catId = attrs.categoryId || attrs.category;\r\n            const catData = taxonomy.categories?.[catId];\r\n            const subCatData = catData?.subcategories?.[value];\r\n            if (subCatData?.label) return subCatData.label;\r\n        }\r\n        // Cat√©gorie\r\n        else if (field.includes('categoryId')) {\r\n            const catData = taxonomy.categories?.[value];\r\n            if (catData?.label) return catData.label;\r\n        }\r\n\r\n        return String(value);\r\n    }\r\n\r\n    // ========================================\r\n    //   UTILITAIRES DE FORMATAGE\r\n    // ========================================\r\n\r\n    /**\r\n     * Formate un nombre avec la locale fran√ßaise (s√©parateurs FR).\r\n     *\r\n     * Utilise toLocaleString('fr-FR'):\r\n     * - S√©parateur de milliers: espace (\\u202f)\r\n     * - S√©parateur de d√©cimales: virgule\r\n     *\r\n     * @function formatNumber\r\n     * @param {number} num - Nombre √† formater\r\n     * @returns {string} Nombre format√© avec conventions fran√ßaises\r\n     *\r\n     * @example\r\n     * // Entier\r\n     * const str1 = formatNumber(1234567);\r\n     * // Retourne: '1\\u202f234\\u202f567'\r\n     *\r\n     * @example\r\n     * // D√©cimal\r\n     * const str2 = formatNumber(1234.56);\r\n     * // Retourne: '1\\u202f234,56'\r\n     *\r\n     * @example\r\n     * // Petit nombre\r\n     * const str3 = formatNumber(42);\r\n     * // Retourne: '42'\r\n     */\r\n    function formatNumber(num) {\r\n        return num.toLocaleString('fr-FR');\r\n    }\r\n\r\n    /**\r\n     * Formate des coordonn√©es g√©ographiques en cha√Æne \"lat, lng\".\r\n     *\r\n     * Utilise toFixed pour contr√¥ler la pr√©cision d√©cimale.\r\n     * Pr√©cision recommand√©e: 6 d√©cimales (~10cm de pr√©cision).\r\n     *\r\n     * @function formatCoordinates\r\n     * @param {number} lat - Latitude (‚àà [-90, 90])\r\n     * @param {number} lng - Longitude (‚àà [-180, 180])\r\n     * @param {number} [precision=6] - Nombre de d√©cimales (1-15)\r\n     * @returns {string} Coordonn√©es format√©es \"lat, lng\"\r\n     *\r\n     * @example\r\n     * // Pr√©cision par d√©faut (6 d√©cimales)\r\n     * const str1 = formatCoordinates(45.7578137, 4.8320114);\r\n     * // Retourne: '45.757814, 4.832011'\r\n     *\r\n     * @example\r\n     * // Haute pr√©cision (8 d√©cimales)\r\n     * const str2 = formatCoordinates(45.7578137, 4.8320114, 8);\r\n     * // Retourne: '45.75781370, 4.83201140'\r\n     *\r\n     * @example\r\n     * // Faible pr√©cision (2 d√©cimales)\r\n     * const str3 = formatCoordinates(45.7578137, 4.8320114, 2);\r\n     * // Retourne: '45.76, 4.83'\r\n     */\r\n    function formatCoordinates(lat, lng, precision = 6) {\r\n        return lat.toFixed(precision) + ', ' + lng.toFixed(precision);\r\n    }\r\n\r\n    /**\r\n     * Formate un rating (note) au format \"X.X/5\".\r\n     *\r\n     * Utilise toFixed pour afficher le nombre de d√©cimales souhait√©.\r\n     * Compatible avec les syst√®mes de notation 5 √©toiles.\r\n     *\r\n     * @function formatRating\r\n     * @param {number} rating - Note √† formater (‚àà [0, 5])\r\n     * @param {number} [precision=1] - Nombre de d√©cimales (0-2)\r\n     * @returns {string} Rating format√© (ex: \"4.5/5\", \"3/5\")\r\n     *\r\n     * @example\r\n     * // Pr√©cision par d√©faut (1 d√©cimale)\r\n     * const str1 = formatRating(4.567);\r\n     * // Retourne: '4.6/5'\r\n     *\r\n     * @example\r\n     * // Sans d√©cimale\r\n     * const str2 = formatRating(4.567, 0);\r\n     * // Retourne: '5/5'\r\n     *\r\n     * @example\r\n     * // 2 d√©cimales\r\n     * const str3 = formatRating(4.567, 2);\r\n     * // Retourne: '4.57/5'\r\n     *\r\n     * @example\r\n     * // Note parfaite\r\n     * const str4 = formatRating(5);\r\n     * // Retourne: '5.0/5'\r\n     */\r\n    function formatRating(rating, precision = 1) {\r\n        return rating.toFixed(precision) + '/5';\r\n    }\r\n\r\n    // ========================================\r\n    //   EXPORT\r\n    // ========================================\r\n\r\n    GeoLeaf._ContentBuilder.Core = {\r\n        // Helpers d√©pendances\r\n        getResolveField,\r\n        getEscapeHtml,\r\n        getActiveProfile,\r\n        getLog,\r\n\r\n        // Validators\r\n        validateImageUrl,\r\n        validateCoordinates,\r\n        validateNumber,\r\n        validateRating,\r\n\r\n        // Badge resolver\r\n        resolveBadge,\r\n        resolveBadgeTooltip,\r\n\r\n        // Formatters\r\n        formatNumber,\r\n        formatCoordinates,\r\n        formatRating\r\n    };\r\n\r\n    getLog().info('[GeoLeaf._ContentBuilder.Core] Module Core charg√© - Helpers + Validators + Badge resolver');\r\n\r\n})(typeof window !== 'undefined' ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf Content Builder - Templates Module\r\n *\r\n * Centralise tous les templates HTML (14 builders) et classes CSS standards\r\n * pour les renderers (text, number, badge, rating, image, link, list, etc.).\r\n *\r\n * Organisation:\r\n * - CSS_CLASSES: Library de classes CSS standards\r\n * - Template Builders: 14 fonctions de construction HTML\r\n * - Wrappers: Fonctions utilitaires (wrapInParagraph, wrapInDiv, wrapInLink)\r\n *\r\n * @module ui/content-builder/templates\r\n * @author Assistant\r\n * @version 1.0.0\r\n * @since 2026-01-18 (Sprint 4.5 - Modularisation)\r\n *\r\n * @example\r\n * // Import des templates\r\n * const Templates = GeoLeaf._ContentBuilder.Templates;\r\n *\r\n * @example\r\n * // Utilisation CSS_CLASSES\r\n * const className = Templates.CSS_CLASSES.badge; // 'gl-poi-badge'\r\n *\r\n * @example\r\n * // Cr√©ation d'un badge\r\n * const badgeHtml = Templates.createBadge(\r\n *   { displayValue: 'Restaurant', style: 'background-color: #e74c3c;' },\r\n *   'category',\r\n *   escapeHtml\r\n * );\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    if (!GeoLeaf._ContentBuilder) GeoLeaf._ContentBuilder = {};\r\n\r\n    // ========================================\r\n    //   CLASSES CSS STANDARDS\r\n    // ========================================\r\n\r\n    const CSS_CLASSES = {\r\n        // Container classes\r\n        text: 'gl-content__text',\r\n        longtext: 'gl-content__longtext',\r\n        number: 'gl-content__number',\r\n        metric: 'gl-content__metric',\r\n        badge: 'gl-poi-badge',\r\n        rating: 'gl-content__rating',\r\n        image: 'gl-content__image',\r\n        link: 'gl-content__link',\r\n        list: 'gl-content__list',\r\n        table: 'gl-content__table',\r\n        tags: 'gl-content__tags',\r\n        tag: 'gl-content__tag',\r\n        coordinates: 'gl-content__coordinates',\r\n        gallery: 'gl-content__gallery',\r\n\r\n        // Badge variants\r\n        badgeDefault: 'gl-poi-badge--default',\r\n        badgeStatus: 'gl-poi-badge--status',\r\n        badgePriority: 'gl-poi-badge--priority',\r\n        badgeCategory: 'gl-poi-badge--category',\r\n\r\n        // Rating\r\n        star: 'gl-star',\r\n        starFull: 'gl-star--full',\r\n        starHalf: 'gl-star--half',\r\n        starEmpty: 'gl-star--empty'\r\n    };\r\n\r\n    // ========================================\r\n    //   TEMPLATE BUILDERS\r\n    // ========================================\r\n\r\n    /**\r\n     * Construit un attribut HTML class=\"...\" avec classes de base et personnalis√©es.\r\n     *\r\n     * Combine baseClass (obligatoire) + customClass (optionnel) en un seul attribut.\r\n     *\r\n     * @function buildClassAttr\r\n     * @param {string} baseClass - Classe CSS de base (ex: 'gl-content__badge')\r\n     * @param {string} [customClass] - Classe personnalis√©e optionnelle\r\n     * @returns {string} Attribut HTML class (ex: ' class=\"gl-content__badge custom\"')\r\n     *\r\n     * @example\r\n     * // Classe de base uniquement\r\n     * const attr1 = buildClassAttr('gl-content__badge');\r\n     * // Retourne: ' class=\"gl-content__badge\"'\r\n     *\r\n     * @example\r\n     * // Classe de base + classe personnalis√©e\r\n     * const attr2 = buildClassAttr('gl-content__badge', 'my-custom-badge');\r\n     * // Retourne: ' class=\"gl-content__badge my-custom-badge\"'\r\n     */\r\n    function buildClassAttr(baseClass, customClass) {\r\n        const classes = [baseClass];\r\n        if (customClass) classes.push(customClass);\r\n        return ' class=\"' + classes.join(' ') + '\"';\r\n    }\r\n\r\n    /**\r\n     * Construit un attribut HTML style=\"...\" si un style est fourni.\r\n     *\r\n     * Retourne une cha√Æne vide si style est null/undefined/vide.\r\n     *\r\n     * @function buildStyleAttr\r\n     * @param {string} [style] - Style CSS inline (ex: 'color: red; background: blue;')\r\n     * @returns {string} Attribut HTML style (ex: ' style=\"color: red;\"') ou cha√Æne vide\r\n     *\r\n     * @example\r\n     * // Avec style\r\n     * const attr1 = buildStyleAttr('color: red; font-weight: bold;');\r\n     * // Retourne: ' style=\"color: red; font-weight: bold;\"'\r\n     *\r\n     * @example\r\n     * // Sans style\r\n     * const attr2 = buildStyleAttr('');\r\n     * // Retourne: ''\r\n     */\r\n    function buildStyleAttr(style) {\r\n        return style ? ' style=\"' + style + '\"' : '';\r\n    }\r\n\r\n    /**\r\n     * Construit un label HTML avec gestion d'ic√¥ne et √©chappement.\r\n     *\r\n     * Utilis√© dans les templates pour afficher un label avec ic√¥ne optionnelle.\r\n     *\r\n     * @function buildLabel\r\n     * @param {string} label - Texte du label (sera √©chapp√©)\r\n     * @param {Function} escapeHtml - Fonction d'√©chappement HTML\r\n     * @param {string} [icon] - Ic√¥ne optionnelle (HTML non √©chapp√©)\r\n     * @returns {string} HTML du label avec ic√¥ne si fournie\r\n     *\r\n     * @example\r\n     * // Label simple\r\n     * const html1 = buildLabel('Restaurant', escapeHtml);\r\n     * // Retourne: '<span>Restaurant</span>'\r\n     *\r\n     * @example\r\n     * // Label avec ic√¥ne\r\n     * const html2 = buildLabel('Restaurant', escapeHtml, '<i class=\"fa fa-utensils\"></i>');\r\n     * // Retourne: '<i class=\"fa fa-utensils\"></i><span>Restaurant</span>'\r\n     */\r\n    function buildLabel(label, escapeHtml, icon) {\r\n        if (!label) return '';\r\n        return '<strong>' + escapeHtml(label) + ':</strong> ';\r\n    }\r\n\r\n    /**\r\n     * Enveloppe du contenu HTML dans un paragraphe <p> avec classes.\r\n     *\r\n     * @function wrapInParagraph\r\n     * @param {string} content - Contenu HTML (d√©j√† √©chapp√© ou non)\r\n     * @param {string} className - Classe CSS de base\r\n     * @param {string} [customClass] - Classe personnalis√©e optionnelle\r\n     * @returns {string} HTML paragraphe avec classes\r\n     *\r\n     * @example\r\n     * const html = wrapInParagraph('Restaurant', 'gl-content__text');\r\n     * // Retourne: '<p class=\"gl-content__text\">Restaurant</p>'\r\n     *\r\n     * @example\r\n     * const html2 = wrapInParagraph('Restaurant', 'gl-content__text', 'my-custom');\r\n     * // Retourne: '<p class=\"gl-content__text my-custom\">Restaurant</p>'\r\n     */\r\n    function wrapInParagraph(content, className, customClass) {\r\n        return '<p' + buildClassAttr(className, customClass) + '>' + content + '</p>';\r\n    }\r\n\r\n    /**\r\n     * Enveloppe du contenu HTML dans un div <div> avec classes.\r\n     *\r\n     * @function wrapInDiv\r\n     * @param {string} content - Contenu HTML (d√©j√† √©chapp√© ou non)\r\n     * @param {string} className - Classe CSS de base\r\n     * @param {string} [customClass] - Classe personnalis√©e optionnelle\r\n     * @returns {string} HTML div avec classes\r\n     *\r\n     * @example\r\n     * const html = wrapInDiv('Content', 'gl-content__longtext');\r\n     * // Retourne: '<div class=\"gl-content__longtext\">Content</div>'\r\n     */\r\n    function wrapInDiv(content, className, customClass) {\r\n        return '<div' + buildClassAttr(className, customClass) + '>' + content + '</div>';\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un √©l√©ment de texte simple <p> avec label optionnel.\r\n     *\r\n     * Format: <p class=\"gl-content__text\"><strong>Label:</strong> Value</p>\r\n     *\r\n     * @function createTextElement\r\n     * @param {string} value - Valeur texte (√† √©chapper)\r\n     * @param {Object} config - Configuration renderer\r\n     * @param {string} [config.label] - Label optionnel\r\n     * @param {string} [config.className] - Classe personnalis√©e\r\n     * @param {Function} escapeHtml - Fonction d'√©chappement HTML\r\n     * @returns {string} HTML paragraphe avec texte\r\n     *\r\n     * @example\r\n     * // Avec label\r\n     * const html1 = createTextElement('Restaurant', { label: 'Nom' }, escapeHtml);\r\n     * // Retourne: '<p class=\"gl-content__text\"><strong>Nom:</strong> Restaurant</p>'\r\n     *\r\n     * @example\r\n     * // Sans label\r\n     * const html2 = createTextElement('Restaurant', {}, escapeHtml);\r\n     * // Retourne: '<p class=\"gl-content__text\">Restaurant</p>'\r\n     */\r\n    function createTextElement(value, config, escapeHtml) {\r\n        const label = buildLabel(config.label, escapeHtml);\r\n        const content = label + escapeHtml(value);\r\n        return wrapInParagraph(content, CSS_CLASSES.text, config.className);\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un √©l√©ment de texte long <div> avec label s√©par√©.\r\n     *\r\n     * Format: <div><p><strong>Label</strong></p><p>Value</p></div>\r\n     * Utilis√© pour descriptions, commentaires, textes longs.\r\n     *\r\n     * @function createLongtextElement\r\n     * @param {string} value - Valeur texte longue (√† √©chapper)\r\n     * @param {Object} config - Configuration renderer\r\n     * @param {string} [config.label] - Label optionnel\r\n     * @param {string} [config.className] - Classe personnalis√©e\r\n     * @param {Function} escapeHtml - Fonction d'√©chappement HTML\r\n     * @returns {string} HTML div avec texte long\r\n     *\r\n     * @example\r\n     * // Avec label\r\n     * const html1 = createLongtextElement(\r\n     *   'Une longue description...',\r\n     *   { label: 'Description' },\r\n     *   escapeHtml\r\n     * );\r\n     * // Retourne: '<div class=\"gl-content__longtext\">\r\n     * //   <p><strong>Description</strong></p>\r\n     * //   <p>Une longue description...</p>\r\n     * // </div>'\r\n     */\r\n    function createLongtextElement(value, config, escapeHtml) {\r\n        const label = config.label ? '<p><strong>' + escapeHtml(config.label) + '</strong></p>' : '';\r\n        const content = label + '<p>' + escapeHtml(value) + '</p>';\r\n        return wrapInDiv(content, CSS_CLASSES.longtext, config.className);\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un √©l√©ment num√©rique <p> avec formatage locale FR.\r\n     *\r\n     * Formate le nombre avec toLocaleString('fr-FR').\r\n     * Supporte prefix, suffix, label.\r\n     *\r\n     * @function createNumberElement\r\n     * @param {number} value - Valeur num√©rique\r\n     * @param {Object} config - Configuration renderer\r\n     * @param {string} [config.label] - Label optionnel\r\n     * @param {string} [config.prefix] - Pr√©fixe (ex: \"~\")\r\n     * @param {string} [config.suffix] - Suffixe (ex: \"m¬≤\", \"habitants\")\r\n     * @param {string} [config.className] - Classe personnalis√©e\r\n     * @param {Function} escapeHtml - Fonction d'√©chappement HTML\r\n     * @returns {string} HTML paragraphe avec nombre format√©\r\n     *\r\n     * @example\r\n     * // Nombre simple avec suffix\r\n     * const html1 = createNumberElement(1234567, { suffix: 'habitants' }, escapeHtml);\r\n     * // Retourne: '<p class=\"gl-content__number\">1\\u202f234\\u202f567 habitants</p>'\r\n     *\r\n     * @example\r\n     * // Avec label + prefix + suffix\r\n     * const html2 = createNumberElement(120, { label: 'Surface', prefix: '~', suffix: 'm¬≤' }, escapeHtml);\r\n     * // Retourne: '<p class=\"gl-content__number\"><strong>Surface:</strong> ~120 m¬≤</p>'\r\n     */\r\n    function createNumberElement(value, config, escapeHtml) {\r\n        const formatted = value.toLocaleString('fr-FR');\r\n        const label = buildLabel(config.label, escapeHtml);\r\n        const suffix = config.suffix ? ' ' + escapeHtml(config.suffix) : '';\r\n        const prefix = config.prefix ? escapeHtml(config.prefix) + ' ' : '';\r\n        const content = label + prefix + formatted + suffix;\r\n        return wrapInParagraph(content, CSS_CLASSES.number, config.className);\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un √©l√©ment m√©trique <p> avec formatage (similaire √† number).\r\n     *\r\n     * Identique √† createNumberElement mais utilise CSS_CLASSES.metric.\r\n     * Utilis√© pour m√©triques sp√©cifiques (KPI, statistiques, etc.).\r\n     *\r\n     * @function createMetricElement\r\n     * @param {number} value - Valeur num√©rique\r\n     * @param {Object} config - Configuration renderer\r\n     * @param {string} [config.label] - Label optionnel\r\n     * @param {string} [config.prefix] - Pr√©fixe (ex: \"+\", \"-\")\r\n     * @param {string} [config.suffix] - Suffixe (ex: \"%\", \"‚Ç¨\")\r\n     * @param {string} [config.className] - Classe personnalis√©e\r\n     * @param {Function} escapeHtml - Fonction d'√©chappement HTML\r\n     * @returns {string} HTML paragraphe avec m√©trique format√©e\r\n     *\r\n     * @example\r\n     * // M√©trique avec pourcentage\r\n     * const html1 = createMetricElement(95.5, { label: 'Satisfaction', suffix: '%' }, escapeHtml);\r\n     * // Retourne: '<p class=\"gl-content__metric\"><strong>Satisfaction:</strong> 95,5%</p>'\r\n     */\r\n    function createMetricElement(value, config, escapeHtml) {\r\n        const formatted = value.toLocaleString('fr-FR');\r\n        const label = buildLabel(config.label, escapeHtml);\r\n        const suffix = config.suffix ? escapeHtml(config.suffix) : '';\r\n        const prefix = config.prefix ? escapeHtml(config.prefix) : '';\r\n        const content = label + prefix + formatted + suffix;\r\n        return wrapInParagraph(content, CSS_CLASSES.metric, config.className);\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un badge <span> avec variante et style inline.\r\n     *\r\n     * Variantes disponibles:\r\n     * - 'default': gl-poi-badge--default\r\n     * - 'status': gl-poi-badge--status\r\n     * - 'priority': gl-poi-badge--priority\r\n     * - 'category': gl-poi-badge--category\r\n     *\r\n     * @function createBadge\r\n     * @param {string} value - Texte du badge (√† √©chapper)\r\n     * @param {string} [variant='default'] - Variante du badge (default, status, priority, category)\r\n     * @param {string} [style] - Style CSS inline optionnel (ex: 'background-color: #e74c3c;')\r\n     * @param {Function} escapeHtml - Fonction d'√©chappement HTML\r\n     * @returns {string} HTML span badge\r\n     *\r\n     * @example\r\n     * // Badge default\r\n     * const html1 = createBadge('Restaurant', 'default', '', escapeHtml);\r\n     * // Retourne: '<span class=\"gl-poi-badge gl-poi-badge--default\">Restaurant</span>'\r\n     *\r\n     * @example\r\n     * // Badge category avec style\r\n     * const html2 = createBadge(\r\n     *   'Gastronomique',\r\n     *   'category',\r\n     *   'background-color: #e74c3c; color: white;',\r\n     *   escapeHtml\r\n     * );\r\n     * // Retourne: '<span class=\"gl-poi-badge gl-poi-badge--category\" style=\"...\">Gastronomique</span>'\r\n     */\r\n    function createBadge(value, variant, style, escapeHtml) {\r\n        variant = variant || 'default';\r\n        const badgeClass = CSS_CLASSES.badge + ' ' + CSS_CLASSES['badge' + variant.charAt(0).toUpperCase() + variant.slice(1)];\r\n        const styleAttr = buildStyleAttr(style);\r\n        return '<span class=\"' + badgeClass + '\"' + styleAttr + '>' + escapeHtml(value) + '</span>';\r\n    }\r\n\r\n    /**\r\n     * Cr√©e une √©toile <span> de notation avec classe CSS.\r\n     *\r\n     * Types disponibles:\r\n     * - 'full': gl-star--full (‚òÖ plein)\r\n     * - 'half': gl-star--half (¬Ω √©toile)\r\n     * - 'empty': gl-star--empty (‚òÜ vide)\r\n     *\r\n     * @function createStar\r\n     * @param {string} type - Type d'√©toile ('full', 'half', 'empty')\r\n     * @returns {string} HTML span √©toile\r\n     *\r\n     * @example\r\n     * const html1 = createStar('full');\r\n     * // Retourne: '<span class=\"gl-star gl-star--full\">‚òÖ</span>'\r\n     *\r\n     * @example\r\n     * const html2 = createStar('empty');\r\n     * // Retourne: '<span class=\"gl-star gl-star--empty\">‚òÖ</span>'\r\n     */\r\n    function createStar(type) {\r\n        const starClass = CSS_CLASSES.star + ' ' + CSS_CLASSES['star' + type.charAt(0).toUpperCase() + type.slice(1)];\r\n        return '<span class=\"' + starClass + '\">‚òÖ</span>';\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un √©l√©ment de notation <p> avec √©toiles (0-5).\r\n     *\r\n     * G√©n√®re automatiquement les √©toiles pleines, demi et vides.\r\n     * Logique:\r\n     * - rating = 4.7 => 4 full + 1 half + 0 empty\r\n     * - rating = 3.2 => 3 full + 0 half + 2 empty\r\n     *\r\n     * @function createRatingElement\r\n     * @param {number} rating - Note (0-5)\r\n     * @param {Object} config - Configuration renderer\r\n     * @param {string} [config.label] - Label optionnel\r\n     * @param {number} [config.max=5] - Note maximale (g√©n√©ralement 5)\r\n     * @param {boolean} [config.showValue=true] - Afficher la valeur num√©rique\r\n     * @param {string} [config.className] - Classe personnalis√©e\r\n     * @param {Function} escapeHtml - Fonction d'√©chappement HTML\r\n     * @returns {string} HTML paragraphe avec √©toiles\r\n     *\r\n     * @example\r\n     * // Rating 4.5/5 avec label\r\n     * const html1 = createRatingElement(4.5, { label: 'Note', showValue: true }, escapeHtml);\r\n     * // Retourne: '<p class=\"gl-content__rating\">\r\n     * //   <strong>Note:</strong> ‚òÖ‚òÖ‚òÖ‚òÖ¬Ω (4.5/5)\r\n     * // </p>'\r\n     *\r\n     * @example\r\n     * // Rating sans valeur num√©rique\r\n     * const html2 = createRatingElement(3, { showValue: false }, escapeHtml);\r\n     * // Retourne: '<p class=\"gl-content__rating\">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</p>'\r\n     */\r\n    function createRatingElement(rating, config, escapeHtml) {\r\n        let stars = '';\r\n        const fullStars = Math.floor(rating);\r\n        const hasHalfStar = (rating % 1) >= 0.5;\r\n\r\n        // √âtoiles pleines\r\n        for (let i = 0; i < fullStars; i++) {\r\n            stars += createStar('full');\r\n        }\r\n\r\n        // Demi-√©toile\r\n        if (hasHalfStar) {\r\n            stars += createStar('half');\r\n        }\r\n\r\n        // √âtoiles vides\r\n        const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\r\n        for (let i = 0; i < emptyStars; i++) {\r\n            stars += createStar('empty');\r\n        }\r\n\r\n        const ratingText = ' (' + rating.toFixed(1) + '/5)';\r\n        const label = buildLabel(config.label, escapeHtml);\r\n        const content = label + stars + ratingText;\r\n        return wrapInDiv(content, CSS_CLASSES.rating, config.className);\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un √©l√©ment image <img> avec classe et alt.\r\n     *\r\n     * @function createImageElement\r\n     * @param {string} src - URL de l'image (sera √©chapp√©e)\r\n     * @param {Object} config - Configuration renderer\r\n     * @param {string} [config.alt] - Texte alternatif optionnel\r\n     * @param {string} [config.className] - Classe personnalis√©e\r\n     * @param {Function} escapeHtml - Fonction d'√©chappement HTML\r\n     * @returns {string} HTML img\r\n     *\r\n     * @example\r\n     * // Image avec alt\r\n     * const html1 = createImageElement(\r\n     *   'https://example.com/photo.jpg',\r\n     *   { alt: 'Photo du restaurant' },\r\n     *   escapeHtml\r\n     * );\r\n     * // Retourne: '<img class=\"gl-content__image\" src=\"https://example.com/photo.jpg\" alt=\"Photo du restaurant\">'\r\n     *\r\n     * @example\r\n     * // Image sans alt\r\n     * const html2 = createImageElement('https://example.com/photo.jpg', {}, escapeHtml);\r\n     * // Retourne: '<img class=\"gl-content__image\" src=\"https://example.com/photo.jpg\" alt=\"\">'\r\n     */\r\n    function createImageElement(src, config, escapeHtml) {\r\n        const alt = config.alt ? escapeHtml(config.alt) : '';\r\n        const classAttr = buildClassAttr(CSS_CLASSES.image, config.className);\r\n        return '<img' + classAttr + ' src=\"' + escapeHtml(src) + '\" alt=\"' + alt + '\">';\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un √©l√©ment lien <a> avec target=\"_blank\" et s√©curit√©.\r\n     *\r\n     * S√©curit√©: rel=\"noopener noreferrer\" pour √©viter tabnabbing.\r\n     *\r\n     * @function createLinkElement\r\n     * @param {string} href - URL du lien (sera √©chapp√©e)\r\n     * @param {Object} config - Configuration renderer\r\n     * @param {string} [config.text] - Texte du lien (d√©faut: URL)\r\n     * @param {string} [config.label] - Label optionnel\r\n     * @param {string} [config.className] - Classe personnalis√©e\r\n     * @param {Function} escapeHtml - Fonction d'√©chappement HTML\r\n     * @returns {string} HTML paragraphe avec lien\r\n     *\r\n     * @example\r\n     * // Lien avec texte personnalis√©\r\n     * const html1 = createLinkElement(\r\n     *   'https://example.com',\r\n     *   { text: 'Visiter le site', label: 'Site web' },\r\n     *   escapeHtml\r\n     * );\r\n     * // Retourne: '<p class=\"gl-content__link\">\r\n     * //   <strong>Site web:</strong>\r\n     * //   <a href=\"https://example.com\" target=\"_blank\" rel=\"noopener noreferrer\">Visiter le site</a>\r\n     * // </p>'\r\n     *\r\n     * @example\r\n     * // Lien sans texte (affiche URL)\r\n     * const html2 = createLinkElement('https://example.com', {}, escapeHtml);\r\n     * // Retourne: '<p class=\"gl-content__link\">\r\n     * //   <a href=\"https://example.com\" target=\"_blank\" rel=\"noopener noreferrer\">https://example.com</a>\r\n     * // </p>'\r\n     */\r\n    function createLinkElement(href, config, escapeHtml) {\r\n        const text = config.text ? escapeHtml(config.text) : escapeHtml(href);\r\n        const label = buildLabel(config.label, escapeHtml);\r\n        const link = '<a href=\"' + escapeHtml(href) + '\" target=\"_blank\" rel=\"noopener noreferrer\">' + text + '</a>';\r\n        const content = label + link;\r\n        return wrapInParagraph(content, CSS_CLASSES.link, config.className);\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un √©l√©ment liste <ul> avec items.\r\n     *\r\n     * Convertit automatiquement les items en string via String(item).\r\n     *\r\n     * @function createListElement\r\n     * @param {Array<string|number|*>} items - Items de la liste\r\n     * @param {Object} config - Configuration renderer\r\n     * @param {string} [config.label] - Label optionnel\r\n     * @param {string} [config.className] - Classe personnalis√©e\r\n     * @param {Function} escapeHtml - Fonction d'√©chappement HTML\r\n     * @returns {string} HTML div avec liste ul\r\n     *\r\n     * @example\r\n     * // Liste avec label\r\n     * const html1 = createListElement(\r\n     *   ['Pizza', 'Pasta', 'Risotto'],\r\n     *   { label: 'Sp√©cialit√©s' },\r\n     *   escapeHtml\r\n     * );\r\n     * // Retourne: '<div class=\"gl-content__list\">\r\n     * //   <p><strong>Sp√©cialit√©s</strong></p>\r\n     * //   <ul><li>Pizza</li><li>Pasta</li><li>Risotto</li></ul>\r\n     * // </div>'\r\n     *\r\n     * @example\r\n     * // Liste simple sans label\r\n     * const html2 = createListElement(['Item 1', 'Item 2'], {}, escapeHtml);\r\n     * // Retourne: '<div class=\"gl-content__list\"><ul><li>Item 1</li><li>Item 2</li></ul></div>'\r\n     */\r\n    function createListElement(items, config, escapeHtml) {\r\n        const label = config.label ? '<p><strong>' + escapeHtml(config.label) + '</strong></p>' : '';\r\n        let list = '<ul>';\r\n        items.forEach(item => {\r\n            list += '<li>' + escapeHtml(String(item)) + '</li>';\r\n        });\r\n        list += '</ul>';\r\n        const content = label + list;\r\n        return wrapInDiv(content, CSS_CLASSES.list, config.className);\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un √©l√©ment table <table> √† partir d'un objet cl√©/valeur.\r\n     *\r\n     * G√©n√®re une table HTML avec <th> pour les cl√©s et <td> pour les valeurs.\r\n     *\r\n     * @function createTableElement\r\n     * @param {Object} data - Donn√©es de la table (cl√©/valeur)\r\n     * @param {Object} config - Configuration renderer\r\n     * @param {string} [config.label] - Label optionnel\r\n     * @param {string} [config.className] - Classe personnalis√©e\r\n     * @param {Function} escapeHtml - Fonction d'√©chappement HTML\r\n     * @returns {string} HTML div avec table\r\n     *\r\n     * @example\r\n     * // Table avec label\r\n     * const html1 = createTableElement(\r\n     *   { 'Ouverture': '9h-18h', 'Fermeture': 'Dimanche' },\r\n     *   { label: 'Horaires' },\r\n     *   escapeHtml\r\n     * );\r\n     * // Retourne: '<div class=\"gl-content__table\">\r\n     * //   <p><strong>Horaires</strong></p>\r\n     * //   <table><tbody>\r\n     * //     <tr><th>Ouverture</th><td>9h-18h</td></tr>\r\n     * //     <tr><th>Fermeture</th><td>Dimanche</td></tr>\r\n     * //   </tbody></table>\r\n     * // </div>'\r\n     */\r\n    function createTableElement(data, config, escapeHtml) {\r\n        const label = config.label ? '<p><strong>' + escapeHtml(config.label) + '</strong></p>' : '';\r\n        let table = '<table><tbody>';\r\n\r\n        Object.keys(data).forEach(key => {\r\n            const keyLabel = escapeHtml(String(key));\r\n            const value = escapeHtml(String(data[key]));\r\n            table += '<tr><th>' + keyLabel + '</th><td>' + value + '</td></tr>';\r\n        });\r\n\r\n        table += '</tbody></table>';\r\n        const content = label + table;\r\n        return wrapInDiv(content, CSS_CLASSES.table, config.className);\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un tag <span> unique avec classe gl-content__tag.\r\n     *\r\n     * Utilis√© par createTagsElement pour g√©n√©rer des tags individuels.\r\n     *\r\n     * @function createTag\r\n     * @param {string|number} tag - Texte du tag (√† √©chapper)\r\n     * @param {Function} escapeHtml - Fonction d'√©chappement HTML\r\n     * @returns {string} HTML span tag\r\n     *\r\n     * @example\r\n     * const html = createTag('Restaurant', escapeHtml);\r\n     * // Retourne: '<span class=\"gl-content__tag\">Restaurant</span>'\r\n     */\r\n    function createTag(tag, escapeHtml) {\r\n        return '<span class=\"' + CSS_CLASSES.tag + '\">' + escapeHtml(String(tag)) + '</span>';\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un √©l√©ment cloud de tags <div> avec plusieurs tags.\r\n     *\r\n     * G√©n√®re un nuage de tags (tag cloud) avec chaque tag s√©par√© par un espace.\r\n     *\r\n     * @function createTagsElement\r\n     * @param {Array<string|number>} tags - Liste de tags\r\n     * @param {Object} config - Configuration renderer\r\n     * @param {string} [config.className] - Classe personnalis√©e\r\n     * @param {Function} escapeHtml - Fonction d'√©chappement HTML\r\n     * @returns {string} HTML div avec tags\r\n     *\r\n     * @example\r\n     * // Tags multiples\r\n     * const html = createTagsElement(\r\n     *   ['Pizza', 'Italien', 'Gastronomique'],\r\n     *   {},\r\n     *   escapeHtml\r\n     * );\r\n     * // Retourne: '<div class=\"gl-content__tags\">\r\n     * //   <span class=\"gl-content__tag\">Pizza</span>\r\n     * //   <span class=\"gl-content__tag\">Italien</span>\r\n     * //   <span class=\"gl-content__tag\">Gastronomique</span>\r\n     * // </div>'\r\n     */\r\n    function createTagsElement(tags, config, escapeHtml) {\r\n        let content = '';\r\n        tags.forEach(tag => {\r\n            content += createTag(tag, escapeHtml) + ' ';\r\n        });\r\n        return wrapInDiv(content.trim(), CSS_CLASSES.tags, config.className);\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un √©l√©ment coordonn√©es <p> avec lat, lng.\r\n     *\r\n     * Formate automatiquement avec 6 d√©cimales de pr√©cision.\r\n     *\r\n     * @function createCoordinatesElement\r\n     * @param {number} lat - Latitude (‚àà [-90, 90])\r\n     * @param {number} lng - Longitude (‚àà [-180, 180])\r\n     * @param {Object} config - Configuration renderer\r\n     * @param {string} [config.className] - Classe personnalis√©e\r\n     * @param {Function} escapeHtml - Fonction d'√©chappement HTML\r\n     * @returns {string} HTML paragraphe avec coordonn√©es\r\n     *\r\n     * @example\r\n     * const html = createCoordinatesElement(45.7578137, 4.8320114, {}, escapeHtml);\r\n     * // Retourne: '<p class=\"gl-content__coordinates\">\r\n     * //   <strong>Coordonn√©es:</strong> 45.757814, 4.832011\r\n     * // </p>'\r\n     */\r\n    function createCoordinatesElement(lat, lng, config, escapeHtml) {\r\n        const latFixed = lat.toFixed(6);\r\n        const lngFixed = lng.toFixed(6);\r\n        const content = '<strong>Coordonn√©es:</strong> ' + latFixed + ', ' + lngFixed;\r\n        return wrapInParagraph(content, CSS_CLASSES.coordinates, config.className);\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un √©l√©ment galerie <div> avec plusieurs images.\r\n     *\r\n     * G√©n√®re une galerie d'images sans balises <img> individuelles.\r\n     * Les URLs doivent √™tre valid√©es avant via validateImageUrl.\r\n     *\r\n     * @function createGalleryElement\r\n     * @param {Array<string>} photos - URLs des photos (d√©j√† valid√©es)\r\n     * @param {Object} config - Configuration renderer\r\n     * @param {string} [config.className] - Classe personnalis√©e\r\n     * @param {Function} escapeHtml - Fonction d'√©chappement HTML\r\n     * @returns {string} HTML div galerie avec images\r\n     *\r\n     * @example\r\n     * const html = createGalleryElement(\r\n     *   [\r\n     *     'https://example.com/photo1.jpg',\r\n     *     'https://example.com/photo2.jpg'\r\n     *   ],\r\n     *   {},\r\n     *   escapeHtml\r\n     * );\r\n     * // Retourne: '<div class=\"gl-content__gallery\">\r\n     * //   <img src=\"https://example.com/photo1.jpg\" alt=\"Photo\">\r\n     * //   <img src=\"https://example.com/photo2.jpg\" alt=\"Photo\">\r\n     * // </div>'\r\n     */\r\n    function createGalleryElement(photos, config, escapeHtml) {\r\n        let gallery = '';\r\n        photos.forEach(photo => {\r\n            gallery += '<img src=\"' + escapeHtml(photo) + '\" alt=\"Photo\">';\r\n        });\r\n        return wrapInDiv(gallery, CSS_CLASSES.gallery, config.className);\r\n    }\r\n\r\n    // ========================================\r\n    //   EXPORT\r\n    // ========================================\r\n\r\n    GeoLeaf._ContentBuilder.Templates = {\r\n        // Classes CSS\r\n        CSS_CLASSES,\r\n\r\n        // Helpers de base\r\n        buildClassAttr,\r\n        buildStyleAttr,\r\n        buildLabel,\r\n        wrapInParagraph,\r\n        wrapInDiv,\r\n\r\n        // Template builders\r\n        createTextElement,\r\n        createLongtextElement,\r\n        createNumberElement,\r\n        createMetricElement,\r\n        createBadge,\r\n        createStar,\r\n        createRatingElement,\r\n        createImageElement,\r\n        createLinkElement,\r\n        createListElement,\r\n        createTableElement,\r\n        createTag,\r\n        createTagsElement,\r\n        createCoordinatesElement,\r\n        createGalleryElement\r\n    };\r\n\r\n    const Log = GeoLeaf.Log || console;\r\n    Log.info('[GeoLeaf._ContentBuilder.Templates] Module Templates charg√© - 14 builders disponibles');\r\n\r\n    // V√©rification de l'export\r\n    if (!GeoLeaf._ContentBuilder || !GeoLeaf._ContentBuilder.Templates) {\r\n        Log.error('[GeoLeaf._ContentBuilder.Templates] ERREUR: Export √©chou√©!');\r\n    } else {\r\n        Log.info('[GeoLeaf._ContentBuilder.Templates] Export confirm√© - Templates.createMetricElement:', typeof GeoLeaf._ContentBuilder.Templates.createMetricElement);\r\n    }\r\n\r\n})(typeof window !== 'undefined' ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf Content Builder - Assemblers Module\r\n *\r\n * G√®re l'assemblage des √©l√©ments de contenu en structures compl√®tes\r\n * pour les popups (detailPopup), tooltips (contentUnion) et panneaux lat√©raux (items).\r\n *\r\n * Organisation:\r\n * - Helpers: getCore, getRenderers, getResolveField, getEscapeHtml, etc.\r\n * - Assembleurs: buildPopupHTML, buildTooltipHTML, buildPanelItems\r\n *\r\n * @module ui/content-builder/assemblers\r\n * @author Assistant\r\n * @version 1.0.0\r\n * @since 2026-01-18 (Sprint 4.5 - Modularisation)\r\n *\r\n * @example\r\n * // Import des assembleurs\r\n * const Assemblers = GeoLeaf._ContentBuilder.Assemblers;\r\n *\r\n * @example\r\n * // Construction d'un popup complet\r\n * const popupHtml = Assemblers.buildPopupHTML(poi, config, options);\r\n *\r\n * @example\r\n * // Construction d'un tooltip\r\n * const tooltipHtml = Assemblers.buildTooltipHTML(poi, contentUnion);\r\n */\r\n\r\n(function(global) {\r\n    'use strict';\r\n\r\n    // Ensure we're always working with the global reference\r\n    if (!global.GeoLeaf) {\r\n        global.GeoLeaf = {};\r\n    }\r\n\r\n    // Use the global object directly throughout this module\r\n    const GeoLeaf = global.GeoLeaf;\r\n\r\n    // ========================================\r\n    //   ACC√àS AUX MODULES\r\n    // ========================================\r\n\r\n    /**\r\n     * Get Helpers module (centralized utilities)\r\n     * @returns {Object}\r\n     */\r\n    function getHelpers() {\r\n        return GeoLeaf._ContentBuilder?.Helpers || {};\r\n    }\r\n\r\n    function getCore() {\r\n        return GeoLeaf._ContentBuilder?.Core || null;\r\n    }\r\n\r\n    function getRenderers() {\r\n        return GeoLeaf._ContentBuilder || {};\r\n    }\r\n\r\n    // Use Helpers module with fallbacks\r\n    function getResolveField() {\r\n        const helpers = getHelpers();\r\n        if (helpers.getResolveField) return helpers.getResolveField();\r\n        const core = getCore();\r\n        if (core && core.getResolveField) return core.getResolveField();\r\n        // Minimal fallback\r\n        return function(obj, ...paths) {\r\n            for (const path of paths) {\r\n                const keys = path.split('.');\r\n                let value = obj;\r\n                for (const key of keys) {\r\n                    if (value == null) return null;\r\n                    value = value[key];\r\n                }\r\n                if (value !== null && value !== undefined) return value;\r\n            }\r\n            return null;\r\n        };\r\n    }\r\n\r\n    function getEscapeHtml() {\r\n        const helpers = getHelpers();\r\n        if (helpers.getEscapeHtml) return helpers.getEscapeHtml();\r\n        const core = getCore();\r\n        if (core && core.getEscapeHtml) return core.getEscapeHtml();\r\n        // Minimal fallback\r\n        return function(str) {\r\n            if (str == null) return '';\r\n            return String(str)\r\n                .replace(/&/g, '&amp;')\r\n                .replace(/</g, '&lt;')\r\n                .replace(/>/g, '&gt;')\r\n                .replace(/\"/g, '&quot;')\r\n                .replace(/'/g, '&#39;');\r\n        };\r\n    }\r\n\r\n    function getActiveProfile() {\r\n        const helpers = getHelpers();\r\n        if (helpers.getActiveProfile) return helpers.getActiveProfile();\r\n        const core = getCore();\r\n        if (core && core.getActiveProfile) return core.getActiveProfile();\r\n        return GeoLeaf.Config?.getActiveProfile?.() || null;\r\n    }\r\n\r\n    function getLog() {\r\n        const helpers = getHelpers();\r\n        if (helpers.getLog) return helpers.getLog();\r\n        const core = getCore();\r\n        if (core && core.getLog) return core.getLog();\r\n        return GeoLeaf.Utils?.Logger || console;\r\n    }\r\n\r\n    function renderItem(poi, config, options = {}) {\r\n        const enableDebug = (typeof window !== 'undefined' && window.__GEOLEAF_DEBUG_POPUP__) || false;\r\n        const renderers = getRenderers();\r\n        // ...logs [POPUP] supprim√©s...\r\n        if (renderers && renderers.renderItem) {\r\n            const result = renderers.renderItem(poi, config, options);\r\n            return result;\r\n        }\r\n\r\n        // Fallback : renderer direct\r\n        if (!config || !config.type) {\r\n            if (enableDebug) {\r\n                getLog().warn('[Assemblers renderItem DEBUG] No config or type');\r\n            }\r\n            return '';\r\n        }\r\n\r\n        const renderer = renderers['render' + config.type.charAt(0).toUpperCase() + config.type.slice(1)];\r\n        if (!renderer) {\r\n            if (enableDebug) {\r\n                getLog().warn('[Assemblers renderItem DEBUG] No renderer found for type:', config.type);\r\n            }\r\n            getLog().warn('[Assemblers] Type de rendu non support√©:', config.type);\r\n            return '';\r\n        }\r\n\r\n        const result = renderer(poi, config, options);\r\n        if (enableDebug) {\r\n            getLog().warn(`[Assemblers renderItem DEBUG] Result from renderer ${config.type}: ${result ? result.substring(0, 100) + '...' : 'EMPTY'}`);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    // ========================================\r\n    //   ASSEMBLEURS\r\n    // ========================================\r\n\r\n    // ========================================\r\n    //   BUILD POPUP HTML\r\n    // ========================================\r\n\r\n    /**\r\n     * Group popup sections by type (hero images, badges, other)\r\n     * Extracted from buildPopupHTML to reduce complexity\r\n     *\r\n     * @private\r\n     * @param {Array<Object>} sortedConfig - Sorted config array\r\n     * @param {Object} poi - POI data\r\n     * @param {Object} renderOptions - Render options\r\n     * @returns {Array<{type: string, html?: string, items?: Array<string>}>} Grouped sections\r\n     *\r\n     * @typedef {Object} PopupSection\r\n     * @property {'hero'|'badges'|'content'} type - Section type\r\n     * @property {string} [html] - HTML content for hero/content sections\r\n     * @property {Array<string>} [items] - Badge HTML items for badges section\r\n     */\r\n    function groupPopupSections(sortedConfig, poi, renderOptions) {\r\n        const sections = [];\r\n        let badgeGroup = [];\r\n        // ...logs [POPUP] supprim√©s...\r\n        sortedConfig.forEach((item, index) => {\r\n            const isHeroImage = item.type === 'image' && item.variant === 'hero';\r\n            const isBadge = item.type === 'badge';\r\n            const nextItem = sortedConfig[index + 1];\r\n            const nextIsBadge = nextItem && nextItem.type === 'badge';\r\n            const itemHtml = renderItem(poi, item, renderOptions);\r\n            if (isHeroImage) {\r\n                sections.push({ type: 'hero', html: itemHtml });\r\n            } else if (isBadge) {\r\n                badgeGroup.push(itemHtml);\r\n                if (!nextIsBadge) {\r\n                    sections.push({ type: 'badges', items: [...badgeGroup] });\r\n                    badgeGroup = [];\r\n                }\r\n            } else {\r\n                sections.push({ type: 'content', html: itemHtml });\r\n            }\r\n        });\r\n\r\n        return sections;\r\n    }\r\n\r\n    /**\r\n     * Assemble popup HTML from grouped sections\r\n     * Extracted from buildPopupHTML to reduce complexity\r\n     *\r\n     * @private\r\n     * @param {Object} poi - POI data with id property\r\n     * @param {Array<PopupSection>} sections - Grouped popup sections\r\n     * @returns {string} Complete popup HTML\r\n     */\r\n    function assemblePopupHTML(poi, sections) {\r\n        let html = '<div class=\"gl-poi-popup\">';\r\n        let inBody = false;\r\n\r\n        sections.forEach(section => {\r\n            if (section.type === 'hero') {\r\n                if (inBody) {\r\n                    html += '</div>';\r\n                    inBody = false;\r\n                }\r\n                html += section.html;\r\n            } else {\r\n                if (!inBody) {\r\n                    html += '<div class=\"gl-poi-popup__body\">';\r\n                    inBody = true;\r\n                }\r\n\r\n                if (section.type === 'badges') {\r\n                    html += '<div class=\"gl-poi-popup__badges\">';\r\n                    section.items.forEach(badgeHtml => {\r\n                        html += badgeHtml;\r\n                    });\r\n                    html += '</div>';\r\n                } else {\r\n                    html += section.html;\r\n                }\r\n            }\r\n        });\r\n\r\n        // Lien \"Voir plus\"\r\n        if (!inBody) {\r\n            html += '<div class=\"gl-poi-popup__body\">';\r\n            inBody = true;\r\n        }\r\n        html += '<a href=\"#\" class=\"gl-poi-popup__link\" data-poi-id=\"' + (poi.id || '') + '\">Voir plus >>></a>';\r\n\r\n        if (inBody) {\r\n            html += '</div>';\r\n        }\r\n        html += '</div>';\r\n\r\n        return html;\r\n    }\r\n\r\n    /**\r\n     * Construit le HTML complet d'un popup avec structure et groupement de badges.\r\n     *\r\n     * G√®re la structure HTML du popup:\r\n     * 1. Images hero (en dehors du body)\r\n     * 2. Body avec badges group√©s + autres √©l√©ments\r\n     * 3. Lien \"Voir plus >>>\" automatique\r\n     *\r\n     * Tri automatique par config.order, badges group√©s si cons√©cutifs.\r\n     *\r\n     * @function buildPopupHTML\r\n     * @param {Object} poi - Donn√©es du POI normalis√©\r\n     * @param {Object} poi.id - ID du POI\r\n     * @param {Object} poi.attributes - Attributs du POI\r\n     * @param {Array<Object>} config - Configuration detailPopup (array de renderers)\r\n     * @param {Object} config[].type - Type de renderer ('text', 'badge', 'image', etc.)\r\n     * @param {number} config[].order - Ordre d'affichage (tri croissant)\r\n     * @param {string} [config[].variant] - Variante (ex: 'hero' pour images)\r\n     * @param {Object} [options={}] - Options de rendu\r\n     * @param {Function} [options.resolveCategoryDisplay] - R√©solution taxonomie personnalis√©e\r\n     * @returns {string} HTML complet du popup\r\n     *\r\n     * @example\r\n     * // Popup avec image hero + badges + texte\r\n     * const html = buildPopupHTML(\r\n     *   poi,\r\n     *   [\r\n     *     { type: 'image', field: 'attributes.photo', variant: 'hero', order: 1 },\r\n     *     { type: 'badge', field: 'attributes.categoryId', order: 2 },\r\n     *     { type: 'badge', field: 'attributes.status', order: 3 },\r\n     *     { type: 'text', field: 'attributes.description', order: 4 }\r\n     *   ],\r\n     *   {}\r\n     * );\r\n     * // Retourne:\r\n     * // <div class=\"gl-poi-popup\">\r\n     * //   <img src=\"...\" class=\"gl-poi-popup__hero\"> (hero en dehors du body)\r\n     * //   <div class=\"gl-poi-popup__body\">\r\n     * //     <div class=\"gl-poi-popup__badges\">\r\n     * //       <span class=\"gl-poi-badge\">Restaurant</span>\r\n     * //       <span class=\"gl-poi-badge\">Ouvert</span>\r\n     * //     </div>\r\n     * //     <p>Description...</p>\r\n     * //     <a href=\"#\" class=\"gl-poi-popup__link\" data-poi-id=\"123\">Voir plus >>></a>\r\n     * //   </div>\r\n     * // </div>\r\n     */\r\n    function buildPopupHTML(poi, config, options = {}) {\r\n        // Get helpers and utilities FIRST\r\n        const helpers = getHelpers();\r\n        const escapeHtml = getEscapeHtml();\r\n\r\n        if (!poi) {\r\n            getLog().warn('[Assemblers] POI invalide pour buildPopupHTML');\r\n            return '';\r\n        }\r\n\r\n        if (!config || !Array.isArray(config) || config.length === 0) {\r\n            const title = helpers.getDefaultTitle ? helpers.getDefaultTitle(poi) : (poi.title || poi.label || poi.name || 'Sans titre');\r\n            helpers.debugLog?.('popup', 'No config provided, using default popup');\r\n\r\n            return '<div class=\"gl-poi-popup\">' +\r\n                '<div class=\"gl-poi-popup__body\">' +\r\n                '<h3 class=\"gl-poi-popup__title\"><span class=\"gl-poi-popup__title-text\">' + escapeHtml(title) + '</span></h3>' +\r\n                '<a href=\"#\" class=\"gl-poi-popup__link\" data-poi-id=\"' + (poi.id || '') + '\">Voir plus >>></a>' +\r\n                '</div></div>';\r\n        }\r\n\r\n        // ...log supprim√© ([POPUP] buildPopupHTML - config items)...\r\n\r\n        // Use helpers for config sorting\r\n        const sortedConfig = helpers.sortConfigByOrder ? helpers.sortConfigByOrder(config) :\r\n            [...config].sort((a, b) => {\r\n                const orderA = typeof a.order === 'number' ? a.order : 999;\r\n                const orderB = typeof b.order === 'number' ? b.order : 999;\r\n                return orderA - orderB;\r\n            });\r\n\r\n        const renderOptions = {\r\n            context: 'popup',\r\n            includeIcon: true,\r\n            resolveCategoryDisplay: options.resolveCategoryDisplay\r\n        };\r\n\r\n        // ...log supprim√© ([POPUP] buildPopupHTML - sorted config)...\r\n\r\n        // Group sections and assemble HTML\r\n        try {\r\n            const sections = groupPopupSections(sortedConfig, poi, renderOptions);\r\n            // ...log supprim√© ([POPUP] buildPopupHTML - sections grouped)...\r\n\r\n            const html = assemblePopupHTML(poi, sections);\r\n            // ...log supprim√© ([POPUP] buildPopupHTML - HTML length)...\r\n\r\n            return html;\r\n        } catch(err) {\r\n            // ...log supprim√© ([POPUP] ERROR in buildPopupHTML)...\r\n            return '<div class=\"gl-poi-popup\"><div class=\"gl-poi-popup__body\">Erreur: ' + escapeHtml(err.message) + '</div></div>';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Construit le HTML d'un tooltip (texte uniquement, limit√©).\r\n     *\r\n     * G√©n√®re un tooltip simple avec valeurs textuelles s√©par√©es par \" | \".\r\n     * Pas de HTML complexe, optimis√© pour tooltips Leaflet.\r\n     *\r\n     * Processus:\r\n     * 1. Si pas de config => utilise title/label/name par d√©faut\r\n     * 2. Sinon extrait les valeurs textuelles de chaque renderer\r\n     * 3. G√®re badge resolution via resolveBadgeTooltip\r\n     * 4. Joint les parties avec \" | \"\r\n     *\r\n     * @function buildTooltipHTML\r\n     * @param {Object} poi - Donn√©es du POI normalis√©\r\n     * @param {Object} poi.title - Titre par d√©faut\r\n     * @param {Object} poi.attributes - Attributs du POI\r\n     * @param {Array<Object>} config - Configuration detailTooltip (array de renderers)\r\n     * @param {string} config[].type - Type de renderer ('text', 'badge', 'number', etc.)\r\n     * @param {string} config[].field - Chemin du champ (ex: 'attributes.name')\r\n     * @param {number} [config[].order] - Ordre d'affichage (tri croissant)\r\n     * @param {Object} [options={}] - Options de rendu\r\n     * @returns {string} Texte du tooltip (pas de HTML, texte plat)\r\n     *\r\n     * @example\r\n     * // Tooltip simple sans config\r\n     * const text1 = buildTooltipHTML({ title: 'Restaurant Le Gourmet' }, []);\r\n     * // Retourne: 'Restaurant Le Gourmet'\r\n     *\r\n     * @example\r\n     * // Tooltip avec config (name + category + rating)\r\n     * const text2 = buildTooltipHTML(\r\n     *   poi,\r\n     *   [\r\n     *     { type: 'text', field: 'attributes.name', order: 1 },\r\n     *     { type: 'badge', field: 'attributes.categoryId', order: 2 },\r\n     *     { type: 'number', field: 'attributes.rating', order: 3 }\r\n     *   ]\r\n     * );\r\n     * // Retourne: 'Le Gourmet | Restaurant | 4.5'\r\n     *\r\n     * @example\r\n     * // Tooltip avec valeurs manquantes (skip√©s)\r\n     * const text3 = buildTooltipHTML(\r\n     *   poi,\r\n     *   [\r\n     *     { type: 'text', field: 'attributes.name', order: 1 },\r\n     *     { type: 'text', field: 'attributes.missingField', order: 2 }\r\n     *   ]\r\n     * );\r\n     * // Retourne: 'Le Gourmet' (missingField skipp√©)\r\n     */\r\n    function buildTooltipHTML(poi, config, options = {}) {\r\n        if (!poi) {\r\n            getLog().warn('[Assemblers] POI invalide pour buildTooltipHTML');\r\n            return '';\r\n        }\r\n\r\n        const helpers = getHelpers();\r\n        const escapeHtml = getEscapeHtml();\r\n        const resolveField = getResolveField();\r\n\r\n        // Si pas de config, tooltip par d√©faut - use helpers\r\n        if (!config || !Array.isArray(config) || config.length === 0) {\r\n            const title = helpers.getDefaultTitle ? helpers.getDefaultTitle(poi) :\r\n                (poi.title || poi.label || poi.name ||\r\n                 resolveField(poi, 'attributes.name', 'attributes.nom', 'properties.name', 'properties.nom') ||\r\n                 'Sans titre');\r\n            return escapeHtml(String(title));\r\n        }\r\n\r\n        // Use helpers for config sorting\r\n        const sortedConfig = helpers.sortConfigByOrder ? helpers.sortConfigByOrder(config) :\r\n            [...config].sort((a, b) => {\r\n                const orderA = typeof a.order === 'number' ? a.order : 999;\r\n                const orderB = typeof b.order === 'number' ? b.order : 999;\r\n                return orderA - orderB;\r\n            });\r\n\r\n        const renderOptions = { context: 'tooltip' };\r\n        const parts = [];\r\n\r\n        sortedConfig.forEach((item, index) => {\r\n            if (!item || !item.type || !item.field) return;\r\n\r\n            const value = resolveField(poi, item.field);\r\n            if (value == null || value === '') return;\r\n\r\n            // Pour les tooltips, on extrait juste la valeur textuelle\r\n            if (item.type === 'text' || item.type === 'badge') {\r\n                let displayValue = value;\r\n\r\n                // Use helpers for badge resolution\r\n                if (item.type === 'badge' && helpers.resolveBadgeLabel) {\r\n                    displayValue = helpers.resolveBadgeLabel(poi, item.field, value);\r\n                } else if (item.type === 'badge') {\r\n                    // Fallback to inline resolution\r\n                    const profile = getActiveProfile();\r\n                    const taxonomy = profile?.taxonomy;\r\n                    if (taxonomy) {\r\n                        const attrs = poi.attributes || {};\r\n                        if (item.field.includes('subCategoryId')) {\r\n                            const catId = attrs.categoryId || attrs.category;\r\n                            const catData = taxonomy.categories?.[catId];\r\n                            const subCatData = catData?.subcategories?.[value];\r\n                            if (subCatData?.label) displayValue = subCatData.label;\r\n                        } else if (item.field.includes('categoryId')) {\r\n                            const catData = taxonomy.categories?.[value];\r\n                            if (catData?.label) displayValue = catData.label;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                parts.push(escapeHtml(String(displayValue)));\r\n            }\r\n            else if (item.type === 'number') {\r\n                const numValue = typeof value === 'number' ? value : parseFloat(value);\r\n                if (!isNaN(numValue)) {\r\n                    parts.push(numValue.toLocaleString('fr-FR'));\r\n                }\r\n            }\r\n            else if (item.type === 'image') {\r\n                // Image en tooltip : afficher en ligne\r\n                parts.push('<img src=\"' + escapeHtml(value) + '\" alt=\"\" style=\"max-width:150px;max-height:100px;display:block;margin:4px 0;\" />');\r\n            }\r\n            else if (item.type === 'link') {\r\n                const label = item.label || value;\r\n                parts.push('<a href=\"' + escapeHtml(value) + '\" target=\"_blank\">' + escapeHtml(label) + '</a>');\r\n            }\r\n        });\r\n\r\n        if (parts.length === 0) {\r\n            const title = poi.title || poi.label || 'Sans titre';\r\n            return escapeHtml(String(title));\r\n        }\r\n\r\n        // Joindre avec contentUnion ou espace\r\n        let result = '';\r\n        parts.forEach((part, index) => {\r\n            result += part;\r\n            if (index < parts.length - 1) {\r\n                const item = sortedConfig[index];\r\n                if (item && item.contentUnion) {\r\n                    result += ' ' + escapeHtml(item.contentUnion) + ' ';\r\n                } else {\r\n                    result += ' ';\r\n                }\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Construit les √©l√©ments DOM pour un panneau lat√©ral (side panel / accordion).\r\n     *\r\n     * G√©n√®re un tableau d'objets pour chaque √©l√©ment du panneau:\r\n     * - html: HTML rendu de l'√©l√©ment\r\n     * - config: Configuration renderer originale\r\n     * - label: Label de l'√©l√©ment (pour accord√©on)\r\n     * - accordion: Si true, √©l√©ment dans un accord√©on\r\n     * - defaultOpen: Si true, accord√©on ouvert par d√©faut\r\n     *\r\n     * Tri automatique par config.order, √©l√©ments sans valeur skip√©s.\r\n     *\r\n     * @function buildPanelItems\r\n     * @param {Object} poi - Donn√©es du POI normalis√©\r\n     * @param {Object} poi.attributes - Attributs du POI\r\n     * @param {Array<Object>} config - Configuration detailLayout (array de renderers)\r\n     * @param {string} config[].type - Type de renderer ('text', 'list', 'image', etc.)\r\n     * @param {string} config[].field - Chemin du champ (ex: 'attributes.description')\r\n     * @param {number} [config[].order] - Ordre d'affichage (tri croissant)\r\n     * @param {string} [config[].label] - Label de l'√©l√©ment (pour accord√©on)\r\n     * @param {boolean} [config[].accordion] - Si true, √©l√©ment dans un accord√©on\r\n     * @param {boolean} [config[].defaultOpen=true] - Si false, accord√©on ferm√© par d√©faut\r\n     * @param {Object} [options={}] - Options de rendu\r\n     * @returns {Array<Object>} Tableau d'objets {html, config, label, accordion, defaultOpen}\r\n     * @returns {string} returns[].html - HTML rendu de l'√©l√©ment\r\n     * @returns {Object} returns[].config - Configuration renderer originale\r\n     * @returns {string} returns[].label - Label de l'√©l√©ment\r\n     * @returns {boolean} returns[].accordion - Si true, √©l√©ment dans un accord√©on\r\n     * @returns {boolean} returns[].defaultOpen - Si true, accord√©on ouvert par d√©faut\r\n     *\r\n     * @example\r\n     * // Panel simple sans accord√©on\r\n     * const items1 = buildPanelItems(\r\n     *   poi,\r\n     *   [\r\n     *     { type: 'text', field: 'attributes.name', label: 'Nom', order: 1 },\r\n     *     { type: 'longtext', field: 'attributes.description', label: 'Description', order: 2 }\r\n     *   ]\r\n     * );\r\n     * // Retourne: [\r\n     * //   { html: '<p>...</p>', config: {...}, label: 'Nom', accordion: false, defaultOpen: true },\r\n     * //   { html: '<div>...</div>', config: {...}, label: 'Description', accordion: false, defaultOpen: true }\r\n     * // ]\r\n     *\r\n     * @example\r\n     * // Panel avec accord√©ons\r\n     * const items2 = buildPanelItems(\r\n     *   poi,\r\n     *   [\r\n     *     { type: 'text', field: 'attributes.name', label: 'Nom', order: 1 },\r\n     *     { type: 'list', field: 'attributes.tags', label: 'Tags', accordion: true, defaultOpen: true, order: 2 },\r\n     *     { type: 'gallery', field: 'attributes.photos', label: 'Photos', accordion: true, defaultOpen: false, order: 3 }\r\n     *   ]\r\n     * );\r\n     * // Retourne: [\r\n     * //   { html: '<p>...</p>', label: 'Nom', accordion: false, defaultOpen: true },\r\n     * //   { html: '<ul>...</ul>', label: 'Tags', accordion: true, defaultOpen: true },\r\n     * //   { html: '<div>...</div>', label: 'Photos', accordion: true, defaultOpen: false }\r\n     * // ]\r\n     */\r\n    function buildPanelItems(poi, config, options = {}) {\r\n        if (!poi || !config || !Array.isArray(config)) {\r\n            return [];\r\n        }\r\n\r\n        const resolveField = getResolveField();\r\n        const renderOptions = { context: 'panel', ...options };\r\n\r\n        // Trier par order\r\n        const sortedConfig = [...config].sort((a, b) => {\r\n            const orderA = typeof a.order === 'number' ? a.order : 999;\r\n            const orderB = typeof b.order === 'number' ? b.order : 999;\r\n            return orderA - orderB;\r\n        });\r\n\r\n        const items = [];\r\n\r\n        sortedConfig.forEach(itemConfig => {\r\n            if (!itemConfig || !itemConfig.type) return;\r\n\r\n            // V√©rifier si la valeur existe\r\n            const value = resolveField(poi, itemConfig.field);\r\n            const hasValue = value !== null && value !== undefined && value !== '' &&\r\n                             !(Array.isArray(value) && value.length === 0);\r\n\r\n            if (!hasValue && itemConfig.type !== 'coordinates') return;\r\n\r\n            const html = renderItem(poi, itemConfig, renderOptions);\r\n            if (html) {\r\n                items.push({\r\n                    html: html,\r\n                    config: itemConfig,\r\n                    label: itemConfig.label || '',\r\n                    accordion: itemConfig.accordion === true,\r\n                    defaultOpen: itemConfig.defaultOpen !== false\r\n                });\r\n            }\r\n        });\r\n\r\n        return items;\r\n    }\r\n\r\n    // ========================================\r\n    //   EXPORT\r\n    // ========================================\r\n\r\n    console.log('[POPUP] assemblers.js - Registering Assemblers...');\r\n    console.log('[POPUP] assemblers.js - GeoLeaf before:', !!global.GeoLeaf);\r\n    console.log('[POPUP] assemblers.js - GeoLeaf._ContentBuilder before:', !!global.GeoLeaf?._ContentBuilder);\r\n\r\n    if (!GeoLeaf._ContentBuilder) {\r\n        console.log('[POPUP] assemblers.js - Creating GeoLeaf._ContentBuilder');\r\n        GeoLeaf._ContentBuilder = {};\r\n    }\r\n\r\n    GeoLeaf._ContentBuilder.Assemblers = {\r\n        buildPopupHTML,\r\n        buildTooltipHTML,\r\n        buildPanelItems\r\n    };\r\n\r\n    console.log('[POPUP] assemblers.js - Assemblers registered:', !!GeoLeaf._ContentBuilder.Assemblers);\r\n    console.log('[POPUP] assemblers.js - global.GeoLeaf._ContentBuilder.Assemblers:', !!global.GeoLeaf._ContentBuilder.Assemblers);\r\n\r\n    // Make sure global reference is updated\r\n    global.GeoLeaf = GeoLeaf;\r\n\r\n    getLog().info('[GeoLeaf._ContentBuilder.Assemblers] Module Assemblers charg√©');\r\n\r\n    global.GeoLeaf = GeoLeaf;\r\n\r\n})(typeof window !== 'undefined' ? window : global);\r\n","/**\r\n * GeoLeaf UI Content Builder Module\r\n * Module central pour la construction du contenu des tooltips, popups et panneaux lat√©raux.\r\n * Unifie le rendu pour tous les types de sources (JSON, GeoJSON, GPX, routes).\r\n *\r\n * @module ui/content-builder\r\n * @version 1.0.0\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    GeoLeaf._ContentBuilder = GeoLeaf._ContentBuilder || {};\r\n\r\n    // ========================================\r\n    //   CORE HELPERS (depuis Core module)\r\n    // ========================================\r\n\r\n    /**\r\n     * R√©cup√®re les helpers depuis Core (avec fallback)\r\n     */\r\n    function getCore() {\r\n        return GeoLeaf._ContentBuilder.Core || {\r\n            getResolveField: function() {\r\n                return GeoLeaf.Utils?.resolveField || (() => null);\r\n            },\r\n            getEscapeHtml: function() {\r\n                return GeoLeaf.Security?.escapeHtml || function(str) {\r\n                    if (str == null) return '';\r\n                    return String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\r\n                };\r\n            },\r\n            getActiveProfile: function() {\r\n                return GeoLeaf.Config?.getActiveProfile?.() || null;\r\n            },\r\n            getLog: function() {\r\n                return GeoLeaf.Log || console;\r\n            }\r\n        };\r\n    }\r\n\r\n    // Raccourcis vers Core\r\n    const getResolveField = () => getCore().getResolveField();\r\n    const getEscapeHtml = () => getCore().getEscapeHtml();\r\n    const getActiveProfile = () => getCore().getActiveProfile();\r\n    const getLog = () => getCore().getLog();\r\n\r\n    // ========================================\r\n    //   RENDERERS PAR TYPE\r\n    // ========================================\r\n\r\n    /**\r\n     * Construit un √©l√©ment de type \"text\"\r\n     * @param {Object} poi - Donn√©es du POI\r\n     * @param {Object} config - Configuration de l'√©l√©ment\r\n     * @param {Object} options - Options de rendu (context: 'popup'|'tooltip'|'panel')\r\n     * @returns {string} HTML\r\n     */\r\n    function renderText(poi, config, options = {}) {\r\n        const resolveField = getResolveField();\r\n        const escapeHtml = getEscapeHtml();\r\n\r\n        // Tester le champ tel quel, puis avec fallback attributes si properties\r\n        let value = resolveField(poi, config.field);\r\n\r\n        // Si le champ commence par \"properties.\" et n'a pas de valeur, essayer avec \"attributes.\"\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('properties.')) {\r\n            const attributesField = config.field.replace(/^properties\\./, 'attributes.');\r\n            value = resolveField(poi, attributesField);\r\n        }\r\n\r\n        // Si le champ commence par \"attributes.\" et n'a pas de valeur, essayer avec \"properties.\"\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('attributes.')) {\r\n            const propertiesField = config.field.replace(/^attributes\\./, 'properties.');\r\n            value = resolveField(poi, propertiesField);\r\n        }\r\n\r\n        if (value == null || value === '') return '';\r\n\r\n        const escaped = escapeHtml(String(value));\r\n        const variant = config.variant || 'default';\r\n        const context = options.context || 'popup';\r\n\r\n        if (variant === 'title') {\r\n            // Titre avec √©ventuelle ic√¥ne\r\n            let iconHtml = '';\r\n            if (options.includeIcon && options.resolveCategoryDisplay) {\r\n                const displayConfig = options.resolveCategoryDisplay(poi);\r\n                if (displayConfig && displayConfig.iconId) {\r\n                    const iconsConfig = (GeoLeaf.Config && typeof GeoLeaf.Config.getIconsConfig === \"function\")\r\n                        ? GeoLeaf.Config.getIconsConfig()\r\n                        : null;\r\n                    const iconPrefix = (iconsConfig && iconsConfig.symbolPrefix) || 'gl-poi-cat-';\r\n                    const iconIdNormalized = String(displayConfig.iconId).trim().toLowerCase().replace(/\\s+/g, '-');\r\n                    const symbolId = iconPrefix + iconIdNormalized;\r\n                    iconHtml = '<svg class=\"gl-poi-popup__icon\" aria-hidden=\"true\" focusable=\"false\" viewBox=\"0 0 24 24\">' +\r\n                        '<circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"' + (displayConfig.colorFill || '#666') + '\" stroke=\"' + (displayConfig.colorStroke || '#222') + '\" stroke-width=\"1.5\"/>' +\r\n                        '<svg x=\"4\" y=\"4\" width=\"16\" height=\"16\"><use href=\"#' + symbolId + '\" style=\"color: #ffffff\"/></svg>' +\r\n                        '</svg>';\r\n                }\r\n            }\r\n            return '<h3 class=\"gl-poi-popup__title\">' + iconHtml + '<span class=\"gl-poi-popup__title-text\">' + escaped + '</span></h3>';\r\n        }\r\n\r\n        if (variant === 'short') {\r\n            return '<p class=\"gl-poi-popup__desc\">' + escaped + '</p>';\r\n        }\r\n\r\n        if (variant === 'long' || variant === 'paragraph') {\r\n            return '<p class=\"gl-poi-popup__desc gl-poi-popup__desc--long\">' + escaped + '</p>';\r\n        }\r\n\r\n        return '<p class=\"gl-poi-popup__desc\">' + escaped + '</p>';\r\n    }\r\n\r\n    /**\r\n     * Construit un √©l√©ment de type \"longtext\"\r\n     * @param {Object} poi - Donn√©es du POI\r\n     * @param {Object} config - Configuration de l'√©l√©ment\r\n     * @param {Object} options - Options de rendu\r\n     * @returns {string} HTML\r\n     */\r\n    function renderLongtext(poi, config, options = {}) {\r\n        const resolveField = getResolveField();\r\n        const escapeHtml = getEscapeHtml();\r\n\r\n        let value = resolveField(poi, config.field);\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('properties.')) {\r\n            value = resolveField(poi, config.field.replace(/^properties\\./, 'attributes.'));\r\n        }\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('attributes.')) {\r\n            value = resolveField(poi, config.field.replace(/^attributes\\./, 'properties.'));\r\n        }\r\n        if (value == null || value === '') return '';\r\n\r\n        const escaped = escapeHtml(String(value));\r\n        return '<div class=\"gl-content__longtext\"><p>' + escaped.replace(/\\n/g, '</p><p>') + '</p></div>';\r\n    }\r\n\r\n    /**\r\n     * Construit un √©l√©ment de type \"number\"\r\n     * @param {Object} poi - Donn√©es du POI\r\n     * @param {Object} config - Configuration de l'√©l√©ment\r\n     * @param {Object} options - Options de rendu\r\n     * @returns {string} HTML\r\n     */\r\n    function renderNumber(poi, config, options = {}) {\r\n        const resolveField = getResolveField();\r\n        const escapeHtml = getEscapeHtml();\r\n\r\n        let value = resolveField(poi, config.field);\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('properties.')) {\r\n            value = resolveField(poi, config.field.replace(/^properties\\./, 'attributes.'));\r\n        }\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('attributes.')) {\r\n            value = resolveField(poi, config.field.replace(/^attributes\\./, 'properties.'));\r\n        }\r\n        if (value == null || value === '') return '';\r\n\r\n        const numValue = typeof value === 'number' ? value : parseFloat(value);\r\n        if (isNaN(numValue)) return '';\r\n\r\n        const formatted = numValue.toLocaleString('fr-FR');\r\n        const label = config.label ? escapeHtml(config.label) : '';\r\n        const variant = config.variant || 'default';\r\n\r\n        if (variant === 'stat') {\r\n            return '<div class=\"gl-content__stat\">' +\r\n                (label ? '<span class=\"gl-content__stat-label\">' + label + '</span>' : '') +\r\n                '<span class=\"gl-content__stat-value\">' + formatted + '</span>' +\r\n                '</div>';\r\n        }\r\n\r\n        return '<p class=\"gl-content__number\">' +\r\n            (label ? '<strong>' + label + ':</strong> ' : '') +\r\n            formatted + '</p>';\r\n    }\r\n\r\n    /**\r\n     * Construit un √©l√©ment de type \"metric\" (nombre avec unit√©/suffixe)\r\n     * @param {Object} poi - Donn√©es du POI\r\n     * @param {Object} config - Configuration de l'√©l√©ment\r\n     * @param {Object} options - Options de rendu\r\n     * @returns {string} HTML\r\n     */\r\n    function renderMetric(poi, config, options = {}) {\r\n        const resolveField = getResolveField();\r\n        const escapeHtml = getEscapeHtml();\r\n\r\n        let value = resolveField(poi, config.field);\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('properties.')) {\r\n            value = resolveField(poi, config.field.replace(/^properties\\./, 'attributes.'));\r\n        }\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('attributes.')) {\r\n            value = resolveField(poi, config.field.replace(/^attributes\\./, 'properties.'));\r\n        }\r\n        if (value == null || value === '') return '';\r\n\r\n        const numValue = typeof value === 'number' ? value : parseFloat(value);\r\n        if (isNaN(numValue)) return '';\r\n\r\n        // Utiliser Templates si disponible, sinon fallback\r\n        if (GeoLeaf._ContentBuilder && GeoLeaf._ContentBuilder.Templates) {\r\n            return GeoLeaf._ContentBuilder.Templates.createMetricElement(numValue, config, escapeHtml);\r\n        }\r\n\r\n        // Fallback si Templates pas charg√©\r\n        const formatted = numValue.toLocaleString('fr-FR');\r\n        const suffix = config.suffix ? escapeHtml(config.suffix) : '';\r\n        const prefix = config.prefix ? escapeHtml(config.prefix) : '';\r\n        const label = config.label ? escapeHtml(config.label) : '';\r\n        return '<p class=\"gl-content__metric\">' +\r\n            (label ? '<strong>' + label + ':</strong> ' : '') +\r\n            prefix + formatted + suffix + '</p>';\r\n    }\r\n\r\n    /**\r\n     * Construit un √©l√©ment de type \"badge\"\r\n     * @param {Object} poi - Donn√©es du POI\r\n     * @param {Object} config - Configuration de l'√©l√©ment\r\n     * @param {Object} options - Options de rendu\r\n     * @returns {string} HTML\r\n     */\r\n    function renderBadge(poi, config, options = {}) {\r\n        const resolveField = getResolveField();\r\n        const escapeHtml = getEscapeHtml();\r\n        const Core = getCore();\r\n\r\n        let value = resolveField(poi, config.field);\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('properties.')) {\r\n            value = resolveField(poi, config.field.replace(/^properties\\./, 'attributes.'));\r\n        }\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('attributes.')) {\r\n            value = resolveField(poi, config.field.replace(/^attributes\\./, 'properties.'));\r\n        }\r\n        if (value == null || value === '') return '';\r\n\r\n        const variant = config.variant || 'default';\r\n\r\n        // Utiliser le badge resolver de Core\r\n        const badge = Core.resolveBadge ?\r\n            Core.resolveBadge(poi, config.field, variant) :\r\n            { displayValue: String(value), style: '' };\r\n\r\n        const escaped = escapeHtml(badge.displayValue);\r\n        const badgeClass = 'gl-poi-badge gl-poi-badge--' + variant;\r\n        const styleAttr = badge.style ? ' style=\"' + badge.style + '\"' : '';\r\n\r\n        return '<span class=\"' + badgeClass + '\"' + styleAttr + '>' + escaped + '</span>';\r\n    }\r\n\r\n    /**\r\n     * Construit un √©l√©ment de type \"rating\"\r\n     * @param {Object} poi - Donn√©es du POI\r\n     * @param {Object} config - Configuration de l'√©l√©ment\r\n     * @param {Object} options - Options de rendu\r\n     * @returns {string} HTML\r\n     */\r\n    function renderRating(poi, config, options = {}) {\r\n        const resolveField = getResolveField();\r\n        const escapeHtml = getEscapeHtml();\r\n\r\n        let value = resolveField(poi, config.field);\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('properties.')) {\r\n            value = resolveField(poi, config.field.replace(/^properties\\./, 'attributes.'));\r\n        }\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('attributes.')) {\r\n            value = resolveField(poi, config.field.replace(/^attributes\\./, 'properties.'));\r\n        }\r\n        if (value == null || value === '') return '';\r\n\r\n        const rating = typeof value === 'number' ? value : parseFloat(value);\r\n        if (isNaN(rating) || rating < 0 || rating > 5) return '';\r\n\r\n        // Variant stat avec layout sp√©cial (conserver l'ancien)\r\n        if (config.variant === 'stat') {\r\n            const label = config.label ? escapeHtml(config.label) : '';\r\n            let starsHtml = '<span class=\"gl-rating__stars\">';\r\n            for (let i = 1; i <= 5; i++) {\r\n                const isFilled = i <= Math.round(rating);\r\n                starsHtml += '<span class=\"gl-rating__star' + (isFilled ? ' gl-rating__star--filled' : '') + '\">‚òÖ</span>';\r\n            }\r\n            starsHtml += '</span>';\r\n            const numericValue = rating.toFixed(1);\r\n            return '<div class=\"gl-rating gl-rating--stat\">' +\r\n                (label ? '<span class=\"gl-rating__label\">' + label + '</span>' : '') +\r\n                '<div class=\"gl-rating__content\">' +\r\n                starsHtml +\r\n                '<span class=\"gl-rating__value\">' + numericValue + '/5</span>' +\r\n                '</div>' +\r\n                '</div>';\r\n        }\r\n\r\n        // Variante par d√©faut : utiliser template si disponible\r\n        if (GeoLeaf._ContentBuilder && GeoLeaf._ContentBuilder.Templates) {\r\n            return GeoLeaf._ContentBuilder.Templates.createRatingElement(rating, config, escapeHtml);\r\n        }\r\n\r\n        // Fallback si Templates pas charg√©\r\n        const label = config.label ? escapeHtml(config.label) : '';\r\n        let starsHtml = '<span class=\"gl-rating__stars\">';\r\n        for (let i = 1; i <= 5; i++) {\r\n            const isFilled = i <= Math.round(rating);\r\n            starsHtml += '<span class=\"gl-rating__star' + (isFilled ? ' gl-rating__star--filled' : '') + '\">‚òÖ</span>';\r\n        }\r\n        starsHtml += '</span>';\r\n        const numericValue = rating.toFixed(1);\r\n        return '<div class=\"gl-rating\">' +\r\n            (label ? '<span class=\"gl-rating__label\">' + label + ': </span>' : '') +\r\n            starsHtml +\r\n            '<span class=\"gl-rating__value\">' + numericValue + '/5</span>' +\r\n            '</div>';\r\n    }\r\n\r\n    /**\r\n     * Construit un √©l√©ment de type \"image\"\r\n     * @param {Object} poi - Donn√©es du POI\r\n     * @param {Object} config - Configuration de l'√©l√©ment\r\n     * @param {Object} options - Options de rendu\r\n     * @returns {string} HTML\r\n     */\r\n    function renderImage(poi, config, options = {}) {\r\n        const resolveField = getResolveField();\r\n        const escapeHtml = getEscapeHtml();\r\n        const Core = getCore();\r\n\r\n        let value = resolveField(poi, config.field);\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('properties.')) {\r\n            value = resolveField(poi, config.field.replace(/^properties\\./, 'attributes.'));\r\n        }\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('attributes.')) {\r\n            value = resolveField(poi, config.field.replace(/^attributes\\./, 'properties.'));\r\n        }\r\n        if (value == null || value === '') return '';\r\n\r\n        // Utiliser le validator de Core\r\n        const photoUrl = Core.validateImageUrl ?\r\n            Core.validateImageUrl(value) :\r\n            value;\r\n\r\n        if (!photoUrl) return '';\r\n\r\n        const alt = escapeHtml(config.label || 'Image');\r\n        const variant = config.variant || 'default';\r\n\r\n        if (variant === 'hero') {\r\n            return '<div class=\"gl-poi-popup__photo\"><img src=\"' + photoUrl + '\" alt=\"' + alt + '\" loading=\"lazy\" /></div>';\r\n        }\r\n\r\n        return '<div class=\"gl-poi-popup__photo\"><img src=\"' + photoUrl + '\" alt=\"' + alt + '\" loading=\"lazy\" /></div>';\r\n    }\r\n\r\n    /**\r\n     * Construit un √©l√©ment de type \"link\"\r\n     * @param {Object} poi - Donn√©es du POI\r\n     * @param {Object} config - Configuration de l'√©l√©ment\r\n     * @param {Object} options - Options de rendu\r\n     * @returns {string} HTML\r\n     */\r\n    function renderLink(poi, config, options = {}) {\r\n        const resolveField = getResolveField();\r\n        const escapeHtml = getEscapeHtml();\r\n\r\n        let value = resolveField(poi, config.field);\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('properties.')) {\r\n            value = resolveField(poi, config.field.replace(/^properties\\./, 'attributes.'));\r\n        }\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('attributes.')) {\r\n            value = resolveField(poi, config.field.replace(/^attributes\\./, 'properties.'));\r\n        }\r\n        if (value == null || value === '') return '';\r\n\r\n        const label = escapeHtml(config.label || value);\r\n        const variant = config.variant || 'default';\r\n\r\n        if (variant === 'button') {\r\n            return '<a href=\"' + escapeHtml(value) + '\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"gl-content__link gl-content__link--button\">' + label + '</a>';\r\n        }\r\n\r\n        return '<a href=\"' + escapeHtml(value) + '\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"gl-content__link\">' + label + '</a>';\r\n    }\r\n\r\n    /**\r\n     * Construit un √©l√©ment de type \"list\"\r\n     * @param {Object} poi - Donn√©es du POI\r\n     * @param {Object} config - Configuration de l'√©l√©ment\r\n     * @param {Object} options - Options de rendu\r\n     * @returns {string} HTML\r\n     */\r\n    function renderList(poi, config, options = {}) {\r\n        const resolveField = getResolveField();\r\n        const escapeHtml = getEscapeHtml();\r\n\r\n        let value = resolveField(poi, config.field);\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('properties.')) {\r\n            value = resolveField(poi, config.field.replace(/^properties\\./, 'attributes.'));\r\n        }\r\n        if ((value == null || value === '') && config.field && config.field.startsWith('attributes.')) {\r\n            value = resolveField(poi, config.field.replace(/^attributes\\./, 'properties.'));\r\n        }\r\n        if (value == null) return '';\r\n\r\n        let items = [];\r\n        if (Array.isArray(value)) {\r\n            items = value;\r\n        } else if (typeof value === 'object') {\r\n            items = Object.entries(value).map(([k, v]) => k + ': ' + v);\r\n        } else {\r\n            return '';\r\n        }\r\n\r\n        if (items.length === 0) return '';\r\n\r\n        // Utiliser Templates si disponible, sinon fallback\r\n        if (GeoLeaf._ContentBuilder && GeoLeaf._ContentBuilder.Templates) {\r\n            return GeoLeaf._ContentBuilder.Templates.createListElement(items, config, escapeHtml);\r\n        }\r\n\r\n        // Fallback si Templates pas charg√©\r\n        const variant = config.variant || 'disc';\r\n        const listClass = 'gl-content__list gl-content__list--' + variant;\r\n        let html = '<ul class=\"' + listClass + '\">';\r\n        items.forEach(item => {\r\n            html += '<li>' + escapeHtml(String(item)) + '</li>';\r\n        });\r\n        html += '</ul>';\r\n        return html;\r\n    }\r\n\r\n    /**\r\n     * Construit un √©l√©ment de type \"table\"\r\n     * @param {Object} poi - Donn√©es du POI\r\n     * @param {Object} config - Configuration de l'√©l√©ment\r\n     * @param {Object} options - Options de rendu\r\n     * @returns {string} HTML\r\n     */\r\n    function renderTable(poi, config, options = {}) {\r\n        const resolveField = getResolveField();\r\n        const escapeHtml = getEscapeHtml();\r\n\r\n        const value = resolveField(poi, config.field);\r\n        if (value == null || !Array.isArray(value) || value.length === 0) return '';\r\n\r\n        const columns = config.columns || [];\r\n        if (columns.length === 0) return '';\r\n\r\n        const borders = config.borders || {};\r\n        let tableStyle = '';\r\n        if (borders.color) {\r\n            tableStyle += '--gl-table-border-color: ' + borders.color + ';';\r\n        }\r\n\r\n        let tableClass = 'gl-content__table';\r\n        if (borders.outer) tableClass += ' gl-content__table--border-outer';\r\n        if (borders.row) tableClass += ' gl-content__table--border-row';\r\n        if (borders.column) tableClass += ' gl-content__table--border-column';\r\n\r\n        let html = '<table class=\"' + tableClass + '\"' + (tableStyle ? ' style=\"' + tableStyle + '\"' : '') + '>';\r\n\r\n        // Header\r\n        html += '<thead><tr>';\r\n        columns.forEach(col => {\r\n            html += '<th>' + escapeHtml(col.label || col.key) + '</th>';\r\n        });\r\n        html += '</tr></thead>';\r\n\r\n        // Body\r\n        html += '<tbody>';\r\n        value.forEach(row => {\r\n            html += '<tr>';\r\n            columns.forEach(col => {\r\n                const cellValue = typeof row === 'object' ? (row[col.key] || '') : row;\r\n                html += '<td>' + escapeHtml(String(cellValue)) + '</td>';\r\n            });\r\n            html += '</tr>';\r\n        });\r\n        html += '</tbody></table>';\r\n\r\n        return html;\r\n    }\r\n\r\n    /**\r\n     * Construit un √©l√©ment de type \"tags\"\r\n     * @param {Object} poi - Donn√©es du POI\r\n     * @param {Object} config - Configuration de l'√©l√©ment\r\n     * @param {Object} options - Options de rendu\r\n     * @returns {string} HTML\r\n     */\r\n    function renderTags(poi, config, options = {}) {\r\n        const resolveField = getResolveField();\r\n        const escapeHtml = getEscapeHtml();\r\n\r\n        const value = resolveField(poi, config.field);\r\n        if (value == null || !Array.isArray(value) || value.length === 0) return '';\r\n\r\n        const validTags = value.filter(tag => tag && typeof tag === 'string');\r\n        if (validTags.length === 0) return '';\r\n\r\n        // Utiliser Templates si disponible, sinon fallback\r\n        if (GeoLeaf._ContentBuilder && GeoLeaf._ContentBuilder.Templates) {\r\n            return GeoLeaf._ContentBuilder.Templates.createTagsElement(validTags, config, escapeHtml);\r\n        }\r\n\r\n        // Fallback si Templates pas charg√©\r\n        let html = '<div class=\"gl-content__tags\">';\r\n        validTags.forEach(tag => {\r\n            html += '<span class=\"gl-content__tag\">' + escapeHtml(tag) + '</span>';\r\n        });\r\n        html += '</div>';\r\n        return html;\r\n    }\r\n\r\n    /**\r\n     * Construit un √©l√©ment de type \"coordinates\"\r\n     * @param {Object} poi - Donn√©es du POI\r\n     * @param {Object} config - Configuration de l'√©l√©ment\r\n     * @param {Object} options - Options de rendu\r\n     * @returns {string} HTML\r\n     */\r\n    function renderCoordinates(poi, config, options = {}) {\r\n        const resolveField = getResolveField();\r\n        const escapeHtml = getEscapeHtml();\r\n        const Core = getCore();\r\n\r\n        const value = resolveField(poi, config.field);\r\n        if (value == null) return '';\r\n\r\n        // Utiliser le validator de Core\r\n        const coords = Core.validateCoordinates ?\r\n            Core.validateCoordinates(value) :\r\n            null;\r\n\r\n        if (!coords) return '';\r\n\r\n        // Utiliser Templates si disponible, sinon fallback\r\n        if (GeoLeaf._ContentBuilder && GeoLeaf._ContentBuilder.Templates) {\r\n            return GeoLeaf._ContentBuilder.Templates.createCoordinatesElement(coords.lat, coords.lng, config, escapeHtml);\r\n        }\r\n\r\n        // Fallback si Templates pas charg√©\r\n        const label = config.label ? escapeHtml(config.label) : 'Coordonn√©es';\r\n        const formatted = Core.formatCoordinates ?\r\n            Core.formatCoordinates(coords.lat, coords.lng) :\r\n            coords.lat.toFixed(6) + ', ' + coords.lng.toFixed(6);\r\n        return '<div class=\"gl-content__coordinates\">' +\r\n            '<span class=\"gl-content__coordinates-label\">' + label + ':</span> ' +\r\n            '<span class=\"gl-content__coordinates-value\">' + formatted + '</span>' +\r\n            '</div>';\r\n    }\r\n\r\n    /**\r\n     * Construit un √©l√©ment de type \"gallery\"\r\n     * @param {Object} poi - Donn√©es du POI\r\n     * @param {Object} config - Configuration de l'√©l√©ment\r\n     * @param {Object} options - Options de rendu\r\n     * @returns {string} HTML\r\n     */\r\n    function renderGallery(poi, config, options = {}) {\r\n        const resolveField = getResolveField();\r\n        const escapeHtml = getEscapeHtml();\r\n\r\n        const value = resolveField(poi, config.field);\r\n        if (value == null || !Array.isArray(value) || value.length === 0) return '';\r\n\r\n        const validPhotos = value.filter(url => url && typeof url === 'string');\r\n        if (validPhotos.length === 0) return '';\r\n\r\n        // Utiliser Templates si disponible, sinon fallback\r\n        if (GeoLeaf._ContentBuilder && GeoLeaf._ContentBuilder.Templates) {\r\n            return GeoLeaf._ContentBuilder.Templates.createGalleryElement(validPhotos, config, escapeHtml);\r\n        }\r\n\r\n        // Fallback si Templates pas charg√©\r\n        let html = '<div class=\"gl-content__gallery\">';\r\n        validPhotos.forEach((imgUrl, index) => {\r\n            html += '<div class=\"gl-content__gallery-item\" data-index=\"' + index + '\">' +\r\n                '<img src=\"' + escapeHtml(imgUrl) + '\" alt=\"Image ' + (index + 1) + '\" loading=\"lazy\" />' +\r\n                '</div>';\r\n        });\r\n        html += '</div>';\r\n        return html;\r\n    }\r\n\r\n    // ========================================\r\n    //   REGISTRE DES RENDERERS\r\n    // ========================================\r\n\r\n    const RENDERERS = {\r\n        text: renderText,\r\n        longtext: renderLongtext,\r\n        number: renderNumber,\r\n        metric: renderMetric,\r\n        badge: renderBadge,\r\n        rating: renderRating,\r\n        image: renderImage,\r\n        link: renderLink,\r\n        list: renderList,\r\n        table: renderTable,\r\n        tags: renderTags,\r\n        coordinates: renderCoordinates,\r\n        gallery: renderGallery\r\n    };\r\n\r\n    /**\r\n     * Rend un √©l√©ment selon son type\r\n     * @param {Object} poi - Donn√©es du POI\r\n     * @param {Object} config - Configuration de l'√©l√©ment\r\n     * @param {Object} options - Options de rendu\r\n     * @returns {string} HTML\r\n     */\r\n    function renderItem(poi, config, options = {}) {\r\n        if (!config || !config.type) return '';\r\n\r\n        const renderer = RENDERERS[config.type];\r\n        if (!renderer) {\r\n            getLog().warn('[ContentBuilder] Type de rendu non support√©:', config.type);\r\n            return '';\r\n        }\r\n\r\n        return renderer(poi, config, options);\r\n    }\r\n\r\n    // ========================================\r\n    //   ASSEMBLEURS (via module Assemblers)\r\n    // ========================================\r\n\r\n    function getAssemblers() {\r\n        return global.GeoLeaf?._ContentBuilder?.Assemblers || null;\r\n    }\r\n\r\n    /**\r\n     * Construit le HTML complet d'un popup\r\n     * D√©l√®gue √† Assemblers.buildPopupHTML si disponible\r\n     */\r\n    function buildPopupHTML(poi, config, options = {}) {\r\n        const Assemblers = getAssemblers();\r\n\r\n        // ...logs supprim√©s ([POPUP] wrapper buildPopupHTML)...\r\n        if (Assemblers && Assemblers.buildPopupHTML) {\r\n            return Assemblers.buildPopupHTML(poi, config, options);\r\n        }\r\n        // Fallback minimal\r\n        if (!poi) return '';\r\n        const escapeHtml = getEscapeHtml();\r\n        const title = poi.title || poi.label || poi.name || 'Sans titre';\r\n        return '<div class=\"gl-poi-popup\"><div class=\"gl-poi-popup__body\">' +\r\n               '<h3 class=\"gl-poi-popup__title\"><span class=\"gl-poi-popup__title-text\">' +\r\n               escapeHtml(title) + '</span></h3>' +\r\n               '<a href=\"#\" class=\"gl-poi-popup__link\" data-poi-id=\"' + (poi.id || '') +\r\n               '\">Voir plus >>></a></div></div>';\r\n    }\r\n\r\n    /**\r\n     * Construit le HTML d'un tooltip\r\n     * D√©l√®gue √† Assemblers.buildTooltipHTML si disponible\r\n     */\r\n    function buildTooltipHTML(poi, config, options = {}) {\r\n        const Assemblers = getAssemblers();\r\n        if (Assemblers && Assemblers.buildTooltipHTML) {\r\n            return Assemblers.buildTooltipHTML(poi, config, options);\r\n        }\r\n\r\n        // Fallback minimal\r\n        if (!poi) return '';\r\n        const escapeHtml = getEscapeHtml();\r\n        const resolveField = getResolveField();\r\n        const title = poi.title || poi.label || poi.name ||\r\n                      resolveField(poi, 'attributes.name', 'attributes.nom', 'properties.name', 'properties.nom') ||\r\n                      'Sans titre';\r\n        return escapeHtml(String(title));\r\n    }\r\n\r\n    /**\r\n     * Construit les √©l√©ments DOM pour un panneau lat√©ral\r\n     * D√©l√®gue √† Assemblers.buildPanelItems si disponible\r\n     */\r\n    function buildPanelItems(poi, config, options = {}) {\r\n        const Assemblers = getAssemblers();\r\n        if (Assemblers && Assemblers.buildPanelItems) {\r\n            return Assemblers.buildPanelItems(poi, config, options);\r\n        }\r\n\r\n        // Fallback minimal\r\n        return [];\r\n    }\r\n\r\n    // ========================================\r\n    //   EXPORT\r\n    // ========================================\r\n\r\n    // Preserve existing Assemblers if it exists\r\n    const existingAssemblers = global.GeoLeaf?._ContentBuilder?.Assemblers;\r\n\r\n    GeoLeaf._ContentBuilder = {\r\n        // Renderers individuels\r\n        renderText,\r\n        renderLongtext,\r\n        renderNumber,\r\n        renderBadge,\r\n        renderImage,\r\n        renderLink,\r\n        renderList,\r\n        renderTable,\r\n        renderTags,\r\n        renderCoordinates,\r\n        renderGallery,\r\n        renderItem,\r\n\r\n        // Assembleurs\r\n        buildPopupHTML,\r\n        buildTooltipHTML,\r\n        buildPanelItems,\r\n\r\n        // Utilitaires expos√©s\r\n        getResolveField,\r\n        getEscapeHtml,\r\n        getActiveProfile\r\n    };\r\n\r\n    // Restore Assemblers module reference\r\n    if (existingAssemblers) {\r\n        GeoLeaf._ContentBuilder.Assemblers = existingAssemblers;\r\n    }\r\n\r\n    global.GeoLeaf = GeoLeaf;\r\n\r\n    getLog().info('[GeoLeaf._ContentBuilder] Module Content Builder charg√©');\r\n\r\n})(typeof window !== 'undefined' ? window : global);\r\n","/**\r\n * GeoLeaf UI Components - Module commun partag√©\r\n * Composants d'interface r√©utilisables pour Legend et LayerManager\r\n *\r\n * Extrait le code commun entre:\r\n * - legend-renderer.js\r\n * - layer-manager/renderer.js\r\n *\r\n * D√âPENDANCES:\r\n * - Leaflet (L.DomUtil, L.DomEvent)\r\n * - GeoLeaf.Log (optionnel)\r\n *\r\n * EXPOSE:\r\n * - GeoLeaf._UIComponents\r\n *\r\n * @module ui/components\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module UI Components\r\n     * @namespace _UIComponents\r\n     * @private\r\n     */\r\n    const _UIComponents = {\r\n        /**\r\n         * Cr√©e un accord√©on\r\n         * @param {HTMLElement} container - Conteneur parent\r\n         * @param {Object} config - Configuration de l'accord√©on\r\n         * @param {string} config.layerId - ID de la couche\r\n         * @param {string} config.label - Titre de l'accord√©on\r\n         * @param {boolean} config.collapsed - √âtat initial\r\n         * @param {boolean} config.visible - Couche visible ou non (pour grisage)\r\n         * @param {Function} [config.onToggle] - Callback lors du toggle\r\n         * @returns {Object} - { accordionEl, headerEl, bodyEl }\r\n         */\r\n        createAccordion(container, config) {\r\n            const accordionEl = global.L.DomUtil.create(\"div\", \"gl-legend__accordion\", container);\r\n            accordionEl.setAttribute(\"data-layer-id\", config.layerId);\r\n\r\n            if (config.collapsed) {\r\n                accordionEl.classList.add(\"gl-legend__accordion--collapsed\");\r\n            }\r\n\r\n            // Ajouter classe inactive si la couche n'est pas visible\r\n            if (config.visible === false) {\r\n                accordionEl.classList.add(\"gl-legend__accordion--inactive\");\r\n            }\r\n\r\n            // Header de l'accord√©on\r\n            const headerEl = global.L.DomUtil.create(\"div\", \"gl-legend__accordion-header\", accordionEl);\r\n            headerEl.setAttribute(\"role\", \"button\");\r\n            headerEl.setAttribute(\"tabindex\", \"0\");\r\n            headerEl.setAttribute(\"aria-expanded\", !config.collapsed);\r\n\r\n            const titleEl = global.L.DomUtil.create(\"span\", \"gl-legend__accordion-title\", headerEl);\r\n            titleEl.textContent = config.label;\r\n\r\n            const toggleEl = global.L.DomUtil.create(\"button\", \"gl-legend__accordion-toggle\", headerEl);\r\n            toggleEl.type = \"button\";\r\n            toggleEl.setAttribute(\"aria-label\", \"Basculer l'accord√©on\");\r\n            toggleEl.textContent = config.collapsed ? \"‚ñ∂\" : \"‚ñº\";\r\n\r\n            // Body de l'accord√©on\r\n            const bodyEl = global.L.DomUtil.create(\"div\", \"gl-legend__accordion-body\", accordionEl);\r\n\r\n            // Gestionnaire de clic sur le header\r\n            const onToggle = (ev) => {\r\n                // Ne rien faire si la couche est inactive\r\n                if (config.visible === false) {\r\n                    if (global.L && global.L.DomEvent) {\r\n                        global.L.DomEvent.stopPropagation(ev);\r\n                    }\r\n                    ev.preventDefault();\r\n                    return;\r\n                }\r\n\r\n                if (global.L && global.L.DomEvent) {\r\n                    global.L.DomEvent.stopPropagation(ev);\r\n                }\r\n                ev.preventDefault();\r\n\r\n                const isCollapsed = accordionEl.classList.toggle(\"gl-legend__accordion--collapsed\");\r\n                toggleEl.textContent = isCollapsed ? \"‚ñ∂\" : \"‚ñº\";\r\n                headerEl.setAttribute(\"aria-expanded\", !isCollapsed);\r\n\r\n                // Callback optionnel\r\n                if (typeof config.onToggle === \"function\") {\r\n                    config.onToggle(config.layerId, !isCollapsed);\r\n                }\r\n            };\r\n\r\n            this.attachEventHandler(headerEl, \"click\", onToggle);\r\n\r\n            return { accordionEl, headerEl, bodyEl, toggleEl };\r\n        },\r\n\r\n        /**\r\n         * Rend un symbole cercle (POI/Marker)\r\n         * @param {HTMLElement} container - Conteneur du symbole\r\n         * @param {Object} config - Configuration du symbole\r\n         * @returns {HTMLElement} - √âl√©ment cr√©√©\r\n         */\r\n        renderCircleSymbol(container, config) {\r\n            const circleEl = global.L.DomUtil.create(\"div\", \"gl-legend__circle\", container);\r\n\r\n            // Utiliser le radius transmis, sinon 24px par d√©faut (plus grand pour les l√©gendes avec ic√¥nes)\r\n            const radius = config.radius !== undefined ? config.radius : 24;\r\n            const size = radius * 2;\r\n            const fillColor = config.fillColor || config.color || \"#3388ff\";\r\n            const strokeColor = config.color || config.borderColor || \"rgba(0,0,0,0.2)\";\r\n            const strokeWidth = config.weight || 1;\r\n\r\n            circleEl.style.width = size + \"px\";\r\n            circleEl.style.height = size + \"px\";\r\n            circleEl.style.backgroundColor = fillColor;\r\n            circleEl.style.borderRadius = \"50%\";\r\n            circleEl.style.border = strokeWidth + \"px solid \" + strokeColor;\r\n            circleEl.style.position = \"relative\";\r\n            circleEl.style.display = \"flex\";\r\n            circleEl.style.alignItems = \"center\";\r\n            circleEl.style.justifyContent = \"center\";\r\n\r\n            if (config.fillOpacity !== undefined) {\r\n                circleEl.style.opacity = config.fillOpacity;\r\n            }\r\n\r\n            // Afficher l'ic√¥ne sprite SVG si pr√©sente\r\n            if (config.icon) {\r\n                // Validation de s√©curit√©: L'ID d'ic√¥ne doit √™tre alphanum√©rique avec tirets/underscores seulement\r\n                const iconId = config.icon.startsWith('#') ? config.icon.substring(1) : config.icon;\r\n                if (!/^[a-zA-Z0-9_-]+$/.test(iconId)) {\r\n                    if (Log) Log.error('[UIComponents] ID d\\'ic√¥ne invalide (caract√®res non autoris√©s):', config.icon);\r\n                    return circleEl;\r\n                }\r\n\r\n                const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n                svg.setAttribute(\"viewBox\", \"0 0 24 24\");\r\n                // Rendre l'ic√¥ne √† 85% du cercle pour qu'elle soit bien visible\r\n                svg.style.width = (size * 0.85) + \"px\";\r\n                svg.style.height = (size * 0.85) + \"px\";\r\n                svg.style.fill = config.iconColor || \"currentColor\";\r\n                svg.style.stroke = config.iconColor || \"currentColor\";\r\n                svg.style.color = \"#ffffff\"; // D√©finir la couleur de base pour currentColor\r\n                svg.style.pointerEvents = \"none\";\r\n                svg.style.position = \"absolute\";\r\n\r\n                const use = document.createElementNS(\"http://www.w3.org/2000/svg\", \"use\");\r\n                // ID valid√©, construire le href s√©curis√©\r\n                const iconHref = '#' + iconId;\r\n                // Utiliser la syntaxe moderne href au lieu de xlink:href\r\n                use.setAttribute(\"href\", iconHref);\r\n                svg.appendChild(use);\r\n                circleEl.appendChild(svg);\r\n\r\n                // V√©rification d'erreur seulement si Log est disponible\r\n                if (Log) {\r\n                    const spriteExists = document.querySelector('svg[data-geoleaf-sprite=\"profile\"]');\r\n                    if (!spriteExists) {\r\n                        svg.setAttribute('data-sprite-missing', 'true');\r\n                        Log.warn('[UIComponents] Ic√¥ne', config.icon, 'r√©f√©renc√©e mais sprite non trouv√© dans le DOM');\r\n                    } else {\r\n                        const symbolId = config.icon.startsWith('#') ? config.icon.substring(1) : config.icon;\r\n                        const symbol = spriteExists.querySelector('#' + symbolId);\r\n                        if (!symbol) {\r\n                            svg.setAttribute('data-symbol-missing', config.icon);\r\n                            Log.warn('[UIComponents] Symbole', config.icon, 'non trouv√© dans le sprite SVG');\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return circleEl;\r\n        },\r\n\r\n        /**\r\n         * Rend un symbole ligne\r\n         * @param {HTMLElement} container - Conteneur du symbole\r\n         * @param {Object} config - Configuration du symbole\r\n         * @returns {HTMLElement} - √âl√©ment cr√©√©\r\n         */\r\n        renderLineSymbol(container, config) {\r\n            const width = config.width || 3;\r\n            const color = config.color || \"#3388ff\";\r\n            let style = config.style || \"solid\";\r\n            const dashArray = config.dashArray || null;\r\n            const outlineColor = config.outlineColor || null;\r\n            const outlineWidth = config.outlineWidth || null;\r\n\r\n            // Cr√©er un SVG pour les lignes complexes (dashArray custom, tirets √©pais, ou avec outline)\r\n            if (dashArray || width > 5 || (outlineColor && outlineWidth)) {\r\n                const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n                svg.setAttribute(\"viewBox\", \"0 0 40 8\");\r\n                svg.style.width = \"40px\";\r\n                const totalHeight = Math.max(width, 3) + (outlineWidth || 0) + 4;\r\n                svg.style.height = totalHeight + \"px\";\r\n\r\n                // Si outline existe, dessiner d'abord la ligne de contour\r\n                if (outlineColor && outlineWidth) {\r\n                    const outlineLine = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\r\n                    outlineLine.setAttribute(\"x1\", \"0\");\r\n                    outlineLine.setAttribute(\"y1\", \"4\");\r\n                    outlineLine.setAttribute(\"x2\", \"40\");\r\n                    outlineLine.setAttribute(\"y2\", \"4\");\r\n                    outlineLine.setAttribute(\"stroke\", outlineColor);\r\n                    outlineLine.setAttribute(\"stroke-width\", width + (outlineWidth * 2));\r\n                    outlineLine.setAttribute(\"stroke-linecap\", \"round\");\r\n\r\n                    if (config.outlineOpacity !== undefined) {\r\n                        outlineLine.setAttribute(\"stroke-opacity\", config.outlineOpacity);\r\n                    }\r\n\r\n                    svg.appendChild(outlineLine);\r\n                }\r\n\r\n                // Dessiner ensuite la ligne principale\r\n                const line = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\r\n                line.setAttribute(\"x1\", \"0\");\r\n                line.setAttribute(\"y1\", \"4\");\r\n                line.setAttribute(\"x2\", \"40\");\r\n                line.setAttribute(\"y2\", \"4\");\r\n                line.setAttribute(\"stroke\", color);\r\n                line.setAttribute(\"stroke-width\", width);\r\n                line.setAttribute(\"stroke-linecap\", \"round\");\r\n\r\n                if (dashArray) {\r\n                    line.setAttribute(\"stroke-dasharray\", dashArray);\r\n                } else if (style === \"dashed\") {\r\n                    line.setAttribute(\"stroke-dasharray\", \"8,4\");\r\n                } else if (style === \"dotted\") {\r\n                    line.setAttribute(\"stroke-dasharray\", \"2,3\");\r\n                }\r\n\r\n                if (config.opacity !== undefined) {\r\n                    line.setAttribute(\"stroke-opacity\", config.opacity);\r\n                }\r\n\r\n                svg.appendChild(line);\r\n                container.appendChild(svg);\r\n                return svg;\r\n            }\r\n\r\n            // Fallback : DIV simple pour lignes basiques\r\n            const lineEl = global.L.DomUtil.create(\"div\", \"gl-legend__line\", container);\r\n            lineEl.style.width = \"30px\";\r\n            lineEl.style.height = width + \"px\";\r\n            lineEl.style.backgroundColor = color;\r\n\r\n            if (style === \"dashed\") {\r\n                lineEl.style.backgroundImage = `linear-gradient(to right, ${color} 50%, transparent 50%)`;\r\n                lineEl.style.backgroundSize = \"8px 100%\";\r\n            } else if (style === \"dotted\") {\r\n                lineEl.style.backgroundImage = `linear-gradient(to right, ${color} 30%, transparent 30%)`;\r\n                lineEl.style.backgroundSize = \"4px 100%\";\r\n            }\r\n\r\n            if (config.opacity !== undefined) {\r\n                lineEl.style.opacity = config.opacity;\r\n            }\r\n\r\n            return lineEl;\r\n        },\r\n\r\n        /**\r\n         * Rend un symbole polygone/remplissage\r\n         * @param {HTMLElement} container - Conteneur du symbole\r\n         * @param {Object} config - Configuration du symbole\r\n         * @returns {HTMLElement} - √âl√©ment cr√©√©\r\n         */\r\n        renderPolygonSymbol(container, config) {\r\n            const color = config.fillColor || config.color || \"#3388ff\";\r\n            const borderColor = config.borderColor || config.color || \"#333\";\r\n            const borderWidth = config.weight || 1;\r\n            const hasHatch = config.hatch && config.hatch.enabled;\r\n            // V√©rifier fillOpacity OU opacity (le generator peut utiliser l'un ou l'autre)\r\n            let fillOpacity = config.fillOpacity !== undefined ? config.fillOpacity :\r\n                               (config.opacity !== undefined ? config.opacity : 1);\r\n\r\n            // FIX: Si hatch avec renderMode=\"pattern_only\", forcer fillOpacity=1.0\r\n            // (m√™me logique que layer-manager.js ligne 823-828 - doit rester synchronis√©)\r\n            if (hasHatch && config.hatch.renderMode === 'pattern_only') {\r\n                fillOpacity = 1.0;\r\n            }\r\n\r\n            // Utiliser SVG si hachures pr√©sentes OU si fillOpacity = 0 (contour seul)\r\n            if (hasHatch || fillOpacity === 0) {\r\n                const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n                svg.setAttribute(\"viewBox\", \"0 0 32 24\");\r\n                svg.style.width = \"32px\";\r\n                svg.style.height = \"24px\";\r\n\r\n                // Cr√©er le pattern de hachure SVG si n√©cessaire\r\n                if (hasHatch) {\r\n                    const hatchCfg = config.hatch;\r\n                    const type = hatchCfg.type || \"diagonal\";\r\n                    const spacing = hatchCfg.spacingPx || 10;\r\n                    const hatchColor = (hatchCfg.stroke && hatchCfg.stroke.color) || \"#000000\";\r\n                    const hatchOpacity = (hatchCfg.stroke && hatchCfg.stroke.opacity) !== undefined ? hatchCfg.stroke.opacity : 1;\r\n                    const hatchWidth = (hatchCfg.stroke && hatchCfg.stroke.widthPx) || 1;\r\n\r\n                    const patternId = \"hatch-legend-\" + Date.now() + \"-\" + Math.random().toString(36).substr(2, 9);\r\n                    const defs = document.createElementNS(\"http://www.w3.org/2000/svg\", \"defs\");\r\n                    const pattern = document.createElementNS(\"http://www.w3.org/2000/svg\", \"pattern\");\r\n\r\n                    pattern.setAttribute(\"id\", patternId);\r\n                    pattern.setAttribute(\"patternUnits\", \"userSpaceOnUse\");\r\n                    pattern.setAttribute(\"width\", spacing);\r\n                    pattern.setAttribute(\"height\", spacing);\r\n\r\n                    // Cr√©er le contenu selon le type\r\n                    if (type === \"diagonal\") {\r\n                        const line = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\r\n                        line.setAttribute(\"x1\", \"0\");\r\n                        line.setAttribute(\"y1\", \"0\");\r\n                        line.setAttribute(\"x2\", spacing);\r\n                        line.setAttribute(\"y2\", spacing);\r\n                        line.setAttribute(\"stroke\", hatchColor);\r\n                        line.setAttribute(\"stroke-width\", hatchWidth);\r\n                        line.setAttribute(\"stroke-opacity\", hatchOpacity);\r\n                        pattern.appendChild(line);\r\n                    } else if (type === \"dot\") {\r\n                        const circle = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\r\n                        circle.setAttribute(\"cx\", spacing / 2);\r\n                        circle.setAttribute(\"cy\", spacing / 2);\r\n                        circle.setAttribute(\"r\", Math.max(0.3, spacing * 0.07));\r\n                        circle.setAttribute(\"fill\", hatchColor);\r\n                        circle.setAttribute(\"fill-opacity\", hatchOpacity);\r\n                        pattern.appendChild(circle);\r\n                    } else if (type === \"cross\") {\r\n                        const hLine = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\r\n                        hLine.setAttribute(\"x1\", \"0\");\r\n                        hLine.setAttribute(\"y1\", spacing / 2);\r\n                        hLine.setAttribute(\"x2\", spacing);\r\n                        hLine.setAttribute(\"y2\", spacing / 2);\r\n                        hLine.setAttribute(\"stroke\", hatchColor);\r\n                        hLine.setAttribute(\"stroke-width\", hatchWidth);\r\n                        hLine.setAttribute(\"stroke-opacity\", hatchOpacity);\r\n                        pattern.appendChild(hLine);\r\n\r\n                        const vLine = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\r\n                        vLine.setAttribute(\"x1\", spacing / 2);\r\n                        vLine.setAttribute(\"y1\", \"0\");\r\n                        vLine.setAttribute(\"x2\", spacing / 2);\r\n                        vLine.setAttribute(\"y2\", spacing);\r\n                        vLine.setAttribute(\"stroke\", hatchColor);\r\n                        vLine.setAttribute(\"stroke-width\", hatchWidth);\r\n                        vLine.setAttribute(\"stroke-opacity\", hatchOpacity);\r\n                        pattern.appendChild(vLine);\r\n                    } else if (type === \"x\") {\r\n                        const line1 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\r\n                        line1.setAttribute(\"x1\", \"0\");\r\n                        line1.setAttribute(\"y1\", \"0\");\r\n                        line1.setAttribute(\"x2\", spacing);\r\n                        line1.setAttribute(\"y2\", spacing);\r\n                        line1.setAttribute(\"stroke\", hatchColor);\r\n                        line1.setAttribute(\"stroke-width\", hatchWidth);\r\n                        line1.setAttribute(\"stroke-opacity\", hatchOpacity);\r\n                        pattern.appendChild(line1);\r\n\r\n                        const line2 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\r\n                        line2.setAttribute(\"x1\", spacing);\r\n                        line2.setAttribute(\"y1\", \"0\");\r\n                        line2.setAttribute(\"x2\", \"0\");\r\n                        line2.setAttribute(\"y2\", spacing);\r\n                        line2.setAttribute(\"stroke\", hatchColor);\r\n                        line2.setAttribute(\"stroke-width\", hatchWidth);\r\n                        line2.setAttribute(\"stroke-opacity\", hatchOpacity);\r\n                        pattern.appendChild(line2);\r\n                    }\r\n\r\n                    defs.appendChild(pattern);\r\n                    svg.appendChild(defs);\r\n\r\n                    // Rectangle avec hachure\r\n                    const rect = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\r\n                    rect.setAttribute(\"x\", \"1\");\r\n                    rect.setAttribute(\"y\", \"1\");\r\n                    rect.setAttribute(\"width\", \"30\");\r\n                    rect.setAttribute(\"height\", \"22\");\r\n                    rect.setAttribute(\"fill\", `url(#${patternId})`);\r\n                    rect.setAttribute(\"stroke\", borderColor);\r\n                    rect.setAttribute(\"stroke-width\", borderWidth);\r\n                    if (fillOpacity !== 1) {\r\n                        rect.setAttribute(\"fill-opacity\", fillOpacity);\r\n                    }\r\n\r\n                    svg.appendChild(rect);\r\n                } else {\r\n                    // fillOpacity = 0 : rectangle transparent avec contour seulement\r\n                    const rect = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\r\n                    rect.setAttribute(\"x\", \"1\");\r\n                    rect.setAttribute(\"y\", \"1\");\r\n                    rect.setAttribute(\"width\", \"30\");\r\n                    rect.setAttribute(\"height\", \"22\");\r\n                    rect.setAttribute(\"fill\", \"none\");\r\n                    rect.setAttribute(\"stroke\", borderColor);\r\n                    rect.setAttribute(\"stroke-width\", borderWidth);\r\n\r\n                    // Appliquer le dashArray si pr√©sent\r\n                    if (config.dashArray) {\r\n                        rect.setAttribute(\"stroke-dasharray\", config.dashArray);\r\n                    }\r\n\r\n                    svg.appendChild(rect);\r\n                }\r\n\r\n                container.appendChild(svg);\r\n                return svg;\r\n            }\r\n\r\n            // Fallback : DIV simple avec remplissage\r\n            const polygonEl = global.L.DomUtil.create(\"div\", \"gl-legend__polygon\", container);\r\n            polygonEl.style.width = \"24px\";\r\n            polygonEl.style.height = \"16px\";\r\n            polygonEl.style.backgroundColor = color;\r\n            polygonEl.style.border = borderWidth + \"px solid \" + borderColor;\r\n\r\n            if (fillOpacity !== 1) {\r\n                polygonEl.style.opacity = fillOpacity;\r\n            }\r\n\r\n            return polygonEl;\r\n        },\r\n\r\n        /**\r\n         * Rend un symbole √©toile (rating)\r\n         * @param {HTMLElement} container - Conteneur du symbole\r\n         * @param {Object} config - Configuration du symbole\r\n         * @returns {HTMLElement} - √âl√©ment cr√©√©\r\n         */\r\n        renderStarSymbol(container, config) {\r\n            const starContainer = global.L.DomUtil.create(\"div\", \"gl-legend__stars\", container);\r\n\r\n            const count = config.count || 5;\r\n            const color = config.color || \"#f1c40f\";\r\n            const size = config.size || 12;\r\n\r\n            for (let i = 0; i < count; i++) {\r\n                const starEl = global.L.DomUtil.create(\"span\", \"gl-legend__star\", starContainer);\r\n                starEl.textContent = \"‚òÖ\";\r\n                starEl.style.color = color;\r\n                starEl.style.fontSize = size + \"px\";\r\n            }\r\n\r\n            return starContainer;\r\n        },\r\n\r\n        /**\r\n         * Rend un symbole selon son type\r\n         * @param {HTMLElement} container - Conteneur du symbole\r\n         * @param {Object} config - Configuration du symbole\r\n         * @returns {HTMLElement} - √âl√©ment cr√©√©\r\n         */\r\n        renderSymbol(container, config) {\r\n            // Support de la structure avec config.symbol ou directement config\r\n            const symbolConfig = config.symbol || config;\r\n            const symbolType = symbolConfig.type || config.type || \"circle\";\r\n\r\n            switch (symbolType) {\r\n                case \"marker\":\r\n                case \"circle\":\r\n                    return this.renderCircleSymbol(container, symbolConfig);\r\n\r\n                case \"line\":\r\n                    return this.renderLineSymbol(container, symbolConfig);\r\n\r\n                case \"polygon\":\r\n                case \"fill\":\r\n                    return this.renderPolygonSymbol(container, symbolConfig);\r\n\r\n                case \"star\":\r\n                    return this.renderStarSymbol(container, symbolConfig);\r\n\r\n                case \"icon\":\r\n                    // Icon avec URL d'image\r\n                    if (symbolConfig.iconUrl) {\r\n                        const imgEl = global.L.DomUtil.create(\"img\", \"gl-legend__icon-img\", container);\r\n                        imgEl.src = symbolConfig.iconUrl;\r\n                        if (symbolConfig.size) {\r\n                            imgEl.style.width = symbolConfig.size + \"px\";\r\n                            imgEl.style.height = symbolConfig.size + \"px\";\r\n                        }\r\n                        return imgEl;\r\n                    }\r\n                    // Icon avec sprite SVG - utiliser renderCircleSymbol qui g√®re d√©j√† les sprites\r\n                    if (symbolConfig.icon) {\r\n                        return this.renderCircleSymbol(container, symbolConfig);\r\n                    }\r\n                    // Fallback vers circle\r\n                    return this.renderCircleSymbol(container, symbolConfig);\r\n\r\n                default:\r\n                    return this.renderCircleSymbol(container, symbolConfig);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Cr√©e un bouton toggle (checkbox/switch)\r\n         * @param {HTMLElement} container - Conteneur parent\r\n         * @param {Object} config - Configuration du toggle\r\n         * @param {string} [config.id] - ID du toggle\r\n         * @param {boolean} config.isActive - √âtat initial (alias: active)\r\n         * @param {string} [config.className] - Classe CSS personnalis√©e\r\n         * @param {string} [config.label] - Label du toggle\r\n         * @param {string} [config.title] - Tooltip\r\n         * @param {Function} [config.onToggle] - Callback lors du toggle\r\n         * @returns {HTMLElement} - √âl√©ment bouton cr√©√©\r\n         */\r\n        createToggleButton(container, config) {\r\n            // Support isActive ou active\r\n            const isActive = config.isActive !== undefined ? config.isActive : config.active;\r\n            const className = config.className || \"gl-toggle-btn\";\r\n\r\n            const toggleBtn = global.L.DomUtil.create(\r\n                \"button\",\r\n                className,\r\n                container\r\n            );\r\n            toggleBtn.type = \"button\";\r\n\r\n            if (config.id) {\r\n                toggleBtn.setAttribute(\"data-toggle-id\", config.id);\r\n            }\r\n\r\n            toggleBtn.setAttribute(\"aria-pressed\", isActive ? \"true\" : \"false\");\r\n\r\n            if (config.title) {\r\n                toggleBtn.title = config.title;\r\n            }\r\n\r\n            if (isActive) {\r\n                toggleBtn.classList.add(className + \"--on\");\r\n            }\r\n\r\n            if (config.label) {\r\n                toggleBtn.textContent = config.label;\r\n            }\r\n\r\n            // Attacher le gestionnaire\r\n            if (typeof config.onToggle === \"function\") {\r\n                const className = config.className || \"gl-toggle-btn\";\r\n                const onToggle = (ev) => {\r\n                    if (global.L && global.L.DomEvent) {\r\n                        global.L.DomEvent.stopPropagation(ev);\r\n                    }\r\n                    ev.preventDefault();\r\n\r\n                    const isActive = toggleBtn.classList.toggle(className + \"--on\");\r\n                    toggleBtn.setAttribute(\"aria-pressed\", isActive ? \"true\" : \"false\");\r\n\r\n                    config.onToggle(config.id, isActive, ev);\r\n                };\r\n\r\n                this.attachEventHandler(toggleBtn, \"click\", onToggle);\r\n            }\r\n\r\n            return toggleBtn;\r\n        },\r\n\r\n        /**\r\n         * Attache un gestionnaire d'√©v√©nements compatible Leaflet\r\n         * @param {HTMLElement} element - √âl√©ment cible\r\n         * @param {string} eventName - Nom de l'√©v√©nement\r\n         * @param {Function} handler - Gestionnaire\r\n         */\r\n        attachEventHandler(element, eventName, handler) {\r\n            if (global.L && global.L.DomEvent) {\r\n                global.L.DomEvent.on(element, eventName, handler);\r\n                if (eventName === \"click\") {\r\n                    global.L.DomEvent.disableClickPropagation(element);\r\n                }\r\n            } else {\r\n                element.addEventListener(eventName, handler);\r\n            }\r\n        }\r\n    };\r\n\r\n    // Exposer dans l'espace de noms interne\r\n    GeoLeaf._UIComponents = _UIComponents;\r\n\r\n    if (Log) Log.info(\"[GeoLeaf._UIComponents] Module commun UI charg√©\");\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf Notification System\r\n * Gestion des notifications toast et overlays\r\n * @module ui/notifications\r\n * @version 4.4.1\r\n * @updated 2026-01-23 - Standardisation API, queue prioritaire, int√©gration Telemetry\r\n */\r\n\r\n(function (window) {\r\n    \"use strict\";\r\n\r\n    // Namespace global GeoLeaf\r\n    const GeoLeaf = window.GeoLeaf || (window.GeoLeaf = {});\r\n\r\n    // Helper pour utiliser createElement unifi√©\r\n    const $create = (tag, props, ...children) => {\r\n        return GeoLeaf.Utils && GeoLeaf.Utils.createElement\r\n            ? GeoLeaf.Utils.createElement(tag, props, ...children)\r\n            : document.createElement(tag);\r\n    };\r\n\r\n    // Constantes pour les priorit√©s de la queue\r\n    const PRIORITY = {\r\n        ERROR: 3,\r\n        WARNING: 2,\r\n        SUCCESS: 1,\r\n        INFO: 1\r\n    };\r\n\r\nclass NotificationSystem {\r\n    constructor() {\r\n        this.container = null;\r\n        this.maxVisible = 3;              // Max toasts temporaires visibles\r\n        this.maxPersistent = 2;           // Max toasts persistants visibles\r\n        this.durations = {\r\n            success: 3000,\r\n            error: 5000,\r\n            warning: 4000,\r\n            info: 3000\r\n        };\r\n        this.config = {\r\n            enabled: true,\r\n            position: 'bottom-center',\r\n            animations: true\r\n        };\r\n\r\n        // Managers pour cleanup\r\n        this._eventManager = null;\r\n        this._timerManager = null;\r\n        this._activeToasts = new Map();\r\n\r\n        // Queue avec priorit√©s (limite: 15 max en attente)\r\n        this._queue = [];\r\n        this._maxQueueSize = 15;\r\n\r\n        // Buffer pour m√©triques Telemetry (avant chargement du module)\r\n        this._metricsBuffer = [];\r\n        this._metricsBufferTimeout = null;\r\n        this._telemetryAvailable = false;\r\n    }\r\n\r\n    /**\r\n     * Initialise le syst√®me de notifications\r\n     * @param {Object} config - Configuration\r\n     * @param {string} config.container - S√©lecteur du container\r\n     * @param {number} config.maxVisible - Nombre max de toasts visibles\r\n     * @param {Object} config.durations - Dur√©es par type\r\n     * @param {string} config.position - Position ('bottom-center', 'top-right', etc.)\r\n     * @param {boolean} config.animations - Activer les animations\r\n     */\r\n    init(config = {}) {\r\n        // Fusionner la config\r\n        this.config = { ...this.config, ...config };\r\n        this.maxVisible = config.maxVisible || 3;\r\n        this.durations = { ...this.durations, ...config.durations };\r\n\r\n        // R√©cup√©rer le container\r\n        this.container = document.querySelector(config.container || '#gl-notifications');\r\n\r\n        if (!this.container) {\r\n            const Log = GeoLeaf.Log;\r\n            if (Log) Log.warn('[GeoLeaf Notifications] Container introuvable:', config.container);\r\n            return false;\r\n        }\r\n\r\n        // Appliquer la classe de position\r\n        if (config.position) {\r\n            this.container.className = `gl-notifications gl-notifications--${config.position}`;\r\n        }\r\n\r\n        const Log = GeoLeaf.Log;\r\n        if (Log) Log.debug('[GeoLeaf Notifications] Syst√®me initialis√©');\r\n\r\n        // Initialiser les managers pour le cleanup\r\n        if (GeoLeaf.Utils) {\r\n            this._eventManager = GeoLeaf.Utils.events ? GeoLeaf.Utils.events.createManager('notifications') : null;\r\n            this._timerManager = GeoLeaf.Utils.timers ? GeoLeaf.Utils.timers.createManager('notifications') : null;\r\n        }\r\n\r\n        // D√©marrer le timer de 30s pour vider le buffer de m√©triques\r\n        this._startMetricsBufferTimeout();\r\n\r\n        // Flush imm√©diat si Telemetry est d√©j√† disponible\r\n        this._flushMetricsBuffer();\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Affiche une notification g√©n√©rique (m√©thode publique standardis√©e)\r\n     * Support double signature:\r\n     * - show(message, type, duration) : Appel positionnel classique\r\n     * - show(message, options) : Appel avec objet options\r\n     *\r\n     * @param {string} message - Message √† afficher\r\n     * @param {string|Object} typeOrOptions - Type ('success', 'error', 'warning', 'info') OU objet options\r\n     * @param {number} [duration] - Dur√©e personnalis√©e (ms) - ignor√© si typeOrOptions est un objet\r\n     *\r\n     * @example\r\n     * // Appel positionnel\r\n     * show(\"Message\", \"success\", 3000);\r\n     *\r\n     * @example\r\n     * // Appel avec options\r\n     * show(\"Message\", {\r\n     *   type: \"success\",\r\n     *   duration: 3000,\r\n     *   persistent: false,      // Toast persistant (ne s'auto-dismiss pas)\r\n     *   dismissible: true,      // Bouton de fermeture\r\n     *   icon: \"‚úì\",             // Ic√¥ne personnalis√©e (futur)\r\n     *   action: {               // Action button (futur)\r\n     *     label: \"Annuler\",\r\n     *     callback: () => {}\r\n     *   }\r\n     * });\r\n     */\r\n    show(message, typeOrOptions = 'info', duration) {\r\n        // Parser les arguments selon la signature\r\n        let options = {};\r\n\r\n        if (typeof typeOrOptions === 'string') {\r\n            // Signature positionnelle: show(message, type, duration)\r\n            options = {\r\n                type: typeOrOptions,\r\n                duration: duration\r\n            };\r\n        } else if (typeof typeOrOptions === 'object' && typeOrOptions !== null) {\r\n            // Signature objet: show(message, options)\r\n            options = typeOrOptions;\r\n        } else {\r\n            // Fallback par d√©faut\r\n            options = { type: 'info' };\r\n        }\r\n\r\n        // Ajouter √† la queue avec priorit√©\r\n        return this._enqueue(message, options);\r\n    }\r\n\r\n    /**\r\n     * Affiche une notification de succ√®s\r\n     * Support double signature:\r\n     * - success(message, duration)\r\n     * - success(message, options)\r\n     *\r\n     * @param {string} message - Message √† afficher\r\n     * @param {number|Object} [durationOrOptions] - Dur√©e (ms) OU objet options\r\n     *\r\n     * @example\r\n     * success(\"Sauvegarde r√©ussie\", 3000);\r\n     * success(\"Sauvegarde r√©ussie\", { duration: 3000, persistent: false });\r\n     */\r\n    success(message, durationOrOptions) {\r\n        if (typeof durationOrOptions === 'number') {\r\n            return this.show(message, 'success', durationOrOptions);\r\n        } else if (typeof durationOrOptions === 'object') {\r\n            return this.show(message, { ...durationOrOptions, type: 'success' });\r\n        } else {\r\n            return this.show(message, 'success');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Affiche une notification d'erreur\r\n     * Support double signature:\r\n     * - error(message, duration)\r\n     * - error(message, options)\r\n     *\r\n     * @param {string} message - Message √† afficher\r\n     * @param {number|Object} [durationOrOptions] - Dur√©e (ms) OU objet options\r\n     *\r\n     * @example\r\n     * error(\"Erreur r√©seau\", 5000);\r\n     * error(\"Erreur r√©seau\", { duration: 5000, persistent: true });\r\n     */\r\n    error(message, durationOrOptions) {\r\n        if (typeof durationOrOptions === 'number') {\r\n            return this.show(message, 'error', durationOrOptions);\r\n        } else if (typeof durationOrOptions === 'object') {\r\n            return this.show(message, { ...durationOrOptions, type: 'error' });\r\n        } else {\r\n            return this.show(message, 'error');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Affiche une notification d'avertissement\r\n     * Support double signature:\r\n     * - warning(message, duration)\r\n     * - warning(message, options)\r\n     *\r\n     * @param {string} message - Message √† afficher\r\n     * @param {number|Object} [durationOrOptions] - Dur√©e (ms) OU objet options\r\n     *\r\n     * @example\r\n     * warning(\"Connexion instable\", 4000);\r\n     * warning(\"Connexion instable\", { duration: 4000 });\r\n     */\r\n    warning(message, durationOrOptions) {\r\n        if (typeof durationOrOptions === 'number') {\r\n            return this.show(message, 'warning', durationOrOptions);\r\n        } else if (typeof durationOrOptions === 'object') {\r\n            return this.show(message, { ...durationOrOptions, type: 'warning' });\r\n        } else {\r\n            return this.show(message, 'warning');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Affiche une notification d'information\r\n     * Support double signature:\r\n     * - info(message, duration)\r\n     * - info(message, options)\r\n     *\r\n     * @param {string} message - Message √† afficher\r\n     * @param {number|Object} [durationOrOptions] - Dur√©e (ms) OU objet options\r\n     *\r\n     * @example\r\n     * info(\"Synchronisation en cours\", 3000);\r\n     * info(\"Synchronisation en cours\", { persistent: true, dismissible: false });\r\n     */\r\n    info(message, durationOrOptions) {\r\n        if (typeof durationOrOptions === 'number') {\r\n            return this.show(message, 'info', durationOrOptions);\r\n        } else if (typeof durationOrOptions === 'object') {\r\n            return this.show(message, { ...durationOrOptions, type: 'info' });\r\n        } else {\r\n            return this.show(message, 'info');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Ajoute une notification √† la queue avec priorit√©\r\n     * @private\r\n     * @param {string} message - Message\r\n     * @param {Object} options - Options de la notification\r\n     */\r\n    _enqueue(message, options) {\r\n        const type = options.type || 'info';\r\n        const priority = PRIORITY[type.toUpperCase()] || PRIORITY.INFO;\r\n\r\n        const item = {\r\n            message,\r\n            options: {\r\n                type,\r\n                duration: options.duration,\r\n                persistent: options.persistent || false,\r\n                dismissible: options.dismissible !== false, // true par d√©faut\r\n                icon: options.icon,\r\n                action: options.action\r\n            },\r\n            priority,\r\n            timestamp: Date.now()\r\n        };\r\n\r\n        // V√©rifier la limite de la queue\r\n        if (this._queue.length >= this._maxQueueSize) {\r\n            // Trouver l'√©l√©ment de plus faible priorit√© (et plus ancien si √©galit√©)\r\n            const lowestPriorityIndex = this._queue.reduce((minIdx, item, idx, arr) => {\r\n                const minItem = arr[minIdx];\r\n                if (item.priority < minItem.priority ||\r\n                    (item.priority === minItem.priority && item.timestamp < minItem.timestamp)) {\r\n                    return idx;\r\n                }\r\n                return minIdx;\r\n            }, 0);\r\n\r\n            // Si le nouvel item est plus prioritaire que le moins prioritaire dans la queue\r\n            if (item.priority > this._queue[lowestPriorityIndex].priority) {\r\n                // Supprimer le moins prioritaire\r\n                this._queue.splice(lowestPriorityIndex, 1);\r\n                // Tracker la m√©trique\r\n                this._recordMetric('notification.dropped', 1);\r\n\r\n                const Log = GeoLeaf.Log;\r\n                if (Log) Log.warn('[GeoLeaf Notifications] Queue pleine, notification dropp√©e');\r\n            } else {\r\n                // Dropper le nouveau item\r\n                this._recordMetric('notification.dropped', 1);\r\n                const Log = GeoLeaf.Log;\r\n                if (Log) Log.warn('[GeoLeaf Notifications] Queue pleine, notification rejet√©e');\r\n                return;\r\n            }\r\n        }\r\n\r\n        // Ajouter √† la queue\r\n        this._queue.push(item);\r\n        this._recordMetric('notification.queued', 1);\r\n\r\n        // Trier la queue par priorit√© (desc) puis timestamp (asc)\r\n        this._queue.sort((a, b) => {\r\n            if (b.priority !== a.priority) {\r\n                return b.priority - a.priority; // Priorit√© d√©croissante\r\n            }\r\n            return a.timestamp - b.timestamp; // Timestamp croissant (FIFO pour m√™me priorit√©)\r\n        });\r\n\r\n        // Traiter la queue\r\n        return this._processQueue();\r\n    }\r\n\r\n    /**\r\n     * Traite la queue et affiche les notifications selon disponibilit√©\r\n     * @private\r\n     */\r\n    _processQueue() {\r\n        if (!this.container || !this.config.enabled || this._queue.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        // Compter les toasts actuellement visibles\r\n        const visibleToasts = this.container.querySelectorAll('.gl-toast:not(.gl-toast--removing)');\r\n        const temporaryToasts = Array.from(visibleToasts).filter(t => !t.dataset.persistent);\r\n        const persistentToasts = Array.from(visibleToasts).filter(t => t.dataset.persistent);\r\n\r\n        // Tant qu'il y a de la place et des items dans la queue\r\n        let lastToast = null;\r\n        while (this._queue.length > 0) {\r\n            const nextItem = this._queue[0];\r\n            const isPersistent = nextItem.options.persistent;\r\n\r\n            // V√©rifier si on peut afficher ce toast\r\n            const canShow = isPersistent\r\n                ? persistentToasts.length < this.maxPersistent\r\n                : temporaryToasts.length < this.maxVisible;\r\n\r\n            if (!canShow) {\r\n                // Si c'est un toast prioritaire (error), retirer un toast existant moins prioritaire\r\n                if (nextItem.priority === PRIORITY.ERROR && temporaryToasts.length > 0) {\r\n                    // Trouver un toast info ou success √† retirer\r\n                    const toastToRemove = temporaryToasts.find(t =>\r\n                        t.classList.contains('gl-toast--info') ||\r\n                        t.classList.contains('gl-toast--success')\r\n                    ) || temporaryToasts[0];\r\n\r\n                    this._remove(toastToRemove, true); // true = reorganization\r\n                    // Continuer pour afficher le toast prioritaire\r\n                } else {\r\n                    // Pas de place, arr√™ter le traitement\r\n                    break;\r\n                }\r\n            }\r\n\r\n            // Retirer de la queue et afficher\r\n            const item = this._queue.shift();\r\n            lastToast = this._showImmediate(item.message, item.options);\r\n\r\n            // Mettre √† jour les compteurs\r\n            if (isPersistent) {\r\n                persistentToasts.push(null); // Placeholder\r\n            } else {\r\n                temporaryToasts.push(null); // Placeholder\r\n            }\r\n        }\r\n\r\n        return lastToast;\r\n    }\r\n\r\n    /**\r\n     * Affiche une notification imm√©diatement (utilis√©e par la queue)\r\n     * @private\r\n     * @param {string} message - Message √† afficher\r\n     * @param {Object} options - Options de la notification\r\n     */\r\n    _showImmediate(message, options) {\r\n        const type = options.type || 'info';\r\n        const duration = options.duration || this.durations[type];\r\n        const persistent = options.persistent || false;\r\n        const dismissible = options.dismissible !== false;\r\n\r\n        // Cr√©er le toast\r\n        const toast = $create('div', {\r\n            className: `gl-toast gl-toast--${type}`,\r\n            attributes: {\r\n                'role': 'alert',\r\n                // Utiliser assertive pour errors et toasts prioritaires\r\n                'aria-live': (type === 'error' || options.priority === PRIORITY.ERROR) ? 'assertive' : 'polite'\r\n            }\r\n        });\r\n\r\n        // Marquer si persistant\r\n        if (persistent) {\r\n            toast.dataset.persistent = 'true';\r\n        }\r\n\r\n        // Cr√©er le message (textContent = s√©curis√©)\r\n        const messageSpan = $create('span', {\r\n            className: 'gl-toast__message',\r\n            textContent: message\r\n        });\r\n        toast.appendChild(messageSpan);\r\n\r\n        // Cr√©er le bouton de fermeture (si dismissible)\r\n        if (dismissible) {\r\n            const closeBtn = $create('button', {\r\n                className: 'gl-toast__close',\r\n                attributes: {\r\n                    'aria-label': 'Fermer la notification',\r\n                    'title': 'Fermer'\r\n                },\r\n                textContent: '√ó',\r\n                onClick: () => {\r\n                    this._recordMetric('notification.dismissed.manual', 1);\r\n                    this._remove(toast, false);\r\n                }\r\n            });\r\n            toast.appendChild(closeBtn);\r\n        }\r\n\r\n        // Ajouter au DOM\r\n        this.container.appendChild(toast);\r\n\r\n        // Tracker m√©trique\r\n        this._recordMetric(`notification.shown.${type}`, 1);\r\n\r\n        // Animation d'entr√©e\r\n        if (this.config.animations) {\r\n            requestAnimationFrame(() => {\r\n                requestAnimationFrame(() => {\r\n                    toast.classList.add('gl-toast--visible');\r\n                });\r\n            });\r\n        } else {\r\n            toast.classList.add('gl-toast--visible');\r\n        }\r\n\r\n        // Planifier l'auto-suppression (seulement si non persistant)\r\n        if (!persistent) {\r\n            const autoRemove = setTimeout(() => {\r\n                this._recordMetric('notification.dismissed.auto', 1);\r\n                this._remove(toast, false);\r\n            }, duration);\r\n\r\n            if (this._timerManager) {\r\n                toast.dataset.timerId = this._timerManager.setTimeout(() => {\r\n                    this._recordMetric('notification.dismissed.auto', 1);\r\n                    this._remove(toast, false);\r\n                }, duration);\r\n            } else {\r\n                toast.dataset.timeoutId = autoRemove;\r\n            }\r\n        }\r\n\r\n        return toast;\r\n    }\r\n\r\n    /**\r\n     * Retire une notification\r\n     * @private\r\n     * @param {HTMLElement} toast - √âl√©ment toast √† retirer\r\n     * @param {boolean} isReorganization - Si true, c'est une r√©organisation (animation diff√©rente)\r\n     */\r\n    _remove(toast, isReorganization = false) {\r\n        if (!toast || toast.classList.contains('gl-toast--removing')) {\r\n            return;\r\n        }\r\n\r\n        // Annuler le timeout auto si fermeture manuelle\r\n        if (toast.dataset.timeoutId) {\r\n            clearTimeout(parseInt(toast.dataset.timeoutId));\r\n            delete toast.dataset.timeoutId;\r\n        }\r\n        if (toast.dataset.timerId && this._timerManager) {\r\n            this._timerManager.clearTimeout(toast.dataset.timerId);\r\n            delete toast.dataset.timerId;\r\n        }\r\n\r\n        // Animation de sortie\r\n        toast.classList.add('gl-toast--removing');\r\n        toast.classList.remove('gl-toast--visible');\r\n\r\n        // Appliquer animation sp√©cifique pour r√©organisation\r\n        if (isReorganization && this.config.animations) {\r\n            toast.classList.add('gl-toast--sliding-up');\r\n        }\r\n\r\n        const removeDelay = this.config.animations ? 200 : 0;\r\n        const removeTimer = setTimeout(() => {\r\n            if (toast.parentNode) {\r\n                toast.remove();\r\n            }\r\n            // Traiter la queue apr√®s suppression\r\n            this._processQueue();\r\n        }, removeDelay);\r\n\r\n        if (this._timerManager) {\r\n            this._timerManager.setTimeout(() => {\r\n                if (toast.parentNode) {\r\n                    toast.remove();\r\n                }\r\n                this._processQueue();\r\n            }, removeDelay);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Efface toutes les notifications\r\n     */\r\n    clearAll() {\r\n        if (!this.container) return;\r\n\r\n        const toasts = this.container.querySelectorAll('.gl-toast');\r\n        toasts.forEach(toast => this._remove(toast, false));\r\n\r\n        // Vider aussi la queue\r\n        this._queue = [];\r\n    }\r\n\r\n    /**\r\n     * Ferme une notification sp√©cifique par sa r√©f√©rence DOM\r\n     * @param {HTMLElement} toastEl - √âl√©ment toast retourn√© par show/info/success/etc.\r\n     */\r\n    dismiss(toastEl) {\r\n        if (!toastEl) return;\r\n        this._remove(toastEl, false);\r\n    }\r\n\r\n    /**\r\n     * D√©sactive temporairement les notifications\r\n     */\r\n    disable() {\r\n        this.config.enabled = false;\r\n        const Log = GeoLeaf.Log;\r\n        if (Log) Log.debug('[GeoLeaf Notifications] Syst√®me d√©sactiv√©');\r\n    }\r\n\r\n    /**\r\n     * R√©active les notifications\r\n     */\r\n    enable() {\r\n        this.config.enabled = true;\r\n        const Log = GeoLeaf.Log;\r\n        if (Log) Log.debug('[GeoLeaf Notifications] Syst√®me activ√©');\r\n        // Traiter la queue au cas o√π des items sont en attente\r\n        this._processQueue();\r\n    }\r\n\r\n    /**\r\n     * Enregistre une m√©trique Telemetry (avec buffer si module pas encore charg√©)\r\n     * @private\r\n     * @param {string} name - Nom de la m√©trique\r\n     * @param {number} value - Valeur\r\n     */\r\n    _recordMetric(name, value = 1) {\r\n        // V√©rifier si Telemetry est disponible\r\n        if (GeoLeaf.Storage && GeoLeaf.Storage.Telemetry && typeof GeoLeaf.Storage.Telemetry.recordMetric === 'function') {\r\n            // Telemetry disponible, enregistrer directement\r\n            try {\r\n                GeoLeaf.Storage.Telemetry.recordMetric(name, value);\r\n                this._telemetryAvailable = true;\r\n            } catch (error) {\r\n                const Log = GeoLeaf.Log;\r\n                if (Log) Log.warn('[GeoLeaf Notifications] Erreur enregistrement m√©trique:', error);\r\n            }\r\n        } else {\r\n            // Telemetry pas encore disponible, ajouter au buffer\r\n            this._metricsBuffer.push({ name, value, timestamp: Date.now() });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Vide le buffer de m√©triques vers Telemetry\r\n     * @private\r\n     */\r\n    _flushMetricsBuffer() {\r\n        if (this._metricsBuffer.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // V√©rifier si Telemetry est maintenant disponible\r\n        if (GeoLeaf.Storage && GeoLeaf.Storage.Telemetry && typeof GeoLeaf.Storage.Telemetry.recordMetric === 'function') {\r\n            const Log = GeoLeaf.Log;\r\n            if (Log) Log.debug(`[GeoLeaf Notifications] Flush de ${this._metricsBuffer.length} m√©triques vers Telemetry`);\r\n\r\n            // Enregistrer toutes les m√©triques du buffer\r\n            this._metricsBuffer.forEach(metric => {\r\n                try {\r\n                    GeoLeaf.Storage.Telemetry.recordMetric(metric.name, metric.value);\r\n                } catch (error) {\r\n                    if (Log) Log.warn('[GeoLeaf Notifications] Erreur flush m√©trique:', error);\r\n                }\r\n            });\r\n\r\n            // Vider le buffer\r\n            this._metricsBuffer = [];\r\n            this._telemetryAvailable = true;\r\n\r\n            // Annuler le timeout si actif\r\n            if (this._metricsBufferTimeout) {\r\n                clearTimeout(this._metricsBufferTimeout);\r\n                this._metricsBufferTimeout = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * D√©marre le timeout de 30s pour vider le buffer (√©viter fuite m√©moire)\r\n     * @private\r\n     */\r\n    _startMetricsBufferTimeout() {\r\n        // Timeout de 30s pour vider le buffer m√™me si Telemetry ne charge pas\r\n        this._metricsBufferTimeout = setTimeout(() => {\r\n            if (this._metricsBuffer.length > 0) {\r\n                const Log = GeoLeaf.Log;\r\n                if (Log) Log.warn(`[GeoLeaf Notifications] Timeout buffer m√©triques (30s), ${this._metricsBuffer.length} m√©triques abandonn√©es`);\r\n                this._metricsBuffer = [];\r\n            }\r\n            this._metricsBufferTimeout = null;\r\n        }, 30000); // 30 secondes\r\n    }\r\n\r\n    /**\r\n     * √âchappe le HTML pour √©viter les injections XSS\r\n     * @private\r\n     * @param {string} text - Texte √† √©chapper\r\n     * @returns {string} Texte √©chapp√©\r\n     * @deprecated Utilisez textContent au lieu de innerHTML\r\n     */\r\n    _escapeHtml(text) {\r\n        if (GeoLeaf.Security && typeof GeoLeaf.Security.escapeHtml === 'function') {\r\n            return GeoLeaf.Security.escapeHtml(text);\r\n        }\r\n        // Fallback s√©curis√© si Security n'est pas charg√©\r\n        if (text == null) return '';\r\n        return String(text).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\r\n    }\r\n\r\n    /**\r\n     * D√©truit le syst√®me de notifications et nettoie toutes les ressources\r\n     * Retire tous les event listeners et timers actifs\r\n     */\r\n    destroy() {\r\n        const Log = GeoLeaf.Log;\r\n\r\n        // Clear tous les timers actifs\r\n        if (this._timerManager) {\r\n            this._timerManager.destroy();\r\n            this._timerManager = null;\r\n        }\r\n\r\n        // Retire tous les event listeners\r\n        if (this._eventManager) {\r\n            this._eventManager.destroy();\r\n            this._eventManager = null;\r\n        }\r\n\r\n        // Clear le timeout du buffer\r\n        if (this._metricsBufferTimeout) {\r\n            clearTimeout(this._metricsBufferTimeout);\r\n            this._metricsBufferTimeout = null;\r\n        }\r\n\r\n        // Vider le buffer de m√©triques (une derni√®re tentative)\r\n        if (this._metricsBuffer.length > 0) {\r\n            this._flushMetricsBuffer();\r\n            // Si toujours pas vid√©, abandonner\r\n            this._metricsBuffer = [];\r\n        }\r\n\r\n        // Retire tous les toasts actifs\r\n        if (this.container) {\r\n            const toasts = this.container.querySelectorAll('.gl-toast');\r\n            toasts.forEach(toast => toast.remove());\r\n        }\r\n\r\n        // Clear la queue\r\n        this._queue = [];\r\n\r\n        // Clear la map\r\n        this._activeToasts.clear();\r\n\r\n        // Reset les propri√©t√©s\r\n        this.container = null;\r\n        this.config.enabled = false;\r\n\r\n        if (Log) Log.info('[GeoLeaf Notifications] Syst√®me d√©truit et nettoy√©');\r\n    }\r\n\r\n    /**\r\n     * Get current status of notification system\r\n     * @returns {Object} Status information\r\n     */\r\n    getStatus() {\r\n        const visibleToasts = this.container ? this.container.querySelectorAll('.gl-toast:not(.gl-toast--removing)') : [];\r\n        const temporaryToasts = Array.from(visibleToasts).filter(t => !t.dataset.persistent);\r\n        const persistentToasts = Array.from(visibleToasts).filter(t => t.dataset.persistent);\r\n\r\n        return {\r\n            enabled: this.config.enabled,\r\n            initialized: !!this.container,\r\n            activeToasts: visibleToasts.length,\r\n            temporaryToasts: temporaryToasts.length,\r\n            persistentToasts: persistentToasts.length,\r\n            queued: this._queue.length,\r\n            maxVisible: this.maxVisible,\r\n            maxPersistent: this.maxPersistent,\r\n            position: this.config.position,\r\n            telemetryAvailable: this._telemetryAvailable,\r\n            metricsBuffered: this._metricsBuffer.length\r\n        };\r\n    }\r\n}\r\n\r\n// Cr√©er une instance singleton et l'exposer\r\nGeoLeaf._UINotifications = new NotificationSystem();\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf UI Module - Event Delegation\r\n * Centralisation de la gestion des √©v√©nements UI avec patterns de d√©l√©gation efficaces\r\n *\r\n * @module ui/event-delegation\r\n * @author Assistant\r\n * @version 1.0.0\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    GeoLeaf._UIEventDelegation = GeoLeaf._UIEventDelegation || {};\r\n\r\n    // ========================================\r\n    //   CONSTANTES & √âTAT\r\n    // ========================================\r\n\r\n    /**\r\n     * Map des listeners actifs pour cleanup\r\n     * @type {Map<string, {element: HTMLElement, event: string, handler: Function}>}\r\n     */\r\n    const _activeListeners = new Map();\r\n\r\n    /**\r\n     * Compteur pour identifiants uniques des listeners\r\n     * @type {number}\r\n     */\r\n    let _listenerIdCounter = 0;\r\n\r\n    // ========================================\r\n    //   UTILITAIRES DE D√âL√âGATION\r\n    // ========================================\r\n\r\n    /**\r\n     * Attache un event listener avec tracking automatique pour cleanup\r\n     * @param {HTMLElement} element - √âl√©ment DOM\r\n     * @param {string} event - Type d'√©v√©nement\r\n     * @param {Function} handler - Handler de l'√©v√©nement\r\n     * @param {Object} options - Options pour addEventListener\r\n     * @returns {string} ID unique du listener pour cleanup\r\n     */\r\n    function attachTrackedListener(element, event, handler, options = {}) {\r\n        if (!element || typeof handler !== 'function') {\r\n            if (Log) Log.warn(\"[UI.EventDelegation] attachTrackedListener: √©lement ou handler manquant\");\r\n            return null;\r\n        }\r\n\r\n        const listenerId = `listener_${++_listenerIdCounter}`;\r\n\r\n        // Wrapper pour tracking automatique des erreurs\r\n        const wrappedHandler = function(e) {\r\n            try {\r\n                return handler.call(this, e);\r\n            } catch (error) {\r\n                if (Log) Log.error(\"[UI.EventDelegation] Erreur dans handler:\", error);\r\n            }\r\n        };\r\n\r\n        element.addEventListener(event, wrappedHandler, options);\r\n\r\n        _activeListeners.set(listenerId, {\r\n            element,\r\n            event,\r\n            handler: wrappedHandler,\r\n            originalHandler: handler\r\n        });\r\n\r\n        return listenerId;\r\n    }\r\n\r\n    /**\r\n     * D√©tache un listener track√©e\r\n     * @param {string} listenerId - ID retourn√© par attachTrackedListener\r\n     * @returns {boolean} True si succ√®s\r\n     */\r\n    function detachTrackedListener(listenerId) {\r\n        if (!listenerId || !_activeListeners.has(listenerId)) {\r\n            return false;\r\n        }\r\n\r\n        const { element, event, handler } = _activeListeners.get(listenerId);\r\n        element.removeEventListener(event, handler);\r\n        _activeListeners.delete(listenerId);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Nettoie tous les listeners track√©es\r\n     * @returns {number} Nombre de listeners nettoy√©es\r\n     */\r\n    function cleanupAllListeners() {\r\n        let cleaned = 0;\r\n        for (const [listenerId, { element, event, handler }] of _activeListeners) {\r\n            element.removeEventListener(event, handler);\r\n            cleaned++;\r\n        }\r\n        _activeListeners.clear();\r\n        if (Log && cleaned > 0) {\r\n            Log.info(`[UI.EventDelegation] ${cleaned} listeners nettoy√©es`);\r\n        }\r\n        return cleaned;\r\n    }\r\n\r\n    // ========================================\r\n    //   D√âL√âGATION PAR TYPES UI SP√âCIFIQUES\r\n    // ========================================\r\n\r\n    /**\r\n     * G√®re les √©v√©nements des inputs de filtre avec debouncing\r\n     * @param {HTMLElement} filterContainer - Conteneur des filtres\r\n     * @param {Function} onFilterChange - Callback appel√© lors des changements\r\n     * @param {number} debounceMs - D√©lai de debounce (d√©faut: 300ms)\r\n     * @returns {string[]} IDs des listeners cr√©√©s\r\n     */\r\n    function attachFilterInputEvents(filterContainer, onFilterChange, debounceMs = 300) {\r\n        if (!filterContainer || typeof onFilterChange !== 'function') {\r\n            if (Log) Log.warn(\"[UI.EventDelegation] attachFilterInputEvents: param√®tres manquants\");\r\n            return [];\r\n        }\r\n\r\n        const listenerIds = [];\r\n        let debounceTimer = null;\r\n\r\n        // Fonction debounce pour les inputs\r\n        const debouncedHandler = function() {\r\n            if (debounceTimer) clearTimeout(debounceTimer);\r\n            debounceTimer = setTimeout(() => {\r\n                onFilterChange();\r\n            }, debounceMs);\r\n        };\r\n\r\n        // D√©l√©gation pour tous les inputs de type text/range\r\n        const textInputHandler = function(e) {\r\n            if (e.target.matches('input[type=\"text\"], input[type=\"range\"]')) {\r\n                debouncedHandler();\r\n            }\r\n        };\r\n\r\n        // D√©l√©gation pour les checkboxes (pas de debounce)\r\n        const checkboxHandler = function(e) {\r\n            if (e.target.matches('input[type=\"checkbox\"]')) {\r\n                onFilterChange();\r\n            }\r\n        };\r\n\r\n        // D√©l√©gation pour les selects\r\n        const selectHandler = function(e) {\r\n            if (e.target.matches('select')) {\r\n                onFilterChange();\r\n            }\r\n        };\r\n\r\n        listenerIds.push(attachTrackedListener(filterContainer, 'input', textInputHandler));\r\n        listenerIds.push(attachTrackedListener(filterContainer, 'change', checkboxHandler));\r\n        listenerIds.push(attachTrackedListener(filterContainer, 'change', selectHandler));\r\n\r\n        return listenerIds.filter(id => id !== null);\r\n    }\r\n\r\n    /**\r\n     * G√®re les √©v√©nements d'accord√©on avec d√©l√©gation\r\n     * @param {HTMLElement} container - Conteneur des accord√©ons\r\n     * @returns {string} ID du listener cr√©√©\r\n     */\r\n    function attachAccordionEvents(container) {\r\n        if (!container) {\r\n            if (Log) Log.warn(\"[UI.EventDelegation] attachAccordionEvents: conteneur manquant\");\r\n            return null;\r\n        }\r\n\r\n        const accordionHandler = function(e) {\r\n            // Cherche le bouton d'accord√©on dans la hi√©rarchie\r\n            const accordionButton = e.target.closest('.gl-accordion-toggle, .accordion-arrow');\r\n            if (!accordionButton) return;\r\n\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            // Trouve le panel associ√©\r\n            const panel = accordionButton.closest('.gl-accordion')?.querySelector('.gl-accordion-content');\r\n            if (!panel) return;\r\n\r\n            // Toggle accord√©on\r\n            const isExpanded = panel.style.display !== 'none';\r\n            panel.style.display = isExpanded ? 'none' : 'block';\r\n\r\n            // Met √† jour l'aria-expanded\r\n            accordionButton.setAttribute('aria-expanded', !isExpanded);\r\n\r\n            // Met √† jour l'ic√¥ne si pr√©sente\r\n            const icon = accordionButton.querySelector('.accordion-icon, .accordion-arrow');\r\n            if (icon) {\r\n                icon.classList.toggle('expanded', !isExpanded);\r\n            }\r\n        };\r\n\r\n        return attachTrackedListener(container, 'click', accordionHandler);\r\n    }\r\n\r\n    /**\r\n     * G√®re les √©v√©nements des contr√¥les de carte (delegation pour les boutons)\r\n     * @param {HTMLElement} mapContainer - Conteneur de la carte\r\n     * @param {Object} handlers - Map des handlers { selectorPattern: handlerFunction }\r\n     * @returns {string[]} IDs des listeners cr√©√©s\r\n     */\r\n    function attachMapControlEvents(mapContainer, handlers) {\r\n        if (!mapContainer || !handlers || typeof handlers !== 'object') {\r\n            if (Log) Log.warn(\"[UI.EventDelegation] attachMapControlEvents: param√®tres manquants\");\r\n            return [];\r\n        }\r\n\r\n        const listenerIds = [];\r\n\r\n        const controlHandler = function(e) {\r\n            for (const [selector, handler] of Object.entries(handlers)) {\r\n                if (e.target.matches(selector) || e.target.closest(selector)) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n\r\n                    if (typeof handler === 'function') {\r\n                        handler.call(this, e);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n\r\n        listenerIds.push(attachTrackedListener(mapContainer, 'click', controlHandler));\r\n        return listenerIds.filter(id => id !== null);\r\n    }\r\n\r\n    // ========================================\r\n    //   API PUBLIQUE\r\n    // ========================================\r\n\r\n    // Fonctions de base\r\n    GeoLeaf._UIEventDelegation.attachTrackedListener = attachTrackedListener;\r\n    GeoLeaf._UIEventDelegation.detachTrackedListener = detachTrackedListener;\r\n    GeoLeaf._UIEventDelegation.cleanupAllListeners = cleanupAllListeners;\r\n\r\n    // D√©l√©gations sp√©cialis√©es\r\n    GeoLeaf._UIEventDelegation.attachFilterInputEvents = attachFilterInputEvents;\r\n    GeoLeaf._UIEventDelegation.attachAccordionEvents = attachAccordionEvents;\r\n    GeoLeaf._UIEventDelegation.attachMapControlEvents = attachMapControlEvents;\r\n\r\n    // Statistiques et debug\r\n    /**\r\n     * Obtient le nombre de listeners actifs enregistr√©s\r\n     * Utile pour le debugging et le monitoring des fuites m√©moire\r\n     * @returns {number} Nombre de listeners actifs\r\n     * @example\r\n     * const count = GeoLeaf._UIEventDelegation.getActiveListenersCount();\r\n     * console.log(`${count} listeners actifs`);\r\n     */\r\n    GeoLeaf._UIEventDelegation.getActiveListenersCount = function() {\r\n        return _activeListeners.size;\r\n    };\r\n\r\n    /**\r\n     * R√©cup√®re la liste compl√®te des listeners actifs avec leurs m√©tadonn√©es\r\n     * Retourne une Map avec ID listener comme cl√© et info d√©taill√©es\r\n     * @returns {Map<string, Object>} Map des listeners actifs (id -> {element, event, handler, timestamp})\r\n     * @example\r\n     * const listeners = GeoLeaf._UIEventDelegation.getActiveListeners();\r\n     * listeners.forEach((info, id) => console.log(`Listener ${id} sur ${info.event}`));\r\n     */\r\n    GeoLeaf._UIEventDelegation.getActiveListeners = function() {\r\n        return Array.from(_activeListeners.keys());\r\n    };\r\n\r\n    if (Log) {\r\n        Log.info(\"[UI.EventDelegation] Module initialis√©\");\r\n    }\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf UI Module - Filter State Manager\r\n * Gestion centralis√©e de l'√©tat des filtres avec patterns observateur\r\n *\r\n * @module ui/filter-state-manager\r\n * @author Assistant\r\n * @version 1.0.0\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    GeoLeaf._UIFilterStateManager = GeoLeaf._UIFilterStateManager || {};\r\n\r\n    // ========================================\r\n    //   √âTAT CENTRALIS√â DES FILTRES\r\n    // ========================================\r\n\r\n    /**\r\n     * √âtat actuel des filtres\r\n     * @type {Object}\r\n     * @private\r\n     */\r\n    let _filterState = {\r\n        // √âtat des filtres par ID\r\n        values: new Map(),\r\n\r\n        // M√©tadonn√©es des filtres\r\n        metadata: new Map(),\r\n\r\n        // Profil actuel\r\n        activeProfile: null,\r\n\r\n        // Callbacks observers\r\n        observers: new Set()\r\n    };\r\n\r\n    /**\r\n     * Timestamps pour debouncing\r\n     * @type {Map<string, number>}\r\n     * @private\r\n     */\r\n    const _debounceTimers = new Map();\r\n\r\n    // ========================================\r\n    //   GESTION DE L'√âTAT DES FILTRES\r\n    // ========================================\r\n\r\n    /**\r\n     * Initialise l'√©tat des filtres depuis un profil\r\n     * @param {Object} profile - Configuration du profil\r\n     * @returns {boolean} Succ√®s de l'initialisation\r\n     */\r\n    function initializeFromProfile(profile) {\r\n        if (!profile || !profile.filters) {\r\n            if (Log) Log.warn(\"[UI.FilterStateManager] Profil ou filtres manquants\");\r\n            return false;\r\n        }\r\n\r\n        // R√©initialise l'√©tat\r\n        _filterState.values.clear();\r\n        _filterState.metadata.clear();\r\n        _filterState.activeProfile = profile;\r\n\r\n        // Configure chaque filtre avec ses valeurs par d√©faut\r\n        profile.filters.forEach(filter => {\r\n            if (!filter.id) return;\r\n\r\n            const metadata = {\r\n                type: filter.type,\r\n                label: filter.label,\r\n                required: !!filter.required,\r\n                min: filter.min,\r\n                max: filter.max,\r\n                options: filter.options || [],\r\n                optionsFrom: filter.optionsFrom\r\n            };\r\n\r\n            _filterState.metadata.set(filter.id, metadata);\r\n\r\n            // Valeur par d√©faut selon le type\r\n            let defaultValue = null;\r\n            switch (filter.type) {\r\n                case 'select':\r\n                case 'multiselect':\r\n                    defaultValue = filter.default || (filter.type === 'multiselect' ? [] : '');\r\n                    break;\r\n                case 'range':\r\n                    defaultValue = filter.default ?? ((filter.min + filter.max) / 2);\r\n                    break;\r\n                case 'tree':\r\n                case 'tree-category':\r\n                case 'categoryTree':\r\n                    defaultValue = filter.default || [];\r\n                    break;\r\n                default:\r\n                    defaultValue = filter.default || '';\r\n            }\r\n\r\n            _filterState.values.set(filter.id, defaultValue);\r\n        });\r\n\r\n        // Notifie les observateurs\r\n        _notifyObservers('init', null, _filterState.values);\r\n\r\n        if (Log) {\r\n            Log.info(`[UI.FilterStateManager] Initialis√© avec ${_filterState.values.size} filtres`);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Met √† jour la valeur d'un filtre\r\n     * @param {string} filterId - ID du filtre\r\n     * @param {*} value - Nouvelle valeur\r\n     * @param {boolean} skipNotify - √âviter la notification (d√©faut: false)\r\n     * @returns {boolean} Succ√®s de la mise √† jour\r\n     */\r\n    function updateFilterValue(filterId, value, skipNotify = false) {\r\n        if (!filterId || !_filterState.metadata.has(filterId)) {\r\n            if (Log) Log.warn(`[UI.FilterStateManager] Filtre inconnu: ${filterId}`);\r\n            return false;\r\n        }\r\n\r\n        const metadata = _filterState.metadata.get(filterId);\r\n        const oldValue = _filterState.values.get(filterId);\r\n\r\n        // Validation selon le type\r\n        const validatedValue = _validateFilterValue(value, metadata);\r\n        if (validatedValue === null && value !== null) {\r\n            if (Log) Log.warn(`[UI.FilterStateManager] Valeur invalide pour ${filterId}:`, value);\r\n            return false;\r\n        }\r\n\r\n        // Mise √† jour\r\n        _filterState.values.set(filterId, validatedValue);\r\n\r\n        // Notification avec debouncing pour les ranges\r\n        if (!skipNotify) {\r\n            if (metadata.type === 'range') {\r\n                _notifyWithDebounce(filterId, 'change', oldValue, validatedValue, 200);\r\n            } else {\r\n                _notifyObservers('change', filterId, validatedValue, oldValue);\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re la valeur d'un filtre\r\n     * @param {string} filterId - ID du filtre\r\n     * @returns {*} Valeur du filtre ou null si inexistant\r\n     */\r\n    function getFilterValue(filterId) {\r\n        return _filterState.values.get(filterId) || null;\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re toutes les valeurs de filtres\r\n     * @returns {Object} Object avec filterId -> value\r\n     */\r\n    function getAllFilterValues() {\r\n        return Object.fromEntries(_filterState.values);\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re les m√©tadonn√©es d'un filtre\r\n     * @param {string} filterId - ID du filtre\r\n     * @returns {Object|null} M√©tadonn√©es ou null\r\n     */\r\n    function getFilterMetadata(filterId) {\r\n        return _filterState.metadata.get(filterId) || null;\r\n    }\r\n\r\n    /**\r\n     * Remet √† z√©ro tous les filtres\r\n     * @param {boolean} skipNotify - √âviter la notification (d√©faut: false)\r\n     */\r\n    function resetAllFilters(skipNotify = false) {\r\n        const oldState = new Map(_filterState.values);\r\n\r\n        _filterState.values.forEach((value, filterId) => {\r\n            const metadata = _filterState.metadata.get(filterId);\r\n            if (!metadata) return;\r\n\r\n            // Remise √† z√©ro selon le type\r\n            let resetValue = null;\r\n            switch (metadata.type) {\r\n                case 'multiselect':\r\n                case 'tree':\r\n                case 'tree-category':\r\n                case 'categoryTree':\r\n                    resetValue = [];\r\n                    break;\r\n                case 'range':\r\n                    resetValue = (metadata.min + metadata.max) / 2;\r\n                    break;\r\n                default:\r\n                    resetValue = '';\r\n            }\r\n\r\n            _filterState.values.set(filterId, resetValue);\r\n        });\r\n\r\n        if (!skipNotify) {\r\n            _notifyObservers('reset', null, _filterState.values, oldState);\r\n        }\r\n    }\r\n\r\n    // ========================================\r\n    //   SYST√àME D'OBSERVATEURS\r\n    // ========================================\r\n\r\n    /**\r\n     * Ajoute un observateur pour les changements d'√©tat\r\n     * @param {Function} callback - Fonction appel√©e lors des changements\r\n     * @returns {Function} Fonction pour d√©sabonner l'observateur\r\n     */\r\n    function addObserver(callback) {\r\n        if (typeof callback !== 'function') {\r\n            if (Log) Log.warn(\"[UI.FilterStateManager] Observateur doit √™tre une fonction\");\r\n            return () => {};\r\n        }\r\n\r\n        _filterState.observers.add(callback);\r\n\r\n        // Retourne fonction de d√©sabonnement\r\n        return function unsubscribe() {\r\n            _filterState.observers.delete(callback);\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Notifie tous les observateurs\r\n     * @param {string} type - Type de changement ('init', 'change', 'reset')\r\n     * @param {string|null} filterId - ID du filtre chang√© (null pour global)\r\n     * @param {*} newValue - Nouvelle valeur\r\n     * @param {*} oldValue - Ancienne valeur\r\n     * @private\r\n     */\r\n    function _notifyObservers(type, filterId, newValue, oldValue) {\r\n        const event = {\r\n            type,\r\n            filterId,\r\n            newValue,\r\n            oldValue,\r\n            timestamp: Date.now(),\r\n            allValues: Object.fromEntries(_filterState.values)\r\n        };\r\n\r\n        _filterState.observers.forEach(callback => {\r\n            try {\r\n                callback(event);\r\n            } catch (error) {\r\n                if (Log) Log.error(\"[UI.FilterStateManager] Erreur dans observateur:\", error);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Notification avec debouncing\r\n     * @param {string} filterId - ID du filtre\r\n     * @param {string} type - Type d'√©v√©nement\r\n     * @param {*} oldValue - Ancienne valeur\r\n     * @param {*} newValue - Nouvelle valeur\r\n     * @param {number} delay - D√©lai de debounce\r\n     * @private\r\n     */\r\n    function _notifyWithDebounce(filterId, type, oldValue, newValue, delay) {\r\n        // Clear existing timer\r\n        if (_debounceTimers.has(filterId)) {\r\n            clearTimeout(_debounceTimers.get(filterId));\r\n        }\r\n\r\n        // Set new timer\r\n        const timer = setTimeout(() => {\r\n            _notifyObservers(type, filterId, newValue, oldValue);\r\n            _debounceTimers.delete(filterId);\r\n        }, delay);\r\n\r\n        _debounceTimers.set(filterId, timer);\r\n    }\r\n\r\n    // ========================================\r\n    //   VALIDATION DE VALEURS\r\n    // ========================================\r\n\r\n    /**\r\n     * Valide une valeur selon les m√©tadonn√©es du filtre\r\n     * @param {*} value - Valeur √† valider\r\n     * @param {Object} metadata - M√©tadonn√©es du filtre\r\n     * @returns {*} Valeur valid√©e ou null si invalide\r\n     * @private\r\n     */\r\n    function _validateFilterValue(value, metadata) {\r\n        if (!metadata) return null;\r\n\r\n        switch (metadata.type) {\r\n            case 'select':\r\n                return typeof value === 'string' ? value : '';\r\n\r\n            case 'multiselect':\r\n                return Array.isArray(value) ? value : [];\r\n\r\n            case 'range':\r\n                const num = parseFloat(value);\r\n                if (isNaN(num)) return metadata.min || 0;\r\n                if (metadata.min !== undefined && num < metadata.min) return metadata.min;\r\n                if (metadata.max !== undefined && num > metadata.max) return metadata.max;\r\n                return num;\r\n\r\n            case 'tree':\r\n            case 'tree-category':\r\n            case 'categoryTree':\r\n                return Array.isArray(value) ? value : [];\r\n\r\n            default:\r\n                return value;\r\n        }\r\n    }\r\n\r\n    // ========================================\r\n    //   UTILITAIRES DE REQU√äTES\r\n    // ========================================\r\n\r\n    /**\r\n     * V√©rifie si des filtres sont actuellement actifs\r\n     * @returns {boolean} True si au moins un filtre est actif\r\n     */\r\n    function hasActiveFilters() {\r\n        for (const [filterId, value] of _filterState.values) {\r\n            const metadata = _filterState.metadata.get(filterId);\r\n            if (!metadata) continue;\r\n\r\n            // V√©rifie selon le type si la valeur est \"active\"\r\n            switch (metadata.type) {\r\n                case 'multiselect':\r\n                case 'tree':\r\n                case 'tree-category':\r\n                case 'categoryTree':\r\n                    if (Array.isArray(value) && value.length > 0) return true;\r\n                    break;\r\n                case 'select':\r\n                    if (value && value !== '') return true;\r\n                    break;\r\n                case 'range':\r\n                    // Consid√®re actif si diff√©rent de la valeur par d√©faut\r\n                    const defaultVal = (metadata.min + metadata.max) / 2;\r\n                    if (Math.abs(value - defaultVal) > 0.01) return true;\r\n                    break;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re un r√©sum√© des filtres actifs\r\n     * @returns {Array} Liste des filtres actifs avec leurs valeurs\r\n     */\r\n    function getActiveFiltersSummary() {\r\n        const summary = [];\r\n\r\n        for (const [filterId, value] of _filterState.values) {\r\n            const metadata = _filterState.metadata.get(filterId);\r\n            if (!metadata) continue;\r\n\r\n            let isActive = false;\r\n            let displayValue = '';\r\n\r\n            switch (metadata.type) {\r\n                case 'multiselect':\r\n                case 'tree':\r\n                case 'tree-category':\r\n                case 'categoryTree':\r\n                    if (Array.isArray(value) && value.length > 0) {\r\n                        isActive = true;\r\n                        displayValue = `${value.length} s√©lectionn√©(s)`;\r\n                    }\r\n                    break;\r\n                case 'select':\r\n                    if (value && value !== '') {\r\n                        isActive = true;\r\n                        displayValue = value;\r\n                    }\r\n                    break;\r\n                case 'range':\r\n                    const defaultVal = (metadata.min + metadata.max) / 2;\r\n                    if (Math.abs(value - defaultVal) > 0.01) {\r\n                        isActive = true;\r\n                        displayValue = value.toString().replace('.', ',');\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            if (isActive) {\r\n                summary.push({\r\n                    id: filterId,\r\n                    label: metadata.label || filterId,\r\n                    value: displayValue,\r\n                    type: metadata.type\r\n                });\r\n            }\r\n        }\r\n\r\n        return summary;\r\n    }\r\n\r\n    // ========================================\r\n    //   API PUBLIQUE\r\n    // ========================================\r\n\r\n    // Gestion d'√©tat principal\r\n    GeoLeaf._UIFilterStateManager.initializeFromProfile = initializeFromProfile;\r\n    GeoLeaf._UIFilterStateManager.updateFilterValue = updateFilterValue;\r\n    GeoLeaf._UIFilterStateManager.getFilterValue = getFilterValue;\r\n    GeoLeaf._UIFilterStateManager.getAllFilterValues = getAllFilterValues;\r\n    GeoLeaf._UIFilterStateManager.getFilterMetadata = getFilterMetadata;\r\n    GeoLeaf._UIFilterStateManager.resetAllFilters = resetAllFilters;\r\n\r\n    // Syst√®me d'observateurs\r\n    GeoLeaf._UIFilterStateManager.addObserver = addObserver;\r\n\r\n    // Utilitaires de requ√™tes\r\n    GeoLeaf._UIFilterStateManager.hasActiveFilters = hasActiveFilters;\r\n    GeoLeaf._UIFilterStateManager.getActiveFiltersSummary = getActiveFiltersSummary;\r\n\r\n    // Propri√©t√©s en lecture seule\r\n    Object.defineProperty(GeoLeaf._UIFilterStateManager, 'activeProfile', {\r\n        get: () => _filterState.activeProfile,\r\n        enumerable: true\r\n    });\r\n\r\n    Object.defineProperty(GeoLeaf._UIFilterStateManager, 'filterCount', {\r\n        get: () => _filterState.values.size,\r\n        enumerable: true\r\n    });\r\n\r\n    if (Log) {\r\n        Log.info(\"[UI.FilterStateManager] Module initialis√©\");\r\n    }\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf Scale Control\r\n * G√®re l'affichage de l'√©chelle graphique, num√©rique et du niveau de zoom\r\n *\r\n * @module map/scale-control\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log || console;\r\n\r\n    /**\r\n     * Contr√¥le d'√©chelle personnalis√©\r\n     */\r\n    const ScaleControl = {\r\n        _map: null,\r\n        _config: null,\r\n        _container: null,\r\n        _scaleLineMetric: null,\r\n        _numericElement: null,\r\n        _zoomElement: null,\r\n        _inputElement: null,\r\n        _scalePrefix: null,\r\n        _mainWrapper: null,\r\n        _eventHandlers: {},\r\n\r\n        /**\r\n         * Initialise le contr√¥le d'√©chelle\r\n         * @param {L.Map} map - Instance de la carte Leaflet\r\n         * @param {Object} config - Configuration depuis scaleConfig\r\n         */\r\n        init(map, config) {\r\n            if (!map) {\r\n                Log.error(\"[GeoLeaf.ScaleControl] Carte non fournie\");\r\n                return;\r\n            }\r\n\r\n            this._map = map;\r\n            this._config = config || {};\r\n\r\n            // Cr√©er un conteneur unique pour tout\r\n            this._createMainContainer();\r\n\r\n            Log.info(\"[GeoLeaf.ScaleControl] Contr√¥le d'√©chelle initialis√©\");\r\n        },\r\n\r\n        /**\r\n         * Cr√©e le conteneur principal avec √©chelle graphique et bloc personnalis√©\r\n         * @private\r\n         */\r\n        _createMainContainer() {\r\n            const position = this._config.position || 'bottomleft';\r\n\r\n            // Conteneur principal - disposition horizontale\r\n            this._mainWrapper = L.DomUtil.create('div', 'gl-scale-main-wrapper');\r\n\r\n            // 1. √âchelle graphique\r\n            if (this._config.scaleGraphic !== false) {\r\n                const graphicWrapper = L.DomUtil.create('div', 'gl-scale-graphic-wrapper', this._mainWrapper);\r\n                this._addGraphicScaleToContainer(graphicWrapper);\r\n            }\r\n\r\n            // 2. Bloc personnalis√© (√©chelle num√©rique + zoom) sur la m√™me ligne\r\n            if (this._config.scaleNumeric || this._config.scaleNivel) {\r\n                this._createCustomScaleBlock(this._mainWrapper);\r\n            }\r\n\r\n            // Ajouter le conteneur principal √† la carte\r\n            const CustomControl = L.Control.extend({\r\n                options: {\r\n                    position: position\r\n                },\r\n                onAdd: () => {\r\n                    return this._mainWrapper;\r\n                }\r\n            });\r\n\r\n            new CustomControl().addTo(this._map);\r\n        },\r\n\r\n        /**\r\n         * Ajoute l'√©chelle graphique Leaflet dans un conteneur\r\n         * @param {HTMLElement} container - Conteneur cible\r\n         * @private\r\n         */\r\n        _addGraphicScaleToContainer(container) {\r\n            // Cr√©er l'√©chelle graphique manuellement (pas via L.control.scale)\r\n            const scaleDiv = L.DomUtil.create('div', 'leaflet-control-scale leaflet-control', container);\r\n\r\n            const scaleLineMetric = L.DomUtil.create('div', 'leaflet-control-scale-line', scaleDiv);\r\n            this._scaleLineMetric = scaleLineMetric;\r\n\r\n            // Fonction de mise √† jour de l'√©chelle graphique\r\n            const updateScale = () => {\r\n                const y = this._map.getSize().y / 2;\r\n                const maxMeters = this._map.distance(\r\n                    this._map.containerPointToLatLng([0, y]),\r\n                    this._map.containerPointToLatLng([150, y])\r\n                );\r\n                this._updateScaleLine(this._scaleLineMetric, maxMeters);\r\n            };\r\n\r\n            this._eventHandlers.graphicScaleUpdate = updateScale;\r\n            this._map.on('zoomend moveend', updateScale);\r\n            updateScale();\r\n\r\n            Log.info(\"[GeoLeaf.ScaleControl] √âchelle graphique ajout√©e\");\r\n        },\r\n\r\n        /**\r\n         * Met √† jour la ligne d'√©chelle graphique\r\n         * @param {HTMLElement} scaleLine - √âl√©ment de la ligne d'√©chelle\r\n         * @param {number} maxMeters - Distance maximale en m√®tres\r\n         * @private\r\n         */\r\n        _updateScaleLine(scaleLine, maxMeters) {\r\n            const maxKm = maxMeters / 1000;\r\n            let scale, ratio;\r\n\r\n            if (maxKm > 1) {\r\n                const maxNiceKm = this._getRoundNum(maxKm);\r\n                ratio = maxNiceKm / maxKm;\r\n                scale = maxNiceKm + ' km';\r\n            } else {\r\n                const maxNiceM = this._getRoundNum(maxMeters);\r\n                ratio = maxNiceM / maxMeters;\r\n                scale = maxNiceM + ' m';\r\n            }\r\n\r\n            scaleLine.style.width = Math.round(150 * ratio) + 'px';\r\n            scaleLine.textContent = scale;\r\n        },\r\n\r\n        /**\r\n         * Arrondit un nombre √† une valeur \"propre\" (1, 2, 5, 10, 20, 50, etc.)\r\n         * @param {number} num - Nombre √† arrondir\r\n         * @returns {number} Nombre arrondi\r\n         * @private\r\n         */\r\n        _getRoundNum(num) {\r\n            const pow10 = Math.pow(10, (Math.floor(num) + '').length - 1);\r\n            let d = num / pow10;\r\n\r\n            d = d >= 10 ? 10 : d >= 5 ? 5 : d >= 3 ? 3 : d >= 2 ? 2 : 1;\r\n\r\n            return pow10 * d;\r\n        },\r\n\r\n        /**\r\n         * Cr√©e le bloc personnalis√© (√©chelle num√©rique + niveau de zoom)\r\n         * @param {HTMLElement} parentContainer - Conteneur parent\r\n         * @private\r\n         */\r\n        _createCustomScaleBlock(parentContainer) {\r\n            // Cr√©er le conteneur - disposition horizontale\r\n            this._container = L.DomUtil.create('div', 'gl-scale-control', parentContainer);\r\n\r\n            // √âchelle num√©rique\r\n            if (this._config.scaleNumeric) {\r\n                if (this._config.scaleNumericEditable) {\r\n                    this._createEditableScale();\r\n                } else {\r\n                    this._createReadOnlyScale();\r\n                }\r\n            }\r\n\r\n            // Niveau de zoom\r\n            if (this._config.scaleNivel) {\r\n                this._createZoomLevel();\r\n            }\r\n\r\n            // √âv√©nements de mise √† jour\r\n            const updateHandler = () => this._updateScale();\r\n            this._eventHandlers.numericScaleUpdate = updateHandler;\r\n            this._map.on('zoomend moveend', updateHandler);\r\n            this._updateScale(); // Mise √† jour initiale\r\n\r\n            Log.info(\"[GeoLeaf.ScaleControl] Bloc personnalis√© ajout√©\");\r\n        },\r\n\r\n        /**\r\n         * Cr√©e l'√©chelle num√©rique en lecture seule\r\n         * @private\r\n         */\r\n        _createReadOnlyScale() {\r\n            this._numericElement = L.DomUtil.create('div', 'gl-scale-numeric', this._container);\r\n        },\r\n\r\n        /**\r\n         * Cr√©e l'√©chelle num√©rique √©ditable avec input\r\n         * @private\r\n         */\r\n        _createEditableScale() {\r\n            // Cr√©er un conteneur pour l'√©chelle √©ditable\r\n            const wrapper = L.DomUtil.create('div', 'gl-scale-numeric-editable', this._container);\r\n\r\n            // Cr√©er le pr√©fixe \"1:\" (toujours visible)\r\n            this._scalePrefix = L.DomUtil.create('span', 'gl-scale-prefix', wrapper);\r\n            this._scalePrefix.textContent = '1:';\r\n\r\n            // Cr√©er le span affich√© initialement (soulign√© et cliquable) - contient uniquement le d√©nominateur\r\n            this._numericElement = L.DomUtil.create('span', 'gl-scale-numeric-clickable', wrapper);\r\n            this._numericElement.textContent = '0';\r\n\r\n            // Cr√©er l'input (cach√© initialement) - contient uniquement le d√©nominateur\r\n            this._inputElement = L.DomUtil.create('input', 'gl-scale-numeric-input', wrapper);\r\n            this._inputElement.type = 'text';\r\n            this._inputElement.placeholder = '250000';\r\n            this._inputElement.style.display = 'none';\r\n\r\n            // Emp√™cher les interactions de la carte lors de l'√©dition\r\n            L.DomEvent.disableClickPropagation(wrapper);\r\n            L.DomEvent.disableScrollPropagation(wrapper);\r\n\r\n            // Clic sur le span : passer en mode √©dition\r\n            this._numericElement.addEventListener('click', () => {\r\n                this._switchToEditMode();\r\n            });\r\n\r\n            // Validation avec Enter\r\n            this._inputElement.addEventListener('keypress', (e) => {\r\n                if (e.key === 'Enter') {\r\n                    this._onScaleInputChange();\r\n                    this._switchToDisplayMode();\r\n                }\r\n            });\r\n\r\n            // Validation en cliquant √† l'ext√©rieur (blur)\r\n            this._inputElement.addEventListener('blur', () => {\r\n                this._onScaleInputChange();\r\n                this._switchToDisplayMode();\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Cr√©e l'affichage du niveau de zoom\r\n         * @private\r\n         */\r\n        _createZoomLevel() {\r\n            this._zoomElement = L.DomUtil.create('div', 'gl-scale-zoom', this._container);\r\n        },\r\n\r\n        /**\r\n         * Bascule en mode √©dition (affiche l'input)\r\n         * @private\r\n         */\r\n        _switchToEditMode() {\r\n            if (!this._numericElement || !this._inputElement) return;\r\n\r\n            // Copier la valeur actuelle dans l'input\r\n            this._inputElement.value = this._numericElement.textContent;\r\n\r\n            // Cacher le span, afficher l'input\r\n            this._numericElement.style.display = 'none';\r\n            this._inputElement.style.display = 'inline-block';\r\n\r\n            // Focus et s√©lection du texte\r\n            this._inputElement.focus();\r\n            this._inputElement.select();\r\n        },\r\n\r\n        /**\r\n         * Bascule en mode affichage (affiche le span)\r\n         * @private\r\n         */\r\n        _switchToDisplayMode() {\r\n            if (!this._numericElement || !this._inputElement) return;\r\n\r\n            // Cacher l'input, afficher le span\r\n            this._inputElement.style.display = 'none';\r\n            this._numericElement.style.display = 'inline';\r\n        },\r\n\r\n        /**\r\n         * Met √† jour l'affichage de l'√©chelle et du zoom\r\n         * @private\r\n         */\r\n        _updateScale() {\r\n            const zoom = this._map.getZoom();\r\n            const scale = this._calculateScale(zoom);\r\n\r\n            // Mettre √† jour l'√©chelle num√©rique\r\n            if (this._numericElement) {\r\n                if (this._config.scaleNumericEditable) {\r\n                    // Mettre √† jour uniquement le d√©nominateur (sans '1:')\r\n                    if (this._inputElement.style.display === 'none') {\r\n                        this._numericElement.textContent = this._formatNumber(scale);\r\n                    }\r\n                } else {\r\n                    // Mode non √©ditable : afficher \"1:\" + d√©nominateur\r\n                    this._numericElement.textContent = `1:${this._formatNumber(scale)}`;\r\n                }\r\n            }\r\n\r\n            // Mettre √† jour le niveau de zoom\r\n            if (this._zoomElement) {\r\n                this._zoomElement.textContent = `Zoom: ${Number(zoom).toFixed(2)}`;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Calcule l'√©chelle approximative en fonction du niveau de zoom\r\n         * @param {number} zoom - Niveau de zoom Leaflet\r\n         * @param {number} [lat] - Latitude optionnelle (utilise le centre de la carte si non fournie)\r\n         * @returns {number} √âchelle (ex: 250000 pour 1:250000)\r\n         * @private\r\n         */\r\n        _calculateScale(zoom, lat) {\r\n            // Utiliser la latitude fournie ou celle du centre de la carte\r\n            const latitude = lat !== undefined ? lat : this._map.getCenter().lat;\r\n            // Formule approximative bas√©e sur la taille des tuiles Web Mercator\r\n            const metersPerPixel = 156543.03392 * Math.cos(latitude * Math.PI / 180) / Math.pow(2, zoom);\r\n            const scale = metersPerPixel * 96 / 0.0254; // 96 DPI\r\n            return Math.round(scale);\r\n        },\r\n\r\n        /**\r\n         * Formate un nombre avec des espaces comme s√©parateurs de milliers\r\n         * @param {number} num - Nombre √† formater\r\n         * @returns {string} Nombre format√©\r\n         * @private\r\n         */\r\n        _formatNumber(num) {\r\n            return num.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\r\n        },\r\n\r\n        /**\r\n         * G√®re le changement manuel de l'√©chelle\r\n         * @private\r\n         */\r\n        _onScaleInputChange() {\r\n            if (!this._inputElement) return;\r\n\r\n            const input = this._inputElement.value.trim();\r\n            // Parser uniquement le d√©nominateur (nombre avec espaces optionnels)\r\n            const cleanedInput = input.replace(/\\s/g, '');\r\n            const targetScale = parseInt(cleanedInput, 10);\r\n\r\n            if (!isNaN(targetScale) && targetScale > 0) {\r\n                const targetZoom = this._calculateZoomFromScale(targetScale);\r\n                // Utiliser setView avec zoomSnap: 0 pour permettre les zooms fractionnaires\r\n                this._map.setView(this._map.getCenter(), targetZoom, {\r\n                    animate: true,\r\n                    zoomSnap: 0\r\n                });\r\n                Log.info(`[GeoLeaf.ScaleControl] Zoom ajust√© √† ${targetZoom} pour √©chelle 1:${targetScale}`);\r\n            } else {\r\n                Log.warn(\"[GeoLeaf.ScaleControl] Format d'√©chelle invalide:\", input);\r\n                this._updateScale(); // R√©initialiser la valeur\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Calcule le niveau de zoom pour atteindre une √©chelle donn√©e\r\n         * @param {number} targetScale - √âchelle cible (ex: 250000)\r\n         * @returns {number} Niveau de zoom (peut √™tre d√©cimal pour plus de pr√©cision)\r\n         * @private\r\n         */\r\n        _calculateZoomFromScale(targetScale) {\r\n            const lat = this._map.getCenter().lat;\r\n            const metersPerPixel = targetScale * 0.0254 / 96;\r\n            let zoom = Math.log2(156543.03392 * Math.cos(lat * Math.PI / 180) / metersPerPixel);\r\n\r\n            // Affiner le zoom par it√©ration pour obtenir l'√©chelle exacte\r\n            // Utiliser une m√©thode de convergence pr√©cise\r\n            for (let i = 0; i < 20; i++) {\r\n                const currentScale = this._calculateScale(zoom, lat); // Passer lat pour √©viter recalcul\r\n                const diff = targetScale - currentScale;\r\n\r\n                // Si l'erreur est inf√©rieure √† 1 (pratiquement identique), on arr√™te\r\n                if (Math.abs(diff) < 1) {\r\n                    break;\r\n                }\r\n\r\n                // Ajuster le zoom proportionnellement √† l'erreur\r\n                // Plus l'√©chelle est grande, plus on doit d√©zoomer (zoom plus petit)\r\n                const adjustment = Math.log2(targetScale / currentScale);\r\n                zoom -= adjustment * 0.95; // Facteur d'amortissement pour √©viter les oscillations\r\n            }\r\n\r\n            // Arrondir √† 4 d√©cimales pour une pr√©cision maximale\r\n            const preciseZoom = Math.round(zoom * 10000) / 10000;\r\n            return Math.max(0, Math.min(22, preciseZoom));\r\n        },\r\n\r\n        /**\r\n         * D√©truit le contr√¥le et nettoie les ressources\r\n         */\r\n        destroy() {\r\n            // Retirer les event listeners de la carte\r\n            if (this._map && this._eventHandlers) {\r\n                if (this._eventHandlers.graphicScaleUpdate) {\r\n                    this._map.off('zoomend moveend', this._eventHandlers.graphicScaleUpdate);\r\n                }\r\n                if (this._eventHandlers.numericScaleUpdate) {\r\n                    this._map.off('zoomend moveend', this._eventHandlers.numericScaleUpdate);\r\n                }\r\n            }\r\n\r\n            // Supprimer le conteneur principal du DOM\r\n            if (this._mainWrapper && this._mainWrapper.parentNode) {\r\n                this._mainWrapper.parentNode.removeChild(this._mainWrapper);\r\n            }\r\n\r\n            // Nettoyer toutes les r√©f√©rences\r\n            this._map = null;\r\n            this._config = null;\r\n            this._container = null;\r\n            this._scaleLineMetric = null;\r\n            this._numericElement = null;\r\n            this._zoomElement = null;\r\n            this._inputElement = null;\r\n            this._scalePrefix = null;\r\n            this._mainWrapper = null;\r\n            this._eventHandlers = {};\r\n\r\n            Log.info(\"[GeoLeaf.ScaleControl] Contr√¥le d√©truit et ressources nettoy√©es\");\r\n        }\r\n    };\r\n\r\n    // Exposer le module\r\n    GeoLeaf.ScaleControl = ScaleControl;\r\n\r\n    /**\r\n     * Initialise automatiquement le contr√¥le d'√©chelle si la configuration est pr√©sente\r\n     */\r\n    GeoLeaf.initScaleControl = function(map) {\r\n        if (!map) {\r\n            Log.warn(\"[GeoLeaf.ScaleControl] Impossible d'initialiser : carte non fournie\");\r\n            return;\r\n        }\r\n\r\n        const config = GeoLeaf.Config && GeoLeaf.Config.get\r\n            ? GeoLeaf.Config.get('scaleConfig')\r\n            : null;\r\n\r\n        if (config && (config.scaleGraphic || config.scaleNumeric || config.scaleNivel)) {\r\n            ScaleControl.init(map, config);\r\n        }\r\n    };\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf UI - Filter Control Builder\r\n * Construit les contr√¥les de filtres individuels\r\n *\r\n * @module ui/filter-control-builder\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // D√©pendances\r\n    const Log = GeoLeaf.Log || console;\r\n    const $create = GeoLeaf.Utils?.createElement || function(tag, props) {\r\n        const el = document.createElement(tag);\r\n        if (props) {\r\n            if (props.className) el.className = props.className;\r\n            if (props.textContent) el.textContent = props.textContent;\r\n            if (props.id) el.id = props.id;\r\n            if (props.name) el.name = props.name;\r\n            if (props.type) el.type = props.type;\r\n            if (props.placeholder) el.placeholder = props.placeholder;\r\n            if (props.value !== undefined) el.value = props.value;\r\n            if (props.checked !== undefined) el.checked = props.checked;\r\n            if (props.multiple !== undefined) el.multiple = props.multiple;\r\n            if (props.style) Object.assign(el.style, props.style);\r\n            if (props.attributes) {\r\n                for (const [key, value] of Object.entries(props.attributes)) {\r\n                    el.setAttribute(key, value);\r\n                }\r\n            }\r\n            if (props.min !== undefined) el.min = props.min;\r\n            if (props.max !== undefined) el.max = props.max;\r\n            if (props.step !== undefined) el.step = props.step;\r\n        }\r\n        return el;\r\n    };\r\n\r\n    /**\r\n     * Construit un contr√¥le de filtre individuel\r\n     * @param {Object} filterDef - D√©finition du filtre\r\n     * @param {Object} profile - Configuration du profil\r\n     * @param {boolean} skipLabel - Sauter la cr√©ation du label (d√©faut: false)\r\n     * @returns {HTMLElement|null}\r\n     */\r\n    GeoLeaf.UI._buildFilterControl = function(filterDef, profile, skipLabel) {\r\n        if (!filterDef || !filterDef.id || !filterDef.type) return null;\r\n\r\n        const wrapper = $create(\"div\", {\r\n            className: \"gl-filter-panel__group\",\r\n            attributes: { \"data-gl-filter-id\": filterDef.id }\r\n        });\r\n\r\n        let labelEl = null;\r\n        // Ne pas cr√©er de label si skipLabel est true (pour les accord√©ons qui ont leur propre titre)\r\n        if (filterDef.label && !skipLabel) {\r\n            labelEl = $create(\"label\", {\r\n                className: \"gl-filter-panel__label\",\r\n                textContent: filterDef.label\r\n            });\r\n            wrapper.appendChild(labelEl);\r\n        }\r\n\r\n        let control = null;\r\n\r\n        // 1) SELECT / MULTISELECT classiques\r\n        if (filterDef.type === \"select\" || filterDef.type === \"multiselect\") {\r\n            const selectEl = $create(\"select\", {\r\n                className: \"gl-filter-panel__control gl-filter-panel__control--select\",\r\n                name: filterDef.id,\r\n                id: \"gl-filter-\" + filterDef.id\r\n            });\r\n\r\n            if (labelEl) {\r\n                labelEl.setAttribute(\"for\", selectEl.id);\r\n            }\r\n\r\n            if (filterDef.type === \"multiselect\") {\r\n                selectEl.multiple = true;\r\n            }\r\n\r\n            if (filterDef.optionsFrom) {\r\n                GeoLeaf.UI._populateSelectOptionsFromTaxonomy?.(\r\n                    selectEl,\r\n                    profile,\r\n                    filterDef.optionsFrom\r\n                );\r\n            }\r\n\r\n            control = selectEl;\r\n        }\r\n\r\n        // 2) SLIDER (range)\r\n        else if (filterDef.type === \"range\") {\r\n            const container = $create(\"div\", { className: \"gl-filter-panel__range-wrapper\" });\r\n\r\n            const input = $create(\"input\", {\r\n                type: \"range\",\r\n                className: \"gl-filter-panel__control gl-filter-panel__control--range\",\r\n                id: \"gl-filter-\" + filterDef.id,\r\n                name: filterDef.id\r\n            });\r\n\r\n            if (labelEl) {\r\n                labelEl.setAttribute(\"for\", input.id);\r\n            }\r\n\r\n            if (typeof filterDef.min === \"number\") input.min = String(filterDef.min);\r\n            if (typeof filterDef.max === \"number\") input.max = String(filterDef.max);\r\n            if (typeof filterDef.step === \"number\") input.step = String(filterDef.step);\r\n\r\n            const valueLabel = $create(\"span\", { className: \"gl-filter-panel__range-value\" });\r\n\r\n            let initialValue;\r\n            if (typeof filterDef.default === \"number\") {\r\n                initialValue = filterDef.default;\r\n            } else if (input.min && input.max) {\r\n                const min = parseFloat(input.min);\r\n                const max = parseFloat(input.max);\r\n                initialValue = (min + max) / 2;\r\n            } else {\r\n                initialValue = input.min ? parseFloat(input.min) : 0;\r\n            }\r\n\r\n            if (!isNaN(initialValue)) {\r\n                input.value = String(initialValue);\r\n                valueLabel.textContent = initialValue.toString().replace(\".\", \",\");\r\n            }\r\n\r\n            input.addEventListener(\"input\", function() {\r\n                const val = parseFloat(input.value);\r\n                if (!isNaN(val)) {\r\n                    valueLabel.textContent = val.toString().replace(\".\", \",\");\r\n                }\r\n            });\r\n\r\n            container.appendChild(input);\r\n            container.appendChild(valueLabel);\r\n            control = container;\r\n        }\r\n\r\n        // 3) TREE-VIEW cat√©gories / sous-cat√©gories\r\n        else if (filterDef.type === \"tree\" || filterDef.type === \"tree-category\" || filterDef.type === \"categoryTree\") {\r\n            // LAZY LOADING: Retourner un container vide avec marqueur\r\n            const treeContainer = $create(\"div\", {\r\n                className: \"gl-filter-panel__tree gl-filter-panel__tree--lazy\",\r\n                attributes: {\r\n                    \"data-lazy-type\": \"categories\",\r\n                    \"data-filter-id\": filterDef.id\r\n                }\r\n            });\r\n\r\n            control = treeContainer;\r\n        }\r\n\r\n        // 4) CHECKBOX GROUP\r\n        else if (filterDef.type === \"checkbox-group\") {\r\n            const groupContainer = $create(\"div\", { className: \"gl-filter-panel__checkbox-group\" });\r\n\r\n            if (Array.isArray(filterDef.options)) {\r\n                filterDef.options.forEach(function(opt) {\r\n                    const label = $create(\"label\", { className: \"gl-filter-panel__checkbox-label\" });\r\n\r\n                    const checkbox = $create(\"input\", {\r\n                        type: \"checkbox\",\r\n                        className: \"gl-filter-panel__checkbox\",\r\n                        name: filterDef.id,\r\n                        value: opt.id,\r\n                        checked: !!opt.checked,\r\n                        attributes: { \"data-filter-option-id\": opt.id }\r\n                    });\r\n\r\n                    const text = $create(\"span\", {\r\n                        className: \"gl-filter-panel__checkbox-text\",\r\n                        textContent: opt.label || opt.id\r\n                    });\r\n\r\n                    label.appendChild(checkbox);\r\n                    label.appendChild(text);\r\n                    groupContainer.appendChild(label);\r\n                });\r\n            }\r\n            control = groupContainer;\r\n        }\r\n\r\n        // 5) SEARCH\r\n        else if (filterDef.type === \"search\") {\r\n            const searchInput = $create(\"input\", {\r\n                type: \"text\",\r\n                className: \"gl-filter-panel__control gl-filter-panel__control--search\",\r\n                name: filterDef.id,\r\n                placeholder: filterDef.placeholder || \"Filtrer...\"\r\n            });\r\n\r\n            if (Array.isArray(filterDef.searchFields)) {\r\n                searchInput.setAttribute(\"data-search-fields\", filterDef.searchFields.join(\",\"));\r\n            }\r\n\r\n            control = searchInput;\r\n        }\r\n\r\n        // 6) PROXIMITY\r\n        else if (filterDef.type === \"proximity\") {\r\n            const proximityContainer = $create(\"div\", { className: \"gl-filter-panel__proximity\" });\r\n\r\n            if (filterDef.label) {\r\n                const title = $create(\"h3\", {\r\n                    className: \"gl-filter-panel__proximity-title\",\r\n                    textContent: filterDef.label\r\n                });\r\n                proximityContainer.appendChild(title);\r\n            }\r\n\r\n            const button = $create(\"button\", {\r\n                type: \"button\",\r\n                className: \"gl-btn gl-btn--secondary gl-filter-panel__proximity-btn\",\r\n                attributes: { \"data-filter-proximity-btn\": \"true\" },\r\n                textContent: filterDef.buttonLabel || \"Activer\"\r\n            });\r\n            proximityContainer.appendChild(button);\r\n\r\n            const rangeWrapper = $create(\"div\", {\r\n                className: \"gl-filter-panel__proximity-range\",\r\n                style: { display: \"none\" }\r\n            });\r\n\r\n            const rangeLabel = $create(\"label\", {\r\n                className: \"gl-filter-panel__label\",\r\n                textContent: \"Rayon (km)\",\r\n                attributes: { \"for\": \"gl-filter-proximity-radius\" }\r\n            });\r\n            rangeWrapper.appendChild(rangeLabel);\r\n\r\n            const rangeContainer = $create(\"div\", { className: \"gl-filter-panel__range-wrapper\" });\r\n\r\n            let minRadius = 1;\r\n            let maxRadius = 50;\r\n            let stepRadius = 1;\r\n            let defaultRadius = 10;\r\n            try {\r\n                const activeProfile = GeoLeaf.Config?.getActiveProfile?.();\r\n                if (activeProfile) {\r\n                    const searchConfig = (activeProfile.panels && activeProfile.panels.search) || activeProfile.search;\r\n                    if (searchConfig) {\r\n                        if (typeof searchConfig.radiusMin === \"number\" && searchConfig.radiusMin > 0) {\r\n                            minRadius = searchConfig.radiusMin;\r\n                        }\r\n                        if (typeof searchConfig.radiusMax === \"number\" && searchConfig.radiusMax > 0) {\r\n                            maxRadius = searchConfig.radiusMax;\r\n                        }\r\n                        if (typeof searchConfig.radiusStep === \"number\" && searchConfig.radiusStep > 0) {\r\n                            stepRadius = searchConfig.radiusStep;\r\n                        }\r\n                        if (typeof searchConfig.radiusDefault === \"number\" && searchConfig.radiusDefault > 0) {\r\n                            defaultRadius = searchConfig.radiusDefault;\r\n                        }\r\n                        defaultRadius = Math.max(minRadius, Math.min(defaultRadius, maxRadius));\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                Log?.warn?.(\"[GeoLeaf.UI] Erreur lecture radius config:\", err);\r\n            }\r\n\r\n            const rangeInput = $create(\"input\", {\r\n                type: \"range\",\r\n                className: \"gl-filter-panel__control gl-filter-panel__control--range\",\r\n                id: \"gl-filter-proximity-radius\",\r\n                name: filterDef.id + \"_radius\",\r\n                min: String(minRadius),\r\n                max: String(maxRadius),\r\n                step: String(stepRadius),\r\n                value: String(defaultRadius),\r\n                attributes: { \"data-filter-proximity-radius\": \"true\" }\r\n            });\r\n\r\n            const rangeValue = $create(\"span\", {\r\n                className: \"gl-filter-panel__range-value\",\r\n                textContent: String(defaultRadius)\r\n            });\r\n\r\n            rangeInput.addEventListener(\"input\", function() {\r\n                rangeValue.textContent = rangeInput.value;\r\n            });\r\n\r\n            rangeContainer.appendChild(rangeInput);\r\n            rangeContainer.appendChild(rangeValue);\r\n            rangeWrapper.appendChild(rangeContainer);\r\n\r\n            const instruction = $create(\"p\", {\r\n                className: \"gl-filter-panel__proximity-instruction\",\r\n                textContent: filterDef.instructionText || \"Cliquez sur la carte\",\r\n                style: { display: \"none\" }\r\n            });\r\n            rangeWrapper.appendChild(instruction);\r\n\r\n            proximityContainer.appendChild(rangeWrapper);\r\n            control = proximityContainer;\r\n        }\r\n\r\n        // 7) TAGS\r\n        else if (filterDef.type === \"multiselect-tags\" || filterDef.id === \"tags\") {\r\n            const tagsContainer = $create(\"div\", {\r\n                className: \"gl-filter-panel__tags-container\",\r\n                attributes: {\r\n                    \"data-lazy-type\": \"tags\",\r\n                    \"data-filter-id\": filterDef.id\r\n                }\r\n            });\r\n            control = tagsContainer;\r\n        }\r\n\r\n        // Aucun type reconnu\r\n        if (!control) {\r\n            return null;\r\n        }\r\n\r\n        if (labelEl && control instanceof HTMLElement && !control.id) {\r\n            const controlId = \"gl-filter-\" + filterDef.id;\r\n            control.id = controlId;\r\n            labelEl.setAttribute(\"for\", controlId);\r\n        }\r\n\r\n        wrapper.appendChild(control);\r\n        return wrapper;\r\n    };\r\n\r\n})(window);\r\n\r\n/**\r\n * Fonctions globales pour le chargement lazy des filtres\r\n * Utilis√©es par le lazy-loader pour construire le contenu √† la demande\r\n */\r\n\r\n/**\r\n * Construit le contenu HTML de l'arbre de cat√©gories\r\n * @param {Object} scanResult - R√©sultat du scan ({usedIds: Set, visibleLayerIds: Array})\r\n * @returns {string} HTML string\r\n */\r\nwindow._buildCategoryTreeContent = function(scanResult) {\r\n    // R√©cup√©rer le profil actif via l'API Config (enrichedProfile contient taxonomy)\r\n    const profile = (GeoLeaf.Config && typeof GeoLeaf.Config.getActiveProfile === \"function\")\r\n        ? GeoLeaf.Config.getActiveProfile()\r\n        : null;\r\n    if (!profile || !profile.taxonomy || !profile.taxonomy.categories) {\r\n        return '<div class=\"gl-empty-state\">Aucune cat√©gorie disponible</div>';\r\n    }\r\n\r\n    const categories = profile.taxonomy.categories;\r\n    const usedCategoryIds = scanResult.usedIds;\r\n\r\n    // S√©curit√© : √©chapper les valeurs dynamiques inject√©es dans le HTML\r\n    const esc = (GeoLeaf.Security && typeof GeoLeaf.Security.escapeHtml === 'function')\r\n        ? function(s) { return GeoLeaf.Security.escapeHtml(s); }\r\n        : function(s) { return String(s || '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;'); };\r\n\r\n    // Comparaison insensible √† la casse : normaliser les IDs scann√©s\r\n    const usedLower = new Set();\r\n    usedCategoryIds.forEach(function(id) { usedLower.add(id.toLowerCase()); });\r\n\r\n    // Filtrer les cat√©gories pour afficher celles utilis√©es (comparaison case-insensitive)\r\n    const catIds = Object.keys(categories).filter(catId => usedLower.has(catId.toLowerCase()));\r\n\r\n    if (catIds.length === 0) {\r\n        return '<div class=\"gl-empty-state\">ND - Non disponible</div>';\r\n    }\r\n\r\n    let html = '<ul class=\"gl-filter-tree gl-filter-tree--root\">';\r\n\r\n    catIds.forEach(function(catId) {\r\n        const cat = categories[catId] || {};\r\n\r\n        // Filtrer aussi les sous-cat√©gories (comparaison case-insensitive)\r\n        const subs = cat.subcategories || {};\r\n        const subKeys = Object.keys(subs).filter(subId => usedLower.has(subId.toLowerCase()));\r\n        const hasSubcategories = subKeys.length > 0;\r\n\r\n        html += '<li class=\"gl-filter-tree__item gl-filter-tree__item--category\">';\r\n        html += '<div class=\"gl-filter-tree__row\">';\r\n\r\n        if (hasSubcategories) {\r\n            html += '<span class=\"gl-filter-tree__arrow\" data-category-id=\"' + esc(catId) + '\">‚ñ∂</span>';\r\n        } else {\r\n            html += '<span class=\"gl-filter-tree__spacer\"></span>';\r\n        }\r\n\r\n        html += '<label class=\"gl-filter-tree__label gl-filter-tree__label--category\">';\r\n        html += '<input type=\"checkbox\" class=\"gl-filter-tree__checkbox gl-filter-tree__checkbox--category\" ';\r\n        html += 'name=\"categories_category\" value=\"' + esc(catId) + '\" ';\r\n        html += 'data-gl-filter-category-id=\"' + esc(catId) + '\">';\r\n        html += '<span class=\"gl-filter-tree__text\">' + esc(cat.label || catId) + '</span>';\r\n        html += '</label>';\r\n        html += '</div>';\r\n\r\n        if (hasSubcategories) {\r\n            html += '<ul class=\"gl-filter-tree gl-filter-tree--subcategories\">';\r\n\r\n            subKeys.forEach(function(subId) {\r\n                const sub = subs[subId] || {};\r\n                html += '<li class=\"gl-filter-tree__item gl-filter-tree__item--subcategory\">';\r\n                html += '<label class=\"gl-filter-tree__label gl-filter-tree__label--subcategory\">';\r\n                html += '<input type=\"checkbox\" class=\"gl-filter-tree__checkbox gl-filter-tree__checkbox--subcategory\" ';\r\n                html += 'name=\"categories_subcategory\" value=\"' + esc(subId) + '\" ';\r\n                html += 'data-gl-filter-category-id=\"' + esc(catId) + '\" ';\r\n                html += 'data-gl-filter-subcategory-id=\"' + esc(subId) + '\">';\r\n                html += '<span class=\"gl-filter-tree__text\">' + esc(sub.label || subId) + '</span>';\r\n                html += '</label>';\r\n                html += '</li>';\r\n            });\r\n\r\n            html += '</ul>';\r\n        }\r\n\r\n        html += '</li>';\r\n    });\r\n\r\n    html += '</ul>';\r\n    return html;\r\n};\r\n\r\n/**\r\n * Construit le contenu HTML de la liste de tags\r\n * @param {Array} tags - Array de tags uniques tri√©s\r\n * @returns {string} HTML string\r\n */\r\nwindow._buildTagsListContent = function(tags) {\r\n    if (!tags || tags.length === 0) {\r\n        return '<div class=\"gl-empty-state\">ND - Non disponible</div>';\r\n    }\r\n\r\n    // S√©curit√© : √©chapper les valeurs dynamiques\r\n    const esc = (GeoLeaf.Security && typeof GeoLeaf.Security.escapeHtml === 'function')\r\n        ? function(s) { return GeoLeaf.Security.escapeHtml(s); }\r\n        : function(s) { return String(s || '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;'); };\r\n\r\n    let html = '';\r\n    tags.forEach(function(tag) {\r\n        html += '<span class=\"gl-filter-panel__tag-badge\" data-tag-value=\"' + esc(tag) + '\">' + esc(tag) + '</span>';\r\n    });\r\n\r\n    return html;\r\n};\r\n\r\n/**\r\n * Attache les event listeners pour l'arbre de cat√©gories apr√®s rendering\r\n * @param {HTMLElement} container - Container de l'arbre\r\n */\r\nwindow._attachCategoryTreeListeners = function(container) {\r\n    // Event listeners pour les fl√®ches d'expansion\r\n    const arrows = container.querySelectorAll('.gl-filter-tree__arrow');\r\n    arrows.forEach(function(arrow) {\r\n        arrow.addEventListener('click', function(e) {\r\n            e.stopPropagation();\r\n            const li = this.closest('.gl-filter-tree__item--category');\r\n            const subList = li.querySelector('.gl-filter-tree--subcategories');\r\n            if (subList) {\r\n                const isExpanded = li.classList.contains('is-expanded');\r\n                if (isExpanded) {\r\n                    li.classList.remove('is-expanded');\r\n                    this.textContent = '‚ñ∂';\r\n                } else {\r\n                    li.classList.add('is-expanded');\r\n                    this.textContent = '‚ñº';\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    // Event listeners pour les checkboxes de cat√©gorie (parent)\r\n    const categoryCheckboxes = container.querySelectorAll('.gl-filter-tree__checkbox--category');\r\n    categoryCheckboxes.forEach(function(inputCat) {\r\n        inputCat.addEventListener('change', function() {\r\n            const li = this.closest('.gl-filter-tree__item--category');\r\n            const subCheckboxes = li.querySelectorAll('.gl-filter-tree__checkbox--subcategory');\r\n            subCheckboxes.forEach(function(subCb) {\r\n                subCb.checked = inputCat.checked;\r\n            });\r\n            inputCat.indeterminate = false;\r\n        });\r\n    });\r\n\r\n    // Event listeners pour les checkboxes de sous-cat√©gorie (enfant)\r\n    const subcategoryCheckboxes = container.querySelectorAll('.gl-filter-tree__checkbox--subcategory');\r\n    subcategoryCheckboxes.forEach(function(inputSub) {\r\n        inputSub.addEventListener('change', function() {\r\n            const liCat = this.closest('.gl-filter-tree__item--category');\r\n            const categoryCheckbox = liCat.querySelector('.gl-filter-tree__checkbox--category');\r\n            const subCheckboxes = liCat.querySelectorAll('.gl-filter-tree__checkbox--subcategory');\r\n\r\n            const checkedCount = Array.from(subCheckboxes).filter(cb => cb.checked).length;\r\n            const totalCount = subCheckboxes.length;\r\n\r\n            if (checkedCount === 0) {\r\n                categoryCheckbox.checked = false;\r\n                categoryCheckbox.indeterminate = false;\r\n            } else if (checkedCount === totalCount) {\r\n                categoryCheckbox.checked = true;\r\n                categoryCheckbox.indeterminate = false;\r\n            } else {\r\n                categoryCheckbox.checked = false;\r\n                categoryCheckbox.indeterminate = true;\r\n            }\r\n        });\r\n    });\r\n};\r\n\r\n/**\r\n * Attache les event listeners pour les tags apr√®s rendering\r\n * @param {HTMLElement} container - Container des tags\r\n */\r\nwindow._attachTagsListeners = function(container) {\r\n    const badges = container.querySelectorAll('.gl-filter-panel__tag-badge');\r\n    badges.forEach(function(badge) {\r\n        badge.addEventListener('click', function() {\r\n            this.classList.toggle('is-selected');\r\n        });\r\n    });\r\n};\r\n","/**\r\n * GeoLeaf UI Filter Panel - Shared Helpers\r\n * Fonctions utilitaires partag√©es pour le panneau de filtres\r\n *\r\n * @module ui/filter-panel/shared\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // D√©pendances lazy\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n\r\n    GeoLeaf._UIFilterPanelShared = GeoLeaf._UIFilterPanelShared || {};\r\n\r\n    // ========================================\r\n    //   CONVERSION DE FEATURES\r\n    // ========================================\r\n\r\n    /**\r\n     * Convertit une feature GeoJSON Point en objet POI-like\r\n     * @param {Object} feature - Feature GeoJSON\r\n     * @returns {Object|null} - POI-like ou null\r\n     */\r\n    GeoLeaf._UIFilterPanelShared.featureToPoiLike = function(feature) {\r\n        if (!feature || !feature.geometry || !feature.properties) return null;\r\n\r\n        const geom = feature.geometry;\r\n        if (!geom || geom.type?.toLowerCase().indexOf(\"point\") === -1) return null;\r\n\r\n        const coords = Array.isArray(geom.coordinates) ? geom.coordinates : null;\r\n        const latlng = coords && coords.length >= 2 ? [coords[1], coords[0]] : null;\r\n        const props = feature.properties || {};\r\n        const poi = Object.assign({}, props);\r\n\r\n        if (!poi.title && props.name) poi.title = props.name;\r\n        if (!poi.id && feature.id) poi.id = feature.id;\r\n        if (!poi.latlng && latlng) poi.latlng = latlng;\r\n        if (!poi.attributes && props.attributes) poi.attributes = props.attributes;\r\n\r\n        return poi;\r\n    };\r\n\r\n    /**\r\n     * Convertit une feature GeoJSON LineString en objet Route-like\r\n     * @param {Object} feature - Feature GeoJSON\r\n     * @returns {Object|null} - Route-like ou null\r\n     */\r\n    GeoLeaf._UIFilterPanelShared.featureToRouteLike = function(feature) {\r\n        if (!feature || !feature.geometry || !feature.properties) return null;\r\n\r\n        const geom = feature.geometry;\r\n        if (!geom || geom.type?.toLowerCase().indexOf(\"line\") === -1) return null;\r\n\r\n        const props = feature.properties || {};\r\n\r\n        // Exclude protected areas (aires_prot√©g√©es_nationales) - they should not be treated as routes/itineraries\r\n        // Protected areas have minimal properties: fid, Name, region only\r\n        const hasOtherProperties = Object.keys(props).some(key =>\r\n            !['fid', 'name', 'Name', 'region', 'REGION', 'Region'].includes(key)\r\n        );\r\n        if (!hasOtherProperties && (props.fid !== undefined || props.Name)) {\r\n            // Likely a protected area, not an itinerary\r\n            return null;\r\n        }\r\n\r\n        const route = Object.assign({}, props);\r\n\r\n        if (!route.title && props.name) route.title = props.name;\r\n        if (!route.id && feature.id) route.id = feature.id;\r\n        route.geometry = geom;\r\n\r\n        return route;\r\n    };\r\n\r\n    // ========================================\r\n    //   R√âCUP√âRATION DES DONN√âES\r\n    // ========================================\r\n\r\n    /**\r\n     * R√©cup√®re tous les POI depuis les diff√©rentes sources\r\n     * @returns {Array} - Liste des POI\r\n     */\r\n    GeoLeaf._UIFilterPanelShared.getBasePois = function() {\r\n        const Log = getLog();\r\n        const featureToPoiLike = GeoLeaf._UIFilterPanelShared.featureToPoiLike;\r\n\r\n        // 1) Prendre depuis GeoJSON (mode layers-only) si dispo\r\n        try {\r\n            if (GeoLeaf.GeoJSON && typeof GeoLeaf.GeoJSON.getFeatures === \"function\") {\r\n                const feats = GeoLeaf.GeoJSON.getFeatures({ geometryTypes: [\"point\"] }) || [];\r\n                const pois = feats.map(featureToPoiLike).filter(Boolean);\r\n                if (pois.length) return pois;\r\n            }\r\n        } catch (err) {\r\n            Log.warn(\"[GeoLeaf.UI.FilterPanel] Erreur r√©cup√©ration POI via GeoJSON:\", err);\r\n        }\r\n\r\n        // 2) Config active (legacy)\r\n        try {\r\n            if (GeoLeaf.Config) {\r\n                if (typeof GeoLeaf.Config.get === \"function\") {\r\n                    const fromGet = GeoLeaf.Config.get(\"poi\");\r\n                    if (Array.isArray(fromGet)) return fromGet;\r\n                }\r\n                if (Array.isArray(GeoLeaf.Config._activeProfileData?.poi)) {\r\n                    return GeoLeaf.Config._activeProfileData.poi;\r\n                }\r\n            }\r\n        } catch (err) {\r\n            Log.warn(\"[GeoLeaf.UI.FilterPanel] Erreur r√©cup√©ration POI via Config:\", err);\r\n        }\r\n\r\n        // 3) Fallback d√©mo\r\n        if (global.cfg && Array.isArray(global.cfg.poi)) {\r\n            return global.cfg.poi;\r\n        }\r\n\r\n        return [];\r\n    };\r\n\r\n    /**\r\n     * R√©cup√®re toutes les routes depuis les diff√©rentes sources\r\n     * @returns {Array} - Liste des routes\r\n     */\r\n    GeoLeaf._UIFilterPanelShared.getBaseRoutes = function() {\r\n        const Log = getLog();\r\n        const featureToRouteLike = GeoLeaf._UIFilterPanelShared.featureToRouteLike;\r\n\r\n        // 1) Via GeoJSON (layers-only)\r\n        try {\r\n            if (GeoLeaf.GeoJSON && typeof GeoLeaf.GeoJSON.getFeatures === \"function\") {\r\n                const feats = GeoLeaf.GeoJSON.getFeatures({ geometryTypes: [\"line\", \"linestring\", \"multilinestring\"] }) || [];\r\n                const routes = feats.map(featureToRouteLike).filter(Boolean);\r\n                if (routes.length) return routes;\r\n            }\r\n        } catch (err) {\r\n            Log.warn(\"[GeoLeaf.UI.FilterPanel] Erreur r√©cup√©ration routes via GeoJSON:\", err);\r\n        }\r\n\r\n        // 2) Config active (legacy)\r\n        try {\r\n            if (GeoLeaf.Config) {\r\n                if (typeof GeoLeaf.Config.get === \"function\") {\r\n                    const fromGet = GeoLeaf.Config.get(\"routes\");\r\n                    if (Array.isArray(fromGet)) return fromGet;\r\n                }\r\n                if (Array.isArray(GeoLeaf.Config._activeProfileData?.routes)) {\r\n                    return GeoLeaf.Config._activeProfileData.routes;\r\n                }\r\n            }\r\n        } catch (err) {\r\n            Log.warn(\"[GeoLeaf.UI.FilterPanel] Erreur r√©cup√©ration routes via Config:\", err);\r\n        }\r\n\r\n        // 3) Fallback d√©mo\r\n        if (global.cfg && Array.isArray(global.cfg.routes)) {\r\n            return global.cfg.routes;\r\n        }\r\n\r\n        return [];\r\n    };\r\n\r\n    // ========================================\r\n    //   UTILITAIRES\r\n    // ========================================\r\n\r\n    /**\r\n     * Retourne l'√©l√©ment DOM du panneau de filtres.\r\n     * Priorit√© au conteneur flottant #gl-filter-panel, puis fallback #gl-left-panel.\r\n     * @returns {HTMLElement|null}\r\n     */\r\n    GeoLeaf._UIFilterPanelShared.getFilterPanelElement = function() {\r\n        let el = document.getElementById(\"gl-filter-panel\");\r\n        if (el) return el;\r\n\r\n        el = document.getElementById(\"gl-left-panel\");\r\n        if (el) return el;\r\n\r\n        const Log = getLog();\r\n        Log.warn(\"[GeoLeaf.UI.FilterPanel] Aucun conteneur de panneau de filtres trouv√© (#gl-filter-panel / #gl-left-panel).\");\r\n\r\n        return null;\r\n    };\r\n\r\n    /**\r\n     * Acc√®de √† une propri√©t√© imbriqu√©e (ex: \"attributes.nom\")\r\n     * @param {Object} obj - Objet source\r\n     * @param {string} path - Chemin vers la propri√©t√©\r\n     * @returns {*} - Valeur ou null\r\n     */\r\n    GeoLeaf._UIFilterPanelShared.getNestedValue = function(obj, path) {\r\n        if (!obj || !path) return null;\r\n        const keys = path.split('.');\r\n        let value = obj;\r\n        for (let i = 0; i < keys.length; i++) {\r\n            if (value === null || value === undefined) return null;\r\n            value = value[keys[i]];\r\n        }\r\n        return value;\r\n    };\r\n\r\n    /**\r\n     * Extrait un point repr√©sentatif d'une g√©om√©trie (pour calcul de distance)\r\n     * @param {Object} geometry - G√©om√©trie GeoJSON\r\n     * @returns {Object|null} - { lat, lng } ou null\r\n     */\r\n    GeoLeaf._UIFilterPanelShared.getRepresentativePoint = function(geometry) {\r\n        if (!geometry || !geometry.coordinates) return null;\r\n\r\n        if (geometry.type === 'Polygon' || geometry.type === 'MultiPolygon') {\r\n            // Pour un polygone, utiliser le premier point du premier anneau\r\n            const coords = geometry.type === 'Polygon'\r\n                ? geometry.coordinates[0][0]\r\n                : geometry.coordinates[0][0][0];\r\n            return coords ? { lng: coords[0], lat: coords[1] } : null;\r\n\r\n        } else if (geometry.type === 'LineString') {\r\n            // Pour une ligne, utiliser le point du milieu\r\n            const coords = geometry.coordinates;\r\n            if (coords && coords.length > 0) {\r\n                const midIndex = Math.floor(coords.length / 2);\r\n                return { lng: coords[midIndex][0], lat: coords[midIndex][1] };\r\n            }\r\n\r\n        } else if (geometry.type === 'MultiLineString') {\r\n            // Pour multi-ligne, utiliser le point du milieu de la premi√®re ligne\r\n            const coords = geometry.coordinates[0];\r\n            if (coords && coords.length > 0) {\r\n                const midIndex = Math.floor(coords.length / 2);\r\n                return { lng: coords[midIndex][0], lat: coords[midIndex][1] };\r\n            }\r\n\r\n        } else if (geometry.type === 'Point') {\r\n            return { lng: geometry.coordinates[0], lat: geometry.coordinates[1] };\r\n\r\n        } else if (geometry.type === 'MultiPoint') {\r\n            // Pour multi-point, utiliser le premier point\r\n            const coords = geometry.coordinates[0];\r\n            return coords ? { lng: coords[0], lat: coords[1] } : null;\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    /**\r\n     * Collecte tous les tags uniques depuis une liste d'items\r\n     * @param {Array} items - Liste d'items (POI, routes)\r\n     * @returns {Array} - Tags uniques tri√©s\r\n     */\r\n    GeoLeaf._UIFilterPanelShared.collectAllTags = function(items) {\r\n        const tagSet = new Set();\r\n\r\n        items.forEach(function(item) {\r\n            // Support GeoJSON properties.attributes.tags, item.attributes.tags, et item.tags\r\n            const props = item.properties || item;\r\n            const attrs = props.attributes || item.attributes || {};\r\n            const tags = attrs.tags || props.tags || item.tags;\r\n\r\n            if (Array.isArray(tags) && tags.length > 0) {\r\n                tags.forEach(function(t) {\r\n                    if (t && typeof t === \"string\") {\r\n                        tagSet.add(t);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        const arr = Array.from(tagSet);\r\n        arr.sort();\r\n        return arr;\r\n    };\r\n\r\n})(window);\r\n","/**\n * GeoLeaf UI Filter Panel - State Reader\n * Lecture de l'√©tat des filtres depuis le DOM\n *\n * @module ui/filter-panel/state-reader\n */\n(function (global) {\n    \"use strict\";\n\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\n\n    GeoLeaf._UIFilterPanelStateReader = GeoLeaf._UIFilterPanelStateReader || {};\n\n    /**\n     * Structure par d√©faut de l'√©tat des filtres\n     * @returns {Object}\n     */\n    GeoLeaf._UIFilterPanelStateReader.getDefaultState = function() {\n        return {\n            categoriesTree: [],\n            subCategoriesTree: [],\n            minRating: NaN,\n            hasMinRating: false,\n            selectedTags: [],\n            hasTags: false,\n            dataTypes: { poi: true, routes: true },\n            searchText: \"\",\n            hasSearchText: false,\n            proximity: {\n                active: false,\n                center: null,\n                radius: 10\n            }\n        };\n    };\n\n    /**\n     * Lit l'√©tat actuel des filtres depuis le panneau DOM\n     * @param {HTMLElement} panelEl - √âl√©ment du panneau de filtres\n     * @returns {Object} - √âtat des filtres\n     */\n    GeoLeaf._UIFilterPanelStateReader.readFiltersFromPanel = function(panelEl) {\n        const state = GeoLeaf._UIFilterPanelStateReader.getDefaultState();\n\n        if (!panelEl) return state;\n\n        // Types de donn√©es (POI / Routes)\n        const poiCheckbox = panelEl.querySelector(\n            \"[data-gl-filter-id='dataTypes'] input[value='poi']\"\n        );\n        const routesCheckbox = panelEl.querySelector(\n            \"[data-gl-filter-id='dataTypes'] input[value='routes']\"\n        );\n        if (poiCheckbox) state.dataTypes.poi = poiCheckbox.checked;\n        if (routesCheckbox) state.dataTypes.routes = routesCheckbox.checked;\n\n        // Recherche textuelle\n        const searchInput = panelEl.querySelector(\n            \"[data-gl-filter-id='searchText'] input[type='text']\"\n        );\n        if (searchInput && searchInput.value.trim() !== \"\") {\n            state.searchText = searchInput.value.trim().toLowerCase();\n            state.hasSearchText = true;\n        }\n\n        // Proximit√©\n        const proximityContainer = panelEl.querySelector(\n            \"[data-gl-filter-id='proximity']\"\n        );\n        if (proximityContainer) {\n            const isActive = proximityContainer.getAttribute(\"data-proximity-active\") === \"true\";\n            const lat = parseFloat(proximityContainer.getAttribute(\"data-proximity-lat\"));\n            const lng = parseFloat(proximityContainer.getAttribute(\"data-proximity-lng\"));\n            const radius = parseFloat(proximityContainer.getAttribute(\"data-proximity-radius\"));\n\n            if (isActive && !isNaN(lat) && !isNaN(lng) && !isNaN(radius)) {\n                state.proximity.active = true;\n                state.proximity.center = { lat: lat, lng: lng };\n                state.proximity.radius = radius;\n            }\n        }\n\n        // Tree-view : cat√©gories coch√©es\n        panelEl\n            .querySelectorAll(\"input.gl-filter-tree__checkbox--category:checked\")\n            .forEach(function(input) {\n                const val = input.value;\n                if (val) {\n                    state.categoriesTree.push(String(val));\n                }\n            });\n\n        // Tree-view : sous-cat√©gories coch√©es\n        panelEl\n            .querySelectorAll(\"input.gl-filter-tree__checkbox--subcategory:checked\")\n            .forEach(function(input) {\n                const subId = input.getAttribute(\"data-gl-filter-subcategory-id\");\n                if (subId) {\n                    state.subCategoriesTree.push(String(subId));\n                }\n            });\n\n        // Slider de note minimale\n        const ratingInput = panelEl.querySelector(\n            \"[data-gl-filter-id='minRating'] input[type='range']\"\n        );\n        if (ratingInput && ratingInput.value !== \"\") {\n            const val = parseFloat(ratingInput.value);\n            if (!isNaN(val)) {\n                state.minRating = val;\n                state.hasMinRating = val > 0;\n            }\n        }\n\n        // Tags s√©lectionn√©s (badges)\n        const tagsContainer = panelEl.querySelector(\n            \"[data-gl-filter-id='tags'] .gl-filter-panel__tags-container\"\n        );\n        if (tagsContainer) {\n            const selectedBadges = tagsContainer.querySelectorAll(\n                \".gl-filter-panel__tag-badge.is-selected\"\n            );\n            const selected = Array.from(selectedBadges).map(function(badge) {\n                return badge.getAttribute(\"data-tag-value\");\n            }).filter(Boolean);\n            state.selectedTags = selected;\n            state.hasTags = selected.length > 0;\n        }\n\n        return state;\n    };\n\n    /**\n     * R√©initialise les contr√¥les du panneau de filtres √† leur √©tat par d√©faut\n     * @param {HTMLElement} panelEl - √âl√©ment du panneau de filtres\n     */\n    GeoLeaf._UIFilterPanelStateReader.resetControls = function(panelEl) {\n        if (!panelEl) return;\n\n        // Checkbox-group (POI/Routes) - reset to checked by default\n        const dataTypesCheckboxes = panelEl.querySelectorAll(\n            \"[data-gl-filter-id='dataTypes'] input[type='checkbox']\"\n        );\n        dataTypesCheckboxes.forEach(function(input) {\n            input.checked = true;\n        });\n\n        // Search text input\n        const searchInput = panelEl.querySelector(\n            \"[data-gl-filter-id='searchText'] input[type='text']\"\n        );\n        if (searchInput) {\n            searchInput.value = \"\";\n        }\n\n        // Proximit√©\n        const proximityWrapper = panelEl.querySelector(\n            \"[data-gl-filter-id='proximity']\"\n        );\n        if (proximityWrapper) {\n            proximityWrapper.removeAttribute(\"data-proximity-active\");\n            proximityWrapper.removeAttribute(\"data-proximity-lat\");\n            proximityWrapper.removeAttribute(\"data-proximity-lng\");\n            proximityWrapper.removeAttribute(\"data-proximity-radius\");\n\n            const btn = proximityWrapper.querySelector(\".gl-filter-panel__proximity-btn\");\n            if (btn) {\n                btn.classList.remove(\"is-active\");\n                btn.textContent = btn.getAttribute(\"data-label-inactive\") || \"Activer\";\n            }\n\n            const rangeWrapper = proximityWrapper.querySelector(\".gl-filter-panel__proximity-range\");\n            if (rangeWrapper) {\n                rangeWrapper.style.display = \"none\";\n            }\n\n            const instruction = proximityWrapper.querySelector(\".gl-filter-panel__proximity-instruction\");\n            if (instruction) {\n                instruction.style.display = \"none\";\n            }\n\n            // Supprimer le cercle et le marqueur de la carte\n            if (GeoLeaf.UI && GeoLeaf.UI._proximityCircle && GeoLeaf.UI._proximityMap) {\n                GeoLeaf.UI._proximityMap.removeLayer(GeoLeaf.UI._proximityCircle);\n                GeoLeaf.UI._proximityCircle = null;\n            }\n            if (GeoLeaf.UI && GeoLeaf.UI._proximityMarker && GeoLeaf.UI._proximityMap) {\n                GeoLeaf.UI._proximityMap.removeLayer(GeoLeaf.UI._proximityMarker);\n                GeoLeaf.UI._proximityMarker = null;\n            }\n            if (GeoLeaf.UI) {\n                GeoLeaf.UI._proximityMode = false;\n            }\n        }\n\n        // Checkboxes du tree-view (cat√©gories & sous-cat√©gories)\n        panelEl\n            .querySelectorAll(\".gl-filter-tree__checkbox\")\n            .forEach(function(input) {\n                input.checked = false;\n            });\n\n        // Tags - d√©s√©lectionner tous les badges\n        const tagBadges = panelEl.querySelectorAll(\n            \".gl-filter-panel__tag-badge.is-selected\"\n        );\n        tagBadges.forEach(function(badge) {\n            badge.classList.remove(\"is-selected\");\n        });\n\n        // Select classiques\n        panelEl\n            .querySelectorAll(\"select.gl-filter-panel__control--select\")\n            .forEach(function(sel) {\n                if (sel.multiple) {\n                    Array.from(sel.options).forEach(function(opt) {\n                        opt.selected = false;\n                    });\n                } else {\n                    sel.value = \"\";\n                }\n            });\n\n        // Slider note\n        const ratingInput = panelEl.querySelector(\n            \"[data-gl-filter-id='minRating'] input[type='range']\"\n        );\n        const ratingLabel = panelEl.querySelector(\n            \"[data-gl-filter-id='minRating'] .gl-filter-panel__range-value\"\n        );\n        if (ratingInput) {\n            const min = ratingInput.min !== \"\" ? ratingInput.min : \"0\";\n            ratingInput.value = min;\n            if (ratingLabel) {\n                ratingLabel.textContent = String(min).replace(\".\", \",\");\n            }\n        }\n    };\n\n})(window);\n","/**\r\n * GeoLeaf UI Filter Panel - Lazy Loader\r\n * Chargement √† la demande des filtres cat√©gories et tags\r\n *\r\n * @module ui/filter-panel/lazy-loader\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log || console;\r\n\r\n    GeoLeaf._UIFilterPanelLazyLoader = {\r\n        _cache: {},\r\n        _openAccordions: new Set(),\r\n\r\n        /**\r\n         * Charge les cat√©gories pour le th√®me actif\r\n         * @param {string} themeId - ID du th√®me\r\n         * @returns {Array} - Array de cat√©gories avec leurs sous-cat√©gories\r\n         */\r\n        loadCategories(themeId) {\r\n            const cacheKey = `categories_${themeId}`;\r\n\r\n            if (this._cache[cacheKey]) {\r\n                Log.debug(\"[LazyLoader] Cache HIT pour cat√©gories:\", themeId);\r\n                return this._cache[cacheKey];\r\n            }\r\n\r\n            Log.debug(\"[LazyLoader] Cache MISS pour cat√©gories, scan en cours...\");\r\n            const result = this._scanCategories(themeId);\r\n            this._cache[cacheKey] = result;\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Charge les tags pour le th√®me actif\r\n         * @param {string} themeId - ID du th√®me\r\n         * @returns {Array} - Array de tags uniques\r\n         */\r\n        loadTags(themeId) {\r\n            const cacheKey = `tags_${themeId}`;\r\n\r\n            if (this._cache[cacheKey]) {\r\n                Log.debug(\"[LazyLoader] Cache HIT pour tags:\", themeId);\r\n                return this._cache[cacheKey];\r\n            }\r\n\r\n            Log.debug(\"[LazyLoader] Cache MISS pour tags, scan en cours...\");\r\n            const result = this._scanTags(themeId);\r\n            this._cache[cacheKey] = result;\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Scanne les features pour extraire les cat√©gories utilis√©es\r\n         * @private\r\n         * @param {string} themeId - ID du th√®me\r\n         * @returns {Object} - {categories: Map, usedIds: Set}\r\n         */\r\n        _scanCategories(themeId) {\r\n            const startTime = performance.now();\r\n\r\n            // R√©cup√©rer les couches visibles du th√®me\r\n            const visibleLayerIds = this._getVisibleLayerIds(themeId);\r\n\r\n            // R√©cup√©rer toutes les features\r\n            let allFeatures = [];\r\n            try {\r\n                if (GeoLeaf.GeoJSON && typeof GeoLeaf.GeoJSON.getFeatures === \"function\") {\r\n                    allFeatures = GeoLeaf.GeoJSON.getFeatures() || [];\r\n                }\r\n            } catch (err) {\r\n                Log.warn(\"[LazyLoader] Erreur r√©cup√©ration features:\", err);\r\n                return { categories: new Map(), usedIds: new Set() };\r\n            }\r\n\r\n            // Filtrer par couches visibles\r\n            const visibleFeatures = allFeatures.filter(feature => {\r\n                const layerId = feature.properties?._layerId || feature.properties?.layerId || feature._layerId;\r\n                return visibleLayerIds.includes(layerId);\r\n            });\r\n\r\n            Log.debug(`[LazyLoader] Scan cat√©gories: ${visibleFeatures.length} features sur ${visibleLayerIds.length} couches actives`);\r\n\r\n            // Extraire les cat√©gories uniques (normalisation lowercase + variantes camelCase)\r\n            const usedCategoryIds = new Set();\r\n            visibleFeatures.forEach(feature => {\r\n                const props = feature.properties || {};\r\n                if (props.categoryId) {\r\n                    usedCategoryIds.add(props.categoryId);\r\n                }\r\n                if (props.subcategoryId) {\r\n                    usedCategoryIds.add(props.subcategoryId);\r\n                }\r\n                // Variante camelCase (subCategoryId) pr√©sente dans certains GeoJSON\r\n                if (props.subCategoryId) {\r\n                    usedCategoryIds.add(props.subCategoryId);\r\n                }\r\n            });\r\n\r\n            const elapsed = (performance.now() - startTime).toFixed(2);\r\n            Log.info(`[LazyLoader] Scan cat√©gories termin√© en ${elapsed}ms: ${usedCategoryIds.size} cat√©gories trouv√©es`);\r\n\r\n            return {\r\n                usedIds: usedCategoryIds,\r\n                visibleLayerIds: visibleLayerIds\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Scanne les features pour extraire les tags utilis√©s\r\n         * @private\r\n         * @param {string} themeId - ID du th√®me\r\n         * @returns {Array} - Array de tags tri√©s\r\n         */\r\n        _scanTags(themeId) {\r\n            const startTime = performance.now();\r\n\r\n            // R√©cup√©rer les couches visibles du th√®me\r\n            const visibleLayerIds = this._getVisibleLayerIds(themeId);\r\n\r\n            // R√©cup√©rer toutes les features\r\n            let allFeatures = [];\r\n            try {\r\n                if (GeoLeaf.GeoJSON && typeof GeoLeaf.GeoJSON.getFeatures === \"function\") {\r\n                    allFeatures = GeoLeaf.GeoJSON.getFeatures() || [];\r\n                }\r\n            } catch (err) {\r\n                Log.warn(\"[LazyLoader] Erreur r√©cup√©ration features:\", err);\r\n                return [];\r\n            }\r\n\r\n            // Filtrer par couches visibles\r\n            const visibleFeatures = allFeatures.filter(feature => {\r\n                const layerId = feature.properties?._layerId || feature.properties?.layerId || feature._layerId;\r\n                return visibleLayerIds.includes(layerId);\r\n            });\r\n\r\n            // Extraire les tags uniques\r\n            const tagSet = new Set();\r\n            visibleFeatures.forEach(feature => {\r\n                const props = feature.properties || {};\r\n                const attrs = props.attributes || {};\r\n                const tags = attrs.tags || props.tags;\r\n\r\n                if (Array.isArray(tags)) {\r\n                    tags.forEach(tag => {\r\n                        if (tag && typeof tag === \"string\") {\r\n                            tagSet.add(tag);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            const tagsArray = Array.from(tagSet).sort();\r\n            const elapsed = (performance.now() - startTime).toFixed(2);\r\n\r\n            Log.info(`[LazyLoader] Scan tags termin√© en ${elapsed}ms:`, {\r\n                totalFeatures: allFeatures.length,\r\n                visibleFeatures: visibleFeatures.length,\r\n                tagsFound: tagsArray.length\r\n            });\r\n\r\n            return tagsArray;\r\n        },\r\n\r\n        /**\r\n         * R√©cup√®re les IDs des couches r√©ellement visibles sur la carte\r\n         * @private\r\n         * @param {string} themeId - ID du th√®me (non utilis√©, mais conserv√© pour compatibilit√©)\r\n         * @returns {Array} - Array d'IDs de couches avec visible: true\r\n         */\r\n        _getVisibleLayerIds(themeId) {\r\n            let visibleLayerIds = [];\r\n\r\n            try {\r\n                // R√©cup√©rer toutes les couches charg√©es\r\n                if (GeoLeaf.GeoJSON && typeof GeoLeaf.GeoJSON.getAllLayers === \"function\") {\r\n                    const allLayers = GeoLeaf.GeoJSON.getAllLayers();\r\n                    // Filtrer uniquement celles qui sont visibles (ON dans layer manager)\r\n                    visibleLayerIds = allLayers\r\n                        .filter(layer => layer.visible === true)\r\n                        .map(layer => layer.id);\r\n\r\n                    Log.debug(`[LazyLoader] ${visibleLayerIds.length} couches visibles trouv√©es:`, visibleLayerIds);\r\n                }\r\n            } catch (err) {\r\n                Log.warn(\"[LazyLoader] Erreur r√©cup√©ration couches visibles:\", err);\r\n            }\r\n\r\n            return visibleLayerIds;\r\n        },\r\n\r\n        /**\r\n         * Marque un accord√©on comme ouvert\r\n         * @param {string} type - 'categories' ou 'tags'\r\n         * @param {HTMLElement} element - Element de l'accord√©on\r\n         */\r\n        markAccordionOpen(type, element) {\r\n            this._openAccordions.add({ type, element });\r\n            Log.debug(`[LazyLoader] Accord√©on \"${type}\" marqu√© comme ouvert`);\r\n        },\r\n\r\n        /**\r\n         * Marque un accord√©on comme ferm√©\r\n         * @param {HTMLElement} element - Element de l'accord√©on\r\n         */\r\n        markAccordionClosed(element) {\r\n            this._openAccordions.forEach(item => {\r\n                if (item.element === element) {\r\n                    this._openAccordions.delete(item);\r\n                    Log.debug(`[LazyLoader] Accord√©on \"${item.type}\" marqu√© comme ferm√©`);\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Invalide le cache pour un th√®me sp√©cifique\r\n         * @param {string} themeId - ID du th√®me\r\n         */\r\n        invalidateCacheForTheme(themeId) {\r\n            delete this._cache[`categories_${themeId}`];\r\n            delete this._cache[`tags_${themeId}`];\r\n            Log.info(`[LazyLoader] Cache invalid√© pour th√®me: ${themeId}`);\r\n        },\r\n\r\n        /**\r\n         * Invalide tout le cache (changement de th√®me)\r\n         */\r\n        clearCache() {\r\n            this._cache = {};\r\n            Log.info(\"[LazyLoader] Cache compl√®tement vid√©\");\r\n        },\r\n\r\n        /**\r\n         * Rafra√Æchit les accord√©ons ouverts\r\n         * Utilis√© apr√®s un changement de th√®me ou toggle de couche\r\n         */\r\n        refreshOpenAccordions() {\r\n            if (this._openAccordions.size === 0) {\r\n                Log.debug(\"[LazyLoader] Aucun accord√©on ouvert √† rafra√Æchir\");\r\n                return;\r\n            }\r\n\r\n            Log.info(`[LazyLoader] Rafra√Æchissement de ${this._openAccordions.size} accord√©on(s) ouvert(s)`);\r\n            const currentTheme = GeoLeaf.ThemeSelector?.getCurrentTheme();\r\n\r\n            if (!currentTheme) {\r\n                Log.warn(\"[LazyLoader] Impossible de r√©cup√©rer le th√®me actif\");\r\n                return;\r\n            }\r\n\r\n            this._openAccordions.forEach(({ type, element }) => {\r\n                // Sauvegarder l'√©tat des checkboxes / tags s√©lectionn√©s\r\n                const savedStates = this._saveCheckboxStates(element);\r\n\r\n                // Cibler la zone [data-lazy-type] qui re√ßoit le innerHTML\r\n                const contentArea = element.querySelector('[data-lazy-type]');\r\n\r\n                if (!contentArea) {\r\n                    Log.warn(\"[LazyLoader] Zone [data-lazy-type] introuvable dans l'accord√©on\");\r\n                    return;\r\n                }\r\n\r\n                // R√©initialiser le flag lazyLoaded pour permettre un futur rechargement\r\n                element.dataset.lazyLoaded = \"false\";\r\n\r\n                // Appeler la fonction de render appropri√©e\r\n                if (type === 'categories') {\r\n                    this._rerenderCategories(contentArea, currentTheme, savedStates);\r\n                } else if (type === 'tags') {\r\n                    this._rerenderTags(contentArea, currentTheme, savedStates);\r\n                }\r\n\r\n                // Re-marquer comme charg√© apr√®s le re-render\r\n                element.dataset.lazyLoaded = \"true\";\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Re-render les cat√©gories dans un accord√©on\r\n         * @private\r\n         */\r\n        _rerenderCategories(contentArea, themeId, savedStates) {\r\n            const result = this.loadCategories(themeId);\r\n\r\n            // Appeler la fonction globale de construction d'arbre\r\n            if (typeof window._buildCategoryTreeContent === \"function\") {\r\n                const content = window._buildCategoryTreeContent(result);\r\n                contentArea.innerHTML = content;\r\n\r\n                // Attacher les event listeners\r\n                if (typeof window._attachCategoryTreeListeners === \"function\") {\r\n                    window._attachCategoryTreeListeners(contentArea);\r\n                }\r\n\r\n                // Restaurer les √©tats des checkboxes\r\n                this._restoreCheckboxStates(contentArea, savedStates);\r\n            } else {\r\n                Log.warn(\"[LazyLoader] _buildCategoryTreeContent introuvable\");\r\n                contentArea.innerHTML = '<div class=\"gl-empty-state\">Erreur de chargement</div>';\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Re-render les tags dans un accord√©on\r\n         * @private\r\n         */\r\n        _rerenderTags(contentArea, themeId, savedStates) {\r\n            const tags = this.loadTags(themeId);\r\n\r\n            // Appeler la fonction globale de construction de liste\r\n            if (typeof window._buildTagsListContent === \"function\") {\r\n                const content = window._buildTagsListContent(tags);\r\n                contentArea.innerHTML = content;\r\n\r\n                // Attacher les event listeners\r\n                if (typeof window._attachTagsListeners === \"function\") {\r\n                    window._attachTagsListeners(contentArea);\r\n                }\r\n\r\n                // Restaurer les √©tats des checkboxes\r\n                this._restoreCheckboxStates(contentArea, savedStates);\r\n            } else {\r\n                Log.warn(\"[LazyLoader] _buildTagsListContent introuvable\");\r\n                contentArea.innerHTML = '<div class=\"gl-empty-state\">Erreur de chargement</div>';\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sauvegarde l'√©tat des checkboxes avant re-render\r\n         * @private\r\n         */\r\n        _saveCheckboxStates(element) {\r\n            const states = {};\r\n            const checkboxes = element.querySelectorAll('input[type=\"checkbox\"]');\r\n\r\n            checkboxes.forEach(cb => {\r\n                const categoryId = cb.dataset.glFilterCategoryId;\r\n                const subcategoryId = cb.dataset.glFilterSubcategoryId;\r\n                const value = cb.value;\r\n\r\n                let key;\r\n                if (subcategoryId) {\r\n                    key = `${categoryId}:${subcategoryId}`;\r\n                } else if (categoryId) {\r\n                    key = categoryId;\r\n                } else if (value) {\r\n                    key = value;\r\n                }\r\n\r\n                if (key) {\r\n                    states[key] = cb.checked;\r\n                }\r\n            });\r\n\r\n            return states;\r\n        },\r\n\r\n        /**\r\n         * Restaure l'√©tat des checkboxes apr√®s re-render\r\n         * @private\r\n         */\r\n        _restoreCheckboxStates(element, savedStates) {\r\n            if (!savedStates || Object.keys(savedStates).length === 0) return;\r\n\r\n            const checkboxes = element.querySelectorAll('input[type=\"checkbox\"]');\r\n            let restoredCount = 0;\r\n\r\n            checkboxes.forEach(cb => {\r\n                const categoryId = cb.dataset.glFilterCategoryId;\r\n                const subcategoryId = cb.dataset.glFilterSubcategoryId;\r\n                const value = cb.value;\r\n\r\n                let key;\r\n                if (subcategoryId) {\r\n                    key = `${categoryId}:${subcategoryId}`;\r\n                } else if (categoryId) {\r\n                    key = categoryId;\r\n                } else if (value) {\r\n                    key = value;\r\n                }\r\n\r\n                if (key && savedStates[key] !== undefined) {\r\n                    cb.checked = savedStates[key];\r\n                    restoredCount++;\r\n                }\r\n            });\r\n\r\n            Log.debug(`[LazyLoader] ${restoredCount} √©tats de checkbox restaur√©s`);\r\n        }\r\n    };\r\n\r\n    // √âcouter les √©v√©nements de changement de th√®me\r\n    document.addEventListener('geoleaf:theme:applied', () => {\r\n        Log.info(\"[LazyLoader] √âv√©nement theme:applied d√©tect√© ‚Äî invalidation compl√®te\");\r\n\r\n        // 1. Vider le cache de donn√©es (scan cat√©gories/tags)\r\n        GeoLeaf._UIFilterPanelLazyLoader.clearCache();\r\n\r\n        // 2. R√©initialiser TOUS les flags data-lazy-loaded sur les accord√©ons\r\n        //    (ferm√©s ou ouverts) pour forcer un rechargement au prochain expand\r\n        const allAccordions = document.querySelectorAll('.gl-filter-panel__group--accordion[data-lazy-loaded]');\r\n        allAccordions.forEach(acc => {\r\n            acc.dataset.lazyLoaded = \"false\";\r\n        });\r\n        Log.debug(`[LazyLoader] ${allAccordions.length} flag(s) data-lazy-loaded r√©initialis√©(s)`);\r\n\r\n        // 3. Rafra√Æchir les accord√©ons actuellement ouverts (re-render imm√©diat)\r\n        GeoLeaf._UIFilterPanelLazyLoader.refreshOpenAccordions();\r\n    });\r\n\r\n    // √âcouter l'√©v√©nement de changement de visibilit√© de couche\r\n    document.addEventListener('geoleaf:geojson:visibility-changed', (e) => {\r\n        const detail = e.detail || {};\r\n        Log.info(\"[LazyLoader] Visibilit√© couche chang√©e:\", detail.layerId, detail.visible);\r\n\r\n        // Invalider le cache du th√®me actif\r\n        const currentTheme = GeoLeaf.ThemeSelector?.getCurrentTheme();\r\n        if (currentTheme) {\r\n            GeoLeaf._UIFilterPanelLazyLoader.invalidateCacheForTheme(currentTheme);\r\n            // Rafra√Æchir les accord√©ons ouverts\r\n            GeoLeaf._UIFilterPanelLazyLoader.refreshOpenAccordions();\r\n        }\r\n    });\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf UI Filter Panel - Applier\r\n * Application des filtres aux couches POI, Routes, GeoJSON\r\n *\r\n * @module ui/filter-panel/applier\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // D√©pendances lazy\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n    const getShared = () => GeoLeaf._UIFilterPanelShared;\r\n    const getStateReader = () => GeoLeaf._UIFilterPanelStateReader;\r\n\r\n    GeoLeaf._UIFilterPanelApplier = GeoLeaf._UIFilterPanelApplier || {};\r\n\r\n    // Cache et optimisations pour les performances\r\n    let _cachedFilterState = null;\r\n    let _lastApplyTime = 0;\r\n    const APPLY_DEBOUNCE_DELAY = 300; // 300ms\r\n\r\n    // Fonction debounce pour l'application des filtres\r\n    let _applyFiltersTimeout = null;\r\n    let _lastSkipRoutes = false; // Store skipRoutes flag for debounced call\r\n    const _debouncedApplyFilters = function(panelEl, skipRoutes) {\r\n        if (_applyFiltersTimeout) {\r\n            clearTimeout(_applyFiltersTimeout);\r\n        }\r\n        _lastSkipRoutes = skipRoutes || false;\r\n        _applyFiltersTimeout = setTimeout(() => {\r\n            GeoLeaf._UIFilterPanelApplier._applyFiltersImmediate(panelEl, _lastSkipRoutes);\r\n        }, APPLY_DEBOUNCE_DELAY);\r\n    };\r\n\r\n    /**\r\n     * MEMORY LEAK FIX (Phase 2): Cleanup timeout on destroy\r\n     */\r\n    GeoLeaf._UIFilterPanelApplier.destroy = function() {\r\n        if (_applyFiltersTimeout) {\r\n            clearTimeout(_applyFiltersTimeout);\r\n            _applyFiltersTimeout = null;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Rafra√Æchit la visibilit√© des POI selon la liste filtr√©e.\r\n     * IMPORTANT: Cette fonction filtre UNIQUEMENT les POI du syst√®me POI traditionnel.\r\n     * Les couches GeoJSON (point, line, polygon) sont g√©r√©es par filterGeoJSONLayers().\r\n     * On n'appelle PAS filterFeatures() ici pour √©viter de masquer les couches GeoJSON.\r\n     *\r\n     * @param {Array} filteredPois - Liste des POI √† afficher\r\n     */\r\n    GeoLeaf._UIFilterPanelApplier.refreshPoiLayer = function(filteredPois) {\r\n        const Log = getLog();\r\n\r\n        // V√©rifier si le syst√®me POI est activ√© dans la config\r\n        const Config = GeoLeaf.Config;\r\n        const poiConfig = (Config && typeof Config.get === 'function') ? Config.get('poiConfig') : null;\r\n        if (poiConfig && poiConfig.enabled === false) {\r\n            Log.debug(\"[GeoLeaf.UI.FilterPanel] Syst√®me POI d√©sactiv√©, pas de rafra√Æchissement de la couche POI.\");\r\n            return;\r\n        }\r\n\r\n        // Fallback: utiliser l'ancien syst√®me POI (si GeoJSON n'est pas disponible)\r\n        if (!GeoLeaf.POI) {\r\n            Log.warn(\"[GeoLeaf.UI.FilterPanel] GeoLeaf.POI indisponible, pas de rafra√Æchissement de la couche POI.\");\r\n            return;\r\n        }\r\n\r\n        if (typeof GeoLeaf.POI._clearAllForTests === \"function\") {\r\n            GeoLeaf.POI._clearAllForTests();\r\n        } else {\r\n            Log.warn(\"[GeoLeaf.UI.FilterPanel] GeoLeaf.POI._clearAllForTests indisponible.\");\r\n        }\r\n\r\n        filteredPois.forEach(function(p) {\r\n            try {\r\n                GeoLeaf.POI.addPoi(p);\r\n            } catch (err) {\r\n                Log.warn(\"[GeoLeaf.UI.FilterPanel] Impossible d'ajouter un POI filtr√©:\", p, err);\r\n            }\r\n        });\r\n\r\n        Log.debug(`[GeoLeaf.UI.FilterPanel] refreshPoiLayer: ${filteredPois.length} POI visibles`);\r\n    };\r\n\r\n    /**\r\n     * Applique les filtres aux couches GeoJSON (polygones et polylignes)\r\n     * @param {Object} state - √âtat des filtres\r\n     */\r\n    GeoLeaf._UIFilterPanelApplier.filterGeoJSONLayers = function(state) {\r\n        const Log = getLog();\r\n        const Shared = getShared();\r\n\r\n        if (!GeoLeaf.GeoJSON || typeof GeoLeaf.GeoJSON.filterFeatures !== 'function') {\r\n            return;\r\n        }\r\n\r\n        const hasCats = state.categoriesTree && state.categoriesTree.length > 0;\r\n        const hasSubs = state.subCategoriesTree && state.subCategoriesTree.length > 0;\r\n        const hasTags = state.hasTags && state.selectedTags && state.selectedTags.length > 0;\r\n        const selectedTags = state.selectedTags || [];\r\n        const hasProximity = state.proximity && state.proximity.active;\r\n        const hasSearchText = state.hasSearchText && state.searchText;\r\n        const searchText = state.searchText || '';\r\n        const getDistance = GeoLeaf.Utils && typeof GeoLeaf.Utils.getDistance === 'function' ? GeoLeaf.Utils.getDistance : null;\r\n\r\n        // Helper pour obtenir les champs de recherche depuis la config de la couche\r\n        const getLayerSearchFields = (layerId) => {\r\n            try {\r\n                const layerData = GeoLeaf.GeoJSON.getLayerData(layerId);\r\n                if (layerData && layerData.config) {\r\n                    // Priorit√© 1: search.indexingFields (format standard des configs de couches)\r\n                    if (layerData.config.search && Array.isArray(layerData.config.search.indexingFields)) {\r\n                        return layerData.config.search.indexingFields;\r\n                    }\r\n                    // Priorit√© 2: indexingFields √† la racine (legacy)\r\n                    if (Array.isArray(layerData.config.indexingFields)) {\r\n                        return layerData.config.indexingFields;\r\n                    }\r\n                    // Priorit√© 3: searchFields (legacy)\r\n                    if (Array.isArray(layerData.config.searchFields)) {\r\n                        return layerData.config.searchFields;\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                Log.warn(\"[GeoLeaf.UI.FilterPanel] Erreur r√©cup√©ration champs de recherche:\", err);\r\n            }\r\n\r\n            // Fallback: champs par d√©faut du profil\r\n            try {\r\n                const activeProfile = GeoLeaf.Config && GeoLeaf.Config._activeProfileData;\r\n                if (activeProfile && activeProfile.search && activeProfile.search.filters) {\r\n                    const searchFilter = activeProfile.search.filters.find(f => f.type === 'search');\r\n                    if (searchFilter && Array.isArray(searchFilter.searchFields)) {\r\n                        return searchFilter.searchFields;\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                Log.warn(\"[GeoLeaf.UI.FilterPanel] Erreur r√©cup√©ration champs par d√©faut:\", err);\r\n            }\r\n\r\n            // Fallback ultime\r\n            return ['title', 'description', 'properties.title', 'properties.name', 'properties.description', 'attributes.nom'];\r\n        };\r\n\r\n        // Helper pour tester la recherche textuelle sur une feature\r\n        const matchesSearchText = (feature, layerId) => {\r\n            if (!hasSearchText) return true;\r\n\r\n            const searchFields = getLayerSearchFields(layerId);\r\n            const searchLower = searchText.toLowerCase();\r\n\r\n            for (let i = 0; i < searchFields.length; i++) {\r\n                let fieldPath = searchFields[i];\r\n                let value = null;\r\n\r\n                // Normaliser le chemin: si commence par \"properties.\", on le supprime\r\n                // puisque on va chercher directement dans feature.properties\r\n                let propertiesFieldPath = fieldPath;\r\n                if (fieldPath.startsWith('properties.')) {\r\n                    propertiesFieldPath = fieldPath.substring('properties.'.length);\r\n                }\r\n\r\n                // Tester d'abord dans properties\r\n                if (feature.properties) {\r\n                    value = Shared.getNestedValue(feature.properties, propertiesFieldPath);\r\n                }\r\n\r\n                // Si pas trouv√©, tester √† la racine avec le chemin original\r\n                if (!value) {\r\n                    value = Shared.getNestedValue(feature, fieldPath);\r\n                }\r\n\r\n                if (value && String(value).toLowerCase().includes(searchLower)) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        };\r\n\r\n        // Fonction de filtre commune pour polygones et lignes\r\n        const createFilterFunction = (geometryType) => (feature, layerId) => {\r\n            const props = feature.properties || {};\r\n\r\n            // Filtrage par recherche textuelle\r\n            if (hasSearchText && !matchesSearchText(feature, layerId)) {\r\n                return false;\r\n            }\r\n\r\n            // Filtrage par cat√©gorie/sous-cat√©gorie\r\n            if (hasCats || hasSubs) {\r\n                const catId = props.categoryId || props.category || null;\r\n                const subId = props.subcategoryId || props.subCategoryId || props.subcategory || props.sub_category || null;\r\n\r\n                // Si pas de cat√©gorie sur cette feature, masquer quand filtre actif\r\n                if (!catId && !subId) return false;\r\n\r\n                // Si des sous-cat√©gories sont s√©lectionn√©es\r\n                if (hasSubs) {\r\n                    if (!subId || !state.subCategoriesTree.includes(String(subId))) {\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                // Si seulement des cat√©gories (pas de sous-cat)\r\n                if (hasCats && !hasSubs) {\r\n                    if (!catId || !state.categoriesTree.includes(String(catId))) {\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Filtrage par tags (au moins UN des tags s√©lectionn√©s doit √™tre pr√©sent)\r\n            if (hasTags) {\r\n                let featureTags = props.tags || [];\r\n                if (!Array.isArray(featureTags)) {\r\n                    if (typeof featureTags === 'string') {\r\n                        featureTags = featureTags.split(/[,;]+/);\r\n                    } else {\r\n                        featureTags = [];\r\n                    }\r\n                }\r\n                featureTags = featureTags.map(t => String(t).trim()).filter(Boolean);\r\n\r\n                const hasAtLeastOneTag = selectedTags.some(tag => featureTags.includes(tag));\r\n                if (!hasAtLeastOneTag) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            // Filtrage par proximit√©\r\n            if (hasProximity && state.proximity.center && getDistance) {\r\n                const point = Shared.getRepresentativePoint(feature.geometry);\r\n                if (point) {\r\n                    const distance = getDistance(\r\n                        state.proximity.center.lat,\r\n                        state.proximity.center.lng,\r\n                        point.lat,\r\n                        point.lng\r\n                    );\r\n                    if (distance > state.proximity.radius) {\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return true;\r\n        };\r\n\r\n        // Filtrer les polygones (zones)\r\n        GeoLeaf.GeoJSON.filterFeatures(createFilterFunction('polygon'), { geometryType: 'polygon' });\r\n\r\n        // Filtrer les polylignes (routes GeoJSON)\r\n        GeoLeaf.GeoJSON.filterFeatures(createFilterFunction('line'), { geometryType: 'line' });\r\n\r\n        // Filtrer les points (POI GeoJSON - MultiPoint, Point, etc.)\r\n        GeoLeaf.GeoJSON.filterFeatures(createFilterFunction('point'), { geometryType: 'point' });\r\n    };\r\n\r\n    /**\r\n     * Applique tous les filtres actifs avec debounce\r\n     * @param {HTMLElement} panelEl - √âl√©ment du panneau de filtres\r\n     */\r\n    GeoLeaf._UIFilterPanelApplier.applyFiltersNow = function(panelEl, skipRoutes) {\r\n        _debouncedApplyFilters(panelEl, skipRoutes);\r\n    };\r\n\r\n    /**\r\n     * Applique tous les filtres actifs imm√©diatement (interne, avec protection contre les appels r√©p√©t√©s)\r\n     * @private\r\n     * @param {HTMLElement} panelEl - √âl√©ment du panneau de filtres\r\n     * @param {boolean} skipRoutes - Si true, skip le traitement des routes (preserve leurs styles)\r\n     */\r\n    GeoLeaf._UIFilterPanelApplier._applyFiltersImmediate = function(panelEl, skipRoutes) {\r\n        const Log = getLog();\r\n        const Shared = getShared();\r\n        const StateReader = getStateReader();\r\n\r\n        // √âviter les appels r√©p√©t√©s trop rapproch√©s\r\n        const now = Date.now();\r\n        if (now - _lastApplyTime < 100) return; // 100ms minimum entre les appels\r\n        _lastApplyTime = now;\r\n\r\n        const basePois = Shared.getBasePois();\r\n        const baseRoutes = Shared.getBaseRoutes();\r\n        const state = StateReader.readFiltersFromPanel(panelEl);\r\n\r\n        // Filtrage des couches GeoJSON (polygones, polylignes)\r\n        GeoLeaf._UIFilterPanelApplier.filterGeoJSONLayers(state);\r\n\r\n        if (!basePois.length && !baseRoutes.length) {\r\n            Log.info(\"[GeoLeaf.UI.FilterPanel] Aucun POI ni route source trouv√©.\");\r\n            return;\r\n        }\r\n\r\n        // G√©rer le filtrage et l'affichage des itin√©raires via GeoLeaf.Route\r\n        if (GeoLeaf.Route && typeof GeoLeaf.Route.isInitialized === 'function' && GeoLeaf.Route.isInitialized()) {\r\n            if (state.dataTypes.routes) {\r\n                // Si skipRoutes=true, on affiche juste les routes existantes sans les recharger\r\n                if (skipRoutes) {\r\n                    GeoLeaf.Route.show();\r\n                } else {\r\n                    // Filtrer les routes\r\n                    let filteredRoutes = baseRoutes;\r\n                    filteredRoutes = GeoLeaf.Filters && typeof GeoLeaf.Filters.filterRouteList === 'function'\r\n                        ? GeoLeaf.Filters.filterRouteList(baseRoutes, state)\r\n                        : baseRoutes;\r\n\r\n                    Log.info(\"[GeoLeaf.UI.FilterPanel] Filtres appliqu√©s sur les routes.\", {\r\n                        total: baseRoutes.length,\r\n                        result: filteredRoutes.length\r\n                    });\r\n\r\n                    // Utiliser filterVisibility() si disponible pour pr√©server les styles\r\n                    // Sinon, utiliser loadFromConfig() (comportement par d√©faut)\r\n                    if (typeof GeoLeaf.Route.filterVisibility === 'function') {\r\n                        GeoLeaf.Route.filterVisibility(filteredRoutes);\r\n                    } else if (typeof GeoLeaf.Route.loadFromConfig === 'function') {\r\n                        GeoLeaf.Route.loadFromConfig(filteredRoutes);\r\n                    }\r\n                    GeoLeaf.Route.show();\r\n                }\r\n            } else {\r\n                GeoLeaf.Route.hide();\r\n            }\r\n        }\r\n\r\n        // Filtrer les POI\r\n        const filtered = GeoLeaf._UIFilterPanelApplier.filterPoiList(basePois, state);\r\n\r\n        Log.info(\"[GeoLeaf.UI.FilterPanel] Filtres appliqu√©s sur les POI.\", {\r\n            total: basePois.length,\r\n            result: filtered.length,\r\n            filters: state\r\n        });\r\n\r\n        GeoLeaf._UIFilterPanelApplier.refreshPoiLayer(filtered);\r\n    };\r\n\r\n    /**\r\n     * Filtre une liste de POI selon les crit√®res fournis\r\n     * D√©l√®gue vers GeoLeaf.Filters.filterPoiList()\r\n     *\r\n     * @param {Array} basePois - Liste compl√®te des POI\r\n     * @param {Object} filterState - √âtat des filtres\r\n     * @returns {Array} POI filtr√©s\r\n     */\r\n    GeoLeaf._UIFilterPanelApplier.filterPoiList = function(basePois, filterState) {\r\n        if (GeoLeaf.Filters && typeof GeoLeaf.Filters.filterPoiList === 'function') {\r\n            return GeoLeaf.Filters.filterPoiList(basePois, filterState);\r\n        }\r\n\r\n        const Log = getLog();\r\n        Log.warn('[GeoLeaf.UI.FilterPanel] Module Filters non charg√©, retour liste compl√®te');\r\n        return basePois || [];\r\n    };\r\n\r\n    /**\r\n     * Filtre une liste de routes selon les crit√®res fournis\r\n     * D√©l√®gue vers GeoLeaf.Filters.filterRouteList()\r\n     *\r\n     * @param {Array} baseRoutes - Liste compl√®te des routes\r\n     * @param {Object} filterState - √âtat des filtres\r\n     * @returns {Array} Routes filtr√©es\r\n     */\r\n    GeoLeaf._UIFilterPanelApplier.filterRouteList = function(baseRoutes, filterState) {\r\n        if (GeoLeaf.Filters && typeof GeoLeaf.Filters.filterRouteList === 'function') {\r\n            return GeoLeaf.Filters.filterRouteList(baseRoutes, filterState);\r\n        }\r\n\r\n        const Log = getLog();\r\n        Log.warn('[GeoLeaf.UI.FilterPanel] Module Filters non charg√©, retour liste compl√®te');\r\n        return baseRoutes || [];\r\n    };\r\n\r\n    /**\r\n     * Applique les filtres initiaux au chargement\r\n     */\r\n    GeoLeaf._UIFilterPanelApplier.applyFiltersInitial = function() {\r\n        const Log = getLog();\r\n        const Shared = getShared();\r\n        const StateReader = getStateReader();\r\n\r\n        const panelEl = Shared.getFilterPanelElement();\r\n        if (!panelEl) {\r\n            Log.warn(\"[GeoLeaf.UI.FilterPanel] Panneau de filtres non trouv√©, impossible d'appliquer les filtres initiaux.\");\r\n            return;\r\n        }\r\n\r\n        Log.info(\"[GeoLeaf.UI.FilterPanel] Application des filtres initiaux...\");\r\n\r\n        const state = StateReader.readFiltersFromPanel(panelEl);\r\n        const basePois = Shared.getBasePois();\r\n        const baseRoutes = Shared.getBaseRoutes();\r\n\r\n        if (!basePois.length && !baseRoutes.length) {\r\n            Log.info(\"[GeoLeaf.UI.FilterPanel] Aucun POI ni route source trouv√©.\");\r\n            return;\r\n        }\r\n\r\n        // G√©rer les itin√©raires\r\n        if (GeoLeaf.Route && typeof GeoLeaf.Route.isInitialized === 'function' && GeoLeaf.Route.isInitialized()) {\r\n            if (state.dataTypes.routes) {\r\n                let filteredRoutes = GeoLeaf._UIFilterPanelApplier.filterRouteList(baseRoutes, state);\r\n                if (typeof GeoLeaf.Route.loadFromConfig === 'function') {\r\n                    GeoLeaf.Route.loadFromConfig(filteredRoutes);\r\n                }\r\n                GeoLeaf.Route.show();\r\n            } else {\r\n                GeoLeaf.Route.hide();\r\n            }\r\n        }\r\n\r\n        // Filtrer et charger les POI\r\n        const filtered = GeoLeaf._UIFilterPanelApplier.filterPoiList(basePois, state);\r\n        Log.info(\"[GeoLeaf.UI.FilterPanel] POI filtr√©s pour chargement initial.\", {\r\n            total: basePois.length,\r\n            result: filtered.length\r\n        });\r\n\r\n        GeoLeaf._UIFilterPanelApplier.refreshPoiLayer(filtered);\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf UI Filter Panel - Renderer\r\n * Construction du panneau HTML de filtres\r\n *\r\n * @module ui/filter-panel/renderer\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // Helper pour utiliser createElement unifi√©\r\n    const $create = (tag, props, ...children) => {\r\n        return GeoLeaf.Utils && GeoLeaf.Utils.createElement\r\n            ? GeoLeaf.Utils.createElement(tag, props, ...children)\r\n            : document.createElement(tag);\r\n    };\r\n\r\n    // D√©pendances lazy\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n    const getShared = () => GeoLeaf._UIFilterPanelShared;\r\n    const getStateReader = () => GeoLeaf._UIFilterPanelStateReader;\r\n    const getApplier = () => GeoLeaf._UIFilterPanelApplier;\r\n\r\n    GeoLeaf._UIFilterPanelRenderer = GeoLeaf._UIFilterPanelRenderer || {};\r\n    GeoLeaf._UIFilterPanelRenderer._eventCleanups = [];\r\n\r\n    /**\r\n     * Construit le panneau de filtres depuis la configuration du profil actif\r\n     * @param {Object} options - Options\r\n     * @param {HTMLElement} [options.container] - Conteneur cible\r\n     */\r\n    GeoLeaf._UIFilterPanelRenderer.buildFilterPanelFromActiveProfile = function(options) {\r\n        const Log = getLog();\r\n        const Shared = getShared();\r\n        const StateReader = getStateReader();\r\n        const Applier = getApplier();\r\n\r\n        if (Log) Log.debug(\"[FilterPanel] buildFilterPanelFromActiveProfile APPEL√â, options:\", options);\r\n\r\n        const profile = GeoLeaf.UI._getActiveProfileConfig();\r\n        if (Log) Log.debug(\"[FilterPanel] Profile r√©cup√©r√©:\", profile);\r\n\r\n        if (!profile) {\r\n            Log.warn(\"[GeoLeaf.UI.FilterPanel] Aucun profil actif trouv√©\");\r\n            return;\r\n        }\r\n\r\n        Log.info(\"[GeoLeaf.UI.FilterPanel] Profil actif:\", profile.id || \"unknown\");\r\n\r\n        // Support both profile.panels.search (old) and profile.search (new)\r\n        const searchPanel = (profile.panels && profile.panels.search) || profile.search;\r\n        if (Log) Log.debug(\"[FilterPanel] searchPanel:\", searchPanel);\r\n\r\n        if (!searchPanel) {\r\n            Log.warn(\"[GeoLeaf.UI.FilterPanel] Aucune configuration search/panels.search dans le profil\");\r\n            return;\r\n        }\r\n\r\n        const filters = searchPanel && Array.isArray(searchPanel.filters) ? searchPanel.filters : null;\r\n        if (Log) Log.debug(\"[FilterPanel] Filters:\", filters);\r\n\r\n        if (!filters || !filters.length) {\r\n            Log.warn(\"[GeoLeaf.UI.FilterPanel] Aucun filtre d√©fini dans profile.search.filters pour le profil actif. Filters:\", filters);\r\n            return;\r\n        }\r\n\r\n        Log.info(\"[GeoLeaf.UI.FilterPanel] Nombre de filtres trouv√©s:\", filters.length);\r\n\r\n        const container = (options && options.container) || Shared.getFilterPanelElement();\r\n        if (!container) {\r\n            Log.warn(\"[GeoLeaf.UI.FilterPanel] Conteneur de panneau introuvable\");\r\n            return;\r\n        }\r\n\r\n        // ---------------------------------------------------------\r\n        // Vider le conteneur existant\r\n        // ---------------------------------------------------------\r\n        while (container.firstChild) {\r\n            container.removeChild(container.firstChild);\r\n        }\r\n\r\n        container.classList.add(\"gl-filter-panel\");\r\n\r\n        // ---------------------------------------------------------\r\n        // Header\r\n        // ---------------------------------------------------------\r\n        const header = $create(\"div\", {\r\n            className: \"gl-filter-panel__header\"\r\n        });\r\n\r\n        const title = $create(\"h2\", {\r\n            className: \"gl-filter-panel__title\",\r\n            textContent: searchPanel.title || \"Filtres\"\r\n        });\r\n        header.appendChild(title);\r\n\r\n        // Bouton toggle avec fl√®che (comme le tableau)\r\n        const toggleBtn = $create(\"button\", {\r\n            type: \"button\",\r\n            className: \"gl-filter-panel__toggle-btn\",\r\n            attributes: {\r\n                \"data-gl-action\": \"filter-close\",\r\n                \"aria-label\": \"Fermer le panneau\"\r\n            }\r\n        });\r\n        const toggleIcon = $create(\"span\", {\r\n            className: \"gl-filter-panel__toggle-icon\",\r\n            textContent: \"‚óÄ\"\r\n        });\r\n        toggleBtn.appendChild(toggleIcon);\r\n        header.appendChild(toggleBtn);\r\n\r\n        container.appendChild(header);\r\n\r\n        // ---------------------------------------------------------\r\n        // Body : champs de filtre\r\n        // ---------------------------------------------------------\r\n        const body = $create(\"div\", {\r\n            className: \"gl-filter-panel__body\"\r\n        });\r\n\r\n        // Sprint 3.2: Use DocumentFragment for batch DOM operations\r\n        const bodyFragment = document.createDocumentFragment();\r\n\r\n        filters.forEach(function(filterDef) {\r\n            // Passer skipLabel=true pour les filtres avec accord√©on (categories et tags) et proximity (qui g√®re son propre label)\r\n            const skipLabel = (filterDef.id === 'categories' || filterDef.id === 'tags' || filterDef.type === 'proximity');\r\n            const groupEl = GeoLeaf.UI._buildFilterControl(filterDef, profile, skipLabel);\r\n\r\n            if (groupEl) {\r\n                // Wrapper avec accord√©on pour categories et tags\r\n                if (filterDef.id === 'categories' || filterDef.id === 'tags') {\r\n                    const accordionGroup = $create(\"div\", {\r\n                        className: \"gl-filter-panel__group--accordion\",\r\n                        attributes: { \"data-accordion-for\": filterDef.id }\r\n                    });\r\n\r\n                    const accordionHeader = $create(\"div\", {\r\n                        className: \"gl-filter-panel__accordion-header\"\r\n                    });\r\n\r\n                    const accordionTitle = $create(\"h3\", {\r\n                        className: \"gl-filter-panel__accordion-title\",\r\n                        textContent: filterDef.label || (filterDef.id === 'categories' ? 'Afficher les cat√©gories' : 'Afficher les tags')\r\n                    });\r\n\r\n                    const accordionArrow = $create(\"span\", {\r\n                        className: \"gl-filter-panel__accordion-arrow\",\r\n                        textContent: \"‚ñ∂\"\r\n                    });\r\n\r\n                    accordionHeader.appendChild(accordionTitle);\r\n                    accordionHeader.appendChild(accordionArrow);\r\n\r\n                    const accordionBody = $create(\"div\", {\r\n                        className: \"gl-filter-panel__accordion-body\"\r\n                    });\r\n\r\n                    // Wrapper n√©cessaire pour la technique CSS Grid\r\n                    const accordionWrapper = $create(\"div\");\r\n                    accordionWrapper.appendChild(groupEl);\r\n                    accordionBody.appendChild(accordionWrapper);\r\n\r\n                    const accordionClickHandler = function() {\r\n                        requestAnimationFrame(function() {\r\n                            accordionGroup.classList.toggle(\"is-expanded\");\r\n\r\n                            const isExpanded = accordionGroup.classList.contains(\"is-expanded\");\r\n\r\n                            // LAZY LOADING: Charger le contenu √† la demande si n√©cessaire\r\n                            if (isExpanded) {\r\n                                GeoLeaf._UIFilterPanelRenderer._loadAccordionContentIfNeeded(accordionGroup, filterDef);\r\n                            } else {\r\n                                // Marquer comme ferm√©\r\n                                const LazyLoader = GeoLeaf._UIFilterPanelLazyLoader;\r\n                                if (LazyLoader) {\r\n                                    LazyLoader.markAccordionClosed(accordionGroup);\r\n                                }\r\n                            }\r\n                        });\r\n                    };\r\n\r\n                    const events = GeoLeaf.Utils?.events;\r\n                    if (events) {\r\n                        GeoLeaf._UIFilterPanelRenderer._eventCleanups.push(\r\n                            events.on(\r\n                                accordionHeader,\r\n                                \"click\",\r\n                                accordionClickHandler,\r\n                                false,\r\n                                'FilterPanel.accordionToggle'\r\n                            )\r\n                        );\r\n                    } else {\r\n                        accordionHeader.addEventListener(\"click\", accordionClickHandler);\r\n                    }\r\n\r\n                    accordionGroup.appendChild(accordionHeader);\r\n                    accordionGroup.appendChild(accordionBody);\r\n                    bodyFragment.appendChild(accordionGroup);\r\n                } else {\r\n                    bodyFragment.appendChild(groupEl);\r\n                }\r\n            }\r\n        });\r\n\r\n        body.appendChild(bodyFragment);\r\n\r\n        container.appendChild(body);\r\n\r\n        // ---------------------------------------------------------\r\n        // Footer : boutons Appliquer / R√©initialiser\r\n        // ---------------------------------------------------------\r\n        const footer = $create(\"div\", {\r\n            className: \"gl-filter-panel__footer\"\r\n        });\r\n\r\n        const applyBtn = $create(\"button\", {\r\n            type: \"button\",\r\n            className: \"gl-btn gl-btn--accent gl-filter-panel__btn-apply\",\r\n            textContent: (searchPanel.actions && searchPanel.actions.applyLabel) || \"Appliquer\"\r\n        });\r\n        footer.appendChild(applyBtn);\r\n\r\n        const resetBtn = $create(\"button\", {\r\n            type: \"button\",\r\n            className: \"gl-btn gl-btn--subtle gl-filter-panel__btn-reset\",\r\n            textContent: (searchPanel.actions && searchPanel.actions.resetLabel) || \"R√©initialiser\"\r\n        });\r\n        footer.appendChild(resetBtn);\r\n\r\n        container.appendChild(footer);\r\n\r\n        // ---------------------------------------------------------\r\n        // Wiring √©v√®nements (fermer / reset / appliquer)\r\n        // ---------------------------------------------------------\r\n        if (!container._glFilterHandlersBound) {\r\n            // D√©clarer events une seule fois pour tout le bloc\r\n            const events = GeoLeaf.Utils?.events;\r\n\r\n            const containerClickHandler = function(evt) {\r\n                const target = evt.target;\r\n\r\n                // Fermer le panneau (utilise closest pour g√©rer les clics sur les enfants du bouton)\r\n                if (target.closest(\"[data-gl-action='filter-close']\")) {\r\n                    evt.preventDefault();\r\n                    GeoLeaf._UIFilterPanelRenderer.toggleFilterPanelVisibility(false);\r\n                    return;\r\n                }\r\n\r\n                // R√©initialiser les filtres + r√©afficher tous les POI\r\n                if (target.classList.contains(\"gl-filter-panel__btn-reset\")) {\r\n                    evt.preventDefault();\r\n                    StateReader.resetControls(container);\r\n                    Applier.applyFiltersNow(container, true); // skipRoutes=true to preserve route styling\r\n                    return;\r\n                }\r\n\r\n                // Appliquer les filtres\r\n                if (target.classList.contains(\"gl-filter-panel__btn-apply\")) {\r\n                    evt.preventDefault();\r\n                    Applier.applyFiltersNow(container);\r\n                    return;\r\n                }\r\n            };\r\n\r\n            if (events) {\r\n                GeoLeaf._UIFilterPanelRenderer._eventCleanups.push(\r\n                    events.on(\r\n                        container,\r\n                        \"click\",\r\n                        containerClickHandler,\r\n                        false,\r\n                        'FilterPanel.containerClick'\r\n                    )\r\n                );\r\n            } else {\r\n                container.addEventListener(\"click\", containerClickHandler);\r\n            }\r\n\r\n            // Gestionnaire pour la touche Entr√©e dans l'input de recherche textuelle\r\n            const containerKeydownHandler = function(evt) {\r\n                if (evt.key === \"Enter\" || evt.keyCode === 13) {\r\n                    const target = evt.target;\r\n                    const searchInput = target.closest(\"[data-gl-filter-id='searchText'] input[type='text']\");\r\n                    if (searchInput) {\r\n                        evt.preventDefault();\r\n                        Applier.applyFiltersNow(container);\r\n                        return;\r\n                    }\r\n                }\r\n            };\r\n\r\n            if (events) {\r\n                GeoLeaf._UIFilterPanelRenderer._eventCleanups.push(\r\n                    events.on(\r\n                        container,\r\n                        \"keydown\",\r\n                        containerKeydownHandler,\r\n                        false,\r\n                        'FilterPanel.enterKey'\r\n                    )\r\n                );\r\n            } else {\r\n                container.addEventListener(\"keydown\", containerKeydownHandler);\r\n            }\r\n\r\n            container._glFilterHandlersBound = true;\r\n        }\r\n\r\n        // Le panneau doit √™tre masqu√© par d√©faut au d√©marrage\r\n        // Il ne s'affichera que lorsque l'utilisateur cliquera sur le bouton toggle\r\n        container.classList.remove(\"is-open\");\r\n    };\r\n\r\n    /**\r\n     * Bascule la visibilit√© du panneau de filtres.\r\n     * @param {boolean} [forceState] - Force l'√©tat (true = ouvert, false = ferm√©)\r\n     */\r\n    GeoLeaf._UIFilterPanelRenderer.toggleFilterPanelVisibility = function(forceState) {\r\n        const Shared = getShared();\r\n        const container = Shared.getFilterPanelElement();\r\n        if (!container) return;\r\n\r\n        const isOpen = container.classList.contains(\"is-open\");\r\n        let nextState;\r\n\r\n        if (typeof forceState === \"boolean\") {\r\n            nextState = forceState;\r\n        } else {\r\n            nextState = !isOpen;\r\n        }\r\n\r\n        if (nextState) {\r\n            container.classList.add(\"is-open\");\r\n        } else {\r\n            container.classList.remove(\"is-open\");\r\n        }\r\n\r\n        // Mettre √† jour l'ic√¥ne du bouton toggle externe\r\n        const toggleBtn = document.getElementById(\"gl-filter-toggle\");\r\n        if (toggleBtn) {\r\n            const icon = toggleBtn.querySelector(\".gl-filter-toggle__icon\");\r\n            if (icon) {\r\n                if (nextState) {\r\n                    // Panneau ouvert : fl√®che vers la gauche (pour fermer)\r\n                    // SAFE: SVG statique hardcod√©\r\n                    GeoLeaf.DOMSecurity.clearElementFast(icon);\r\n                    const svg = GeoLeaf.DOMSecurity.createSVGIcon(16, 16, 'M15 18l-6-6 6-6', {\r\n                        stroke: 'currentColor',\r\n                        strokeWidth: '6',\r\n                        fill: 'none'\r\n                    });\r\n                    icon.appendChild(svg);\r\n                    toggleBtn.setAttribute(\"aria-label\", \"Fermer le panneau de filtres\");\r\n                } else {\r\n                    // Panneau ferm√© : fl√®che vers la droite (pour ouvrir)\r\n                    // SAFE: SVG statique hardcod√©\r\n                    GeoLeaf.DOMSecurity.clearElementFast(icon);\r\n                    const svg = GeoLeaf.DOMSecurity.createSVGIcon(16, 16, 'M9 6l6 6-6 6', {\r\n                        stroke: 'currentColor',\r\n                        strokeWidth: '6',\r\n                        fill: 'none'\r\n                    });\r\n                    icon.appendChild(svg);\r\n                    toggleBtn.setAttribute(\"aria-label\", \"Ouvrir le panneau de filtres\");\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Initialise le bouton toggle du panneau de filtres\r\n     */\r\n    GeoLeaf._UIFilterPanelRenderer.initFilterToggle = function() {\r\n        const Log = getLog();\r\n        const Shared = getShared();\r\n\r\n        const toggleBtn = document.getElementById(\"gl-filter-toggle\");\r\n        const panel = Shared.getFilterPanelElement();\r\n\r\n        if (!toggleBtn || !panel) {\r\n            Log.info(\"[GeoLeaf.UI.FilterPanel] Bouton toggle ou panneau filtres introuvable\");\r\n            return;\r\n        }\r\n\r\n        const toggleClickHandler = function() {\r\n            const isOpen = panel.classList.contains(\"is-open\");\r\n            const icon = toggleBtn.querySelector(\".gl-filter-toggle__icon\");\r\n\r\n            if (isOpen) {\r\n                panel.classList.remove(\"is-open\");\r\n                if (icon) {\r\n                    // SAFE: SVG statique hardcod√©\r\n                    GeoLeaf.DOMSecurity.clearElementFast(icon);\r\n                    const svg = GeoLeaf.DOMSecurity.createSVGIcon(16, 16, 'M9 6l6 6-6 6', {\r\n                        stroke: 'currentColor',\r\n                        strokeWidth: '6',\r\n                        fill: 'none'\r\n                    });\r\n                    icon.appendChild(svg);\r\n                }\r\n                toggleBtn.setAttribute(\"aria-label\", \"Ouvrir le panneau de filtres\");\r\n            } else {\r\n                panel.classList.add(\"is-open\");\r\n                if (icon) {\r\n                    // SAFE: SVG statique hardcod√©\r\n                    GeoLeaf.DOMSecurity.clearElementFast(icon);\r\n                    const svg = GeoLeaf.DOMSecurity.createSVGIcon(16, 16, 'M15 18l-6-6 6-6', {\r\n                        stroke: 'currentColor',\r\n                        strokeWidth: '6',\r\n                        fill: 'none'\r\n                    });\r\n                    icon.appendChild(svg);\r\n                }\r\n                toggleBtn.setAttribute(\"aria-label\", \"Fermer le panneau de filtres\");\r\n            }\r\n        };\r\n\r\n        const events = GeoLeaf.Utils?.events;\r\n        if (events) {\r\n            GeoLeaf._UIFilterPanelRenderer._eventCleanups.push(\r\n                events.on(\r\n                    toggleBtn,\r\n                    \"click\",\r\n                    toggleClickHandler,\r\n                    false,\r\n                    'FilterPanel.toggleButton'\r\n                )\r\n            );\r\n        } else {\r\n            toggleBtn.addEventListener(\"click\", toggleClickHandler);\r\n        }\r\n\r\n        Log.info(\"[GeoLeaf.UI.FilterPanel] Bouton toggle filtres initialis√©\");\r\n    };\r\n\r\n    /**\r\n     * Rafra√Æchit les badges de tags dans le panneau de filtres.\r\n     * Doit √™tre appel√© APR√àS que les POI ont √©t√© charg√©s.\r\n     */\r\n    GeoLeaf._UIFilterPanelRenderer.refreshFilterTags = function() {\r\n        const Log = getLog();\r\n        const Shared = getShared();\r\n\r\n        const container = Shared.getFilterPanelElement();\r\n        if (!container) {\r\n            Log.warn(\"[GeoLeaf.UI.FilterPanel.refreshFilterTags] Panneau de filtres non trouv√©\");\r\n            return;\r\n        }\r\n\r\n        // R√©cup√©rer POI et routes\r\n        const basePois = Shared.getBasePois();\r\n        const baseRoutes = Shared.getBaseRoutes();\r\n        const allItems = basePois.concat(baseRoutes);\r\n\r\n        Log.debug(\"[GeoLeaf.UI.FilterPanel.refreshFilterTags] Items:\", basePois.length, \"POI,\", baseRoutes.length, \"routes\");\r\n\r\n        // Collecter tous les tags\r\n        const allTags = Shared.collectAllTags(allItems);\r\n\r\n        // Peupler les badges\r\n        GeoLeaf._UIFilterPanelRenderer.populateTagsBadges(container, allTags);\r\n    };\r\n\r\n    /**\r\n     * Peuple le conteneur de badges avec les tags fournis\r\n     * @param {HTMLElement} panelEl - √âl√©ment du panneau de filtres\r\n     * @param {Array} allTags - Liste des tags uniques\r\n     */\r\n    GeoLeaf._UIFilterPanelRenderer.populateTagsBadges = function(panelEl, allTags) {\r\n        const Log = getLog();\r\n        const wrapper = panelEl.querySelector(\"[data-gl-filter-id='tags']\");\r\n        if (!wrapper) {\r\n            Log.debug(\"[GeoLeaf.UI.FilterPanel] Wrapper tags non trouv√© - probablement pas utilis√© dans ce profil\");\r\n            return;\r\n        }\r\n\r\n        const tagsContainer = wrapper.querySelector(\".gl-filter-panel__tags-container\");\r\n        if (!tagsContainer) {\r\n            Log.warn(\"[GeoLeaf.UI.FilterPanel] Container tags non trouv√©\");\r\n            return;\r\n        }\r\n\r\n        // Trouver l'accord√©on parent par l'attribut data-accordion-for\r\n        const accordionGroup = panelEl.querySelector(\"[data-accordion-for='tags']\");\r\n        Log.debug(\"[GeoLeaf.UI.FilterPanel] Recherche accord√©on avec [data-accordion-for='tags']\");\r\n        Log.debug(\"[GeoLeaf.UI.FilterPanel] Accord√©on trouv√©:\", accordionGroup);\r\n\r\n        // Vider le container\r\n        while (tagsContainer.firstChild) {\r\n            tagsContainer.removeChild(tagsContainer.firstChild);\r\n        }\r\n\r\n        // Si pas de tags, cacher compl√®tement l'accord√©on parent\r\n        if (!allTags.length) {\r\n            Log.debug(\"[GeoLeaf.UI.FilterPanel] Pas de tags (count:\", allTags.length, \")\");\r\n            if (accordionGroup) {\r\n                accordionGroup.style.display = \"none\";\r\n                Log.info(\"[GeoLeaf.UI.FilterPanel] Accord√©on tags CACH√â (display: none)\");\r\n            } else {\r\n                Log.warn(\"[GeoLeaf.UI.FilterPanel] Accord√©on tags non trouv√© pour le cacher\");\r\n            }\r\n            return;\r\n        }\r\n\r\n        // S'il y a des tags, s'assurer que l'accord√©on est visible\r\n        Log.debug(\"[GeoLeaf.UI.FilterPanel] Tags d√©tect√©s (count:\", allTags.length, \")\");\r\n        if (accordionGroup) {\r\n            accordionGroup.style.display = \"\";\r\n            Log.info(\"[GeoLeaf.UI.FilterPanel] Accord√©on tags AFFICH√â\");\r\n        }\r\n\r\n        // Cr√©er les badges\r\n        // Sprint 3.2: Use DocumentFragment for batch DOM operations\r\n        const tagsFragment = document.createDocumentFragment();\r\n\r\n        allTags.forEach(function(tag) {\r\n            const badgeClickHandler = function() {\r\n                this.classList.toggle(\"is-selected\");\r\n            };\r\n\r\n            const badge = $create(\"span\", {\r\n                className: \"gl-filter-panel__tag-badge\",\r\n                textContent: tag,\r\n                attributes: { \"data-tag-value\": tag },\r\n                onClick: badgeClickHandler\r\n            });\r\n\r\n            const events = GeoLeaf.Utils?.events;\r\n            if (events) {\r\n                GeoLeaf._UIFilterPanelRenderer._eventCleanups.push(\r\n                    events.on(\r\n                        badge,\r\n                        \"click\",\r\n                        badgeClickHandler,\r\n                        false,\r\n                        'FilterPanel.tagBadge'\r\n                    )\r\n                );\r\n            } else {\r\n                badge.addEventListener(\"click\", badgeClickHandler);\r\n            }\r\n\r\n            tagsFragment.appendChild(badge);\r\n        });\r\n\r\n        tagsContainer.appendChild(tagsFragment);\r\n    };\r\n\r\n    /**\r\n     * Cleanup method for event listeners\r\n     * Call this when destroying the filter panel\r\n     * MEMORY LEAK FIX (Phase 2): Also cleanup timeouts in applier\r\n     */\r\n    GeoLeaf._UIFilterPanelRenderer.destroy = function() {\r\n        const Log = getLog();\r\n        if (Log) Log.debug(\"[FilterPanel] Cleaning up event listeners\");\r\n\r\n        if (GeoLeaf._UIFilterPanelRenderer._eventCleanups) {\r\n            GeoLeaf._UIFilterPanelRenderer._eventCleanups.forEach(cleanup => {\r\n                if (typeof cleanup === 'function') {\r\n                    cleanup();\r\n                }\r\n            });\r\n            GeoLeaf._UIFilterPanelRenderer._eventCleanups = [];\r\n        }\r\n\r\n        // MEMORY LEAK FIX (Phase 2): Cleanup applier timeouts\r\n        if (GeoLeaf._UIFilterPanelApplier && GeoLeaf._UIFilterPanelApplier.destroy) {\r\n            GeoLeaf._UIFilterPanelApplier.destroy();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Charge le contenu d'un accord√©on √† la demande (lazy loading)\r\n     * @param {HTMLElement} accordionGroup - Element de l'accord√©on\r\n     * @param {Object} filterDef - D√©finition du filtre\r\n     */\r\n    GeoLeaf._UIFilterPanelRenderer._loadAccordionContentIfNeeded = function(accordionGroup, filterDef) {\r\n        const Log = getLog();\r\n        const LazyLoader = GeoLeaf._UIFilterPanelLazyLoader;\r\n\r\n        if (!LazyLoader) {\r\n            Log.warn(\"[FilterPanel] LazyLoader non disponible\");\r\n            return;\r\n        }\r\n\r\n        // V√©rifier si le contenu a d√©j√† √©t√© charg√© (le flag est reset √† \"false\" lors d'un changement de th√®me)\r\n        if (accordionGroup.dataset.lazyLoaded === \"true\") {\r\n            Log.debug(\"[FilterPanel] Accord√©on d√©j√† charg√© pour ce th√®me, skip\");\r\n            return;\r\n        }\r\n\r\n        // Trouver le container de contenu\r\n        const contentArea = accordionGroup.querySelector('[data-lazy-type]');\r\n        if (!contentArea) {\r\n            Log.debug(\"[FilterPanel] Pas de zone lazy dans cet accord√©on\");\r\n            return;\r\n        }\r\n\r\n        const lazyType = contentArea.dataset.lazyType;\r\n        Log.info(`[FilterPanel] Chargement lazy du contenu: ${lazyType}`);\r\n\r\n        // R√©cup√©rer le th√®me actif (avec fallback sur le th√®me par d√©faut du profil)\r\n        let currentTheme = GeoLeaf.ThemeSelector?.getCurrentTheme();\r\n        if (!currentTheme) {\r\n            // Fallback : r√©cup√©rer le th√®me par d√©faut depuis le profil\r\n            const profile = (GeoLeaf.Config && typeof GeoLeaf.Config.getActiveProfile === \"function\")\r\n                ? GeoLeaf.Config.getActiveProfile()\r\n                : null;\r\n            if (profile && profile.themes && profile.themes.config && profile.themes.config.defautTheme) {\r\n                currentTheme = profile.themes.config.defautTheme;\r\n                Log.info(\"[FilterPanel] Fallback sur le th√®me par d√©faut:\", currentTheme);\r\n            }\r\n        }\r\n        if (!currentTheme) {\r\n            // Dernier fallback : utiliser \"defaut\" comme ID g√©n√©rique\r\n            currentTheme = \"defaut\";\r\n            Log.warn(\"[FilterPanel] Th√®me actif introuvable, utilisation de 'defaut'\");\r\n        }\r\n\r\n        // Afficher un spinner pendant le chargement\r\n        contentArea.innerHTML = '<div class=\"gl-filter-panel__loading\">Chargement...</div>';\r\n\r\n        // Charger de mani√®re asynchrone pour ne pas bloquer l'UI\r\n        setTimeout(() => {\r\n            try {\r\n                if (lazyType === 'categories') {\r\n                    const result = LazyLoader.loadCategories(currentTheme);\r\n\r\n                    // V√©rifier s'il y a des cat√©gories\r\n                    if (!result.usedIds || result.usedIds.size === 0) {\r\n                        contentArea.innerHTML = '<div class=\"gl-filter-panel__empty\">Aucune cat√©gorie disponible sur les couches visibles</div>';\r\n                        accordionGroup.dataset.lazyLoaded = \"true\";\r\n                        return;\r\n                    }\r\n\r\n                    // Construire le contenu HTML\r\n                    if (typeof window._buildCategoryTreeContent === \"function\") {\r\n                        const htmlContent = window._buildCategoryTreeContent(result);\r\n                        contentArea.innerHTML = htmlContent;\r\n\r\n                        // Attacher les event listeners\r\n                        if (typeof window._attachCategoryTreeListeners === \"function\") {\r\n                            window._attachCategoryTreeListeners(contentArea);\r\n                        }\r\n                    } else {\r\n                        contentArea.innerHTML = '<div class=\"gl-filter-panel__error\">Erreur: fonction de construction introuvable</div>';\r\n                    }\r\n\r\n                    // Marquer l'accord√©on comme ouvert\r\n                    LazyLoader.markAccordionOpen('categories', accordionGroup);\r\n\r\n                } else if (lazyType === 'tags') {\r\n                    const tags = LazyLoader.loadTags(currentTheme);\r\n\r\n                    // V√©rifier s'il y a des tags\r\n                    if (!tags || tags.length === 0) {\r\n                        contentArea.innerHTML = '<div class=\"gl-filter-panel__empty\">Aucun tag disponible sur les couches visibles</div>';\r\n                        accordionGroup.dataset.lazyLoaded = \"true\";\r\n                        return;\r\n                    }\r\n\r\n                    // Construire le contenu HTML\r\n                    if (typeof window._buildTagsListContent === \"function\") {\r\n                        const htmlContent = window._buildTagsListContent(tags);\r\n                        contentArea.innerHTML = htmlContent;\r\n\r\n                        // Attacher les event listeners\r\n                        if (typeof window._attachTagsListeners === \"function\") {\r\n                            window._attachTagsListeners(contentArea);\r\n                        }\r\n                    } else {\r\n                        contentArea.innerHTML = '<div class=\"gl-filter-panel__error\">Erreur: fonction de construction introuvable</div>';\r\n                    }\r\n\r\n                    // Marquer l'accord√©on comme ouvert\r\n                    LazyLoader.markAccordionOpen('tags', accordionGroup);\r\n                }\r\n\r\n                // Marquer comme charg√©\r\n                accordionGroup.dataset.lazyLoaded = \"true\";\r\n\r\n            } catch (err) {\r\n                Log.error(\"[FilterPanel] Erreur durant le chargement lazy:\", err);\r\n                while (contentArea.firstChild) contentArea.removeChild(contentArea.firstChild);\r\n                const errDiv = document.createElement('div');\r\n                errDiv.className = 'gl-filter-panel__error';\r\n                errDiv.textContent = 'Erreur: ' + err.message;\r\n                contentArea.appendChild(errDiv);\r\n            }\r\n        }, 10); // 10ms delay pour laisser l'accord√©on s'ouvrir\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf UI Filter Panel - Proximity\r\n * Gestion des filtres de proximit√© (GPS, manuel, cercle)\r\n *\r\n * @module ui/filter-panel/proximity\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // D√©pendances lazy\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n\r\n    GeoLeaf._UIFilterPanelProximity = GeoLeaf._UIFilterPanelProximity || {};\r\n    GeoLeaf._UIFilterPanelProximity._eventCleanups = [];\r\n\r\n    /**\r\n     * Initialise la fonctionnalit√© de proximit√©\r\n     * @param {L.Map} map - Instance de carte Leaflet\r\n     */\r\n    GeoLeaf._UIFilterPanelProximity.initProximityFilter = function(map) {\r\n        const Log = getLog();\r\n\r\n        if (!map) {\r\n            Log.warn(\"[GeoLeaf.UI.FilterPanel] Carte non disponible pour le filtre de proximit√©\");\r\n            return;\r\n        }\r\n\r\n        // Stocker sur GeoLeaf.UI pour acc√®s global\r\n        GeoLeaf.UI._proximityMode = false;\r\n        GeoLeaf.UI._proximityCircle = null;\r\n        GeoLeaf.UI._proximityMarker = null;\r\n        GeoLeaf.UI._proximityMap = map;\r\n        GeoLeaf.UI._proximityClickHandler = null;\r\n\r\n        // √âcouter les changements sur le slider de rayon - avec cleanup tracking\r\n        const events = GeoLeaf.Utils?.events;\r\n        if (events) {\r\n            const inputHandler = function(evt) {\r\n                const slider = evt.target.closest(\"[data-filter-proximity-radius]\");\r\n                if (!slider) return;\r\n\r\n                const proximityControl = slider.closest(\".gl-filter-panel__proximity\");\r\n                if (!proximityControl) return;\r\n\r\n                const wrapper = proximityControl.closest(\"[data-gl-filter-id='proximity']\");\r\n                if (!wrapper) return;\r\n\r\n                const newRadius = parseFloat(slider.value);\r\n\r\n                // Mettre √† jour l'attribut sur le wrapper\r\n                wrapper.setAttribute(\"data-proximity-radius\", newRadius);\r\n\r\n                // Si un cercle existe, le mettre √† jour visuellement\r\n                if (GeoLeaf.UI._proximityCircle) {\r\n                    const radiusMeters = newRadius * 1000;\r\n                    GeoLeaf.UI._proximityCircle.setRadius(radiusMeters);\r\n                }\r\n            };\r\n\r\n            const clickHandler = function(evt) {\r\n                const btn = evt.target.closest(\"[data-filter-proximity-btn]\");\r\n                if (!btn) return;\r\n\r\n                evt.preventDefault();\r\n                GeoLeaf._UIFilterPanelProximity.toggleProximityMode(btn, map);\r\n            };\r\n\r\n            GeoLeaf._UIFilterPanelProximity._eventCleanups.push(\r\n                events.on(\r\n                    document,\r\n                    \"input\",\r\n                    inputHandler,\r\n                    false,\r\n                    'ProximityFilter.radiusInput'\r\n                )\r\n            );\r\n            GeoLeaf._UIFilterPanelProximity._eventCleanups.push(\r\n                events.on(\r\n                    document,\r\n                    \"click\",\r\n                    clickHandler,\r\n                    false,\r\n                    'ProximityFilter.buttonClick'\r\n                )\r\n            );\r\n        } else {\r\n            // Fallback sans cleanup\r\n            Log.warn('[ProximityFilter] EventListenerManager not available - listeners will not be cleaned up');\r\n            document.addEventListener(\"input\", function(evt) {\r\n                const slider = evt.target.closest(\"[data-filter-proximity-radius]\");\r\n                if (!slider) return;\r\n                const proximityControl = slider.closest(\".gl-filter-panel__proximity\");\r\n                if (!proximityControl) return;\r\n                const wrapper = proximityControl.closest(\"[data-gl-filter-id='proximity']\");\r\n                if (!wrapper) return;\r\n                const newRadius = parseFloat(slider.value);\r\n                wrapper.setAttribute(\"data-proximity-radius\", newRadius);\r\n                if (GeoLeaf.UI._proximityCircle) {\r\n                    const radiusMeters = newRadius * 1000;\r\n                    GeoLeaf.UI._proximityCircle.setRadius(radiusMeters);\r\n                }\r\n            });\r\n            document.addEventListener(\"click\", function(evt) {\r\n                const btn = evt.target.closest(\"[data-filter-proximity-btn]\");\r\n                if (!btn) return;\r\n                evt.preventDefault();\r\n                GeoLeaf._UIFilterPanelProximity.toggleProximityMode(btn, map);\r\n            });\r\n        }\r\n\r\n        Log.info(\"[GeoLeaf.UI.FilterPanel] Filtre de proximit√© initialis√©\");\r\n    };\r\n\r\n    /**\r\n     * Cleanup du filtre de proximit√©\r\n     */\r\n    GeoLeaf._UIFilterPanelProximity.destroy = function() {\r\n        const Log = getLog();\r\n\r\n        // Cleanup event listeners\r\n        if (GeoLeaf._UIFilterPanelProximity._eventCleanups && GeoLeaf._UIFilterPanelProximity._eventCleanups.length > 0) {\r\n            GeoLeaf._UIFilterPanelProximity._eventCleanups.forEach(cleanup => {\r\n                if (typeof cleanup === 'function') cleanup();\r\n            });\r\n            GeoLeaf._UIFilterPanelProximity._eventCleanups = [];\r\n            Log.info('[ProximityFilter] Event listeners cleaned up');\r\n        }\r\n\r\n        // Cleanup map references\r\n        if (GeoLeaf.UI._proximityCircle) {\r\n            GeoLeaf.UI._proximityMap.removeLayer(GeoLeaf.UI._proximityCircle);\r\n            GeoLeaf.UI._proximityCircle = null;\r\n        }\r\n        if (GeoLeaf.UI._proximityMarker) {\r\n            GeoLeaf.UI._proximityMap.removeLayer(GeoLeaf.UI._proximityMarker);\r\n            GeoLeaf.UI._proximityMarker = null;\r\n        }\r\n\r\n        GeoLeaf.UI._proximityMap = null;\r\n        GeoLeaf.UI._proximityMode = false;\r\n    };\r\n\r\n    /**\r\n     * Bascule le mode de proximit√©\r\n     * @param {HTMLElement} btn - Bouton de proximit√©\r\n     * @param {L.Map} map - Instance de carte\r\n     */\r\n    GeoLeaf._UIFilterPanelProximity.toggleProximityMode = function(btn, map) {\r\n        const Log = getLog();\r\n\r\n        GeoLeaf.UI._proximityMode = !GeoLeaf.UI._proximityMode;\r\n\r\n        const container = btn.closest(\".gl-filter-panel__proximity\");\r\n        const rangeWrapper = container.querySelector(\".gl-filter-panel__proximity-range\");\r\n        const instruction = container.querySelector(\".gl-filter-panel__proximity-instruction\");\r\n\r\n        if (GeoLeaf.UI._proximityMode) {\r\n            btn.textContent = \"D√©sactiver\";\r\n            btn.classList.add(\"is-active\");\r\n            if (rangeWrapper) rangeWrapper.style.display = \"block\";\r\n            if (instruction) instruction.style.display = \"block\";\r\n\r\n            // V√©rifier si la position GPS est disponible et r√©cente (< 5 minutes)\r\n            const hasRecentGPS = GeoLeaf.UI._userPosition &&\r\n                                (Date.now() - GeoLeaf.UI._userPosition.timestamp < 300000);\r\n\r\n            if (hasRecentGPS) {\r\n                GeoLeaf._UIFilterPanelProximity.activateGPSMode(container, map);\r\n            } else {\r\n                GeoLeaf._UIFilterPanelProximity.activateManualMode(container, map);\r\n            }\r\n\r\n        } else {\r\n            // D√©sactiver le mode proximit√©\r\n            GeoLeaf._UIFilterPanelProximity.deactivateProximityMode(btn, container, map);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Active le mode GPS automatique\r\n     * @param {HTMLElement} container - Container de proximit√©\r\n     * @param {L.Map} map - Instance de carte\r\n     */\r\n    GeoLeaf._UIFilterPanelProximity.activateGPSMode = function(container, map) {\r\n        const Log = getLog();\r\n\r\n        Log.info(\"[GeoLeaf.UI.FilterPanel] Utilisation de la position GPS pour la recherche par proximit√©\");\r\n\r\n        const radiusInput = container.querySelector(\"[data-filter-proximity-radius]\");\r\n        const radius = radiusInput ? parseFloat(radiusInput.value) : 10;\r\n        const radiusMeters = radius * 1000;\r\n\r\n        const wrapper = container.closest(\"[data-gl-filter-id='proximity']\");\r\n        if (!wrapper) {\r\n            Log.warn(\"[GeoLeaf.UI.FilterPanel] Wrapper proximity non trouv√©\");\r\n            return;\r\n        }\r\n\r\n        // Supprimer les √©l√©ments existants\r\n        if (GeoLeaf.UI._proximityCircle) {\r\n            map.removeLayer(GeoLeaf.UI._proximityCircle);\r\n        }\r\n        if (GeoLeaf.UI._proximityMarker) {\r\n            map.removeLayer(GeoLeaf.UI._proximityMarker);\r\n        }\r\n\r\n        // Cr√©er le cercle √† la position GPS\r\n        const gpsLatLng = global.L.latLng(GeoLeaf.UI._userPosition.lat, GeoLeaf.UI._userPosition.lng);\r\n\r\n        const interactiveShapes = GeoLeaf.Config.get('ui.interactiveShapes', false);\r\n        GeoLeaf.UI._proximityCircle = global.L.circle(gpsLatLng, {\r\n            radius: radiusMeters,\r\n            color: \"#c2410c\",\r\n            fillColor: \"#c2410c\",\r\n            fillOpacity: 0.2,\r\n            weight: 2,\r\n            interactive: interactiveShapes\r\n        }).addTo(map);\r\n\r\n        // Ne pas cr√©er de marqueur suppl√©mentaire si la g√©olocalisation est active\r\n        if (!GeoLeaf.UI._geolocationActive) {\r\n            // Mode GPS mais g√©olocalisation pas en tracking continu : cr√©er un marqueur draggable\r\n            GeoLeaf.UI._proximityMarker = global.L.marker(gpsLatLng, {\r\n                draggable: true,\r\n                icon: global.L.divIcon({\r\n                    className: 'gl-proximity-gps-marker',\r\n                    html: '<div style=\"width: 20px; height: 20px; background: #2563eb; border: 3px solid white; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.3);\"></div>',\r\n                    iconSize: [20, 20],\r\n                    iconAnchor: [10, 10]\r\n                })\r\n            }).addTo(map);\r\n\r\n            // G√©rer le d√©placement du marqueur\r\n            GeoLeaf.UI._proximityMarker.on('dragend', function() {\r\n                const newLatLng = GeoLeaf.UI._proximityMarker.getLatLng();\r\n                if (GeoLeaf.UI._proximityCircle) {\r\n                    GeoLeaf.UI._proximityCircle.setLatLng(newLatLng);\r\n                }\r\n                wrapper.setAttribute(\"data-proximity-lat\", newLatLng.lat);\r\n                wrapper.setAttribute(\"data-proximity-lng\", newLatLng.lng);\r\n                Log.info(\"[GeoLeaf.UI.FilterPanel] Point de proximit√© GPS d√©plac√©:\", {\r\n                    lat: newLatLng.lat,\r\n                    lng: newLatLng.lng,\r\n                    radius: radius\r\n                });\r\n            });\r\n        } else {\r\n            GeoLeaf.UI._proximityMarker = null;\r\n            Log.info(\"[GeoLeaf.UI.FilterPanel] Cercle de proximit√© affich√© autour du marqueur GPS\");\r\n        }\r\n\r\n        // D√©finir les attributs sur le wrapper\r\n        wrapper.setAttribute(\"data-proximity-lat\", gpsLatLng.lat);\r\n        wrapper.setAttribute(\"data-proximity-lng\", gpsLatLng.lng);\r\n        wrapper.setAttribute(\"data-proximity-radius\", radius);\r\n        wrapper.setAttribute(\"data-proximity-active\", \"true\");\r\n\r\n        // Centrer la carte sur la position GPS\r\n        map.setView(gpsLatLng, Math.max(map.getZoom(), 14), {\r\n            animate: true,\r\n            duration: 0.5\r\n        });\r\n\r\n        Log.info(\"[GeoLeaf.UI.FilterPanel] Point de proximit√© GPS d√©fini:\", {\r\n            lat: gpsLatLng.lat,\r\n            lng: gpsLatLng.lng,\r\n            radius: radius\r\n        });\r\n\r\n        // Pas de handler de clic n√©cessaire en mode GPS\r\n        GeoLeaf.UI._proximityClickHandler = null;\r\n    };\r\n\r\n    /**\r\n     * Active le mode manuel (clic sur la carte)\r\n     * @param {HTMLElement} container - Container de proximit√©\r\n     * @param {L.Map} map - Instance de carte\r\n     */\r\n    GeoLeaf._UIFilterPanelProximity.activateManualMode = function(container, map) {\r\n        const Log = getLog();\r\n\r\n        Log.info(\"[GeoLeaf.UI.FilterPanel] Mode manuel : cliquez sur la carte pour d√©finir le point de recherche\");\r\n\r\n        map.getContainer().style.cursor = \"crosshair\";\r\n\r\n        // Cr√©er le handler pour pouvoir le retirer plus tard\r\n        GeoLeaf.UI._proximityClickHandler = function(e) {\r\n            const radiusInput = container.querySelector(\"[data-filter-proximity-radius]\");\r\n            const radius = radiusInput ? parseFloat(radiusInput.value) : 10;\r\n            const radiusMeters = radius * 1000;\r\n\r\n            const wrapper = container.closest(\"[data-gl-filter-id='proximity']\");\r\n            if (!wrapper) {\r\n                Log.warn(\"[GeoLeaf.UI.FilterPanel] Wrapper proximity non trouv√©\");\r\n                return;\r\n            }\r\n\r\n            if (GeoLeaf.UI._proximityCircle) {\r\n                map.removeLayer(GeoLeaf.UI._proximityCircle);\r\n            }\r\n            if (GeoLeaf.UI._proximityMarker) {\r\n                map.removeLayer(GeoLeaf.UI._proximityMarker);\r\n            }\r\n\r\n            const interactiveShapes = GeoLeaf.Config.get('ui.interactiveShapes', false);\r\n            GeoLeaf.UI._proximityCircle = global.L.circle(e.latlng, {\r\n                radius: radiusMeters,\r\n                color: \"#c2410c\",\r\n                fillColor: \"#c2410c\",\r\n                fillOpacity: 0.2,\r\n                weight: 2,\r\n                interactive: interactiveShapes\r\n            }).addTo(map);\r\n\r\n            GeoLeaf.UI._proximityMarker = global.L.marker(e.latlng, {\r\n                draggable: true\r\n            }).addTo(map);\r\n\r\n            // G√©rer le d√©placement du marqueur\r\n            GeoLeaf.UI._proximityMarker.on('dragend', function() {\r\n                const newLatLng = GeoLeaf.UI._proximityMarker.getLatLng();\r\n\r\n                if (GeoLeaf.UI._proximityCircle) {\r\n                    GeoLeaf.UI._proximityCircle.setLatLng(newLatLng);\r\n                }\r\n\r\n                wrapper.setAttribute(\"data-proximity-lat\", newLatLng.lat);\r\n                wrapper.setAttribute(\"data-proximity-lng\", newLatLng.lng);\r\n\r\n                Log.info(\"[GeoLeaf.UI.FilterPanel] Point de proximit√© d√©plac√©:\", {\r\n                    lat: newLatLng.lat,\r\n                    lng: newLatLng.lng,\r\n                    radius: radius\r\n                });\r\n            });\r\n\r\n            // D√©finir les attributs sur le wrapper\r\n            wrapper.setAttribute(\"data-proximity-lat\", e.latlng.lat);\r\n            wrapper.setAttribute(\"data-proximity-lng\", e.latlng.lng);\r\n            wrapper.setAttribute(\"data-proximity-radius\", radius);\r\n            wrapper.setAttribute(\"data-proximity-active\", \"true\");\r\n\r\n            map.getContainer().style.cursor = \"\";\r\n\r\n            Log.info(\"[GeoLeaf.UI.FilterPanel] Point de proximit√© d√©fini:\", {\r\n                lat: e.latlng.lat,\r\n                lng: e.latlng.lng,\r\n                radius: radius\r\n            });\r\n\r\n            // Nettoyer le handler apr√®s le premier clic\r\n            map.off('click', GeoLeaf.UI._proximityClickHandler);\r\n            GeoLeaf.UI._proximityClickHandler = null;\r\n        };\r\n\r\n        // Attacher le handler √† la carte\r\n        map.on('click', GeoLeaf.UI._proximityClickHandler);\r\n    };\r\n\r\n    /**\r\n     * D√©sactive le mode de proximit√©\r\n     * @param {HTMLElement} btn - Bouton de proximit√©\r\n     * @param {HTMLElement} container - Container de proximit√©\r\n     * @param {L.Map} map - Instance de carte\r\n     */\r\n    GeoLeaf._UIFilterPanelProximity.deactivateProximityMode = function(btn, container, map) {\r\n        const Log = getLog();\r\n\r\n        btn.textContent = \"Activer\";\r\n        btn.classList.remove(\"is-active\");\r\n\r\n        const rangeWrapper = container.querySelector(\".gl-filter-panel__proximity-range\");\r\n        const instruction = container.querySelector(\".gl-filter-panel__proximity-instruction\");\r\n\r\n        if (rangeWrapper) rangeWrapper.style.display = \"none\";\r\n        if (instruction) instruction.style.display = \"none\";\r\n\r\n        map.getContainer().style.cursor = \"\";\r\n\r\n        // Retirer le handler de clic\r\n        if (GeoLeaf.UI._proximityClickHandler) {\r\n            map.off('click', GeoLeaf.UI._proximityClickHandler);\r\n            GeoLeaf.UI._proximityClickHandler = null;\r\n        }\r\n\r\n        // Retirer le cercle et le marqueur\r\n        if (GeoLeaf.UI._proximityCircle) {\r\n            map.removeLayer(GeoLeaf.UI._proximityCircle);\r\n            GeoLeaf.UI._proximityCircle = null;\r\n        }\r\n        if (GeoLeaf.UI._proximityMarker) {\r\n            map.removeLayer(GeoLeaf.UI._proximityMarker);\r\n            GeoLeaf.UI._proximityMarker = null;\r\n        }\r\n\r\n        // Retirer les attributs du wrapper\r\n        const wrapper = container.closest(\"[data-gl-filter-id='proximity']\");\r\n        if (wrapper) {\r\n            wrapper.removeAttribute(\"data-proximity-active\");\r\n            wrapper.removeAttribute(\"data-proximity-lat\");\r\n            wrapper.removeAttribute(\"data-proximity-lng\");\r\n        }\r\n\r\n        Log.info(\"[GeoLeaf.UI.FilterPanel] Mode proximit√© d√©sactiv√©\");\r\n    };\r\n\r\n})(window);\r\n","/**\n * GeoLeaf UI Filter Panel - Core\n * API publique et d√©l√©gation vers les sous-modules\n *\n * @module ui/filter-panel/core\n */\n(function (global) {\n    \"use strict\";\n\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\n\n    // D√©pendances lazy\n    const getLog = () => (GeoLeaf.Log || console);\n    const getShared = () => GeoLeaf._UIFilterPanelShared;\n    const getStateReader = () => GeoLeaf._UIFilterPanelStateReader;\n    const getApplier = () => GeoLeaf._UIFilterPanelApplier;\n    const getRenderer = () => GeoLeaf._UIFilterPanelRenderer;\n    const getProximity = () => GeoLeaf._UIFilterPanelProximity;\n\n    // Cr√©er le namespace si n√©cessaire\n    GeoLeaf._UIFilterPanel = GeoLeaf._UIFilterPanel || {};\n\n    // ========================================\n    //   API PUBLIQUE - D√©l√©gation vers sous-modules\n    // ========================================\n\n    /**\n     * Construit le panneau de filtres depuis la configuration du profil actif\n     * @param {Object} options - Options\n     */\n    GeoLeaf._UIFilterPanel.buildFilterPanelFromActiveProfile = function(options) {\n        const Renderer = getRenderer();\n        if (Renderer && Renderer.buildFilterPanelFromActiveProfile) {\n            return Renderer.buildFilterPanelFromActiveProfile(options);\n        }\n        getLog().error(\"[GeoLeaf.UI.FilterPanel] Module Renderer non charg√©\");\n    };\n\n    /**\n     * Bascule la visibilit√© du panneau de filtres\n     * @param {boolean} [forceState]\n     */\n    GeoLeaf._UIFilterPanel.toggleFilterPanelVisibility = function(forceState) {\n        const Renderer = getRenderer();\n        if (Renderer && Renderer.toggleFilterPanelVisibility) {\n            return Renderer.toggleFilterPanelVisibility(forceState);\n        }\n    };\n\n    /**\n     * Initialise le bouton toggle du panneau de filtres\n     */\n    GeoLeaf._UIFilterPanel.initFilterToggle = function() {\n        const Renderer = getRenderer();\n        if (Renderer && Renderer.initFilterToggle) {\n            return Renderer.initFilterToggle();\n        }\n    };\n\n    /**\n     * Rafra√Æchit les badges de tags\n     */\n    GeoLeaf._UIFilterPanel.refreshFilterTags = function() {\n        const Renderer = getRenderer();\n        if (Renderer && Renderer.refreshFilterTags) {\n            return Renderer.refreshFilterTags();\n        }\n    };\n\n    /**\n     * Applique les filtres initiaux\n     */\n    GeoLeaf._UIFilterPanel.applyFiltersInitial = function() {\n        const Applier = getApplier();\n        if (Applier && Applier.applyFiltersInitial) {\n            return Applier.applyFiltersInitial();\n        }\n    };\n\n    /**\n     * Initialise le filtre de proximit√©\n     * @param {L.Map} map\n     */\n    GeoLeaf._UIFilterPanel.initProximityFilter = function(map) {\n        const Proximity = getProximity();\n        if (Proximity && Proximity.initProximityFilter) {\n            return Proximity.initProximityFilter(map);\n        }\n    };\n\n    /**\n     * Retourne l'√©l√©ment DOM du panneau de filtres\n     * @returns {HTMLElement|null}\n     */\n    GeoLeaf._UIFilterPanel._getFilterPanelElement = function() {\n        const Shared = getShared();\n        if (Shared && Shared.getFilterPanelElement) {\n            return Shared.getFilterPanelElement();\n        }\n        return null;\n    };\n\n    /**\n     * R√©cup√®re les POI de base\n     * @returns {Array}\n     */\n    GeoLeaf._UIFilterPanel._getBasePois = function() {\n        const Shared = getShared();\n        if (Shared && Shared.getBasePois) {\n            return Shared.getBasePois();\n        }\n        return [];\n    };\n\n    /**\n     * R√©cup√®re les routes de base\n     * @returns {Array}\n     */\n    GeoLeaf._UIFilterPanel._getBaseRoutes = function() {\n        const Shared = getShared();\n        if (Shared && Shared.getBaseRoutes) {\n            return Shared.getBaseRoutes();\n        }\n        return [];\n    };\n\n    /**\n     * Lit l'√©tat des filtres depuis le panneau\n     * @param {HTMLElement} panelEl\n     * @returns {Object}\n     */\n    GeoLeaf._UIFilterPanel._readFiltersFromPanel = function(panelEl) {\n        const StateReader = getStateReader();\n        if (StateReader && StateReader.readFiltersFromPanel) {\n            return StateReader.readFiltersFromPanel(panelEl);\n        }\n        return {};\n    };\n\n    /**\n     * Filtre une liste de POI\n     * @param {Array} basePois\n     * @param {Object} filterState\n     * @returns {Array}\n     */\n    GeoLeaf._UIFilterPanel._filterPoiList = function(basePois, filterState) {\n        const Applier = getApplier();\n        if (Applier && Applier.filterPoiList) {\n            return Applier.filterPoiList(basePois, filterState);\n        }\n        return basePois || [];\n    };\n\n    /**\n     * Filtre une liste de routes\n     * @param {Array} baseRoutes\n     * @param {Object} filterState\n     * @returns {Array}\n     */\n    GeoLeaf._UIFilterPanel._filterRouteList = function(baseRoutes, filterState) {\n        const Applier = getApplier();\n        if (Applier && Applier.filterRouteList) {\n            return Applier.filterRouteList(baseRoutes, filterState);\n        }\n        return baseRoutes || [];\n    };\n\n    /**\n     * Rafra√Æchit la couche POI\n     * @param {Array} filteredPois\n     */\n    GeoLeaf._UIFilterPanel._refreshPoiLayer = function(filteredPois) {\n        const Applier = getApplier();\n        if (Applier && Applier.refreshPoiLayer) {\n            return Applier.refreshPoiLayer(filteredPois);\n        }\n    };\n\n})(window);\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf UI Module - Filter Panel (Aggregator)\r\n *\r\n * Ce fichier est un agr√©gateur pour la r√©trocompatibilit√©.\r\n * La logique a √©t√© d√©plac√©e dans les sous-modules :\r\n * - filter-panel/shared.js       : Helpers de donn√©es partag√©s\r\n * - filter-panel/state-reader.js : Lecture de l'√©tat des filtres\r\n * - filter-panel/applier.js      : Application des filtres\r\n * - filter-panel/renderer.js     : Construction du panneau HTML\r\n * - filter-panel/proximity.js    : Gestion des filtres de proximit√©\r\n * - filter-panel/core.js         : API publique et d√©l√©gation\r\n *\r\n * @module ui/filter-panel\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // V√©rifier que les sous-modules sont charg√©s\r\n    const requiredModules = [\r\n        '_UIFilterPanelShared',\r\n        '_UIFilterPanelStateReader',\r\n        '_UIFilterPanelApplier',\r\n        '_UIFilterPanelRenderer',\r\n        '_UIFilterPanelProximity',\r\n        '_UIFilterPanel'\r\n    ];\r\n\r\n    const missingModules = requiredModules.filter(m => !GeoLeaf[m]);\r\n\r\n    if (missingModules.length > 0) {\r\n        const Log = GeoLeaf.Log || console;\r\n        Log.error(\"[GeoLeaf.UI.FilterPanel] Sous-modules manquants:\", missingModules.join(', '));\r\n        Log.error(\"[GeoLeaf.UI.FilterPanel] Assurez-vous de charger les modules filter-panel/*.js avant filter-panel.js\");\r\n    }\r\n\r\n    // L'API publique est expos√©e via GeoLeaf._UIFilterPanel (dans core.js)\r\n    // Ce fichier sert uniquement de point de validation\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf UI Module - Main Orchestrator (Sprint 4.4 Refactored)\r\n * Orchestrateur principal pour l'interface utilisateur avec d√©l√©gation compl√®te vers sous-modules\r\n *\r\n * @module geoleaf.ui\r\n * @author Assistant\r\n * @version 4.4.0 - Modular Architecture\r\n *\r\n * RESPONSABILIT√âS:\r\n * ‚úÖ Exposition de l'API publique unifi√©e\r\n * ‚úÖ D√©l√©gation vers sous-modules sp√©cialis√©s\r\n * ‚úÖ Initialisation et coordination des composants\r\n * ‚úÖ Compatibility layer pour le code legacy\r\n *\r\n * MODULES D√âL√âGU√âS:\r\n * - Theme Management    ‚Üí _UITheme (ui/theme.js)\r\n * - Controls            ‚Üí _UIControls (ui/controls.js)\r\n * - Panel Builder       ‚Üí _UIPanelBuilder (ui/panel-builder.js)\r\n * - Filter Panel        ‚Üí _UIFilterPanel (ui/filter-panel.js)\r\n * - Notifications       ‚Üí _UINotifications (ui/notifications.js)\r\n * - Event Delegation    ‚Üí _UIEventDelegation (ui/event-delegation.js)\r\n * - Filter State Mgmt   ‚Üí _UIFilterStateManager (ui/filter-state-manager.js)\r\n */\r\n(function (window) {\r\n    \"use strict\";\r\n\r\n    // ========================================\r\n    //   NAMESPACE & DEPENDENCIES\r\n    // ========================================\r\n\r\n    const GeoLeaf = window.GeoLeaf || (window.GeoLeaf = {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    GeoLeaf.UI = GeoLeaf.UI || {};\r\n\r\n    // Helper pour createElement unifi√©\r\n    const $create = (tag, props, ...children) => {\r\n        if (GeoLeaf.Utils && GeoLeaf.Utils.createElement) {\r\n            return GeoLeaf.Utils.createElement(tag, props, ...children);\r\n        }\r\n        // Fallback to native if DomHelpers not loaded yet\r\n        const el = document.createElement(tag);\r\n        if (props) {\r\n            if (props.className) el.className = props.className;\r\n            if (props.textContent) el.textContent = props.textContent;\r\n        }\r\n        return el;\r\n    };\r\n\r\n    // ========================================\r\n    //   MODULE AVAILABILITY CHECKS\r\n    // ========================================\r\n\r\n    /**\r\n     * V√©rifie la disponibilit√© des modules requis\r\n     * @returns {Object} Status de disponibilit√© des modules\r\n     */\r\n    function checkModuleAvailability() {\r\n        const modules = {\r\n            theme: !!GeoLeaf._UITheme,\r\n            controls: !!GeoLeaf._UIControls,\r\n            panelBuilder: !!(GeoLeaf._UIPanelBuilder || GeoLeaf.UI.PanelBuilder),\r\n            filterPanel: !!GeoLeaf._UIFilterPanel,\r\n            notifications: !!GeoLeaf._UINotifications,\r\n            eventDelegation: !!GeoLeaf._UIEventDelegation,\r\n            filterStateManager: !!GeoLeaf._UIFilterStateManager\r\n        };\r\n\r\n        const missing = Object.entries(modules)\r\n            .filter(([name, available]) => !available)\r\n            .map(([name]) => name);\r\n\r\n        if (missing.length > 0 && Log) {\r\n            Log.warn(\"[UI.Orchestrator] Modules manquants:\", missing.join(', '));\r\n        }\r\n\r\n        return { modules, missing, allAvailable: missing.length === 0 };\r\n    }\r\n\r\n    // ========================================\r\n    //   API DELEGATION - THEME MANAGEMENT\r\n    // ========================================\r\n\r\n    if (GeoLeaf._UITheme) {\r\n        // D√©l√©gation directe des fonctions th√®me\r\n        GeoLeaf.UI.initThemeToggle = GeoLeaf._UITheme.initThemeToggle;\r\n        GeoLeaf.UI.toggleTheme = GeoLeaf._UITheme.toggleTheme;\r\n        GeoLeaf.UI.applyTheme = GeoLeaf._UITheme.applyTheme;\r\n        GeoLeaf.UI.getCurrentTheme = GeoLeaf._UITheme.getCurrentTheme;\r\n\r\n        // Compatibility aliases\r\n        GeoLeaf.UI.setTheme = GeoLeaf._UITheme.applyTheme;\r\n    }\r\n\r\n    // ========================================\r\n    //   API DELEGATION - CONTROLS\r\n    // ========================================\r\n\r\n    if (GeoLeaf._UIControls) {\r\n        // D√©l√©gation des contr√¥les Leaflet\r\n        GeoLeaf.UI.initFullscreenControl = GeoLeaf._UIControls.initFullscreenControl;\r\n        GeoLeaf.UI.initGeolocationControl = GeoLeaf._UIControls.initGeolocationControl;\r\n        GeoLeaf.UI.initPoiAddControl = GeoLeaf._UIControls.initPoiAddControl;\r\n        GeoLeaf.UI.initScaleControl = GeoLeaf._UIControls.initScaleControl;\r\n\r\n        // √âtat g√©olocalisation (maintenu pour compatibilit√©)\r\n        GeoLeaf.UI._userPosition = null;\r\n        GeoLeaf.UI._geolocationActive = false;\r\n        GeoLeaf.UI._geolocationWatchId = null;\r\n    }\r\n\r\n    // ========================================\r\n    //   API DELEGATION - PANEL BUILDER\r\n    // ========================================\r\n\r\n    if (GeoLeaf._UIPanelBuilder || GeoLeaf.UI.PanelBuilder) {\r\n        // D√©l√©gation vers panel builder\r\n        GeoLeaf.UI.buildSidePanel = (GeoLeaf._UIPanelBuilder && GeoLeaf._UIPanelBuilder.buildSidePanel) ||\r\n                                   (GeoLeaf.UI.PanelBuilder && GeoLeaf.UI.PanelBuilder.buildSidePanel);\r\n        GeoLeaf.UI.renderPoiSidePanel = (GeoLeaf._UIPanelBuilder && GeoLeaf._UIPanelBuilder.renderPoiSidePanel) ||\r\n                                       (GeoLeaf.UI.PanelBuilder && GeoLeaf.UI.PanelBuilder.renderPoiSidePanel);\r\n\r\n        // Legacy compatibility pour POI panels\r\n        GeoLeaf.UI.renderPoiPanelWithLayout = function(poi, layout, container) {\r\n            if (GeoLeaf.UI.renderPoiSidePanel) {\r\n                return GeoLeaf.UI.renderPoiSidePanel(poi, layout, container);\r\n            }\r\n            if (Log) Log.warn(\"[UI.Orchestrator] renderPoiPanelWithLayout: PanelBuilder non disponible\");\r\n        };\r\n\r\n        // Helper functions (deprecated, pour compatibilit√©)\r\n        GeoLeaf.UI._resolveField = function(poi, fieldPath) {\r\n            if (GeoLeaf._UIDomUtils && GeoLeaf._UIDomUtils.resolveField) {\r\n                return GeoLeaf._UIDomUtils.resolveField(poi, fieldPath);\r\n            }\r\n            return null;\r\n        };\r\n\r\n        GeoLeaf.UI._createPlainSection = function(label, innerContent, extraClass) {\r\n            if (GeoLeaf.UI.PanelBuilder && GeoLeaf.UI.PanelBuilder.createPlainSection) {\r\n                return GeoLeaf.UI.PanelBuilder.createPlainSection(label, innerContent, extraClass);\r\n            }\r\n            return $create(\"section\", { className: \"gl-poi-panel__section \" + (extraClass || \"\") });\r\n        };\r\n\r\n        GeoLeaf.UI._createAccordionSection = function(label, innerContent, options) {\r\n            if (GeoLeaf.UI.PanelBuilder && GeoLeaf.UI.PanelBuilder.createAccordionSection) {\r\n                return GeoLeaf.UI.PanelBuilder.createAccordionSection(label, innerContent, options);\r\n            }\r\n            return $create(\"section\", { className: \"gl-poi-panel__section--accordion\" });\r\n        };\r\n    }\r\n\r\n    // ========================================\r\n    //   API DELEGATION - FILTER PANEL\r\n    // ========================================\r\n\r\n    if (GeoLeaf._UIFilterPanel) {\r\n        // D√©l√©gation des fonctions filtres\r\n        GeoLeaf.UI.buildFilterPanelFromActiveProfile = GeoLeaf._UIFilterPanel.buildFilterPanelFromActiveProfile;\r\n        GeoLeaf.UI.refreshFilterTags = GeoLeaf._UIFilterPanel.refreshFilterTags;\r\n        GeoLeaf.UI.initFilterToggle = GeoLeaf._UIFilterPanel.initFilterToggle;\r\n        GeoLeaf.UI.initProximityFilter = GeoLeaf._UIFilterPanel.initProximityFilter;\r\n        GeoLeaf.UI._getBasePois = GeoLeaf._UIFilterPanel.getBasePois;\r\n        GeoLeaf.UI._getBaseRoutes = GeoLeaf._UIFilterPanel.getBaseRoutes;\r\n\r\n        // Filter state integration si disponible\r\n        if (GeoLeaf._UIFilterStateManager) {\r\n            // Bridge entre filter panel et state manager\r\n            GeoLeaf.UI.resetAllFilters = function() {\r\n                GeoLeaf._UIFilterStateManager.resetAllFilters();\r\n                if (GeoLeaf._UIFilterPanel.refreshFilterTags) {\r\n                    GeoLeaf._UIFilterPanel.refreshFilterTags();\r\n                }\r\n            };\r\n\r\n            GeoLeaf.UI.getActiveFilters = GeoLeaf._UIFilterStateManager.getActiveFiltersSummary;\r\n            GeoLeaf.UI.hasActiveFilters = GeoLeaf._UIFilterStateManager.hasActiveFilters;\r\n        }\r\n    }\r\n\r\n    // ========================================\r\n    //   API DELEGATION - NOTIFICATIONS\r\n    // ========================================\r\n\r\n    if (GeoLeaf._UINotifications) {\r\n        // Cr√©er un namespace d√©di√© pour l'acc√®s complet\r\n        GeoLeaf.UI.Notifications = {\r\n            show: GeoLeaf._UINotifications.show.bind(GeoLeaf._UINotifications),\r\n            success: GeoLeaf._UINotifications.success.bind(GeoLeaf._UINotifications),\r\n            error: GeoLeaf._UINotifications.error.bind(GeoLeaf._UINotifications),\r\n            warning: GeoLeaf._UINotifications.warning.bind(GeoLeaf._UINotifications),\r\n            info: GeoLeaf._UINotifications.info.bind(GeoLeaf._UINotifications),\r\n            clearAll: GeoLeaf._UINotifications.clearAll.bind(GeoLeaf._UINotifications),\r\n            enable: GeoLeaf._UINotifications.enable.bind(GeoLeaf._UINotifications),\r\n            disable: GeoLeaf._UINotifications.disable.bind(GeoLeaf._UINotifications),\r\n            getStatus: GeoLeaf._UINotifications.getStatus.bind(GeoLeaf._UINotifications)\r\n        };\r\n\r\n        // Raccourcis globaux pour l'API publique (r√©trocompatibilit√©)\r\n        GeoLeaf.UI.showNotification = GeoLeaf._UINotifications.show.bind(GeoLeaf._UINotifications);\r\n        GeoLeaf.UI.showSuccess = GeoLeaf._UINotifications.success.bind(GeoLeaf._UINotifications);\r\n        GeoLeaf.UI.showError = GeoLeaf._UINotifications.error.bind(GeoLeaf._UINotifications);\r\n        GeoLeaf.UI.showWarning = GeoLeaf._UINotifications.warning.bind(GeoLeaf._UINotifications);\r\n        GeoLeaf.UI.showInfo = GeoLeaf._UINotifications.info.bind(GeoLeaf._UINotifications);\r\n        GeoLeaf.UI.clearNotifications = GeoLeaf._UINotifications.clearAll.bind(GeoLeaf._UINotifications);\r\n    }\r\n\r\n    // ========================================\r\n    //   EVENT DELEGATION INTEGRATION\r\n    // ========================================\r\n\r\n    let _delegationInitialized = false;\r\n\r\n    /**\r\n     * Initialise la d√©l√©gation d'√©v√©nements pour l'interface\r\n     * @param {Object} options - Options d'initialisation\r\n     */\r\n    function initializeEventDelegation(options = {}) {\r\n        if (_delegationInitialized || !GeoLeaf._UIEventDelegation) return;\r\n\r\n        const { mapContainer, filterContainer } = options;\r\n\r\n        // Event listeners pour les filtres si disponible\r\n        if (filterContainer && GeoLeaf._UIFilterStateManager) {\r\n            GeoLeaf._UIEventDelegation.attachFilterInputEvents(\r\n                filterContainer,\r\n                () => {\r\n                    // Callback de changement de filtre - d√©l√©guer vers FilterPanel\r\n                    if (GeoLeaf._UIFilterPanel && GeoLeaf._UIFilterPanel.refreshFilterTags) {\r\n                        GeoLeaf._UIFilterPanel.refreshFilterTags();\r\n                    }\r\n                }\r\n            );\r\n        }\r\n\r\n        // Event listeners pour les accord√©ons\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n            const accordionContainers = document.querySelectorAll('.gl-poi-panel, .gl-filter-panel');\r\n            accordionContainers.forEach(container => {\r\n                GeoLeaf._UIEventDelegation.attachAccordionEvents(container);\r\n            });\r\n        });\r\n\r\n        _delegationInitialized = true;\r\n        if (Log) Log.info(\"[UI.Orchestrator] Event delegation initialis√©e\");\r\n    }\r\n\r\n    // ========================================\r\n    //   MAIN INITIALIZATION\r\n    // ========================================\r\n\r\n    /**\r\n     * Point d'entr√©e principal pour l'initialisation UI\r\n     * @param {Object} options - Options d'initialisation\r\n     * @param {HTMLElement} options.map - Instance carte Leaflet\r\n     * @param {HTMLElement} options.mapContainer - Conteneur DOM de la carte\r\n     * @param {HTMLElement} options.filterContainer - Conteneur des filtres\r\n     * @param {string} options.buttonSelector - S√©lecteur du bouton th√®me\r\n     * @param {boolean} options.autoInitOnDomReady - Auto-init au DOMContentLoaded\r\n     * @param {boolean} options.enableEventDelegation - Active la d√©l√©gation d'√©v√©nements (d√©faut: true)\r\n     */\r\n    GeoLeaf.UI.init = function(options = {}) {\r\n        const config = {\r\n            buttonSelector: options.buttonSelector || '[data-gl-role=\"theme-toggle\"]',\r\n            autoInitOnDomReady: !!options.autoInitOnDomReady,\r\n            enableEventDelegation: options.enableEventDelegation !== false\r\n        };\r\n\r\n        // V√©rification des modules\r\n        const { missing, allAvailable } = checkModuleAvailability();\r\n        if (!allAvailable && Log) {\r\n            Log.warn(\"[UI.Orchestrator] Initialisation avec modules manquants:\", missing);\r\n        }\r\n\r\n        // Initialisation du th√®me\r\n        if (GeoLeaf.UI.initThemeToggle) {\r\n            try {\r\n                GeoLeaf.UI.initThemeToggle(config);\r\n            } catch (error) {\r\n                if (Log) Log.error(\"[UI.Orchestrator] Erreur init th√®me:\", error);\r\n            }\r\n        }\r\n\r\n        // Initialisation des contr√¥les si carte disponible\r\n        if (options.map && options.mapContainer) {\r\n            // Fullscreen control\r\n            if (GeoLeaf.UI.initFullscreenControl) {\r\n                try {\r\n                    GeoLeaf.UI.initFullscreenControl(options.map, options.mapContainer);\r\n                } catch (error) {\r\n                    if (Log) Log.error(\"[UI.Orchestrator] Erreur fullscreen control:\", error);\r\n                }\r\n            }\r\n\r\n            // Geolocation control - forcer l'initialisation\r\n            if (GeoLeaf.UI.initGeolocationControl) {\r\n                try {\r\n                    GeoLeaf.UI.initGeolocationControl(options.map, options.config);\r\n                } catch (error) {\r\n                    if (Log) Log.error(\"[UI.Orchestrator] Erreur geolocation control:\", error);\r\n                }\r\n            }\r\n\r\n            // POI Add control - forcer l'initialisation\r\n            if (GeoLeaf.UI.initPoiAddControl) {\r\n                try {\r\n                    GeoLeaf.UI.initPoiAddControl(options.map, options.config);\r\n                } catch (error) {\r\n                    if (Log) Log.error(\"[UI.Orchestrator] Erreur POI add control:\", error);\r\n                }\r\n            }\r\n\r\n            // Scale control\r\n            if (GeoLeaf.UI.initScaleControl) {\r\n                try {\r\n                    GeoLeaf.UI.initScaleControl(options.map);\r\n                } catch (error) {\r\n                    if (Log) Log.error(\"[UI.Orchestrator] Erreur scale control:\", error);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Initialisation de la d√©l√©gation d'√©v√©nements\r\n        if (config.enableEventDelegation) {\r\n            initializeEventDelegation({\r\n                mapContainer: options.mapContainer,\r\n                filterContainer: options.filterContainer\r\n            });\r\n        }\r\n\r\n        // Initialisation du filter state manager si profil disponible\r\n        if (GeoLeaf._UIFilterStateManager && GeoLeaf.Config) {\r\n            const activeProfile = GeoLeaf.Config.getActiveProfile?.() || null;\r\n            if (activeProfile && activeProfile.filters) {\r\n                try {\r\n                    GeoLeaf._UIFilterStateManager.initializeFromProfile(activeProfile);\r\n                } catch (error) {\r\n                    if (Log) Log.error(\"[UI.Orchestrator] Erreur init filter state:\", error);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (Log) {\r\n            Log.info(`[UI.Orchestrator] Initialisation termin√©e (modules: ${Object.keys(checkModuleAvailability().modules).length})`);\r\n        }\r\n    };\r\n\r\n    // ========================================\r\n    //   UTILITY & DEBUG FUNCTIONS\r\n    // ========================================\r\n\r\n    /**\r\n     * Informations de debug sur l'√©tat des modules\r\n     * @returns {Object} Status d√©taill√© des modules\r\n     */\r\n    GeoLeaf.UI.getModuleStatus = function() {\r\n        return checkModuleAvailability();\r\n    };\r\n\r\n    /**\r\n     * Nettoyage g√©n√©ral des resources UI\r\n     */\r\n    GeoLeaf.UI.cleanup = function() {\r\n        // Nettoyage des event listeners\r\n        if (GeoLeaf._UIEventDelegation && GeoLeaf._UIEventDelegation.cleanupAllListeners) {\r\n            const cleaned = GeoLeaf._UIEventDelegation.cleanupAllListeners();\r\n            if (Log && cleaned > 0) {\r\n                Log.info(`[UI.Orchestrator] ${cleaned} event listeners nettoy√©s`);\r\n            }\r\n        }\r\n\r\n        // Reset flag d√©l√©gation\r\n        _delegationInitialized = false;\r\n\r\n        if (Log) Log.info(\"[UI.Orchestrator] Nettoyage termin√©\");\r\n    };\r\n\r\n    // ========================================\r\n    //   LEGACY COMPATIBILITY LAYER\r\n    // ========================================\r\n\r\n    // Fonctions legacy maintenues pour compatibilit√©\r\n    GeoLeaf.UI._attachAccordionBehavior = function(container) {\r\n        if (GeoLeaf._UIEventDelegation && GeoLeaf._UIEventDelegation.attachAccordionEvents) {\r\n            return GeoLeaf._UIEventDelegation.attachAccordionEvents(container);\r\n        }\r\n        if (Log) Log.warn(\"[UI.Orchestrator] _attachAccordionBehavior: EventDelegation module manquant\");\r\n    };\r\n\r\n    GeoLeaf.UI._getActiveProfileConfig = function() {\r\n        if (GeoLeaf._UIDomUtils && GeoLeaf._UIDomUtils.getActiveProfileConfig) {\r\n            return GeoLeaf._UIDomUtils.getActiveProfileConfig();\r\n        }\r\n        return GeoLeaf.Config?.getActiveProfile?.() || null;\r\n    };\r\n\r\n    // Version info\r\n    GeoLeaf.UI.VERSION = \"4.4.0\";\r\n    GeoLeaf.UI.BUILD = \"Sprint-4.4-Modular\";\r\n\r\n    if (Log) {\r\n        Log.info(`[UI.Orchestrator] Module initialis√© v${GeoLeaf.UI.VERSION}`);\r\n    }\r\n\r\n})(window);\r\n","/**\n * GeoLeaf Data Normalizer Module\n * Module central pour la normalisation des donn√©es provenant de diff√©rentes sources.\n * Convertit JSON, GeoJSON, GPX (future) et Routes vers un format POI unifi√©.\n *\n * @module data/normalizer\n * @version 1.0.0\n */\n(function (global) {\n    \"use strict\";\n\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\n    GeoLeaf._Normalizer = GeoLeaf._Normalizer || {};\n\n    // ========================================\n    //   TYPES DE SOURCES\n    // ========================================\n\n    const SOURCE_TYPES = {\n        JSON: 'json',\n        GEOJSON: 'geojson',\n        GPX: 'gpx',\n        ROUTE: 'route'\n    };\n\n    // ========================================\n    //   UTILITAIRES\n    // ========================================\n\n    /**\n     * R√©cup√®re le Log\n     * @returns {Object}\n     */\n    function getLog() {\n        return GeoLeaf.Log || console;\n    }\n\n    /**\n     * G√©n√®re un ID unique\n     * @returns {string}\n     */\n    function generateUniqueId() {\n        return 'poi_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n    }\n\n    /**\n     * D√©termine le type de g√©om√©trie √† partir des coordonn√©es Leaflet\n     * @param {Object} layer - Layer Leaflet\n     * @returns {string} 'Point', 'Polygon', 'LineString' ou 'Unknown'\n     */\n    function detectGeometryType(layer) {\n        if (!layer) return 'Unknown';\n\n        if (typeof layer.getLatLng === 'function') {\n            return 'Point';\n        }\n        if (typeof layer.getLatLngs === 'function') {\n            const latLngs = layer.getLatLngs();\n            // Polygon : tableau de tableaux de points (anneau ext√©rieur + trous √©ventuels)\n            // LineString : tableau de points\n            if (Array.isArray(latLngs) && latLngs.length > 0) {\n                if (Array.isArray(latLngs[0]) && Array.isArray(latLngs[0][0])) {\n                    return 'Polygon';\n                }\n                if (Array.isArray(latLngs[0])) {\n                    // Peut √™tre Polygon ou LineString selon si ferm√©\n                    return 'Polygon';\n                }\n                return 'LineString';\n            }\n        }\n        return 'Unknown';\n    }\n\n    /**\n     * Extrait les coordonn√©es d'un layer Leaflet\n     * @param {Object} layer - Layer Leaflet\n     * @returns {Array|null} Coordonn√©es [lat, lng] ou null\n     */\n    function extractCoordinates(layer) {\n        if (!layer) return null;\n\n        if (typeof layer.getLatLng === 'function') {\n            const ll = layer.getLatLng();\n            return ll ? [ll.lat, ll.lng] : null;\n        }\n\n        if (typeof layer.getCenter === 'function') {\n            const center = layer.getCenter();\n            return center ? [center.lat, center.lng] : null;\n        }\n\n        if (typeof layer.getBounds === 'function') {\n            try {\n                const bounds = layer.getBounds();\n                if (bounds && bounds.isValid()) {\n                    const center = bounds.getCenter();\n                    return center ? [center.lat, center.lng] : null;\n                }\n            } catch (e) {\n                // Bounds invalides\n            }\n        }\n\n        return null;\n    }\n\n    // ========================================\n    //   NORMALISEURS PAR TYPE DE SOURCE\n    // ========================================\n\n    /**\n     * Normalise une entr√©e JSON en POI\n     * @param {Object} data - Donn√©es JSON brutes\n     * @param {Object} layerConfig - Configuration du layer\n     * @returns {Object} POI normalis√©\n     */\n    function normalizeFromJSON(data, layerConfig = {}) {\n        if (!data) return null;\n\n        const id = data.id || data.uid || data.guid || generateUniqueId();\n        const dataMapping = layerConfig.dataMapping || {};\n\n        // Extraction du titre\n        const titleField = dataMapping.title || 'title';\n        const title = data[titleField] || data.title || data.name || data.label || data.nom || 'Sans titre';\n\n        // Extraction de la description\n        const descField = dataMapping.description || 'description';\n        const description = data[descField] || data.description || data.shortDescription || '';\n\n        // Extraction des coordonn√©es\n        const latField = dataMapping.lat || 'lat';\n        const lngField = dataMapping.lng || 'lng';\n        let lat = data[latField];\n        let lng = data[lngField];\n\n        // Fallbacks pour coordonn√©es\n        if (lat === undefined) lat = data.latitude || data.y;\n        if (lng === undefined) lng = data.longitude || data.lng || data.x;\n\n        // Extraction cat√©gorie/sous-cat√©gorie\n        const catField = dataMapping.categoryId || 'categoryId';\n        const subCatField = dataMapping.subCategoryId || 'subCategoryId';\n        const categoryId = data[catField] || data.categoryId || data.category || null;\n        const subCategoryId = data[subCatField] || data.subCategoryId || data.subcategory || null;\n\n        // Construction des attributs (toutes les propri√©t√©s)\n        const attributes = { ...data };\n\n        return {\n            id: String(id),\n            sourceType: SOURCE_TYPES.JSON,\n            geometryType: 'Point',\n            title: String(title),\n            description: String(description || ''),\n            lat: lat !== undefined ? parseFloat(lat) : null,\n            lng: lng !== undefined ? parseFloat(lng) : null,\n            categoryId: categoryId,\n            subCategoryId: subCategoryId,\n            attributes: attributes,\n            rawData: data\n        };\n    }\n\n    /**\n     * Normalise une feature GeoJSON en POI\n     * @param {Object} feature - Feature GeoJSON\n     * @param {Object} layerConfig - Configuration du layer\n     * @param {Object} layer - Layer Leaflet (optionnel, pour coordonn√©es)\n     * @returns {Object} POI normalis√©\n     */\n    function normalizeFromGeoJSON(feature, layerConfig = {}, layer = null) {\n        if (!feature) return null;\n\n        const props = feature.properties || {};\n        const geometry = feature.geometry || {};\n        const dataMapping = layerConfig.dataMapping || {};\n\n        // ID\n        const id = feature.id || props.id || props.uid || props.guid || generateUniqueId();\n\n        // Type de g√©om√©trie\n        let geometryType = geometry.type || 'Unknown';\n        if (layer && geometryType === 'Unknown') {\n            geometryType = detectGeometryType(layer);\n        }\n\n        // Extraction du titre\n        const titleField = dataMapping.title || 'title';\n        const titlePath = titleField.includes('.') ? titleField.split('.').pop() : titleField;\n        const title = props[titlePath] || props.name || props.nom || props.title || props.label || 'Sans titre';\n\n        // Extraction de la description\n        const descField = dataMapping.description || 'description';\n        const descPath = descField.includes('.') ? descField.split('.').pop() : descField;\n        const description = props[descPath] || props.description || props.shortDescription || '';\n\n        // Coordonn√©es\n        let lat = null, lng = null;\n        if (geometry.coordinates) {\n            if (geometryType === 'Point') {\n                // GeoJSON : [lng, lat]\n                lng = geometry.coordinates[0];\n                lat = geometry.coordinates[1];\n            } else if (layer) {\n                const coords = extractCoordinates(layer);\n                if (coords) {\n                    lat = coords[0];\n                    lng = coords[1];\n                }\n            } else if (geometry.coordinates.length > 0) {\n                // Calculer le centre approximatif\n                const flatCoords = flattenCoordinates(geometry.coordinates, geometry.type);\n                if (flatCoords.length > 0) {\n                    let sumLat = 0, sumLng = 0;\n                    flatCoords.forEach(c => {\n                        sumLng += c[0];\n                        sumLat += c[1];\n                    });\n                    lng = sumLng / flatCoords.length;\n                    lat = sumLat / flatCoords.length;\n                }\n            }\n        } else if (layer) {\n            const coords = extractCoordinates(layer);\n            if (coords) {\n                lat = coords[0];\n                lng = coords[1];\n            }\n        }\n\n        // Cat√©gorie/sous-cat√©gorie\n        const catField = dataMapping.categoryId || 'categoryId';\n        const catPath = catField.includes('.') ? catField.split('.').pop() : catField;\n        const subCatField = dataMapping.subCategoryId || 'subCategoryId';\n        const subCatPath = subCatField.includes('.') ? subCatField.split('.').pop() : subCatField;\n\n        const categoryId = props[catPath] || props.categoryId || props.category || null;\n        const subCategoryId = props[subCatPath] || props.subCategoryId || props.subcategory || null;\n\n        // Construction des attributs\n        const attributes = { ...props };\n\n        return {\n            id: String(id),\n            sourceType: SOURCE_TYPES.GEOJSON,\n            geometryType: geometryType,\n            title: String(title),\n            description: String(description || ''),\n            lat: lat !== null ? parseFloat(lat) : null,\n            lng: lng !== null ? parseFloat(lng) : null,\n            categoryId: categoryId,\n            subCategoryId: subCategoryId,\n            attributes: attributes,\n            properties: props, // Conserve aussi properties pour compatibilit√©\n            rawData: feature\n        };\n    }\n\n    /**\n     * Aplatit les coordonn√©es GeoJSON selon le type de g√©om√©trie\n     * @param {Array} coords - Coordonn√©es imbriqu√©es\n     * @param {string} type - Type de g√©om√©trie\n     * @returns {Array} Tableau de [lng, lat]\n     */\n    function flattenCoordinates(coords, type) {\n        if (!coords || !Array.isArray(coords)) return [];\n\n        switch (type) {\n            case 'Point':\n                return [coords];\n            case 'MultiPoint':\n            case 'LineString':\n                return coords;\n            case 'MultiLineString':\n            case 'Polygon':\n                return coords.flat();\n            case 'MultiPolygon':\n                return coords.flat(2);\n            default:\n                // Aplatir r√©cursivement\n                const flat = [];\n                const flatten = (arr) => {\n                    if (!Array.isArray(arr)) return;\n                    if (typeof arr[0] === 'number') {\n                        flat.push(arr);\n                    } else {\n                        arr.forEach(flatten);\n                    }\n                };\n                flatten(coords);\n                return flat;\n        }\n    }\n\n    /**\n     * Normalise un waypoint GPX en POI (placeholder pour futur module)\n     * @param {Object} waypoint - Waypoint GPX\n     * @param {Object} layerConfig - Configuration du layer\n     * @returns {Object} POI normalis√©\n     */\n    function normalizeFromGPX(waypoint, layerConfig = {}) {\n        if (!waypoint) return null;\n\n        getLog().info('[Normalizer] GPX normalization - placeholder for future implementation');\n\n        // Structure de base pour GPX\n        const id = waypoint.name || waypoint.sym || generateUniqueId();\n        const title = waypoint.name || waypoint.cmt || 'Point GPX';\n        const description = waypoint.desc || waypoint.cmt || '';\n\n        return {\n            id: String(id),\n            sourceType: SOURCE_TYPES.GPX,\n            geometryType: 'Point',\n            title: String(title),\n            description: String(description),\n            lat: waypoint.lat !== undefined ? parseFloat(waypoint.lat) : null,\n            lng: waypoint.lon !== undefined ? parseFloat(waypoint.lon) : null,\n            categoryId: waypoint.type || null,\n            subCategoryId: null,\n            attributes: { ...waypoint },\n            rawData: waypoint\n        };\n    }\n\n    /**\n     * Normalise un point de route en POI\n     * @param {Object} routePoint - Point de route\n     * @param {Object} routeConfig - Configuration de la route\n     * @returns {Object} POI normalis√©\n     */\n    function normalizeFromRoute(routePoint, routeConfig = {}) {\n        if (!routePoint) return null;\n\n        const id = routePoint.id || routePoint.placeId || generateUniqueId();\n        const title = routePoint.name || routePoint.title || routePoint.address || 'Point de route';\n        const description = routePoint.description || routePoint.comment || '';\n\n        let lat = null, lng = null;\n        if (routePoint.latLng) {\n            lat = routePoint.latLng.lat;\n            lng = routePoint.latLng.lng;\n        } else if (routePoint.lat !== undefined && routePoint.lng !== undefined) {\n            lat = routePoint.lat;\n            lng = routePoint.lng;\n        }\n\n        return {\n            id: String(id),\n            sourceType: SOURCE_TYPES.ROUTE,\n            geometryType: 'Point',\n            title: String(title),\n            description: String(description),\n            lat: lat !== null ? parseFloat(lat) : null,\n            lng: lng !== null ? parseFloat(lng) : null,\n            categoryId: routePoint.type || 'route-point',\n            subCategoryId: routePoint.order !== undefined ? `stop-${routePoint.order}` : null,\n            order: routePoint.order,\n            address: routePoint.address,\n            attributes: { ...routePoint },\n            rawData: routePoint\n        };\n    }\n\n    // ========================================\n    //   FONCTION PRINCIPALE\n    // ========================================\n\n    /**\n     * Normalise des donn√©es selon leur type de source\n     * @param {string} sourceType - Type de source ('json', 'geojson', 'gpx', 'route')\n     * @param {Object} data - Donn√©es brutes\n     * @param {Object} layerConfig - Configuration du layer\n     * @param {Object} options - Options additionnelles (layer Leaflet, etc.)\n     * @returns {Object} POI normalis√©\n     */\n    function normalizeFeature(sourceType, data, layerConfig = {}, options = {}) {\n        if (!data) {\n            getLog().warn('[Normalizer] Donn√©es nulles pour normalisation');\n            return null;\n        }\n\n        switch (sourceType) {\n            case SOURCE_TYPES.JSON:\n                return normalizeFromJSON(data, layerConfig);\n\n            case SOURCE_TYPES.GEOJSON:\n                return normalizeFromGeoJSON(data, layerConfig, options.layer);\n\n            case SOURCE_TYPES.GPX:\n                return normalizeFromGPX(data, layerConfig);\n\n            case SOURCE_TYPES.ROUTE:\n                return normalizeFromRoute(data, layerConfig);\n\n            default:\n                getLog().warn('[Normalizer] Type de source non reconnu:', sourceType);\n                // Tenter une d√©tection automatique\n                return autoDetectAndNormalize(data, layerConfig, options);\n        }\n    }\n\n    /**\n     * D√©tecte automatiquement le type de source et normalise\n     * @param {Object} data - Donn√©es brutes\n     * @param {Object} layerConfig - Configuration du layer\n     * @param {Object} options - Options additionnelles\n     * @returns {Object} POI normalis√©\n     */\n    function autoDetectAndNormalize(data, layerConfig = {}, options = {}) {\n        // D√©tection GeoJSON\n        if (data.type === 'Feature' && data.geometry) {\n            return normalizeFromGeoJSON(data, layerConfig, options.layer);\n        }\n\n        // D√©tection GPX (waypoint)\n        if (data.lat !== undefined && data.lon !== undefined && (data.name || data.sym)) {\n            return normalizeFromGPX(data, layerConfig);\n        }\n\n        // D√©tection Route\n        if (data.latLng || (data.order !== undefined && data.address)) {\n            return normalizeFromRoute(data, layerConfig);\n        }\n\n        // Par d√©faut : JSON\n        return normalizeFromJSON(data, layerConfig);\n    }\n\n    /**\n     * Normalise un tableau de donn√©es\n     * @param {string} sourceType - Type de source\n     * @param {Array} dataArray - Tableau de donn√©es brutes\n     * @param {Object} layerConfig - Configuration du layer\n     * @param {Object} options - Options additionnelles\n     * @returns {Array} Tableau de POIs normalis√©s\n     */\n    function normalizeCollection(sourceType, dataArray, layerConfig = {}, options = {}) {\n        if (!Array.isArray(dataArray)) {\n            getLog().warn('[Normalizer] normalizeCollection attend un tableau');\n            return [];\n        }\n\n        return dataArray\n            .map(data => normalizeFeature(sourceType, data, layerConfig, options))\n            .filter(poi => poi !== null);\n    }\n\n    // ========================================\n    //   EXPORT\n    // ========================================\n\n    GeoLeaf._Normalizer = {\n        // Types de sources\n        SOURCE_TYPES,\n\n        // Normaliseurs par type\n        normalizeFromJSON,\n        normalizeFromGeoJSON,\n        normalizeFromGPX,\n        normalizeFromRoute,\n\n        // Fonctions principales\n        normalizeFeature,\n        autoDetectAndNormalize,\n        normalizeCollection,\n\n        // Utilitaires\n        detectGeometryType,\n        extractCoordinates,\n        generateUniqueId\n    };\n\n    getLog().info('[GeoLeaf._Normalizer] Module Normalizer charg√©');\n\n})(typeof window !== 'undefined' ? window : global);\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * @fileoverview Chargeur centralis√© de styles GeoLeaf\r\n * G√®re le chargement, la validation et le cache des fichiers style.json\r\n * Supporte les labels int√©gr√©s et la d√©tection automatique\r\n * @module loaders/style-loader\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n\r\n/**\r\n * Cache en m√©moire des styles charg√©s\r\n * Cl√©: \"profileId:layerId:styleId\"\r\n * Valeur: { styleData, labelConfig, timestamp }\r\n */\r\nconst styleCache = new Map();\r\n\r\n/**\r\n * Configuration du loader\r\n */\r\nlet loaderConfig = {\r\n    debug: false,\r\n    validateOnLoad: true,\r\n    throwOnValidationError: true\r\n};\r\n\r\nfunction getProfilesBasePath() {\r\n    const cfg = GeoLeaf.Config;\r\n\r\n    if (cfg && typeof cfg.get === \"function\") {\r\n        const configured = cfg.get(\"data.profilesBasePath\", \"profiles\");\r\n        if (typeof configured === \"string\" && configured.trim().length > 0) {\r\n            return configured.endsWith(\"/\") ? configured.slice(0, -1) : configured;\r\n        }\r\n    }\r\n\r\n    return \"profiles\";\r\n}\r\n\r\n/**\r\n * Initialise le style loader avec la configuration GeoLeaf\r\n * @param {Object} config - Configuration GeoLeaf (doit contenir { debug: boolean })\r\n */\r\nfunction initStyleLoader(config = {}) {\r\n    loaderConfig.debug = config.debug === true;\r\n\r\n    if (loaderConfig.debug) {\r\n        console.log('[StyleLoader] Mode debug activ√© - cache d√©sactiv√©');\r\n    }\r\n}\r\n\r\n/**\r\n * Charge et valide un fichier de style\r\n * @param {string} profileId - ID du profil\r\n * @param {string} layerId - ID de la couche\r\n * @param {string} styleId - ID du style\r\n * @param {string} styleFileName - Nom du fichier de style (ex: \"default.json\")\r\n * @param {string} layerDirectory - R√©pertoire de la couche (ex: \"layers/tourism_poi_all\")\r\n * @returns {Promise<Object>} Style charg√© et valid√© avec labels extraits\r\n * @throws {Error} Si le fichier est invalide ou introuvable\r\n */\r\nasync function loadAndValidateStyle(profileId, layerId, styleId, styleFileName, layerDirectory) {\r\n    const cacheKey = `${profileId}:${layerId}:${styleId}`;\r\n\r\n    // V√©rifier le cache (sauf en mode debug)\r\n    if (!loaderConfig.debug && styleCache.has(cacheKey)) {\r\n        const cached = styleCache.get(cacheKey);\r\n        console.log(`[StyleLoader] Style charg√© depuis le cache: ${cacheKey}`);\r\n        return cached;\r\n    }\r\n\r\n    try {\r\n        // Construire le chemin du fichier de style\r\n        const profilesBasePath = getProfilesBasePath();\r\n        const stylePath = `${profilesBasePath}/${profileId}/${layerDirectory}/styles/${styleFileName}`;\r\n\r\n        console.log(`[StyleLoader] Chargement du style: ${stylePath}`);\r\n\r\n        // Charger le fichier JSON\r\n        const response = await fetch(stylePath);\r\n\r\n        if (!response.ok) {\r\n            throw new Error(\r\n                `Impossible de charger le fichier de style: ${stylePath}\\n` +\r\n                `HTTP ${response.status}: ${response.statusText}`\r\n            );\r\n        }\r\n\r\n        let styleData;\r\n        try {\r\n            styleData = await response.json();\r\n        } catch (jsonError) {\r\n            // Erreur de parsing JSON - format d√©taill√©\r\n            const errorContext = {\r\n                profileId,\r\n                layerId,\r\n                styleId,\r\n                stylePath,\r\n                httpStatus: response.status,\r\n                parseError: jsonError.message\r\n            };\r\n\r\n            console.error('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');\r\n            console.error('‚ùå ERREUR DE PARSING JSON - FICHIER STYLE MALFORM√â');\r\n            console.error('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');\r\n            console.error(`Fichier: ${stylePath}`);\r\n            console.error(`Erreur: ${jsonError.message}`);\r\n            console.error('Contexte:', JSON.stringify(errorContext, null, 2));\r\n            console.error('Stack trace:', jsonError.stack);\r\n            console.error('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');\r\n\r\n            throw new Error(\r\n                `Le fichier de style contient du JSON malform√©: ${stylePath}\\n` +\r\n                `Erreur de parsing: ${jsonError.message}\\n` +\r\n                `Veuillez v√©rifier la syntaxe JSON du fichier.`\r\n            );\r\n        }\r\n\r\n        // VALIDATION STRICTE: Ajouter visibleByDefault si manquant et label.enabled: true\r\n        if (styleData.label && styleData.label.enabled === true) {\r\n            if (styleData.label.visibleByDefault === undefined) {\r\n                // Fallback automatique √† false\r\n                styleData.label.visibleByDefault = false;\r\n                console.warn(\r\n                    `[StyleLoader] ‚ö†Ô∏è Param√®tre \"visibleByDefault\" manquant dans le style: ${stylePath}\\n` +\r\n                    `Le style a \"label.enabled: true\" mais pas de \"visibleByDefault\".\\n` +\r\n                    `Fallback appliqu√©: visibleByDefault = false\\n` +\r\n                    `Ajoutez explicitement \"visibleByDefault\": false ou true dans le fichier de style.`\r\n                );\r\n            }\r\n        }\r\n\r\n        // Valider le style contre le sch√©ma\r\n        if (loaderConfig.validateOnLoad) {\r\n            const StyleValidator = GeoLeaf._StyleValidator;\r\n            if (!StyleValidator) {\r\n                console.warn('[StyleLoader] GeoLeaf._StyleValidator non disponible, validation ignor√©e');\r\n            }\r\n\r\n            const validationResult = StyleValidator ? StyleValidator.validateStyle(styleData, {\r\n                profileId,\r\n                layerId,\r\n                styleId,\r\n                stylePath\r\n            }) : { valid: true, errors: [], warnings: [] };\r\n\r\n            if (!validationResult.valid) {\r\n                const errorMessage = StyleValidator ? StyleValidator.formatValidationErrors(validationResult, stylePath) : 'Erreurs de validation';\r\n                console.error(errorMessage);\r\n\r\n                if (loaderConfig.throwOnValidationError) {\r\n                    throw new Error(\r\n                        `Le fichier de style ne respecte pas le sch√©ma GeoLeaf: ${stylePath}\\n` +\r\n                        `Consultez la console pour les d√©tails des erreurs.`\r\n                    );\r\n                }\r\n            }\r\n\r\n            // Afficher les avertissements m√™me si validation OK\r\n            if (validationResult.warnings.length > 0) {\r\n                console.warn(`[StyleLoader] ${validationResult.warnings.length} avertissement(s) pour ${stylePath}:`);\r\n                validationResult.warnings.forEach(warning => {\r\n                    console.warn(`  - ${warning.field}: ${warning.message}`);\r\n                });\r\n            }\r\n        }\r\n\r\n        // Extraire la configuration de labels int√©gr√©s\r\n        const labelConfig = extractLabelConfig(styleData);\r\n\r\n        // Pr√©parer l'objet de retour\r\n        const result = {\r\n            styleData,\r\n            labelConfig,\r\n            metadata: {\r\n                profileId,\r\n                layerId,\r\n                styleId,\r\n                stylePath,\r\n                hasIntegratedLabels: labelConfig !== null,\r\n                loadedAt: new Date().toISOString()\r\n            }\r\n        };\r\n\r\n        // Mettre en cache (sauf en mode debug)\r\n        if (!loaderConfig.debug) {\r\n            styleCache.set(cacheKey, result);\r\n        }\r\n\r\n        console.log(\r\n            `[StyleLoader] Style charg√© avec succ√®s: ${styleId}` +\r\n            (labelConfig ? ' (avec labels int√©gr√©s)' : '')\r\n        );\r\n\r\n        return result;\r\n\r\n    } catch (error) {\r\n        // Re-throw les erreurs avec contexte complet\r\n        if (error.message.includes('JSON malform√©') || error.message.includes('sch√©ma GeoLeaf')) {\r\n            throw error;\r\n        }\r\n\r\n        // Erreur r√©seau ou autre\r\n        const errorContext = {\r\n            profileId,\r\n            layerId,\r\n            styleId,\r\n            styleFileName,\r\n            layerDirectory,\r\n            originalError: error.message\r\n        };\r\n\r\n        console.error('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');\r\n        console.error('‚ùå ERREUR DE CHARGEMENT DE STYLE');\r\n        console.error('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');\r\n        console.error('Contexte:', JSON.stringify(errorContext, null, 2));\r\n        console.error('Stack trace:', error.stack);\r\n        console.error('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');\r\n\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * Extrait la configuration de labels depuis un style charg√©\r\n * D√©tecte automatiquement si les labels sont int√©gr√©s dans le style\r\n * @param {Object} styleData - Donn√©es du style\r\n * @returns {Object|null} Configuration de labels ou null si absents/d√©sactiv√©s\r\n */\r\nfunction extractLabelConfig(styleData) {\r\n    if (!styleData || typeof styleData !== 'object') {\r\n        return null;\r\n    }\r\n\r\n    // V√©rifier si le champ label est un objet de configuration\r\n    if (styleData.label && typeof styleData.label === 'object' && styleData.label !== null) {\r\n        // V√©rifier que enabled est true\r\n        if (styleData.label.enabled === true) {\r\n            return {\r\n                ...styleData.label,\r\n                isIntegrated: true\r\n            };\r\n        }\r\n    }\r\n\r\n    // Pas de labels int√©gr√©s ou d√©sactiv√©s\r\n    return null;\r\n}\r\n\r\n/**\r\n * Charge un style avec gestion simplifi√©e (sans validation stricte)\r\n * Utilis√© pour les cas o√π on veut charger m√™me si validation √©choue\r\n * @param {string} profileId - ID du profil\r\n * @param {string} layerId - ID de la couche\r\n * @param {string} styleId - ID du style\r\n * @param {string} styleFileName - Nom du fichier\r\n * @param {string} layerDirectory - R√©pertoire de la couche\r\n * @returns {Promise<Object>} Style charg√© (peut contenir des erreurs)\r\n */\r\nasync function loadStyleLenient(profileId, layerId, styleId, styleFileName, layerDirectory) {\r\n    const previousThrowSetting = loaderConfig.throwOnValidationError;\r\n    loaderConfig.throwOnValidationError = false;\r\n\r\n    try {\r\n        return await loadAndValidateStyle(profileId, layerId, styleId, styleFileName, layerDirectory);\r\n    } finally {\r\n        loaderConfig.throwOnValidationError = previousThrowSetting;\r\n    }\r\n}\r\n\r\n/**\r\n * Pr√©charge plusieurs styles en parall√®le\r\n * @param {Array<Object>} styleConfigs - Tableau de { profileId, layerId, styleId, styleFileName, layerDirectory }\r\n * @returns {Promise<Array<Object>>} R√©sultats de chargement\r\n */\r\nasync function preloadStyles(styleConfigs) {\r\n    console.log(`[StyleLoader] Pr√©chargement de ${styleConfigs.length} style(s)...`);\r\n\r\n    const promises = styleConfigs.map(config =>\r\n        loadAndValidateStyle(\r\n            config.profileId,\r\n            config.layerId,\r\n            config.styleId,\r\n            config.styleFileName,\r\n            config.layerDirectory\r\n        ).catch(error => ({\r\n            error: true,\r\n            message: error.message,\r\n            config\r\n        }))\r\n    );\r\n\r\n    const results = await Promise.all(promises);\r\n\r\n    const successCount = results.filter(r => !r.error).length;\r\n    const errorCount = results.filter(r => r.error).length;\r\n\r\n    console.log(`[StyleLoader] Pr√©chargement termin√©: ${successCount} succ√®s, ${errorCount} erreurs`);\r\n\r\n    return results;\r\n}\r\n\r\n/**\r\n * Efface le cache des styles\r\n * @param {string} [cacheKey] - Cl√© sp√©cifique √† effacer (optionnel, sinon tout le cache)\r\n */\r\nfunction clearStyleCache(cacheKey = null) {\r\n    if (cacheKey) {\r\n        styleCache.delete(cacheKey);\r\n        console.log(`[StyleLoader] Cache effac√© pour: ${cacheKey}`);\r\n    } else {\r\n        const count = styleCache.size;\r\n        styleCache.clear();\r\n        console.log(`[StyleLoader] Cache complet effac√© (${count} entr√©e(s))`);\r\n    }\r\n}\r\n\r\n/**\r\n * Obtient les statistiques du cache\r\n * @returns {Object} Statistiques { size, keys, debug }\r\n */\r\nfunction getCacheStats() {\r\n    return {\r\n        size: styleCache.size,\r\n        keys: Array.from(styleCache.keys()),\r\n        debug: loaderConfig.debug,\r\n        cacheEnabled: !loaderConfig.debug\r\n    };\r\n}\r\n\r\n/**\r\n * Charge un style depuis une configuration de couche\r\n * D√©tecte automatiquement les r√©f√©rences obsol√®tes √† styleFile\r\n * @param {string} profileId - ID du profil\r\n * @param {Object} layerConfig - Configuration de la couche\r\n * @param {string} styleIdOrFileName - ID du style ou nom de fichier\r\n * @returns {Promise<Object>} Style charg√©\r\n */\r\nasync function loadStyleFromLayerConfig(profileId, layerConfig, styleIdOrFileName) {\r\n    const layerId = layerConfig.id;\r\n    const layerDirectory = layerConfig._layerDirectory || `layers/${layerId}`;\r\n\r\n    // V√©rifier si styleFile est pr√©sent dans labels (configuration obsol√®te)\r\n    if (layerConfig.labels && layerConfig.labels.styleFile) {\r\n        const errorMessage =\r\n            `‚ùå CONFIGURATION OBSOL√àTE D√âTECT√âE\\n` +\r\n            `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n` +\r\n            `La couche \"${layerId}\" utilise une r√©f√©rence obsol√®te √† un fichier\\n` +\r\n            `de labels s√©par√© via \"labels.styleFile\".\\n\\n` +\r\n            `GeoLeaf ne supporte plus les fichiers de labels s√©par√©s (styleLabel.json).\\n` +\r\n            `Les labels doivent √™tre int√©gr√©s dans les fichiers de style.\\n\\n` +\r\n            `Valeur d√©tect√©e: ${layerConfig.labels.styleFile}\\n` +\r\n            `Profil: ${profileId}\\n` +\r\n            `Couche: ${layerId}\\n\\n` +\r\n            `Action requise:\\n` +\r\n            `1. Supprimez la propri√©t√© \"labels.styleFile\" de la configuration\\n` +\r\n            `2. Int√©grez les labels dans les fichiers de style (propri√©t√© \"label\")\\n` +\r\n            `3. Consultez docs/STYLE_FORMAT_SPEC.md pour la syntaxe\\n` +\r\n            `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê`;\r\n\r\n        console.error(errorMessage);\r\n        throw new Error(`Configuration obsol√®te: labels.styleFile d√©tect√© dans la couche ${layerId}`);\r\n    }\r\n\r\n    // Trouver le fichier de style dans styles.available\r\n    let styleFileName = styleIdOrFileName;\r\n    let styleId = styleIdOrFileName;\r\n\r\n    if (layerConfig.styles && layerConfig.styles.available) {\r\n        const styleConfig = layerConfig.styles.available.find(s => s.id === styleIdOrFileName || s.file === styleIdOrFileName);\r\n        if (styleConfig) {\r\n            styleFileName = styleConfig.file;\r\n            styleId = styleConfig.id;\r\n        }\r\n    }\r\n\r\n    return loadAndValidateStyle(profileId, layerId, styleId, styleFileName, layerDirectory);\r\n}\r\n\r\n/**\r\n * Construit le chemin complet d'un fichier de style\r\n * @param {string} profileId - ID du profil\r\n * @param {string} layerDirectory - R√©pertoire de la couche\r\n * @param {string} styleFileName - Nom du fichier\r\n * @returns {string} Chemin complet\r\n */\r\nfunction getStylePath(profileId, layerDirectory, styleFileName) {\r\n    return `profiles/${profileId}/${layerDirectory}/styles/${styleFileName}`;\r\n}\r\n\r\n/**\r\n * Module Style Loader\r\n * Expose toutes les fonctions publiques\r\n */\r\nconst StyleLoader = {\r\n    initStyleLoader,\r\n    loadAndValidateStyle,\r\n    extractLabelConfig,\r\n    loadStyleLenient,\r\n    preloadStyles,\r\n    clearStyleCache,\r\n    getCacheStats,\r\n    loadStyleFromLayerConfig,\r\n    getStylePath,\r\n    styleCache // Export pour tests/debugging\r\n};\r\n\r\n// Exposer le module\r\nGeoLeaf._StyleLoader = StyleLoader;\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Namespace global GeoLeaf\r\n     */\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    /**\r\n     * Logger unifi√©\r\n     */\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module Config.Loader\r\n     *\r\n     * Responsabilit√©s :\r\n     * - Chargement HTTP via fetch() avec validation CSRF/XSS\r\n     * - Validation Content-Type stricte\r\n     * - Gestion des headers personnalis√©s\r\n     * - Helper g√©n√©rique _fetchJson()\r\n     */\r\n    const LoaderModule = {\r\n        /**\r\n         * Charge une configuration depuis une URL JSON et retourne l'objet.\r\n         *\r\n         * @param {string} url - URL du fichier JSON\r\n         * @param {Object} [options] - Options de chargement\r\n         * @param {Object} [options.headers] - Headers HTTP personnalis√©s (ex: CSRF token)\r\n         * @param {boolean} [options.strictContentType=true] - Validation stricte du Content-Type\r\n         * @returns {Promise<Object>}\r\n         * @example\r\n         * Loader.loadUrl('/api/config.json', {\r\n         *     headers: { 'X-CSRF-Token': '...' },\r\n         *     strictContentType: true\r\n         * })\r\n         */\r\n        loadUrl(url, options = {}) {\r\n            if (!url) {\r\n                Log.warn(\"[GeoLeaf.Config.Loader] URL JSON manquante dans loadUrl().\");\r\n                return Promise.resolve({});\r\n            }\r\n\r\n            const { headers = {}, strictContentType = true } = options;\r\n\r\n            // Validation de l'URL avec le module Security\r\n            const Security =\r\n                typeof GeoLeaf !== \"undefined\" && GeoLeaf.Security\r\n                    ? GeoLeaf.Security\r\n                    : null;\r\n\r\n            // Pour les URLs relatives (commen√ßant par ./ ou ../ ou /), on les laisse passer\r\n            const isRelative = /^\\.{0,2}\\//.test(url) || /^\\/[^/]/.test(url);\r\n\r\n            if (!isRelative) {\r\n                // URL absolue : validation stricte avec Security.validateUrl\r\n                if (Security && typeof Security.validateUrl === \"function\") {\r\n                    try {\r\n                        url = Security.validateUrl(url);\r\n                    } catch (e) {\r\n                        const errMsg = \"[GeoLeaf.Config.Loader] \" + e.message;\r\n                        Log.error(errMsg);\r\n                        return Promise.reject(new Error(errMsg));\r\n                    }\r\n                } else {\r\n                    // Fallback : v√©rification basique si Security pas disponible\r\n                    if (!/^https?:\\/\\//i.test(url)) {\r\n                        const errMsg =\r\n                            \"[GeoLeaf.Config.Loader] URL doit √™tre relative ou commencer par http:// ou https://\";\r\n                        Log.error(errMsg);\r\n                        return Promise.reject(new Error(errMsg));\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Configuration fetch avec headers personnalis√©s\r\n            const fetchOptions = {\r\n                method: \"GET\",\r\n                headers: {\r\n                    Accept: \"application/json\",\r\n                    ...headers\r\n                }\r\n            };\r\n\r\n            return fetch(url, fetchOptions)\r\n                .then((response) => {\r\n                    if (!response.ok) {\r\n                        throw new Error(\"HTTP \" + response.status + \" pour \" + url);\r\n                    }\r\n\r\n                    // Validation Content-Type stricte\r\n                    const contentType = response.headers.get(\"content-type\");\r\n                    if (strictContentType) {\r\n                        if (!contentType || !contentType.includes(\"application/json\")) {\r\n                            throw new Error(\r\n                                \"[GeoLeaf.Config.Loader] Content-Type invalide: attendu 'application/json', re√ßu '\" +\r\n                                (contentType || \"null\") +\r\n                                \"'. Cela peut indiquer une attaque XSS ou un serveur mal configur√©.\"\r\n                            );\r\n                        }\r\n                    } else if (contentType && !contentType.includes(\"application/json\")) {\r\n                        Log.warn(\"[GeoLeaf.Config.Loader] Content-Type inattendu:\", contentType);\r\n                    }\r\n\r\n                    // Security: Wrap response.json() to handle parse errors\r\n                    return response.json().catch((parseErr) => {\r\n                        const errMsg = \"[GeoLeaf.Config.Loader] Erreur de parsing JSON pour \" + url + \": \" + parseErr.message;\r\n                        Log.error(errMsg);\r\n                        throw new Error(errMsg);\r\n                    });\r\n                })\r\n                .then((jsonCfg) => {\r\n                    if (typeof jsonCfg !== \"object\" || jsonCfg === null) {\r\n                        throw new Error(\"Le JSON de configuration n'est pas un objet valide.\");\r\n                    }\r\n\r\n                    return jsonCfg;\r\n                })\r\n                .catch((err) => {\r\n                    Log.error(\"[GeoLeaf.Config.Loader] Erreur lors du chargement JSON :\", err);\r\n                    throw err;\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Helper interne pour charger un JSON sans le fusionner dans la configuration.\r\n         *\r\n         * @param {string} url\r\n         * @param {Object} [options]\r\n         * @param {Object} [options.headers]\r\n         * @param {boolean} [options.strictContentType=true]\r\n         * @returns {Promise<Object|null>}\r\n         */\r\n        fetchJson(url, options = {}) {\r\n            if (!url) {\r\n                Log.warn(\"[GeoLeaf.Config.Loader] fetchJson() appel√© sans URL.\");\r\n                return Promise.resolve(null);\r\n            }\r\n\r\n            const { headers = {}, strictContentType = true } = options;\r\n\r\n            const Security =\r\n                typeof GeoLeaf !== \"undefined\" && GeoLeaf.Security\r\n                    ? GeoLeaf.Security\r\n                    : null;\r\n\r\n            const isRelative =\r\n                /^\\.{0,2}\\//.test(url) || /^\\/[^/]/.test(url);\r\n\r\n            if (!isRelative) {\r\n                if (Security && typeof Security.validateUrl === \"function\") {\r\n                    try {\r\n                        url = Security.validateUrl(url);\r\n                    } catch (e) {\r\n                        const errMsg =\r\n                            \"[GeoLeaf.Config.Loader] \" + e.message;\r\n                        Log.error(errMsg);\r\n                        return Promise.reject(new Error(errMsg));\r\n                    }\r\n                } else {\r\n                    if (!/^https?:\\/\\//i.test(url)) {\r\n                        const errMsg =\r\n                            \"[GeoLeaf.Config.Loader] URL doit √™tre relative ou commencer par http:// ou https://\";\r\n                        Log.error(errMsg);\r\n                        return Promise.reject(new Error(errMsg));\r\n                    }\r\n                }\r\n            }\r\n\r\n            const fetchOptions = {\r\n                method: \"GET\",\r\n                headers: {\r\n                    Accept: \"application/json\",\r\n                    ...headers\r\n                }\r\n            };\r\n\r\n            return fetch(url, fetchOptions)\r\n                .then((response) => {\r\n                    if (!response.ok) {\r\n                        throw new Error(\"HTTP \" + response.status + \" pour \" + url);\r\n                    }\r\n\r\n                    const contentType = response.headers.get(\"content-type\");\r\n                    if (strictContentType) {\r\n                        if (!contentType || !contentType.includes(\"application/json\")) {\r\n                            throw new Error(\r\n                                \"[GeoLeaf.Config.Loader] Content-Type invalide dans fetchJson: attendu 'application/json', re√ßu '\" +\r\n                                (contentType || \"null\") +\r\n                                \"'.\"\r\n                            );\r\n                        }\r\n                    } else if (contentType && !contentType.includes(\"application/json\")) {\r\n                        Log.warn(\"[GeoLeaf.Config.Loader] fetchJson() Content-Type inattendu:\", contentType);\r\n                    }\r\n\r\n                    // Security: Wrap response.json() to handle parse errors\r\n                    return response.json().catch((parseErr) => {\r\n                        const errMsg = \"[GeoLeaf.Config.Loader] Erreur de parsing JSON dans fetchJson pour \" + url + \": \" + parseErr.message;\r\n                        Log.error(errMsg);\r\n                        throw new Error(errMsg);\r\n                    });\r\n                })\r\n                .then((json) => {\r\n                    if (typeof json !== \"object\" || json === null) {\r\n                        Log.warn(\r\n                            \"[GeoLeaf.Config.Loader] fetchJson() a re√ßu un JSON non-objet pour l'URL :\",\r\n                            url\r\n                        );\r\n                    }\r\n                    return json;\r\n                })\r\n                .catch((err) => {\r\n                    Log.error(\r\n                        \"[GeoLeaf.Config.Loader] Erreur fetchJson() pour \" + url + \" :\",\r\n                        err\r\n                    );\r\n                    throw err; // Re-throw pour que l'appelant puisse g√©rer l'erreur\r\n                });\r\n        }\r\n    };\r\n\r\n    // Exposer le module\r\n    GeoLeaf._ConfigLoader = LoaderModule;\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Namespace global GeoLeaf\r\n     */\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    /**\r\n     * Logger unifi√©\r\n     */\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module Config.Storage\r\n     *\r\n     * Responsabilit√©s :\r\n     * - Stockage et gestion de la configuration consolid√©e\r\n     * - API get/set avec chemins \"a.b.c\"\r\n     * - Fusion profonde (deep merge)\r\n     * - Helpers de navigation dans l'arbre de config\r\n     */\r\n    const StorageModule = {\r\n        /**\r\n         * Configuration interne (r√©f√©rence partag√©e)\r\n         * @type {Object}\r\n         * @private\r\n         */\r\n        _config: null,\r\n\r\n        /**\r\n         * Initialise le module avec une r√©f√©rence √† la config.\r\n         *\r\n         * @param {Object} config - R√©f√©rence √† l'objet de configuration global\r\n         */\r\n        init(config) {\r\n            this._config = config;\r\n        },\r\n\r\n        /**\r\n         * Retourne la configuration compl√®te (objet).\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        getAll() {\r\n            return this._config || {};\r\n        },\r\n\r\n        /**\r\n         * R√©cup√®re une valeur via un chemin de type \"map.center\" ou \"basemaps.street.url\".\r\n         *\r\n         * @param {string} path - Chemin avec des points.\r\n         * @param {*} [defaultValue] - Valeur renvoy√©e si le chemin n'existe pas.\r\n         * @returns {*}\r\n         */\r\n        get(path, defaultValue) {\r\n            if (!this._config) {\r\n                return typeof defaultValue === \"undefined\" ? undefined : defaultValue;\r\n            }\r\n\r\n            if (!path || typeof path !== \"string\") {\r\n                return typeof defaultValue === \"undefined\" ? undefined : defaultValue;\r\n            }\r\n\r\n            const segments = path.split(\".\");\r\n            let current = this._config;\r\n\r\n            for (let i = 0; i < segments.length; i++) {\r\n                const key = segments[i];\r\n                if (current && Object.prototype.hasOwnProperty.call(current, key)) {\r\n                    current = current[key];\r\n                } else {\r\n                    return typeof defaultValue === \"undefined\" ? undefined : defaultValue;\r\n                }\r\n            }\r\n\r\n            return current;\r\n        },\r\n\r\n        /**\r\n         * D√©finit une valeur via un chemin de type \"map.center\" ou \"basemaps.street.url\".\r\n         * Cr√©e les objets interm√©diaires si n√©cessaire.\r\n         *\r\n         * @param {string} path\r\n         * @param {*} value\r\n         */\r\n        set(path, value) {\r\n            if (!this._config) {\r\n                Log.warn(\"[GeoLeaf.Config.Storage] Configuration non initialis√©e.\");\r\n                return;\r\n            }\r\n\r\n            if (!path || typeof path !== \"string\") {\r\n                Log.warn(\"[GeoLeaf.Config.Storage] set() requiert un chemin string.\");\r\n                return;\r\n            }\r\n\r\n            const segments = path.split(\".\");\r\n            let current = this._config;\r\n\r\n            for (let i = 0; i < segments.length; i++) {\r\n                const key = segments[i];\r\n\r\n                if (i === segments.length - 1) {\r\n                    current[key] = value;\r\n                } else {\r\n                    if (\r\n                        !Object.prototype.hasOwnProperty.call(current, key) ||\r\n                        typeof current[key] !== \"object\" ||\r\n                        current[key] === null\r\n                    ) {\r\n                        current[key] = {};\r\n                    }\r\n                    current = current[key];\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Retourne une section de configuration (ex : \"basemaps\", \"map\").\r\n         *\r\n         * @param {string} sectionName\r\n         * @param {Object} [defaultValue]\r\n         * @returns {Object|*}\r\n         */\r\n        getSection(sectionName, defaultValue) {\r\n            if (!sectionName) {\r\n                return typeof defaultValue === \"undefined\" ? undefined : defaultValue;\r\n            }\r\n            const value = this.get(sectionName);\r\n            if (typeof value === \"undefined\") {\r\n                return typeof defaultValue === \"undefined\" ? undefined : defaultValue;\r\n            }\r\n            return value;\r\n        },\r\n\r\n        /**\r\n         * Fusion profonde (deep merge) simple pour objets JSON.\r\n         *\r\n         * @param {Object} target\r\n         * @param {Object} source\r\n         * @returns {Object}\r\n         */\r\n        deepMerge(target, source) {\r\n            const output = Object.assign({}, target || {});\r\n            if (!source || typeof source !== \"object\") {\r\n                return output;\r\n            }\r\n\r\n            Object.keys(source).forEach((key) => {\r\n                const srcVal = source[key];\r\n                const tgtVal = output[key];\r\n\r\n                if (\r\n                    srcVal &&\r\n                    typeof srcVal === \"object\" &&\r\n                    !Array.isArray(srcVal) &&\r\n                    tgtVal &&\r\n                    typeof tgtVal === \"object\" &&\r\n                    !Array.isArray(tgtVal)\r\n                ) {\r\n                    output[key] = this.deepMerge(tgtVal, srcVal);\r\n                } else {\r\n                    output[key] = srcVal;\r\n                }\r\n            });\r\n\r\n            return output;\r\n        },\r\n\r\n        /**\r\n         * Lecture d'une valeur via un chemin \"a.b.c\".\r\n         *\r\n         * @param {Object} source\r\n         * @param {string} path\r\n         * @returns {*}\r\n         */\r\n        getValueByPath(source, path) {\r\n            if (!source || !path) return undefined;\r\n            const parts = path.split(\".\");\r\n            let current = source;\r\n\r\n            for (let i = 0; i < parts.length; i += 1) {\r\n                if (current == null) {\r\n                    return undefined;\r\n                }\r\n                current = current[parts[i]];\r\n            }\r\n\r\n            return current;\r\n        },\r\n\r\n        /**\r\n         * √âcriture d'une valeur via un chemin \"a.b.c\".\r\n         * Cr√©e les sous-objets interm√©diaires si n√©cessaire.\r\n         *\r\n         * @param {Object} target\r\n         * @param {string} path\r\n         * @param {*} value\r\n         */\r\n        setValueByPath(target, path, value) {\r\n            if (!target || !path) return;\r\n            const parts = path.split(\".\");\r\n            let current = target;\r\n\r\n            for (let i = 0; i < parts.length - 1; i += 1) {\r\n                const key = parts[i];\r\n                if (\r\n                    !Object.prototype.hasOwnProperty.call(current, key) ||\r\n                    current[key] == null\r\n                ) {\r\n                    current[key] = {};\r\n                }\r\n                current = current[key];\r\n            }\r\n\r\n            current[parts[parts.length - 1]] = value;\r\n        }\r\n    };\r\n\r\n    // Exposer le module\r\n    GeoLeaf._ConfigStorage = StorageModule;\r\n})(window);\r\n","(function (global) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Namespace global GeoLeaf\r\n     */\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    /**\r\n     * Logger unifi√©\r\n     */\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module Config.Normalization\r\n     *\r\n     * Responsabilit√©s :\r\n     * - Normalisation structurelle des POI (mapping brut ‚Üí format GeoLeaf)\r\n     * - Application de mapping.json sur POI non normalis√©s\r\n     * - Normalisation des avis (reviews) : ancien/nouveau format\r\n     * - Validation de la structure POI : id/title/location\r\n     */\r\n    const NormalizationModule = {\r\n        /**\r\n         * Safe object assignment that prevents prototype pollution.\r\n         * Blocks dangerous keys: __proto__, constructor, prototype\r\n         * @param {Object} target\r\n         * @param {Object} source\r\n         * @returns {Object}\r\n         * @private\r\n         */\r\n        _safeAssign(target, source) {\r\n            const dangerousKeys = ['__proto__', 'constructor', 'prototype'];\r\n\r\n            for (const key in source) {\r\n                if (!source.hasOwnProperty(key)) continue;\r\n                if (dangerousKeys.includes(key)) {\r\n                    Log.warn('[GeoLeaf.Config.Normalization] Tentative de pollution de prototype bloqu√©e', { key });\r\n                    continue;\r\n                }\r\n                target[key] = source[key];\r\n            }\r\n\r\n            return target;\r\n        },\r\n\r\n        /**\r\n         * V√©rifie si un POI est d√©j√† normalis√© au format GeoLeaf :\r\n         * {\r\n         *   id: string,\r\n         *   title: string,\r\n         *   location: { lat: number, lng: number },\r\n         *   attributes?: object\r\n         * }\r\n         *\r\n         * @param {Object} poi\r\n         * @returns {boolean}\r\n         */\r\n        isPoiStructNormalized(poi) {\r\n            if (!poi || typeof poi !== \"object\") return false;\r\n\r\n            if (typeof poi.id !== \"string\" || poi.id.trim() === \"\") {\r\n                return false;\r\n            }\r\n\r\n            // Supporter les deux formats de label/titre\r\n            const hasTitle = typeof poi.title === \"string\" && poi.title.trim() !== \"\";\r\n            const hasLabel = typeof poi.label === \"string\" && poi.label.trim() !== \"\";\r\n            if (!hasTitle && !hasLabel) {\r\n                return false;\r\n            }\r\n\r\n            // Nouveau format : latlng = [lat, lng]\r\n            if (Array.isArray(poi.latlng) && poi.latlng.length >= 2) {\r\n                const lat = poi.latlng[0];\r\n                const lng = poi.latlng[1];\r\n                if (typeof lat === \"number\" && !Number.isNaN(lat) &&\r\n                    typeof lng === \"number\" && !Number.isNaN(lng)) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            // Ancien format : location.lat/lng\r\n            if (poi.location && typeof poi.location === \"object\") {\r\n                const lat = poi.location.lat;\r\n                const lng = poi.location.lng;\r\n                if (typeof lat === \"number\" && !Number.isNaN(lat) &&\r\n                    typeof lng === \"number\" && !Number.isNaN(lng)) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Applique un mapping brut ‚Üí POI normalis√© pour un POI donn√©.\r\n         *\r\n         * @param {Object} rawPoi\r\n         * @param {Object} mappingDef  mappingConfig.mapping\r\n         * @returns {Object|null}\r\n         */\r\n        mapRawPoiToNormalized(rawPoi, mappingDef) {\r\n            if (!rawPoi || !mappingDef || typeof mappingDef !== \"object\") {\r\n                return null;\r\n            }\r\n\r\n            const Storage = GeoLeaf._ConfigStorage;\r\n            if (!Storage) {\r\n                Log.error(\"[GeoLeaf.Config.Normalization] Module Storage non disponible.\");\r\n                return null;\r\n            }\r\n\r\n            // Socle minimal conforme au cahier des charges POI\r\n            const normalized = {\r\n                id: \"\",\r\n                title: \"\",\r\n                location: { lat: 0, lng: 0 },\r\n                attributes: {}\r\n            };\r\n\r\n            Object.keys(mappingDef).forEach((targetPath) => {\r\n                const sourcePath = mappingDef[targetPath];\r\n                if (!sourcePath) return;\r\n\r\n                const value = Storage.getValueByPath(rawPoi, sourcePath);\r\n                if (typeof value === \"undefined\") return;\r\n\r\n                Storage.setValueByPath(normalized, targetPath, value);\r\n            });\r\n\r\n            if (\r\n                !normalized.attributes ||\r\n                typeof normalized.attributes !== \"object\" ||\r\n                Array.isArray(normalized.attributes)\r\n            ) {\r\n                normalized.attributes = {};\r\n            }\r\n\r\n            return normalized;\r\n        },\r\n\r\n        /**\r\n         * Normalise structurellement un tableau de POI en utilisant\r\n         * √©ventuellement mapping.json du profil actif.\r\n         *\r\n         * R√®gles :\r\n         *  - SANS mapping.json :\r\n         *      ‚Üí on renvoie les POI tels quels (comportement 100 % r√©trocompatible).\r\n         *  - AVEC mapping.json :\r\n         *      ‚Üí si le POI est d√©j√† normalis√© ‚Üí on le garde tel quel ;\r\n         *      ‚Üí sinon, on applique le mapping ;\r\n         *      ‚Üí si apr√®s mapping le POI reste non normalis√© ‚Üí POI ignor√© (warning).\r\n         *\r\n         * @param {Array} rawPoiArray\r\n         * @param {Object|null} mappingConfig  mapping.json complet ou null\r\n         * @returns {Array}\r\n         */\r\n        normalizePoiWithMapping(rawPoiArray, mappingConfig) {\r\n            if (!Array.isArray(rawPoiArray)) {\r\n                return [];\r\n            }\r\n\r\n            const hasMapping =\r\n                mappingConfig &&\r\n                typeof mappingConfig === \"object\" &&\r\n                mappingConfig.mapping &&\r\n                typeof mappingConfig.mapping === \"object\";\r\n\r\n            // üîÅ CAS 1 ‚Äî AUCUN mapping.json fourni :\r\n            // on ne touche √† rien, on renvoie les POI du profil tels quels.\r\n            if (!hasMapping) {\r\n                Log.debug(\r\n                    \"[GeoLeaf.Config.Normalization] Aucun mapping.json fourni ; \" +\r\n                    \"les POI sont utilis√©s tels quels (aucune normalisation structurelle).\"\r\n                );\r\n                return rawPoiArray;\r\n            }\r\n\r\n            // üîÅ CAS 2 ‚Äî mapping.json pr√©sent : on applique vraiment la normalisation\r\n            const mappingDef = mappingConfig.mapping;\r\n            const result = [];\r\n\r\n            rawPoiArray.forEach((rawPoi, index) => {\r\n                // 1) D√©j√† normalis√© ‚Üí on garde\r\n                if (this.isPoiStructNormalized(rawPoi)) {\r\n                    result.push(rawPoi);\r\n                    return;\r\n                }\r\n\r\n                // 2) Non normalis√© + mapping ‚Üí tentative de normalisation\r\n                const normalized = this.mapRawPoiToNormalized(rawPoi, mappingDef);\r\n                if (normalized && this.isPoiStructNormalized(normalized)) {\r\n                    result.push(normalized);\r\n                } else {\r\n                    Log.warn(\r\n                        \"[GeoLeaf.Config.Normalization] POI non normalis√© m√™me apr√®s application du mapping ; POI ignor√©.\",\r\n                        {\r\n                            poiIndex: index,\r\n                            poiId: rawPoi && rawPoi.id\r\n                        }\r\n                    );\r\n                }\r\n            });\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Normalise le tableau de POI, notamment pour les avis (reviews).\r\n         *\r\n         * - Alimente syst√©matiquement `attributes.reviews` si des avis sont pr√©sents.\r\n         * - Supporte l'ancien format (tableau simple) et le nouveau format objet\r\n         *   `{ rating, count, summary, recent[] }`.\r\n         *\r\n         * @param {Array} poiArray\r\n         * @returns {Array}\r\n         */\r\n        normalizePoiArray(poiArray) {\r\n            if (!Array.isArray(poiArray)) {\r\n                return poiArray;\r\n            }\r\n\r\n            return poiArray.map((poi, index) => {\r\n                if (!poi || typeof poi !== \"object\") {\r\n                    return poi;\r\n                }\r\n\r\n                // Copie superficielle du POI avec protection contre la pollution de prototype\r\n                // Protection: on cr√©e un objet vide sans prototype et copie les propri√©t√©s\r\n                // en excluant __proto__, constructor, prototype\r\n                const normalized = this._safeAssign({}, poi);\r\n\r\n                // Bloc attributes existant ou nouveau\r\n                const baseAttributes =\r\n                    normalized.attributes &&\r\n                    typeof normalized.attributes === \"object\" &&\r\n                    !Array.isArray(normalized.attributes)\r\n                        ? normalized.attributes\r\n                        : {};\r\n\r\n                const attributes = this._safeAssign({}, baseAttributes);\r\n\r\n                // Handle reviews - preserve full structure when it exists\r\n                // 1) If attributes.reviews is already an object with recent array (new format), preserve it\r\n                if (\r\n                    attributes.reviews &&\r\n                    typeof attributes.reviews === \"object\" &&\r\n                    !Array.isArray(attributes.reviews) &&\r\n                    Array.isArray(attributes.reviews.recent)\r\n                ) {\r\n                    // Keep the full reviews object: { rating, count, summary, recent: [...] }\r\n                    // Just limit the recent array to 5\r\n                    attributes.reviews = {\r\n                        ...attributes.reviews,\r\n                        recent: attributes.reviews.recent.slice(0, 5)\r\n                    };\r\n                }\r\n                // 2) If poi.reviews is an object with recent array (new format at root), move to attributes\r\n                else if (\r\n                    normalized.reviews &&\r\n                    typeof normalized.reviews === \"object\" &&\r\n                    !Array.isArray(normalized.reviews) &&\r\n                    Array.isArray(normalized.reviews.recent)\r\n                ) {\r\n                    attributes.reviews = {\r\n                        ...normalized.reviews,\r\n                        recent: normalized.reviews.recent.slice(0, 5)\r\n                    };\r\n                }\r\n                // 3) Legacy: attributes.reviews is already a flat array\r\n                else if (Array.isArray(attributes.reviews)) {\r\n                    attributes.reviews = attributes.reviews.slice(0, 5);\r\n                }\r\n                // 4) Legacy: poi.reviews is a flat array at root\r\n                else if (Array.isArray(normalized.reviews)) {\r\n                    attributes.reviews = normalized.reviews.slice(0, 5);\r\n                }\r\n                // 5) Unexpected format\r\n                else if (normalized.reviews !== undefined || attributes.reviews !== undefined) {\r\n                    Log.warn(\"[GeoLeaf.Config.Normalization] Format de `reviews` inattendu pour le POI :\", {\r\n                        poiIndex: index,\r\n                        poiId: normalized.id,\r\n                        reviewsType: typeof normalized.reviews,\r\n                        attributesReviewsType: typeof attributes.reviews\r\n                    });\r\n                    attributes.reviews = [];\r\n                }\r\n                // 6) No reviews at all\r\n                else {\r\n                    attributes.reviews = [];\r\n                }\r\n\r\n                normalized.attributes = attributes;\r\n\r\n                return normalized;\r\n            });\r\n        }\r\n    };\r\n\r\n    // Exposer le module\r\n    GeoLeaf._ConfigNormalization = NormalizationModule;\r\n})(window);\r\n","(function (global) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Namespace global GeoLeaf\r\n     */\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    /**\r\n     * Logger unifi√©\r\n     */\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module Config.Taxonomy\r\n     *\r\n     * Responsabilit√©s :\r\n     * - Chargement et gestion de la taxonomie (cat√©gories/sous-cat√©gories)\r\n     * - Lecture des cat√©gories depuis mapping.json (ancienne taxonomie)\r\n     * - Lecture des cat√©gories depuis profile.json (nouvelle taxonomie)\r\n     * - API de consultation : getCategories(), getCategory(), getSubcategory()\r\n     */\r\n    const TaxonomyModule = {\r\n        /**\r\n         * Configuration interne (r√©f√©rence partag√©e)\r\n         * @type {Object}\r\n         * @private\r\n         */\r\n        _config: null,\r\n\r\n        /**\r\n         * Initialise le module avec une r√©f√©rence √† la config.\r\n         *\r\n         * @param {Object} config - R√©f√©rence √† l'objet de configuration global\r\n         */\r\n        init(config) {\r\n            this._config = config;\r\n        },\r\n\r\n        /**\r\n         * Charge un fichier de taxonomie (mapping cat√©gories / sous-cat√©gories)\r\n         * et le fusionne dans la configuration existante.\r\n         *\r\n         * @param {string} [url] - URL du fichier de mapping (depuis le profil)\r\n         * @param {Object} [options]\r\n         * @param {Object} [options.headers]\r\n         * @param {boolean} [options.strictContentType=true]\r\n         * @returns {Promise<Object>} - Objet categories consolid√©\r\n         */\r\n        loadTaxonomy(url = null, options = {}) {\r\n            const Loader = GeoLeaf._ConfigLoader;\r\n            if (!Loader) {\r\n                Log.error(\"[GeoLeaf.Config.Taxonomy] Module Loader non disponible.\");\r\n                return Promise.reject(new Error(\"Loader module not available\"));\r\n            }\r\n\r\n            if (!url) {\r\n                Log.info(\"[GeoLeaf.Config.Taxonomy] Aucune URL de mapping fournie ‚Äî skip.\");\r\n                return Promise.resolve({});\r\n            }\r\n\r\n            return Loader.loadUrl(url, options)\r\n                .then((cfg) => {\r\n                    const hasCategories =\r\n                        cfg &&\r\n                        typeof cfg === \"object\" &&\r\n                        cfg.categories &&\r\n                        typeof cfg.categories === \"object\" &&\r\n                        !Array.isArray(cfg.categories);\r\n\r\n                    if (!hasCategories) {\r\n                        Log.warn(\r\n                            \"[GeoLeaf.Config.Taxonomy] Fichier de mapping cat√©gories charg√© mais \" +\r\n                            \"aucune propri√©t√© 'categories' valide trouv√©e (attendu: { \\\"categories\\\": { ... } }).\"\r\n                        );\r\n                    } else {\r\n                        // Fusionner dans la config\r\n                        if (!this._config.categories || typeof this._config.categories !== \"object\") {\r\n                            this._config.categories = {};\r\n                        }\r\n                        Object.assign(this._config.categories, cfg.categories);\r\n\r\n                        Log.info(\r\n                            \"[GeoLeaf.Config.Taxonomy] Mapping cat√©gories fusionn√© avec succ√®s.\"\r\n                        );\r\n                    }\r\n\r\n                    return this.getCategories();\r\n                })\r\n                .catch((err) => {\r\n                    Log.error(\"[GeoLeaf.Config.Taxonomy] Erreur lors du chargement de la taxonomie :\", err);\r\n                    return {};\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Retourne l'objet complet des cat√©gories (mapping interne).\r\n         *\r\n         * @returns {Object} - { [categoryId]: { label, icon, colorFill, colorStroke, subcategories? } }\r\n         */\r\n        getCategories() {\r\n            if (!this._config) return {};\r\n            const cats = this._config.categories;\r\n            return (cats && typeof cats === \"object\" && !Array.isArray(cats)) ? cats : {};\r\n        },\r\n\r\n        /**\r\n         * Retourne une cat√©gorie √† partir de son identifiant.\r\n         *\r\n         * @param {string} categoryId\r\n         * @returns {Object|undefined}\r\n         */\r\n        getCategory(categoryId) {\r\n            if (!categoryId || typeof categoryId !== \"string\") {\r\n                return undefined;\r\n            }\r\n\r\n            const cats = this.getCategories();\r\n            if (!Object.prototype.hasOwnProperty.call(cats, categoryId)) {\r\n                return undefined;\r\n            }\r\n\r\n            return cats[categoryId];\r\n        },\r\n\r\n        /**\r\n         * Retourne une sous-cat√©gorie √† partir de son identifiant et de celui\r\n         * de la cat√©gorie parente.\r\n         *\r\n         * @param {string} categoryId\r\n         * @param {string} subCategoryId\r\n         * @returns {Object|undefined}\r\n         */\r\n        getSubcategory(categoryId, subCategoryId) {\r\n            if (\r\n                !categoryId || typeof categoryId !== \"string\" ||\r\n                !subCategoryId || typeof subCategoryId !== \"string\"\r\n            ) {\r\n                return undefined;\r\n            }\r\n\r\n            const category = this.getCategory(categoryId);\r\n            if (\r\n                !category ||\r\n                !category.subcategories ||\r\n                typeof category.subcategories !== \"object\" ||\r\n                Array.isArray(category.subcategories)\r\n            ) {\r\n                return undefined;\r\n            }\r\n\r\n            const subs = category.subcategories;\r\n            if (!Object.prototype.hasOwnProperty.call(subs, subCategoryId)) {\r\n                return undefined;\r\n            }\r\n\r\n            return subs[subCategoryId];\r\n        }\r\n    };\r\n\r\n    // Exposer le module\r\n    GeoLeaf._ConfigTaxonomy = TaxonomyModule;\r\n})(window);\r\n","/**\r\n * @fileoverview Chargeur de profil V3.0 pour GeoLeaf\r\n * G√®re le chargement modulaire des profils avec structure V3:\r\n * - profile.json (m√©tadonn√©es)\r\n * - taxonomy.json (cat√©gories/sous-cat√©gories)\r\n * - themes.json (th√®mes visuels)\r\n * - layers.json (index des couches)\r\n * - layers/{layerId}/{layerId}_config.json (config par couche)\r\n * @module config/profile-v3-loader\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module de chargement de profils V3.0\r\n     * @namespace ProfileV3Loader\r\n     */\r\n    const ProfileV3Loader = {\r\n        /**\r\n         * Charge un profil v3.0 avec structure modulaire\r\n         * @param {Object} profile - Objet profile.json v3.0\r\n         * @param {string} baseUrl - URL de base du profil\r\n         * @param {string} profileId - ID du profil\r\n         * @param {number} timestamp - Timestamp pour cache busting\r\n         * @param {Object} fetchOptions - Options de fetch\r\n         * @returns {Promise<Object>} Profil enrichi avec toutes les donn√©es charg√©es\r\n         */\r\n        async loadV3Profile(profile, baseUrl, profileId, timestamp = Date.now(), fetchOptions = {}) {\r\n            const Loader = GeoLeaf._ConfigLoader;\r\n\r\n            if (!Loader) {\r\n                throw new Error(\"GeoLeaf._ConfigLoader non disponible\");\r\n            }\r\n\r\n            Log.info(`[ProfileV3Loader] Chargement profil V3.0: ${profileId}`);\r\n\r\n            try {\r\n                // 1. Charger les ressources en parall√®le\r\n                const [taxonomyData, themesData, layersFileData] = await Promise.all([\r\n                    this._loadTaxonomy(profile, baseUrl, timestamp, fetchOptions),\r\n                    this._loadThemes(profile, baseUrl, timestamp, fetchOptions),\r\n                    this._loadLayersFile(profile, baseUrl, timestamp, fetchOptions)\r\n                ]);\r\n\r\n                // 2. D√©terminer la source des layers\r\n                const layersSource = layersFileData || profile.layers || [];\r\n\r\n                // 3. Charger les configurations individuelles des layers\r\n                const layersConfigs = await this._loadLayerConfigs(\r\n                    layersSource,\r\n                    baseUrl,\r\n                    timestamp,\r\n                    fetchOptions\r\n                );\r\n\r\n                // 4. Construire le profil enrichi\r\n                const enrichedProfile = this._buildEnrichedProfile({\r\n                    profile,\r\n                    baseUrl,\r\n                    profileId,\r\n                    taxonomy: taxonomyData,\r\n                    themes: themesData,\r\n                    layersSource,\r\n                    layersConfigs\r\n                });\r\n\r\n                Log.info(\"[ProfileV3Loader] Profil V3.0 charg√© avec succ√®s\", {\r\n                    profileId,\r\n                    hasTaxonomy: !!enrichedProfile.taxonomy,\r\n                    hasThemes: !!enrichedProfile.themes,\r\n                    layersCount: enrichedProfile.layers ? enrichedProfile.layers.length : 0\r\n                });\r\n\r\n                return enrichedProfile;\r\n\r\n            } catch (error) {\r\n                Log.error(\"[ProfileV3Loader] Erreur chargement profil V3.0:\", error);\r\n                throw error;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * V√©rifie si des features GeoJSON ont des categoryId/subCategoryId\r\n         * @private\r\n         * @returns {boolean} true si au moins une feature a des cat√©gories\r\n         */\r\n        _shouldLoadTaxonomy() {\r\n            // Toujours charger la taxonomie si elle est r√©f√©renc√©e dans le profil\r\n            // Les features GeoJSON ne sont pas encore charg√©es √† ce stade\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Charge taxonomy.json si r√©f√©renc√© ET si des features ont des cat√©gories\r\n         * @private\r\n         */\r\n        async _loadTaxonomy(profile, baseUrl, timestamp, fetchOptions) {\r\n            const Loader = GeoLeaf._ConfigLoader;\r\n            const taxonomyFile = profile.Files?.taxonomyFile || profile.taxonomyFile;\r\n\r\n            if (!taxonomyFile && !profile.taxonomy) {\r\n                return null;\r\n            }\r\n\r\n            // V√©rifier si on doit charger la taxonomy (si features ont des cat√©gories)\r\n            const shouldLoad = this._shouldLoadTaxonomy();\r\n            if (!shouldLoad) {\r\n                Log.info(\"[ProfileV3Loader] Taxonomy.json non charg√© (aucune cat√©gorie d√©tect√©e dans les donn√©es)\");\r\n                return null;\r\n            }\r\n\r\n            if (taxonomyFile) {\r\n                try {\r\n                    const taxonomy = await Loader.fetchJson(\r\n                        `${baseUrl}/${taxonomyFile}?t=${timestamp}`,\r\n                        fetchOptions\r\n                    );\r\n                    Log.info(\"[ProfileV3Loader] Taxonomy.json charg√© avec succ√®s\");\r\n                    return taxonomy;\r\n                } catch (err) {\r\n                    Log.warn(\"[ProfileV3Loader] Erreur chargement taxonomy.json:\", err);\r\n                    return null;\r\n                }\r\n            }\r\n\r\n            return profile.taxonomy || null;\r\n        },\r\n\r\n        /**\r\n         * Charge themes.json si r√©f√©renc√©\r\n         * @private\r\n         */\r\n        async _loadThemes(profile, baseUrl, timestamp, fetchOptions) {\r\n            const Loader = GeoLeaf._ConfigLoader;\r\n            const themesFile = profile.Files?.themesFile || profile.themesFile;\r\n\r\n            if (themesFile) {\r\n                try {\r\n                    const themes = await Loader.fetchJson(\r\n                        `${baseUrl}/${themesFile}?t=${timestamp}`,\r\n                        fetchOptions\r\n                    );\r\n                    return themes;\r\n                } catch (err) {\r\n                    Log.warn(\"[ProfileV3Loader] Erreur chargement themes.json:\", err);\r\n                    return null;\r\n                }\r\n            }\r\n\r\n            return profile.themes || null;\r\n        },\r\n\r\n        /**\r\n         * Charge layers.json si r√©f√©renc√©\r\n         * @private\r\n         */\r\n        async _loadLayersFile(profile, baseUrl, timestamp, fetchOptions) {\r\n            const Loader = GeoLeaf._ConfigLoader;\r\n            const layersFile = profile.Files?.layersFile;\r\n\r\n            if (layersFile) {\r\n                try {\r\n                    const layers = await Loader.fetchJson(\r\n                        `${baseUrl}/${layersFile}?t=${timestamp}`,\r\n                        fetchOptions\r\n                    );\r\n                    return layers;\r\n                } catch (err) {\r\n                    Log.warn(\"[ProfileV3Loader] Erreur chargement layers.json:\", err);\r\n                    return null;\r\n                }\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Charge les configurations individuelles des layers\r\n         * @private\r\n         */\r\n        async _loadLayerConfigs(layersSource, baseUrl, timestamp, fetchOptions) {\r\n            const Loader = GeoLeaf._ConfigLoader;\r\n\r\n            if (!Array.isArray(layersSource) || layersSource.length === 0) {\r\n                return [];\r\n            }\r\n\r\n            const promises = layersSource.map(async (layerRef) => {\r\n                if (!layerRef.configFile) {\r\n                    return {\r\n                        id: layerRef.id,\r\n                        config: null,\r\n                        layerDirectory: null,\r\n                        layerManagerId: layerRef.layerManagerId || null\r\n                    };\r\n                }\r\n\r\n                const layerDirectory = layerRef.configFile.replace(/\\/[^\\/]+$/, '');\r\n\r\n                try {\r\n                    const layerConfig = await Loader.fetchJson(\r\n                        `${baseUrl}/${layerRef.configFile}?t=${timestamp}`,\r\n                        fetchOptions\r\n                    );\r\n\r\n                    return {\r\n                        id: layerRef.id,\r\n                        config: layerConfig,\r\n                        layerDirectory: layerDirectory,\r\n                        layerManagerId: layerRef.layerManagerId || null\r\n                    };\r\n                } catch (err) {\r\n                    Log.error(`[ProfileV3Loader] Erreur chargement ${layerRef.configFile}:`, err);\r\n                    return {\r\n                        id: layerRef.id,\r\n                        config: null,\r\n                        layerDirectory: layerDirectory,\r\n                        layerManagerId: layerRef.layerManagerId || null\r\n                    };\r\n                }\r\n            });\r\n\r\n            return Promise.all(promises);\r\n        },\r\n\r\n        /**\r\n         * Construit le profil enrichi avec toutes les donn√©es charg√©es\r\n         * @private\r\n         */\r\n        _buildEnrichedProfile(params) {\r\n            const { profile, baseUrl, profileId, taxonomy, themes, layersSource, layersConfigs } = params;\r\n\r\n            const enrichedProfile = { ...profile };\r\n\r\n            // Ajouter le basePath pour r√©solution des chemins\r\n            enrichedProfile.basePath = baseUrl;\r\n            enrichedProfile._profileId = profileId;\r\n\r\n            // Int√©grer la taxonomie\r\n            if (taxonomy) {\r\n                enrichedProfile.taxonomy = taxonomy;\r\n            }\r\n\r\n            // Int√©grer les th√®mes\r\n            if (themes) {\r\n                enrichedProfile.themes = themes;\r\n            }\r\n\r\n            // Int√©grer les configurations de couches\r\n            if (layersConfigs && layersConfigs.length > 0) {\r\n                enrichedProfile.layers = layersConfigs.map(layerData => {\r\n                    if (layerData.config) {\r\n                        // Ajouter le layerDirectory, profileId ET layerManagerId √† la config\r\n                        const normalized = {\r\n                            ...layerData.config,\r\n                            _layerDirectory: layerData.layerDirectory,\r\n                            _profileId: profileId,\r\n                            layerManagerId: layerData.layerManagerId || layerData.config.layerManagerId || 'geojson-default'\r\n                        };\r\n\r\n                        // Normaliser data.file ‚Üí dataFile pour compatibilit√© GeoJSON loader\r\n                        if (normalized.data && normalized.data.file && !normalized.dataFile) {\r\n                            const dataDir = normalized.data.directory || 'data';\r\n                            normalized.dataFile = `${dataDir}/${normalized.data.file}`;\r\n                        }\r\n\r\n                        return normalized;\r\n                    }\r\n                    // Fallback si erreur de chargement\r\n                    const original = layersSource.find(l => l.id === layerData.id);\r\n                    return original || { id: layerData.id, error: \"Failed to load config\" };\r\n                });\r\n            }\r\n\r\n            return enrichedProfile;\r\n        },\r\n\r\n        /**\r\n         * D√©termine si un profil utilise la structure V3.0\r\n         * @param {Object} profile - Objet profile.json\r\n         * @returns {boolean} True si V3.0\r\n         */\r\n        isV3Profile(profile) {\r\n            if (!profile || typeof profile !== 'object') {\r\n                return false;\r\n            }\r\n\r\n            // D√©tection V3.0: pr√©sence de Files ou version >= 3.0.0\r\n            if (profile.Files && typeof profile.Files === 'object') {\r\n                return true;\r\n            }\r\n\r\n            if (profile.version) {\r\n                const versionMatch = profile.version.match(/^(\\d+)\\.(\\d+)/);\r\n                if (versionMatch) {\r\n                    const major = parseInt(versionMatch[1], 10);\r\n                    return major >= 3;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        }\r\n    };\r\n\r\n    // Exposer le module\r\n    GeoLeaf._ProfileV3Loader = ProfileV3Loader;\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Namespace global GeoLeaf\r\n     */\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    /**\r\n     * Logger unifi√©\r\n     */\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module Config.Profile\r\n     *\r\n     * Responsabilit√©s :\r\n     * - Chargement des profils m√©tier (tourism, etc.)\r\n     * - Gestion des ressources de profil : profile.json, poi.json, routes.json, mapping.json\r\n     * - API de consultation : getActiveProfile*()\r\n     * - √âv√©nements DOM : geoleaf:profile:loaded\r\n     */\r\n    const ProfileModule = {\r\n        /**\r\n         * Configuration interne (r√©f√©rence partag√©e)\r\n         * @type {Object}\r\n         * @private\r\n         */\r\n        _config: null,\r\n\r\n        /**\r\n         * Profil actuellement actif (ID du profil).\r\n         * @type {string|null}\r\n         * @private\r\n         */\r\n        _activeProfileId: null,\r\n\r\n        /**\r\n         * Description du profil actif (contenu de profile.json).\r\n         * @type {Object|null}\r\n         * @private\r\n         */\r\n        _activeProfile: null,\r\n\r\n        /**\r\n         * Donn√©es rattach√©es au profil actif :\r\n         * - poi.json normalis√©\r\n         * - routes.json\r\n         * - mapping.json\r\n         * @type {{poi: Array, routes: Array, mapping: Object|null}}\r\n         * @private\r\n         */\r\n        _activeProfileData: {\r\n            poi: [],\r\n            routes: [],\r\n            mapping: null\r\n        },\r\n\r\n        /**\r\n         * Initialise le module avec une r√©f√©rence √† la config.\r\n         *\r\n         * @param {Object} config - R√©f√©rence √† l'objet de configuration global\r\n         */\r\n        init(config) {\r\n            this._config = config;\r\n        },\r\n\r\n        /**\r\n         * Indique si l'usage de mapping.json pour normaliser les POI de profil est activ√©.\r\n         *\r\n         * üîé Cherche plusieurs noms possibles dans config.data pour rester robuste :\r\n         *   - config.data.enableProfilePoiMapping (nom recommand√©)\r\n         *   - config.data.useProfilePoiMapping\r\n         *   - config.data.useMapping (compatibilit√© √©ventuelle)\r\n         *\r\n         * @returns {boolean} true si le mapping doit √™tre utilis√©, false sinon.\r\n         */\r\n        isProfilePoiMappingEnabled() {\r\n            const dataCfg = this._config && this._config.data;\r\n            if (!dataCfg || typeof dataCfg !== \"object\") {\r\n                return true; // par d√©faut : mapping actif\r\n            }\r\n\r\n            if (typeof dataCfg.enableProfilePoiMapping === \"boolean\") {\r\n                return dataCfg.enableProfilePoiMapping;\r\n            }\r\n            if (typeof dataCfg.useProfilePoiMapping === \"boolean\") {\r\n                return dataCfg.useProfilePoiMapping;\r\n            }\r\n            if (typeof dataCfg.useMapping === \"boolean\") {\r\n                return dataCfg.useMapping;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Charge les ressources li√©es au profil actif :\r\n         * - profile.json\r\n         * - poi.json\r\n         * - mapping.json\r\n         * - routes.json\r\n         *\r\n         * Utilise config.data.activeProfile et config.data.profilesBasePath.\r\n         * Injecte aussi, pour compatibilit√©, les POI et routes dans this._config.poi / this._config.routes.\r\n         * Injecte d√©sormais la taxonomie (categories) depuis profile.json dans this._config.categories.\r\n         *\r\n         * @param {Object} [options]\r\n         * @param {Object} [options.headers] - Headers HTTP optionnels.\r\n         * @param {boolean} [options.strictContentType=true] - Validation stricte du Content-Type.\r\n         * @returns {Promise<Object>} Configuration consolid√©e incluant les donn√©es du profil.\r\n         */\r\n        loadActiveProfileResources(options = {}) {\r\n            const dataCfg = this._config && this._config.data;\r\n            if (!dataCfg || !dataCfg.activeProfile) {\r\n                Log.info(\r\n                    \"[GeoLeaf.Config.Profile] Aucun profil actif d√©fini dans config.data.activeProfile ; aucun chargement de profil effectu√©.\"\r\n                );\r\n                return Promise.resolve(this._config);\r\n            }\r\n\r\n            // Nouveau : mode layers-only (pas de poi.json / routes.json). Par d√©faut activ√©.\r\n            const useLegacyProfileData =\r\n                typeof dataCfg.useLegacyProfileData === \"boolean\"\r\n                    ? dataCfg.useLegacyProfileData\r\n                    : false;\r\n\r\n            const profileId = dataCfg.activeProfile;\r\n            const basePath = dataCfg.profilesBasePath || \"data/profiles\";\r\n            const baseUrl = `${basePath}/${profileId}`;\r\n\r\n            Log.info(\"[GeoLeaf.Config.Profile] D√©but du chargement du profil :\", {\r\n                profileId,\r\n                baseUrl,\r\n                configData: dataCfg\r\n            });\r\n\r\n            const fetchOptions = {\r\n                headers: options.headers || {},\r\n                strictContentType:\r\n                    typeof options.strictContentType === \"boolean\"\r\n                        ? options.strictContentType\r\n                        : true\r\n            };\r\n\r\n            const Loader = GeoLeaf._ConfigLoader;\r\n            const Normalization = GeoLeaf._ConfigNormalization;\r\n\r\n            if (!Loader || !Normalization) {\r\n                Log.error(\"[GeoLeaf.Config.Profile] Modules Loader ou Normalization non disponibles.\");\r\n                return Promise.reject(new Error(\"Required modules not available\"));\r\n            }\r\n\r\n            // üîß Nouveau : pilotage global de l'usage de mapping.json via config.data.*\r\n            const isPoiMappingEnabled = this.isProfilePoiMappingEnabled();\r\n            if (!isPoiMappingEnabled) {\r\n                Log.info(\r\n                    \"[GeoLeaf.Config.Profile] Mapping de POI d√©sactiv√© via configuration globale ; \" +\r\n                    \"les POI du profil seront consid√©r√©s comme d√©j√† normalis√©s.\"\r\n                );\r\n            }\r\n\r\n            Log.info(\"[GeoLeaf.Config.Profile] Chargement des ressources du profil actif :\", {\r\n                profileId,\r\n                baseUrl\r\n            });\r\n\r\n            const timestamp = Date.now();\r\n\r\n            // Branche legacy (maintien backward compat) : charge poi.json/routes.json\r\n            if (useLegacyProfileData) {\r\n                // Si le mapping est d√©sactiv√©, on ne charge pas mapping.json (Promise.resolve(null))\r\n                const mappingPromise = isPoiMappingEnabled\r\n                    ? Loader.fetchJson(`${baseUrl}/mapping.json?t=${timestamp}`, fetchOptions)\r\n                    : Promise.resolve(null);\r\n\r\n                // routes.json est optionnel - on tente de le charger mais on tol√®re son absence\r\n                const routesPromise = Loader.fetchJson(`${baseUrl}/routes.json?t=${timestamp}`, fetchOptions)\r\n                    .catch(() => {\r\n                        Log.info(\"[GeoLeaf.Config.Profile] routes.json non disponible ou invalide, utilisation d'un tableau vide.\");\r\n                        return [];\r\n                    });\r\n\r\n                return Promise.all([\r\n                    Loader.fetchJson(`${baseUrl}/profile.json?t=${timestamp}`, fetchOptions),\r\n                    Loader.fetchJson(`${baseUrl}/poi.json?t=${timestamp}`, fetchOptions),\r\n                    mappingPromise,\r\n                    routesPromise\r\n                ])\r\n                    .then(([profile, poi, mapping, routes]) => {\r\n                        return this._finalizeProfileLoad({\r\n                            profile,\r\n                            poi,\r\n                            routes,\r\n                            mapping,\r\n                            mappingEnabled: isPoiMappingEnabled\r\n                        });\r\n                    })\r\n                    .catch((err) => {\r\n                        Log.error(\r\n                            \"[GeoLeaf.Config.Profile] Erreur lors du chargement des ressources du profil actif :\",\r\n                            err\r\n                        );\r\n                        return this._config;\r\n                    });\r\n            }\r\n\r\n            // Nouveau chemin : layers-only. On charge d'abord profile.json pour v√©rifier si mapping est requis.\r\n            return Loader.fetchJson(`${baseUrl}/profile.json?t=${timestamp}`, fetchOptions)\r\n                .then((profile) => {\r\n                    // Utiliser la logique de d√©tection du ProfileV3Loader pour coh√©rence\r\n                    const isV3 = GeoLeaf._ProfileV3Loader && GeoLeaf._ProfileV3Loader.isV3Profile(profile);\r\n\r\n                    if (isV3) {\r\n                        Log.info(\"[GeoLeaf.Config.Profile] Profil v3.0 d√©tect√© - Chargement modulaire\");\r\n                        // Pour v3.0, retourner directement la config (pas besoin du .then suivant)\r\n                        return this._loadV3Profile(profile, baseUrl, timestamp, fetchOptions);\r\n                    }\r\n\r\n                    // Version 2.0 (ancien comportement)\r\n                    // V√©rifier si au moins une couche a normalized:false (n√©cessite mapping)\r\n                    let requiresMapping = false;\r\n                    if (profile && Array.isArray(profile.layers)) {\r\n                        requiresMapping = profile.layers.some(layer => layer.normalized === false);\r\n                    }\r\n\r\n                    // Charger mapping seulement si requis\r\n                    const mappingPromise = isPoiMappingEnabled && requiresMapping\r\n                        ? Loader.fetchJson(`${baseUrl}/mapping.json?t=${timestamp}`, fetchOptions).catch((err) => {\r\n                              Log.error(\"[GeoLeaf.Config.Profile] mapping.json requis (normalized:false) mais non trouv√© ou invalide.\", err);\r\n                              return null;\r\n                          })\r\n                        : Promise.resolve(null);\r\n\r\n                    return Promise.all([Promise.resolve(profile), mappingPromise]);\r\n                })\r\n                .then((result) => {\r\n                    // Si c'est un profil v3.0, on le retourne directement (pas un array)\r\n                    if (result && !Array.isArray(result)) {\r\n                        return result;\r\n                    }\r\n\r\n                    // Sinon c'est un array [profile, mapping] (v2.0)\r\n                    const [profile, mapping] = result;\r\n                    this._activeProfileId = profileId;\r\n                    this._activeProfile = profile || null;\r\n\r\n                    Log.info(\"[GeoLeaf.Config.Profile] Profil charg√© (layers-only)\", {\r\n                        profileId,\r\n                        profileLoaded: !!profile,\r\n                        profileKeys: profile ? Object.keys(profile) : []\r\n                    });\r\n\r\n                    // Dans ce mode, on ne pr√©charge pas les POI/Routes : ils seront lus via GeoJSON layers.\r\n                    this._activeProfileData = {\r\n                        poi: [],\r\n                        routes: [],\r\n                        mapping: mapping && typeof mapping === \"object\" ? mapping : null\r\n                    };\r\n\r\n                    // Taxonomie : reste depuis profile.json\r\n                    if (\r\n                        profile &&\r\n                        typeof profile === \"object\" &&\r\n                        profile.taxonomy &&\r\n                        profile.taxonomy.categories &&\r\n                        typeof profile.taxonomy.categories === \"object\" &&\r\n                        !Array.isArray(profile.taxonomy.categories)\r\n                    ) {\r\n                        this._config.categories = profile.taxonomy.categories;\r\n                        Log.info(\r\n                            \"[GeoLeaf.Config.Profile] Taxonomie des cat√©gories charg√©e (layers-only).\",\r\n                            {\r\n                                profileId,\r\n                                categoriesCount: Object.keys(profile.taxonomy.categories || {}).length\r\n                            }\r\n                        );\r\n                    }\r\n\r\n                    // Stockage par profil\r\n                    if (\r\n                        !this._config.profiles ||\r\n                        typeof this._config.profiles !== \"object\" ||\r\n                        Array.isArray(this._config.profiles)\r\n                    ) {\r\n                        this._config.profiles = {};\r\n                    }\r\n\r\n                    this._config.profiles[profileId] = {\r\n                        profile: this._activeProfile,\r\n                        poi: this._activeProfileData.poi,\r\n                        routes: this._activeProfileData.routes,\r\n                        mapping: this._activeProfileData.mapping\r\n                    };\r\n\r\n                    // √âv√©nement pour les autres modules\r\n                    this._fireProfileLoadedEvent(profileId, {\r\n                        profile: this._activeProfile,\r\n                        poi: this._activeProfileData.poi,\r\n                        routes: this._activeProfileData.routes,\r\n                        mapping: this._activeProfileData.mapping\r\n                    });\r\n\r\n                    return this._config;\r\n                })\r\n                .catch((err) => {\r\n                    Log.error(\r\n                        \"[GeoLeaf.Config.Profile] Erreur lors du chargement des ressources du profil actif :\",\r\n                        err\r\n                    );\r\n                    return this._config;\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Charge un profil v3.0 avec structure modulaire\r\n         * @param {Object} profile - Objet profile.json v3.0\r\n         * @param {string} baseUrl - URL de base du profil\r\n         * @param {number} timestamp - Timestamp pour cache busting\r\n         * @param {Object} fetchOptions - Options de fetch\r\n         * @returns {Promise<Object>} Config consolid√©e\r\n         * @private\r\n         */\r\n        _loadV3Profile(profile, baseUrl, timestamp, fetchOptions) {\r\n            const profileId = this._config.data.activeProfile;\r\n\r\n            // Utiliser le ProfileV3Loader pour charger le profil\r\n            if (!GeoLeaf._ProfileV3Loader) {\r\n                Log.error(\"[GeoLeaf.Config.Profile] ProfileV3Loader non disponible\");\r\n                return Promise.reject(new Error(\"ProfileV3Loader non disponible\"));\r\n            }\r\n\r\n            return GeoLeaf._ProfileV3Loader.loadV3Profile(\r\n                profile,\r\n                baseUrl,\r\n                profileId,\r\n                timestamp,\r\n                fetchOptions\r\n            ).then(enrichedProfile => {\r\n                // Stocker le profil enrichi\r\n                this._activeProfileId = profileId;\r\n                this._activeProfile = enrichedProfile;\r\n\r\n                Log.info(\"[GeoLeaf.Config.Profile] Profil v3.0 charg√© avec succ√®s\", {\r\n                    profileId,\r\n                    hasTaxonomy: !!enrichedProfile.taxonomy,\r\n                    hasThemes: !!enrichedProfile.themes,\r\n                    layersCount: enrichedProfile.layers ? enrichedProfile.layers.length : 0\r\n                });\r\n\r\n                this._activeProfileData = {\r\n                    poi: [],\r\n                    routes: [],\r\n                    mapping: null\r\n                };\r\n\r\n                // Stocker la taxonomie dans config.categories pour compatibilit√©\r\n                if (enrichedProfile.taxonomy && enrichedProfile.taxonomy.categories) {\r\n                    this._config.categories = enrichedProfile.taxonomy.categories;\r\n                    Log.info(\"[GeoLeaf.Config.Profile] Taxonomie charg√©e depuis v3.0\", {\r\n                        categoriesCount: Object.keys(enrichedProfile.taxonomy.categories || {}).length\r\n                    });\r\n                }\r\n\r\n                // Copier toutes les propri√©t√©s du profil dans this._config\r\n                Object.keys(enrichedProfile).forEach(key => {\r\n                    if (key !== 'layers' && key !== 'taxonomy' && key !== 'themes') {\r\n                        this._config[key] = enrichedProfile[key];\r\n                    }\r\n                });\r\n\r\n                // Stocker par profil\r\n                if (!this._config.profiles || typeof this._config.profiles !== \"object\") {\r\n                    this._config.profiles = {};\r\n                }\r\n\r\n                this._config.profiles[profileId] = {\r\n                    profile: this._activeProfile,\r\n                    poi: [],\r\n                    routes: [],\r\n                    mapping: null\r\n                };\r\n\r\n                // √âv√©nement\r\n                this._fireProfileLoadedEvent(profileId, {\r\n                    profile: this._activeProfile,\r\n                    poi: [],\r\n                    routes: [],\r\n                    mapping: null\r\n                });\r\n\r\n                return enrichedProfile;\r\n            });\r\n        },\r\n\r\n        // Factorise la fin du chargement (branche legacy uniquement)\r\n        _finalizeProfileLoad({ profile, poi, routes, mapping, mappingEnabled }) {\r\n            const Normalization = GeoLeaf._ConfigNormalization;\r\n\r\n            this._activeProfile = profile || null;\r\n\r\n            Log.info(\r\n                \"[GeoLeaf.Config.Profile] Profil charg√© depuis profile.json :\",\r\n                {\r\n                    profileId: this._activeProfileId,\r\n                    profileLoaded: profile !== null && profile !== undefined,\r\n                    profileKeys: profile ? Object.keys(profile) : []\r\n                }\r\n            );\r\n\r\n            // Si le mapping est coup√© au niveau global, on l'ignore m√™me s'il existe\r\n            const mappingForNormalization =\r\n                mappingEnabled && mapping && typeof mapping === \"object\"\r\n                    ? mapping\r\n                    : null;\r\n\r\n            // 1) Normalisation STRUCTURELLE des POI\r\n            const structurallyNormalizedPoi = Array.isArray(poi)\r\n                ? Normalization.normalizePoiWithMapping(poi, mappingForNormalization)\r\n                : [];\r\n\r\n            // 2) Normalisation m√©tier des avis\r\n            const normalizedPoi = Normalization.normalizePoiArray(structurallyNormalizedPoi);\r\n\r\n            const safeMapping = mappingForNormalization;\r\n            const safeRoutes = Array.isArray(routes) ? routes : [];\r\n\r\n            this._activeProfileData = {\r\n                poi: normalizedPoi,\r\n                mapping: safeMapping,\r\n                routes: safeRoutes\r\n            };\r\n\r\n            // Injection r√©trocompatible dans la config globale\r\n            if (normalizedPoi.length) {\r\n                this._config.poi = normalizedPoi;\r\n            }\r\n            if (safeRoutes.length) {\r\n                this._config.routes = safeRoutes;\r\n            }\r\n\r\n            // Taxonomie\r\n            if (\r\n                profile &&\r\n                typeof profile === \"object\" &&\r\n                profile.taxonomy &&\r\n                profile.taxonomy.categories &&\r\n                typeof profile.taxonomy.categories === \"object\" &&\r\n                !Array.isArray(profile.taxonomy.categories)\r\n            ) {\r\n                this._config.categories = profile.taxonomy.categories;\r\n                Log.info(\r\n                    \"[GeoLeaf.Config.Profile] Taxonomie des cat√©gories charg√©e depuis le profil actif.\",\r\n                    {\r\n                        profileId: this._activeProfileId,\r\n                        categoriesCount: Object.keys(profile.taxonomy.categories || {}).length\r\n                    }\r\n                );\r\n            }\r\n\r\n            // Stockage par profil\r\n            if (\r\n                !this._config.profiles ||\r\n                typeof this._config.profiles !== \"object\" ||\r\n                Array.isArray(this._config.profiles)\r\n            ) {\r\n                this._config.profiles = {};\r\n            }\r\n\r\n            this._config.profiles[this._activeProfileId] = {\r\n                profile: this._activeProfile,\r\n                poi: this._activeProfileData.poi,\r\n                routes: this._activeProfileData.routes,\r\n                mapping: this._activeProfileData.mapping\r\n            };\r\n\r\n            // √âv√©nement\r\n            this._fireProfileLoadedEvent(this._activeProfileId, {\r\n                profile: this._activeProfile,\r\n                poi: this._activeProfileData.poi,\r\n                routes: this._activeProfileData.routes,\r\n                mapping: this._activeProfileData.mapping\r\n            });\r\n\r\n            return this._config;\r\n        },\r\n\r\n        /**\r\n         * Retourne l'identifiant du profil actuellement charg√© (ou null).\r\n         *\r\n         * @returns {string|null}\r\n         */\r\n        getActiveProfileId() {\r\n            return this._activeProfileId;\r\n        },\r\n\r\n        /**\r\n         * Retourne l'objet profile.json du profil actif (ou null).\r\n         *\r\n         * @returns {Object|null}\r\n         */\r\n        getActiveProfile() {\r\n            return this._activeProfile;\r\n        },\r\n\r\n        /**\r\n         * Retourne le tableau de POI normalis√©s du profil actif.\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        getActiveProfilePoi() {\r\n            return (this._activeProfileData && Array.isArray(this._activeProfileData.poi))\r\n                ? this._activeProfileData.poi\r\n                : [];\r\n        },\r\n\r\n        /**\r\n         * Retourne le tableau de routes du profil actif.\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        getActiveProfileRoutes() {\r\n            return (this._activeProfileData && Array.isArray(this._activeProfileData.routes))\r\n                ? this._activeProfileData.routes\r\n                : [];\r\n        },\r\n\r\n        /**\r\n         * Retourne l'objet de mapping du profil actif (mapping.json).\r\n         *\r\n         * @returns {Object|null}\r\n         */\r\n        getActiveProfileMapping() {\r\n            return (this._activeProfileData && this._activeProfileData.mapping)\r\n                ? this._activeProfileData.mapping\r\n                : null;\r\n        },\r\n\r\n        /**\r\n         * Retourne la configuration des ic√¥nes depuis la taxonomie du profil actif.\r\n         *\r\n         * @returns {Object|null}\r\n         */\r\n        getIconsConfig() {\r\n            return (this._activeProfile && this._activeProfile.taxonomy && this._activeProfile.taxonomy.icons)\r\n                ? this._activeProfile.taxonomy.icons\r\n                : null;\r\n        },\r\n\r\n        /**\r\n         * Retourne les configurations de couches charg√©es depuis le profil actif v3.0\r\n         *\r\n         * @returns {Array|null}\r\n         */\r\n        getActiveProfileLayersConfig() {\r\n            return (this._activeProfile && this._activeProfile.layers)\r\n                ? this._activeProfile.layers\r\n                : null;\r\n        },\r\n\r\n        /**\r\n         * √âmet un √©v√©nement DOM \"geoleaf:profile:loaded\" lorsque le profil\r\n         * actif et ses donn√©es associ√©es sont charg√©s.\r\n         *\r\n         * @param {string} profileId\r\n         * @param {Object} payload\r\n         * @private\r\n         */\r\n        _fireProfileLoadedEvent(profileId, payload) {\r\n            if (typeof document === \"undefined\" || typeof document.dispatchEvent !== \"function\") {\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const event = new CustomEvent(\"geoleaf:profile:loaded\", {\r\n                    detail: {\r\n                        profileId,\r\n                        data: payload\r\n                    }\r\n                });\r\n                document.dispatchEvent(event);\r\n            } catch (e) {\r\n                try {\r\n                    const legacyEvent = document.createEvent(\"CustomEvent\");\r\n                    legacyEvent.initCustomEvent(\r\n                        \"geoleaf:profile:loaded\",\r\n                        false,\r\n                        false,\r\n                        {\r\n                            profileId,\r\n                            data: payload\r\n                        }\r\n                    );\r\n                    document.dispatchEvent(legacyEvent);\r\n                } catch (err) {\r\n                    Log.warn(\r\n                        \"[GeoLeaf.Config.Profile] Impossible d'√©mettre l'√©v√©nement geoleaf:profile:loaded.\"\r\n                    );\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    // Exposer le module\r\n    GeoLeaf._ConfigProfile = ProfileModule;\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Namespace global GeoLeaf\r\n     */\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    /**\r\n     * Logger unifi√©\r\n     */\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module DataConverter\r\n     *\r\n     * Responsabilit√©s :\r\n     * - Convertir les donn√©es brutes (Array de POI, Array de routes) vers GeoJSON FeatureCollection\r\n     * - Normaliser les g√©om√©tries\r\n     * - G√©rer les diff√©rents formats : POI, LineString, Polygon\r\n     *\r\n     * Utilis√© par GeoLeaf.GeoJSON lors du chargement depuis profile.json\r\n     */\r\n    const DataConverterModule = {\r\n        /**\r\n         * Convertit un array de POI en GeoJSON FeatureCollection.\r\n         *\r\n         * Chaque POI doit avoir :\r\n         * - id (string)\r\n         * - latlng (array [lat, lng])\r\n         * - title (string)\r\n         * - attributes (object)\r\n         *\r\n         * @param {Array} poiArray - Array de POI\r\n         * @returns {Object} FeatureCollection GeoJSON\r\n         */\r\n        convertPoiArrayToGeoJSON(poiArray) {\r\n            if (!Array.isArray(poiArray)) {\r\n                Log.warn(\"[DataConverter.convertPoiArrayToGeoJSON] Input n'est pas un array, retour FeatureCollection vide\");\r\n                return {\r\n                    type: \"FeatureCollection\",\r\n                    features: []\r\n                };\r\n            }\r\n\r\n            const features = poiArray\r\n                .map((poi) => {\r\n                    if (!poi || typeof poi !== \"object\") {\r\n                        return null;\r\n                    }\r\n\r\n                    if (!poi.id) {\r\n                        Log.warn(\"[DataConverter.convertPoiArrayToGeoJSON] POI sans ID, ignor√©\", poi);\r\n                        return null;\r\n                    }\r\n\r\n                    // Valider latlng\r\n                    let coordinates = null;\r\n                    if (Array.isArray(poi.latlng) && poi.latlng.length === 2) {\r\n                        // GeoJSON utilise [lon, lat], mais les donn√©es utilisent [lat, lon]\r\n                        coordinates = [poi.latlng[1], poi.latlng[0]];\r\n                    } else if (\r\n                        poi.location &&\r\n                        typeof poi.location.lat === \"number\" &&\r\n                        typeof poi.location.lng === \"number\"\r\n                    ) {\r\n                        coordinates = [poi.location.lng, poi.location.lat];\r\n                    } else {\r\n                        Log.warn(\r\n                            \"[DataConverter.convertPoiArrayToGeoJSON] POI sans coordonn√©es valides, ignor√©\",\r\n                            { id: poi.id }\r\n                        );\r\n                        return null;\r\n                    }\r\n\r\n                    // Construire la feature GeoJSON\r\n                    const feature = {\r\n                        type: \"Feature\",\r\n                        id: poi.id,\r\n                        geometry: {\r\n                            type: \"Point\",\r\n                            coordinates: coordinates\r\n                        },\r\n                        properties: {\r\n                            id: poi.id,\r\n                            title: poi.title || \"Sans titre\",\r\n                            description: poi.description || \"\",\r\n                            ...poi.attributes // Fusionner les attributs\r\n                        }\r\n                    };\r\n\r\n                    return feature;\r\n                })\r\n                .filter((f) => f !== null);\r\n\r\n            Log.debug(\"[DataConverter.convertPoiArrayToGeoJSON] Converti\", {\r\n                input: poiArray.length,\r\n                output: features.length\r\n            });\r\n\r\n            return {\r\n                type: \"FeatureCollection\",\r\n                features: features\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Convertit un array de routes (LineString) en GeoJSON FeatureCollection.\r\n         *\r\n         * Chaque route doit avoir :\r\n         * - id (string)\r\n         * - geometry avec type: \"LineString\" et coordinates\r\n         * - attributes (object optionnel)\r\n         *\r\n         * @param {Array} routeArray - Array de routes\r\n         * @returns {Object} FeatureCollection GeoJSON\r\n         */\r\n        convertRouteArrayToGeoJSON(routeArray) {\r\n            if (!Array.isArray(routeArray)) {\r\n                Log.warn(\"[DataConverter.convertRouteArrayToGeoJSON] Input n'est pas un array, retour FeatureCollection vide\");\r\n                return {\r\n                    type: \"FeatureCollection\",\r\n                    features: []\r\n                };\r\n            }\r\n\r\n            const features = routeArray\r\n                .map((route) => {\r\n                    if (!route || typeof route !== \"object\") {\r\n                        return null;\r\n                    }\r\n\r\n                    if (!route.id) {\r\n                        Log.warn(\"[DataConverter.convertRouteArrayToGeoJSON] Route sans ID, ignor√©e\", route);\r\n                        return null;\r\n                    }\r\n\r\n                    // Valider la g√©om√©trie\r\n                    if (!route.geometry || route.geometry.type !== \"LineString\" || !Array.isArray(route.geometry.coordinates)) {\r\n                        Log.warn(\r\n                            \"[DataConverter.convertRouteArrayToGeoJSON] Route sans g√©om√©trie LineString valide, ignor√©e\",\r\n                            { id: route.id }\r\n                        );\r\n                        return null;\r\n                    }\r\n\r\n                    // Construire la feature GeoJSON\r\n                    const feature = {\r\n                        type: \"Feature\",\r\n                        id: route.id,\r\n                        geometry: {\r\n                            type: \"LineString\",\r\n                            coordinates: route.geometry.coordinates\r\n                        },\r\n                        properties: {\r\n                            id: route.id,\r\n                            title: route.title || \"Sans titre\",\r\n                            description: route.description || \"\",\r\n                            categoryId: route.categoryId,\r\n                            subCategoryId: route.subCategoryId,\r\n                            ...route.attributes // Fusionner les attributs\r\n                        }\r\n                    };\r\n\r\n                    return feature;\r\n                })\r\n                .filter((f) => f !== null);\r\n\r\n            Log.debug(\"[DataConverter.convertRouteArrayToGeoJSON] Converti\", {\r\n                input: routeArray.length,\r\n                output: features.length\r\n            });\r\n\r\n            return {\r\n                type: \"FeatureCollection\",\r\n                features: features\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Convertit un array de zones (Polygon) en GeoJSON FeatureCollection.\r\n         *\r\n         * Chaque zone doit avoir :\r\n         * - id (string)\r\n         * - geometry avec type: \"Polygon\" et coordinates\r\n         * - attributes (object optionnel)\r\n         *\r\n         * @param {Array} zoneArray - Array de zones\r\n         * @returns {Object} FeatureCollection GeoJSON\r\n         */\r\n        convertZoneArrayToGeoJSON(zoneArray) {\r\n            if (!Array.isArray(zoneArray)) {\r\n                Log.warn(\"[DataConverter.convertZoneArrayToGeoJSON] Input n'est pas un array, retour FeatureCollection vide\");\r\n                return {\r\n                    type: \"FeatureCollection\",\r\n                    features: []\r\n                };\r\n            }\r\n\r\n            const features = zoneArray\r\n                .map((zone) => {\r\n                    if (!zone || typeof zone !== \"object\") {\r\n                        return null;\r\n                    }\r\n\r\n                    if (!zone.id) {\r\n                        Log.warn(\"[DataConverter.convertZoneArrayToGeoJSON] Zone sans ID, ignor√©e\", zone);\r\n                        return null;\r\n                    }\r\n\r\n                    // Valider la g√©om√©trie\r\n                    if (!zone.geometry || zone.geometry.type !== \"Polygon\" || !Array.isArray(zone.geometry.coordinates)) {\r\n                        Log.warn(\r\n                            \"[DataConverter.convertZoneArrayToGeoJSON] Zone sans g√©om√©trie Polygon valide, ignor√©e\",\r\n                            { id: zone.id }\r\n                        );\r\n                        return null;\r\n                    }\r\n\r\n                    // Construire la feature GeoJSON\r\n                    const feature = {\r\n                        type: \"Feature\",\r\n                        id: zone.id,\r\n                        geometry: {\r\n                            type: \"Polygon\",\r\n                            coordinates: zone.geometry.coordinates\r\n                        },\r\n                        properties: {\r\n                            id: zone.id,\r\n                            title: zone.title || zone.siteName || \"Sans titre\",\r\n                            description: zone.description || \"\",\r\n                            ...zone.attributes // Fusionner les attributs\r\n                        }\r\n                    };\r\n\r\n                    return feature;\r\n                })\r\n                .filter((f) => f !== null);\r\n\r\n            Log.debug(\"[DataConverter.convertZoneArrayToGeoJSON] Converti\", {\r\n                input: zoneArray.length,\r\n                output: features.length\r\n            });\r\n\r\n            return {\r\n                type: \"FeatureCollection\",\r\n                features: features\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Convertit un string GPX en GeoJSON FeatureCollection.\r\n         *\r\n         * Parse les √©l√©ments waypoints et tracks, cr√©e des Points ou LineStrings.\r\n         *\r\n         * @param {string} gpxString - Contenu XML du fichier GPX\r\n         * @returns {Object} FeatureCollection GeoJSON\r\n         */\r\n        convertGpxToGeoJSON(gpxString) {\r\n            if (!gpxString || typeof gpxString !== \"string\") {\r\n                Log.warn(\"[DataConverter.convertGpxToGeoJSON] GPX string invalide\");\r\n                return {\r\n                    type: \"FeatureCollection\",\r\n                    features: []\r\n                };\r\n            }\r\n\r\n            try {\r\n                // Parser le XML\r\n                const parser = new DOMParser();\r\n                const gpxDoc = parser.parseFromString(gpxString, \"text/xml\");\r\n\r\n                const parseErrors = gpxDoc.getElementsByTagName(\"parsererror\");\r\n                if (parseErrors.length > 0) {\r\n                    Log.error(\"[DataConverter.convertGpxToGeoJSON] Erreur parsing XML:\", parseErrors[0].textContent);\r\n                    return {\r\n                        type: \"FeatureCollection\",\r\n                        features: []\r\n                    };\r\n                }\r\n\r\n                const features = [];\r\n                const gpxNamespace = \"http://www.topografix.com/GPX/1/1\";\r\n\r\n                // 1. Parser les waypoints (wpt)\r\n                const waypoints = gpxDoc.getElementsByTagName(\"wpt\");\r\n                for (let i = 0; i < waypoints.length; i++) {\r\n                    const wpt = waypoints[i];\r\n                    const lat = parseFloat(wpt.getAttribute(\"lat\"));\r\n                    const lon = parseFloat(wpt.getAttribute(\"lon\"));\r\n\r\n                    if (!isNaN(lat) && !isNaN(lon)) {\r\n                        const nameElem = wpt.getElementsByTagName(\"name\")[0];\r\n                        const descElem = wpt.getElementsByTagName(\"desc\")[0];\r\n                        const symElem = wpt.getElementsByTagName(\"sym\")[0];\r\n\r\n                        // Extraire les extensions GeoLeaf si pr√©sentes\r\n                        const geoLeafExt = {};\r\n                        const tagsList = []; // Accumulateur pour les tags multiples\r\n                        const extensions = wpt.getElementsByTagName(\"extensions\");\r\n                        if (extensions.length > 0) {\r\n                            const ext = extensions[0];\r\n                            // Utiliser childNodes pour √™tre s√ªr d'avoir tous les √©l√©ments\r\n                            for (let j = 0; j < ext.childNodes.length; j++) {\r\n                                const child = ext.childNodes[j];\r\n                                // Ignorer les n≈ìuds texte\r\n                                if (child.nodeType !== 1) continue;\r\n\r\n                                // R√©cup√©rer le nom du tag (g√®re les namespaces)\r\n                                const tagName = child.tagName || child.nodeName || '';\r\n                                const localName = child.localName || tagName.split(':').pop();\r\n\r\n                                // V√©rifier si c'est une extension GeoLeaf\r\n                                const isGeoLeaf = tagName.toLowerCase().startsWith(\"geoleaf:\") ||\r\n                                    (child.namespaceURI && child.namespaceURI.includes(\"geoleaf\"));\r\n\r\n                                if (isGeoLeaf || tagName.includes(':')) {\r\n                                    // Utiliser localName comme cl√© (sans pr√©fixe)\r\n                                    const key = localName || tagName.replace(/^[^:]+:/, '');\r\n                                    const value = child.textContent || '';\r\n\r\n                                    // Cas sp√©cial : les tags sont accumul√©s dans un tableau\r\n                                    if (key === 'tag' || key === 'tags') {\r\n                                        if (value) tagsList.push(value);\r\n                                    } else {\r\n                                        geoLeafExt[key] = value;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        // Ajouter les tags comme tableau si pr√©sents\r\n                        if (tagsList.length > 0) {\r\n                            geoLeafExt.tags = tagsList;\r\n                        }\r\n\r\n                        const feature = {\r\n                            type: \"Feature\",\r\n                            id: geoLeafExt.id || (nameElem ? nameElem.textContent : `wpt-${i}`),\r\n                            geometry: {\r\n                                type: \"Point\",\r\n                                coordinates: [lon, lat]\r\n                            },\r\n                            properties: {\r\n                                id: geoLeafExt.id || (nameElem ? nameElem.textContent : `wpt-${i}`),\r\n                                title: nameElem ? nameElem.textContent : `Waypoint ${i + 1}`,\r\n                                description: descElem ? descElem.textContent : \"\",\r\n                                symbol: symElem ? symElem.textContent : \"\",\r\n                                ...geoLeafExt // Inclure les extensions GeoLeaf\r\n                            }\r\n                        };\r\n\r\n                        features.push(feature);\r\n                    }\r\n                }\r\n\r\n                // 2. Parser les tracks (trk)\r\n                const tracks = gpxDoc.getElementsByTagName(\"trk\");\r\n                for (let i = 0; i < tracks.length; i++) {\r\n                    const trk = tracks[i];\r\n                    const nameElem = trk.getElementsByTagName(\"name\")[0];\r\n                    const descElem = trk.getElementsByTagName(\"desc\")[0];\r\n\r\n                    // Extraire les extensions GeoLeaf pour le track\r\n                    const trkGeoLeafExt = {};\r\n                    const trkTagsList = []; // Accumulateur pour les tags multiples\r\n                    const trkExtensions = trk.getElementsByTagName(\"extensions\");\r\n                    if (trkExtensions.length > 0) {\r\n                        const ext = trkExtensions[0];\r\n                        for (let m = 0; m < ext.childNodes.length; m++) {\r\n                            const child = ext.childNodes[m];\r\n                            if (child.nodeType !== 1) continue;\r\n\r\n                            const tagName = child.tagName || child.nodeName || '';\r\n                            const localName = child.localName || tagName.split(':').pop();\r\n\r\n                            const isGeoLeaf = tagName.toLowerCase().startsWith(\"geoleaf:\") ||\r\n                                (child.namespaceURI && child.namespaceURI.includes(\"geoleaf\"));\r\n\r\n                            if (isGeoLeaf || tagName.includes(':')) {\r\n                                const key = localName || tagName.replace(/^[^:]+:/, '');\r\n                                const value = child.textContent || '';\r\n\r\n                                // Cas sp√©cial : les tags sont accumul√©s dans un tableau\r\n                                if (key === 'tag' || key === 'tags') {\r\n                                    if (value) trkTagsList.push(value);\r\n                                } else {\r\n                                    trkGeoLeafExt[key] = value;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // Ajouter les tags comme tableau si pr√©sents\r\n                    if (trkTagsList.length > 0) {\r\n                        trkGeoLeafExt.tags = trkTagsList;\r\n                    }\r\n\r\n                    const segments = trk.getElementsByTagName(\"trkseg\");\r\n                    for (let j = 0; j < segments.length; j++) {\r\n                        const segment = segments[j];\r\n                        const trkpts = segment.getElementsByTagName(\"trkpt\");\r\n\r\n                        const coordinates = [];\r\n                        for (let k = 0; k < trkpts.length; k++) {\r\n                            const trkpt = trkpts[k];\r\n                            const lat = parseFloat(trkpt.getAttribute(\"lat\"));\r\n                            const lon = parseFloat(trkpt.getAttribute(\"lon\"));\r\n\r\n                            if (!isNaN(lat) && !isNaN(lon)) {\r\n                                coordinates.push([lon, lat]);\r\n                            }\r\n                        }\r\n\r\n                        if (coordinates.length > 0) {\r\n                            const feature = {\r\n                                type: \"Feature\",\r\n                                id: nameElem ? `${nameElem.textContent}-${j}` : `trk-${i}-${j}`,\r\n                                geometry: {\r\n                                    type: \"LineString\",\r\n                                    coordinates: coordinates\r\n                                },\r\n                                properties: {\r\n                                    id: nameElem ? `${nameElem.textContent}-${j}` : `trk-${i}-${j}`,\r\n                                    title: nameElem ? nameElem.textContent : `Track ${i + 1}`,\r\n                                    description: descElem ? descElem.textContent : \"\",\r\n                                    segmentIndex: j,\r\n                                    pointCount: coordinates.length,\r\n                                    ...trkGeoLeafExt // Inclure les extensions GeoLeaf du track\r\n                                }\r\n                            };\r\n\r\n                            features.push(feature);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                Log.debug(\"[DataConverter.convertGpxToGeoJSON] Converti\", {\r\n                    waypoints: waypoints.length,\r\n                    tracks: tracks.length,\r\n                    features: features.length\r\n                });\r\n\r\n                return {\r\n                    type: \"FeatureCollection\",\r\n                    features: features\r\n                };\r\n            } catch (err) {\r\n                Log.error(\"[DataConverter.convertGpxToGeoJSON] Erreur lors du parsing GPX:\", err);\r\n                return {\r\n                    type: \"FeatureCollection\",\r\n                    features: []\r\n                };\r\n            }\r\n        },\r\n\r\n        /**\r\n         * D√©tecte automatiquement le type de donn√©es et les convertit en GeoJSON.\r\n         *\r\n         * Strat√©gie de d√©tection :\r\n         * 1. Si d√©j√† GeoJSON (type: \"FeatureCollection\"), retourner tel quel\r\n         * 2. Si array : analyser le premier √©l√©ment\r\n         *    - S'il a \"latlng\" ou \"location\" ‚Üí POI\r\n         *    - S'il a \"geometry.type === 'LineString'\" ‚Üí Route\r\n         *    - S'il a \"geometry.type === 'Polygon'\" ‚Üí Zone\r\n         * 3. Sinon : retourner vide\r\n         *\r\n         * @param {*} data - Donn√©es √† convertir\r\n         * @returns {Object} FeatureCollection GeoJSON\r\n         */\r\n        autoConvert(data) {\r\n            if (!data) {\r\n                Log.warn(\"[DataConverter.autoConvert] Donn√©es nulles, retour FeatureCollection vide\");\r\n                return {\r\n                    type: \"FeatureCollection\",\r\n                    features: []\r\n                };\r\n            }\r\n\r\n            // Cas 1 : D√©j√† GeoJSON\r\n            if (data.type === \"FeatureCollection\" && Array.isArray(data.features)) {\r\n                Log.debug(\"[DataConverter.autoConvert] Donn√©es d√©j√† en GeoJSON, passage direct\");\r\n                return data;\r\n            }\r\n\r\n            if (data.type === \"Feature\" && data.geometry) {\r\n                Log.debug(\"[DataConverter.autoConvert] Feature unique, conversion en FeatureCollection\");\r\n                return {\r\n                    type: \"FeatureCollection\",\r\n                    features: [data]\r\n                };\r\n            }\r\n\r\n            // Cas 2 : Array\r\n            if (!Array.isArray(data) || data.length === 0) {\r\n                Log.warn(\"[DataConverter.autoConvert] Donn√©es ne sont pas un array ou array vide\");\r\n                return {\r\n                    type: \"FeatureCollection\",\r\n                    features: []\r\n                };\r\n            }\r\n\r\n            const firstItem = data[0];\r\n\r\n            if (!firstItem || typeof firstItem !== \"object\") {\r\n                Log.warn(\"[DataConverter.autoConvert] Premier √©l√©ment invalide\");\r\n                return {\r\n                    type: \"FeatureCollection\",\r\n                    features: []\r\n                };\r\n            }\r\n\r\n            // Analyser le type\r\n            if (firstItem.latlng || (firstItem.location && typeof firstItem.location.lat === \"number\")) {\r\n                // POI\r\n                Log.debug(\"[DataConverter.autoConvert] D√©tect√© comme array de POI\");\r\n                return this.convertPoiArrayToGeoJSON(data);\r\n            } else if (\r\n                firstItem.geometry &&\r\n                firstItem.geometry.type === \"LineString\" &&\r\n                Array.isArray(firstItem.geometry.coordinates)\r\n            ) {\r\n                // Route\r\n                Log.debug(\"[DataConverter.autoConvert] D√©tect√© comme array de routes\");\r\n                return this.convertRouteArrayToGeoJSON(data);\r\n            } else if (\r\n                firstItem.geometry &&\r\n                firstItem.geometry.type === \"Polygon\" &&\r\n                Array.isArray(firstItem.geometry.coordinates)\r\n            ) {\r\n                // Zone\r\n                Log.debug(\"[DataConverter.autoConvert] D√©tect√© comme array de zones\");\r\n                return this.convertZoneArrayToGeoJSON(data);\r\n            } else {\r\n                Log.warn(\"[DataConverter.autoConvert] Type de donn√©es non reconnu\");\r\n                return {\r\n                    type: \"FeatureCollection\",\r\n                    features: []\r\n                };\r\n            }\r\n        }\r\n    };\r\n\r\n    // Exposition de l'API\r\n    GeoLeaf._DataConverter = DataConverterModule;\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/*!\r\n * GeoLeaf Core ‚Äì Config / Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Namespace global GeoLeaf\r\n     */\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    /**\r\n     * Logger unifi√© (d√©fini par geoleaf.logger-shim.js charg√© en premier)\r\n     */\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module GeoLeaf.Config\r\n     *\r\n     * R√¥le :\r\n     * - Centraliser la configuration de GeoLeaf (options carte, basemaps, th√®mes, etc.)\r\n     * - Charger une configuration depuis un objet JS ou un fichier JSON externe (fetch)\r\n     * - Fournir des helpers pour lire / √©crire via chemins de type \"map.center\" ou \"basemaps.street.url\"\r\n     * - G√©rer les profils m√©tiers (tourism, etc.) et leurs ressources associ√©es\r\n     *\r\n     * Architecture Phase 4 :\r\n     * - config/loader.js       : Chargement HTTP, fetch, validation CSRF\r\n     * - config/taxonomy.js     : Gestion taxonomie (cat√©gories/sous-cat√©gories)\r\n     * - config/storage.js      : get/set/merge config, helpers paths\r\n     * - config/normalization.js: Normalisation POI (mapping brut‚ÜíGeoLeaf)\r\n     * - config/profile.js      : Gestion profils m√©tier (profile.json, poi.json, routes.json)\r\n     */\r\n    const Config = GeoLeaf.Config = GeoLeaf.Config || {};\r\n\r\n    /* ------------------------------------------------------------------ */\r\n    /*  Module-level state                                                 */\r\n    /* ------------------------------------------------------------------ */\r\n\r\n    /**\r\n     * Configuration interne consolid√©e\r\n     * @type {Object}\r\n     * @private\r\n     */\r\n    Config._config = {};\r\n\r\n    /**\r\n     * Indicateur de chargement\r\n     * @type {boolean}\r\n     * @private\r\n     */\r\n    Config._isLoaded = false;\r\n\r\n    /**\r\n     * Source de la configuration (\"inline\", \"url\", null)\r\n     * @type {string|null}\r\n     * @private\r\n     */\r\n    Config._source = null;\r\n\r\n    /**\r\n     * Options internes\r\n     * @type {{autoEvent: boolean}}\r\n     * @private\r\n     */\r\n    Config._options = {\r\n        /**\r\n         * Si true, √©met un √©v√©nement DOM \"geoleaf:config:loaded\" apr√®s chargement.\r\n         */\r\n        autoEvent: true\r\n    };\r\n\r\n    /* ------------------------------------------------------------------ */\r\n    /*  Core methods                                                       */\r\n    /* ------------------------------------------------------------------ */\r\n\r\n    /**\r\n     * Initialisation du module de configuration.\r\n     *\r\n     * @param {Object} [options]\r\n     * @param {Object} [options.config] - Objet de configuration fourni directement.\r\n     * @param {string} [options.url] - URL d'un fichier JSON √† charger.\r\n     * @param {Object} [options.headers] - Headers HTTP personnalis√©s pour loadUrl (ex: CSRF token).\r\n     * @param {boolean} [options.strictContentType=true] - Validation stricte du Content-Type.\r\n     * @param {boolean} [options.autoEvent] - D√©sactiver ou non l'√©v√©nement auto.\r\n     * @param {Function} [options.onLoaded] - Callback appel√© une fois la config disponible (apr√®s mapping).\r\n     *\r\n     * @param {Object}  [options.mappingHeaders]\r\n     *        Headers HTTP sp√©cifiques pour le mapping (sinon ceux de headers sont r√©utilis√©s).\r\n     * @param {boolean} [options.mappingStrictContentType]\r\n     *        Si d√©fini, surcharge strictContentType pour le mapping.\r\n     *\r\n     * @returns {Promise<Object>} - Promesse r√©solue avec l'objet de configuration.\r\n     */\r\n    Config.init = function (options = {}) {\r\n        this._options = Object.assign({}, this._options, {\r\n            autoEvent:\r\n                typeof options.autoEvent === \"boolean\"\r\n                    ? options.autoEvent\r\n                    : this._options.autoEvent\r\n        });\r\n\r\n        // Cas 1 : configuration inline (objet JS directement fourni)\r\n        if (options.config && typeof options.config === \"object\") {\r\n            this._applyConfig(options.config, \"inline\");\r\n\r\n            // Si un profileId est sp√©cifi√©, le mettre √† jour apr√®s l'application de la config\r\n            if (typeof options.profileId === \"string\" && options.profileId.length > 0) {\r\n                if (!this._config.data) {\r\n                    this._config.data = {};\r\n                }\r\n                this._config.data.activeProfile = options.profileId;\r\n                Log.info(\"[GeoLeaf.Config] Profil actif chang√© vers:\", options.profileId);\r\n            }\r\n\r\n            this._maybeFireLoadedEvent();\r\n\r\n            if (typeof options.onLoaded === \"function\") {\r\n                try {\r\n                    options.onLoaded(this._config);\r\n                } catch (e) {\r\n                    Log.error(\"[GeoLeaf.Config] Erreur dans onLoaded (inline) :\", e);\r\n                }\r\n            }\r\n\r\n            return Promise.resolve(this._config);\r\n        }\r\n\r\n        // Cas 2 : chargement via URL JSON\r\n        if (typeof options.url === \"string\" && options.url.length > 0) {\r\n            const loadOptions = {\r\n                headers: options.headers,\r\n                strictContentType:\r\n                    typeof options.strictContentType === \"boolean\"\r\n                        ? options.strictContentType\r\n                        : true\r\n            };\r\n\r\n            const mappingUrl =\r\n                typeof options.mappingUrl === \"string\" && options.mappingUrl.length > 0\r\n                    ? options.mappingUrl\r\n                    : null;\r\n\r\n            const mappingOptions = {\r\n                headers: options.mappingHeaders || options.headers,\r\n                strictContentType:\r\n                    typeof options.mappingStrictContentType === \"boolean\"\r\n                        ? options.mappingStrictContentType\r\n                        : loadOptions.strictContentType\r\n            };\r\n\r\n            // 1) Charger la config principale\r\n            return this.loadUrl(options.url, loadOptions)\r\n                .then((cfg) => {\r\n                    // Appliquer le profileId APR√àS le chargement de l'URL\r\n                    if (typeof options.profileId === \"string\" && options.profileId.length > 0) {\r\n                        if (!cfg.data) {\r\n                            cfg.data = {};\r\n                        }\r\n                        cfg.data.activeProfile = options.profileId;\r\n                        this._config.data.activeProfile = options.profileId;\r\n                        Log.info(\"[GeoLeaf.Config] Profil actif chang√© vers:\", options.profileId);\r\n                    }\r\n                    return cfg;\r\n                })\r\n                // 2) Charger le mapping cat√©gories (si URL fournie)\r\n                .then((cfg) => {\r\n                    if (!mappingUrl) {\r\n                        return cfg;\r\n                    }\r\n\r\n                    return this.loadTaxonomy(mappingUrl, mappingOptions)\r\n                        .then(() => cfg)\r\n                        .catch((err) => {\r\n                            Log.warn(\r\n                                \"[GeoLeaf.Config] √âchec du chargement du mapping cat√©gories depuis \" +\r\n                                mappingUrl +\r\n                                \" (GeoLeaf continuera sans mapping d√©di√©) :\",\r\n                                err\r\n                            );\r\n                            return cfg;\r\n                        });\r\n                })\r\n                // 3) Appeler onLoaded une fois TOUT charg√© (config + mapping)\r\n                .then((cfg) => {\r\n                    if (typeof options.onLoaded === \"function\") {\r\n                        try {\r\n                            options.onLoaded(cfg);\r\n                        } catch (e) {\r\n                            Log.error(\"[GeoLeaf.Config] Erreur dans onLoaded (url+mapping) :\", e);\r\n                        }\r\n                    }\r\n                    return cfg;\r\n                })\r\n                .catch((err) => {\r\n                    Log.error(\"[GeoLeaf.Config] Erreur init() avec url :\", err);\r\n\r\n                    // Appeler onError si fourni\r\n                    if (typeof options.onError === \"function\") {\r\n                        try {\r\n                            options.onError(err);\r\n                        } catch (e) {\r\n                            Log.error(\"[GeoLeaf.Config] Erreur dans onError :\", e);\r\n                        }\r\n                    }\r\n\r\n                    throw err; // Re-throw pour que la Promise soit rejet√©e\r\n                });\r\n        }\r\n\r\n        // Cas 3 : Aucun param√®tre fourni : on se contente d'un objet vide\r\n        this._applyConfig({}, \"inline\");\r\n\r\n        // Si un profileId est sp√©cifi√©, le mettre √† jour\r\n        if (typeof options.profileId === \"string\" && options.profileId.length > 0) {\r\n            if (!this._config.data) {\r\n                this._config.data = {};\r\n            }\r\n            this._config.data.activeProfile = options.profileId;\r\n            Log.info(\"[GeoLeaf.Config] Profil actif chang√© vers:\", options.profileId);\r\n        }\r\n\r\n        this._maybeFireLoadedEvent();\r\n\r\n        if (typeof options.onLoaded === \"function\") {\r\n            try {\r\n                options.onLoaded(this._config);\r\n            } catch (e) {\r\n                Log.error(\"[GeoLeaf.Config] Erreur dans onLoaded (vide) :\", e);\r\n            }\r\n        }\r\n\r\n        return Promise.resolve(this._config);\r\n    };\r\n\r\n    /**\r\n     * Initialise les sous-modules avec la r√©f√©rence partag√©e √† la config.\r\n     *\r\n     * @private\r\n     */\r\n    Config._initSubModules = function () {\r\n        const Storage = GeoLeaf._ConfigStorage;\r\n        const Taxonomy = GeoLeaf._ConfigTaxonomy;\r\n        const Profile = GeoLeaf._ConfigProfile;\r\n\r\n        if (Storage && typeof Storage.init === \"function\") {\r\n            Storage.init(this._config);\r\n        }\r\n        if (Taxonomy && typeof Taxonomy.init === \"function\") {\r\n            Taxonomy.init(this._config);\r\n        }\r\n        if (Profile && typeof Profile.init === \"function\") {\r\n            Profile.init(this._config);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Applique une configuration brute (remplace la pr√©c√©dente de mani√®re fusionn√©e).\r\n     *\r\n     * @param {Object} cfg\r\n     * @param {string} source\r\n     * @private\r\n     */\r\n    Config._applyConfig = function (cfg, source) {\r\n        if (typeof cfg !== \"object\" || cfg === null) {\r\n            cfg = {};\r\n        }\r\n\r\n        // Validation de la structure du JSON\r\n        this._validateConfig(cfg);\r\n\r\n        // Fusion profonde avec la configuration existante\r\n        const Storage = GeoLeaf._ConfigStorage;\r\n        if (Storage && typeof Storage.deepMerge === \"function\") {\r\n            this._config = Storage.deepMerge(this._config, cfg);\r\n        } else {\r\n            this._config = Object.assign({}, this._config, cfg);\r\n        }\r\n\r\n        // Normalisation des POI (avis) apr√®s fusion\r\n        const Normalization = GeoLeaf._ConfigNormalization;\r\n        if (Array.isArray(this._config.poi) && Normalization) {\r\n            this._config.poi = Normalization.normalizePoiArray(this._config.poi);\r\n        }\r\n\r\n        this._isLoaded = true;\r\n        this._source = source || \"inline\";\r\n\r\n        // Initialiser les sous-modules maintenant que _config est charg√©\r\n        this._initSubModules();\r\n\r\n        try {\r\n            // On r√©cup√®re le bloc \"logging\" soit depuis le cfg brut, soit depuis la configuration consolid√©e\r\n            const loggingCfg =\r\n                (cfg && typeof cfg === \"object\" && cfg.logging)\r\n                    ? cfg.logging\r\n                    : (this._config && this._config.logging ? this._config.logging : null);\r\n\r\n            // Prise en compte du flag global debug\r\n            let level = loggingCfg && loggingCfg.level;\r\n            let debugFlag = false;\r\n            if ((cfg && typeof cfg.debug !== 'undefined')) {\r\n                debugFlag = !!cfg.debug;\r\n            } else if (this._config && typeof this._config.debug !== 'undefined') {\r\n                debugFlag = !!this._config.debug;\r\n            }\r\n\r\n            if (!level) {\r\n                level = debugFlag ? 'debug' : 'info';\r\n            }\r\n\r\n            if (level && GeoLeaf.Log && typeof GeoLeaf.Log.setLevel === \"function\") {\r\n                GeoLeaf.Log.setLevel(level);\r\n                Log.info(\"[GeoLeaf.Config] Niveau de log appliqu√© depuis la configuration :\", level, \"(debug:\", debugFlag, \")\");\r\n            }\r\n        } catch (e) {\r\n            Log.warn(\"[GeoLeaf.Config] Impossible d'appliquer le niveau de log depuis la configuration :\", e);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Indique si la configuration est consid√©r√©e comme \"charg√©e\".\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    Config.isLoaded = function () {\r\n        return this._isLoaded;\r\n    };\r\n\r\n    /**\r\n     * Retourne la source de la config (\"inline\", \"url\", null).\r\n     *\r\n     * @returns {string|null}\r\n     */\r\n    Config.getSource = function () {\r\n        return this._source;\r\n    };\r\n\r\n    /**\r\n     * Envoie un √©v√©nement DOM \"geoleaf:config:loaded\" si autoEvent = true.\r\n     *\r\n     * @private\r\n     */\r\n    Config._maybeFireLoadedEvent = function () {\r\n        if (!this._options.autoEvent) {\r\n            return;\r\n        }\r\n\r\n        if (typeof document === \"undefined\" || typeof document.dispatchEvent !== \"function\") {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const event = new CustomEvent(\"geoleaf:config:loaded\", {\r\n                detail: {\r\n                    config: this._config,\r\n                    source: this._source\r\n                }\r\n            });\r\n            document.dispatchEvent(event);\r\n        } catch (e) {\r\n            // En environnement tr√®s ancien, CustomEvent peut ne pas exister\r\n            try {\r\n                const legacyEvent = document.createEvent(\"CustomEvent\");\r\n                legacyEvent.initCustomEvent(\r\n                    \"geoleaf:config:loaded\",\r\n                    false,\r\n                    false,\r\n                    {\r\n                        config: this._config,\r\n                        source: this._source\r\n                    }\r\n                );\r\n                document.dispatchEvent(legacyEvent);\r\n            } catch (err) {\r\n                // On ne bloque pas le fonctionnement si l'√©v√©nement √©choue\r\n                Log.warn(\"[GeoLeaf.Config] Impossible d'√©mettre l'√©v√©nement geoleaf:config:loaded.\");\r\n            }\r\n        }\r\n    };\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core ‚Äì Config / Validation\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf;\r\n    const Log = GeoLeaf.Log;\r\n    const Config = GeoLeaf.Config;\r\n\r\n    /**\r\n     * Valide la structure du JSON de configuration.\r\n     * Lance une erreur si les donn√©es critiques sont invalides.\r\n     *\r\n     * @param {Object} cfg - Configuration √† valider\r\n     * @throws {Error} Si la structure est invalide\r\n     * @private\r\n     */\r\n    Config._validateConfig = function (cfg) {\r\n        if (!cfg || typeof cfg !== \"object\") {\r\n            return; // Pas de validation si vide\r\n        }\r\n\r\n        // Validation de map.center\r\n        if (cfg.map && cfg.map.center !== undefined) {\r\n            if (\r\n                !Array.isArray(cfg.map.center) ||\r\n                cfg.map.center.length !== 2 ||\r\n                typeof cfg.map.center[0] !== \"number\" ||\r\n                typeof cfg.map.center[1] !== \"number\"\r\n            ) {\r\n                throw new Error(\r\n                    \"[GeoLeaf.Config] map.center doit √™tre un tableau de 2 nombres [lat, lng].\"\r\n                );\r\n            }\r\n        }\r\n\r\n        // Validation de map.zoom\r\n        if (cfg.map && cfg.map.zoom !== undefined) {\r\n            if (typeof cfg.map.zoom !== \"number\" || cfg.map.zoom < 0 || cfg.map.zoom > 20) {\r\n                throw new Error(\r\n                    \"[GeoLeaf.Config] map.zoom doit √™tre un nombre entre 0 et 20.\"\r\n                );\r\n            }\r\n        }\r\n\r\n        // Validation de basemaps\r\n        if (cfg.basemaps !== undefined) {\r\n            if (typeof cfg.basemaps !== \"object\" || cfg.basemaps === null) {\r\n                throw new Error(\r\n                    \"[GeoLeaf.Config] basemaps doit √™tre un objet.\"\r\n                );\r\n            }\r\n        }\r\n\r\n        // Validation de poi\r\n        if (cfg.poi !== undefined) {\r\n            if (!Array.isArray(cfg.poi)) {\r\n                throw new Error(\r\n                    \"[GeoLeaf.Config] poi doit √™tre un tableau.\"\r\n                );\r\n            }\r\n        }\r\n\r\n        // Validation de geojson\r\n        if (cfg.geojson !== undefined) {\r\n            if (!Array.isArray(cfg.geojson)) {\r\n                throw new Error(\r\n                    \"[GeoLeaf.Config] geojson doit √™tre un tableau.\"\r\n                );\r\n            }\r\n        }\r\n\r\n        // Validation de categories\r\n        if (cfg.categories !== undefined) {\r\n            if (\r\n                typeof cfg.categories !== \"object\" ||\r\n                cfg.categories === null ||\r\n                Array.isArray(cfg.categories)\r\n            ) {\r\n                throw new Error(\r\n                    \"[GeoLeaf.Config] categories doit √™tre un objet.\"\r\n                );\r\n            }\r\n\r\n            // Valider chaque cat√©gorie\r\n            Object.entries(cfg.categories).forEach(([catId, catData]) => {\r\n                if (!catData || typeof catData !== \"object\") {\r\n                    Log.warn(\r\n                        `[GeoLeaf.Config] Cat√©gorie '${catId}' invalide (doit √™tre un objet).`\r\n                    );\r\n                    return;\r\n                }\r\n\r\n                if (!catData.label || typeof catData.label !== \"string\") {\r\n                    Log.warn(\r\n                        `[GeoLeaf.Config] Cat√©gorie '${catId}' : le champ 'label' est manquant ou invalide.`\r\n                    );\r\n                }\r\n\r\n                // Validation couleurs : accepter soit 'color' (ancien format), soit 'colorFill'/'colorStroke' (nouveau format)\r\n                const hasOldFormat = catData.color && typeof catData.color === \"string\";\r\n                const hasNewFormat =\r\n                    (catData.colorFill && typeof catData.colorFill === \"string\") ||\r\n                    (catData.colorStroke && typeof catData.colorStroke === \"string\");\r\n\r\n                if (!hasOldFormat && !hasNewFormat) {\r\n                    Log.warn(\r\n                        `[GeoLeaf.Config] Cat√©gorie '${catId}' : aucune couleur d√©finie (ni 'color', ni 'colorFill'/'colorStroke').`\r\n                    );\r\n                }\r\n\r\n                // Valider les sous-cat√©gories\r\n                if (catData.subcategories !== undefined) {\r\n                    if (\r\n                        typeof catData.subcategories !== \"object\" ||\r\n                        catData.subcategories === null ||\r\n                        Array.isArray(catData.subcategories)\r\n                    ) {\r\n                        Log.warn(\r\n                            `[GeoLeaf.Config] Cat√©gorie '${catId}' : subcategories doit √™tre un objet.`\r\n                        );\r\n                        return;\r\n                    }\r\n\r\n                    Object.entries(catData.subcategories).forEach(([subId, subData]) => {\r\n                        if (!subData || typeof subData !== \"object\") {\r\n                            Log.warn(\r\n                                `[GeoLeaf.Config] Sous-cat√©gorie '${subId}' dans '${catId}' invalide (doit √™tre un objet).`\r\n                            );\r\n                            return;\r\n                        }\r\n\r\n                        if (!subData.label || typeof subData.label !== \"string\") {\r\n                            Log.warn(\r\n                                `[GeoLeaf.Config] Sous-cat√©gorie '${subId}' dans '${catId}' : le champ 'label' est manquant ou invalide.`\r\n                            );\r\n                        }\r\n\r\n                        const hasOldFormatSub =\r\n                            subData.color && typeof subData.color === \"string\";\r\n                        const hasNewFormatSub =\r\n                            (subData.colorFill && typeof subData.colorFill === \"string\") ||\r\n                            (subData.colorStroke && typeof subData.colorStroke === \"string\");\r\n\r\n                        if (!hasOldFormatSub && !hasNewFormatSub) {\r\n                            Log.warn(\r\n                                `[GeoLeaf.Config] Sous-cat√©gorie '${subId}' dans '${catId}' : aucune couleur d√©finie (ni 'color', ni 'colorFill'/'colorStroke').`\r\n                            );\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        Log.debug(\"[GeoLeaf.Config] Validation de la structure r√©ussie.\");\r\n    };\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core ‚Äì Config / Loaders\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf;\r\n    const Log = GeoLeaf.Log;\r\n    const Config = GeoLeaf.Config;\r\n\r\n    /**\r\n     * Charge une configuration depuis une URL JSON et la fusionne.\r\n     *\r\n     * @param {string} url - URL du fichier JSON\r\n     * @param {Object} [options] - Options de chargement\r\n     * @param {Object} [options.headers] - Headers HTTP personnalis√©s (ex: CSRF token)\r\n     * @param {boolean} [options.strictContentType=true] - Validation stricte du Content-Type\r\n     * @returns {Promise<Object>}\r\n     * @example\r\n     * Config.loadUrl('/api/config.json', {\r\n     *     headers: { 'X-CSRF-Token': '...' },\r\n     *     strictContentType: true\r\n     * })\r\n     */\r\n    Config.loadUrl = function (url, options = {}) {\r\n        const Loader = GeoLeaf._ConfigLoader;\r\n        if (!Loader) {\r\n            Log.error(\"[GeoLeaf.Config] Module Loader non disponible.\");\r\n            return Promise.reject(new Error(\"Loader module not available\"));\r\n        }\r\n\r\n        return Loader.loadUrl(url, options)\r\n            .then((jsonCfg) => {\r\n                // Validation de la structure du JSON\r\n                this._validateConfig(jsonCfg);\r\n\r\n                // Fusion profonde avec la configuration existante\r\n                const Storage = GeoLeaf._ConfigStorage;\r\n                if (Storage && typeof Storage.deepMerge === \"function\") {\r\n                    this._config = Storage.deepMerge(this._config, jsonCfg);\r\n                } else {\r\n                    // Fallback si Storage pas disponible\r\n                    this._config = Object.assign({}, this._config, jsonCfg);\r\n                }\r\n\r\n                // Normalisation des POI (avis) √©ventuels dans la config\r\n                const Normalization = GeoLeaf._ConfigNormalization;\r\n                if (Array.isArray(this._config.poi) && Normalization) {\r\n                    this._config.poi = Normalization.normalizePoiArray(this._config.poi);\r\n                }\r\n\r\n                this._isLoaded = true;\r\n                this._source = \"url\";\r\n\r\n                // Initialiser les sous-modules maintenant que _config est charg√©\r\n                this._initSubModules();\r\n\r\n                this._maybeFireLoadedEvent();\r\n\r\n                return this._config;\r\n            })\r\n            .catch((err) => {\r\n                Log.error(\"[GeoLeaf.Config] Erreur lors du chargement JSON :\", err);\r\n                return this._config;\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Charge un fichier de taxonomie (mapping cat√©gories / sous-cat√©gories)\r\n     * et le fusionne dans la configuration existante.\r\n     *\r\n     * @param {string} [url] - URL du fichier de mapping (depuis le profil)\r\n     * @param {Object} [options]\r\n     * @param {Object} [options.headers]\r\n     * @param {boolean} [options.strictContentType=true]\r\n     * @returns {Promise<Object>} - Objet categories consolid√©\r\n     */\r\n    Config.loadTaxonomy = function (url = null, options = {}) {\r\n        const Taxonomy = GeoLeaf._ConfigTaxonomy;\r\n        if (!Taxonomy) {\r\n            Log.error(\"[GeoLeaf.Config] Module Taxonomy non disponible.\");\r\n            return Promise.reject(new Error(\"Taxonomy module not available\"));\r\n        }\r\n\r\n        return Taxonomy.loadTaxonomy(url, options);\r\n    };\r\n\r\n    /**\r\n     * Charge les ressources li√©es au profil actif :\r\n     * - profile.json\r\n     * - poi.json\r\n     * - mapping.json\r\n     * - routes.json\r\n     *\r\n     * @param {Object} [options]\r\n     * @param {Object} [options.headers] - Headers HTTP optionnels.\r\n     * @param {boolean} [options.strictContentType=true] - Validation stricte du Content-Type.\r\n     * @returns {Promise<Object>} Configuration consolid√©e incluant les donn√©es du profil.\r\n     */\r\n    Config.loadActiveProfileResources = function (options = {}) {\r\n        const Profile = GeoLeaf._ConfigProfile;\r\n        if (!Profile) {\r\n            Log.error(\"[GeoLeaf.Config] Module Profile non disponible.\");\r\n            return Promise.reject(new Error(\"Profile module not available\"));\r\n        }\r\n\r\n        return Profile.loadActiveProfileResources(options);\r\n    };\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core ‚Äì Config / Accessors\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf;\r\n    const Log = GeoLeaf.Log;\r\n    const Config = GeoLeaf.Config;\r\n\r\n    /* ------------------------------------------------------------------ */\r\n    /*  Storage accessors                                                  */\r\n    /* ------------------------------------------------------------------ */\r\n\r\n    /**\r\n     * Retourne la configuration compl√®te (objet).\r\n     *\r\n     * @returns {Object}\r\n     */\r\n    Config.getAll = function () {\r\n        // S'assurer que les sous-modules sont initialis√©s\r\n        if (!this._isLoaded) {\r\n            this._initSubModules();\r\n        }\r\n\r\n        const Storage = GeoLeaf._ConfigStorage;\r\n        return Storage && typeof Storage.getAll === \"function\"\r\n            ? Storage.getAll()\r\n            : this._config;\r\n    };\r\n\r\n    /**\r\n     * R√©cup√®re une valeur via un chemin de type \"map.center\" ou \"basemaps.street.url\".\r\n     *\r\n     * @param {string} path - Chemin avec des points.\r\n     * @param {*} [defaultValue] - Valeur renvoy√©e si le chemin n'existe pas.\r\n     * @returns {*}\r\n     */\r\n    Config.get = function (path, defaultValue) {\r\n        // S'assurer que les sous-modules sont initialis√©s\r\n        if (!this._isLoaded) {\r\n            this._initSubModules();\r\n        }\r\n\r\n        const Storage = GeoLeaf._ConfigStorage;\r\n        return Storage && typeof Storage.get === \"function\"\r\n            ? Storage.get(path, defaultValue)\r\n            : defaultValue;\r\n    };\r\n\r\n    /**\r\n     * D√©finit une valeur via un chemin de type \"map.center\" ou \"basemaps.street.url\".\r\n     * Cr√©e les objets interm√©diaires si n√©cessaire.\r\n     *\r\n     * @param {string} path\r\n     * @param {*} value\r\n     */\r\n    Config.set = function (path, value) {\r\n        const Storage = GeoLeaf._ConfigStorage;\r\n        if (Storage && typeof Storage.set === \"function\") {\r\n            Storage.set(path, value);\r\n        } else {\r\n            Log.warn(\"[GeoLeaf.Config] Module Storage non disponible pour set().\");\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Retourne une section de configuration (ex : \"basemaps\", \"map\").\r\n     *\r\n     * @param {string} sectionName\r\n     * @param {Object} [defaultValue]\r\n     * @returns {Object|*}\r\n     */\r\n    Config.getSection = function (sectionName, defaultValue) {\r\n        const Storage = GeoLeaf._ConfigStorage;\r\n        return Storage && typeof Storage.getSection === \"function\"\r\n            ? Storage.getSection(sectionName, defaultValue)\r\n            : defaultValue;\r\n    };\r\n\r\n    /* ------------------------------------------------------------------ */\r\n    /*  Taxonomy accessors                                                 */\r\n    /* ------------------------------------------------------------------ */\r\n\r\n    /**\r\n     * Retourne l'objet complet des cat√©gories (mapping interne).\r\n     *\r\n     * @returns {Object} - { [categoryId]: { label, icon, colorFill, colorStroke, subcategories? } }\r\n     */\r\n    Config.getCategories = function () {\r\n        // S'assurer que les sous-modules sont initialis√©s\r\n        if (!this._isLoaded) {\r\n            this._initSubModules();\r\n        }\r\n\r\n        const Taxonomy = GeoLeaf._ConfigTaxonomy;\r\n        return Taxonomy && typeof Taxonomy.getCategories === \"function\"\r\n            ? Taxonomy.getCategories()\r\n            : {};\r\n    };\r\n\r\n    /**\r\n     * Retourne une cat√©gorie √† partir de son identifiant.\r\n     *\r\n     * @param {string} categoryId\r\n     * @returns {Object|undefined}\r\n     */\r\n    Config.getCategory = function (categoryId) {\r\n        const Taxonomy = GeoLeaf._ConfigTaxonomy;\r\n        return Taxonomy && typeof Taxonomy.getCategory === \"function\"\r\n            ? Taxonomy.getCategory(categoryId)\r\n            : undefined;\r\n    };\r\n\r\n    /**\r\n     * Retourne une sous-cat√©gorie √† partir de son identifiant et de celui\r\n     * de la cat√©gorie parente.\r\n     *\r\n     * @param {string} categoryId\r\n     * @param {string} subCategoryId\r\n     * @returns {Object|undefined}\r\n     */\r\n    Config.getSubcategory = function (categoryId, subCategoryId) {\r\n        const Taxonomy = GeoLeaf._ConfigTaxonomy;\r\n        return Taxonomy && typeof Taxonomy.getSubcategory === \"function\"\r\n            ? Taxonomy.getSubcategory(categoryId, subCategoryId)\r\n            : undefined;\r\n    };\r\n\r\n    /* ------------------------------------------------------------------ */\r\n    /*  Profile accessors                                                  */\r\n    /* ------------------------------------------------------------------ */\r\n\r\n    /**\r\n     * Retourne l'identifiant du profil actuellement charg√© (ou null).\r\n     *\r\n     * @returns {string|null}\r\n     */\r\n    Config.getActiveProfileId = function () {\r\n        const Profile = GeoLeaf._ConfigProfile;\r\n        return Profile && typeof Profile.getActiveProfileId === \"function\"\r\n            ? Profile.getActiveProfileId()\r\n            : null;\r\n    };\r\n\r\n    /**\r\n     * Retourne l'objet profile.json du profil actif (ou null).\r\n     *\r\n     * @returns {Object|null}\r\n     */\r\n    Config.getActiveProfile = function () {\r\n        const Profile = GeoLeaf._ConfigProfile;\r\n        return Profile && typeof Profile.getActiveProfile === \"function\"\r\n            ? Profile.getActiveProfile()\r\n            : null;\r\n    };\r\n\r\n    /**\r\n     * Retourne le tableau de POI normalis√©s du profil actif.\r\n     *\r\n     * @returns {Array}\r\n     */\r\n    Config.getActiveProfilePoi = function () {\r\n        const Profile = GeoLeaf._ConfigProfile;\r\n        return Profile && typeof Profile.getActiveProfilePoi === \"function\"\r\n            ? Profile.getActiveProfilePoi()\r\n            : [];\r\n    };\r\n\r\n    /**\r\n     * Retourne le tableau de routes du profil actif.\r\n     *\r\n     * @returns {Array}\r\n     */\r\n    Config.getActiveProfileRoutes = function () {\r\n        const Profile = GeoLeaf._ConfigProfile;\r\n        return Profile && typeof Profile.getActiveProfileRoutes === \"function\"\r\n            ? Profile.getActiveProfileRoutes()\r\n            : [];\r\n    };\r\n\r\n    /**\r\n     * Retourne l'objet de mapping du profil actif (mapping.json).\r\n     *\r\n     * @returns {Object|null}\r\n     */\r\n    Config.getActiveProfileMapping = function () {\r\n        const Profile = GeoLeaf._ConfigProfile;\r\n        return Profile && typeof Profile.getActiveProfileMapping === \"function\"\r\n            ? Profile.getActiveProfileMapping()\r\n            : null;\r\n    };\r\n\r\n    /**\r\n     * Retourne la configuration des ic√¥nes depuis la taxonomie du profil actif.\r\n     *\r\n     * @returns {Object|null}\r\n     */\r\n    Config.getIconsConfig = function () {\r\n        const Profile = GeoLeaf._ConfigProfile;\r\n        return Profile && typeof Profile.getIconsConfig === \"function\"\r\n            ? Profile.getIconsConfig()\r\n            : null;\r\n    };\r\n\r\n    /**\r\n     * Indique si l'usage de mapping.json pour normaliser les POI de profil est activ√©.\r\n     *\r\n     * @returns {boolean} true si le mapping doit √™tre utilis√©, false sinon.\r\n     */\r\n    Config.isProfilePoiMappingEnabled = function () {\r\n        const Profile = GeoLeaf._ConfigProfile;\r\n        return Profile && typeof Profile.isProfilePoiMappingEnabled === \"function\"\r\n            ? Profile.isProfilePoiMappingEnabled()\r\n            : true;\r\n    };\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    // ---------------------------------------------------------\r\n    // Namespace global + logger unifi√© (avec fallback console)\r\n    // ---------------------------------------------------------\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // Logger unifi√© (d√©fini par geoleaf.logger-shim.js charg√© en premier)\r\n    const Log = GeoLeaf.Log;\r\n\r\n    // V√©rification Leaflet\r\n    if (!global.L) {\r\n        Log.error(\"[GeoLeaf.Baselayers] Leaflet (L) est introuvable. Charge d'abord Leaflet 1.9.\");\r\n        return;\r\n    }\r\n\r\n    const L = global.L;\r\n\r\n    const Baselayers = (function () {\r\n        let _map = null;\r\n        let _activeKey = null;\r\n        let _uiBound = false;\r\n        const _baseLayers = Object.create(null);\r\n\r\n        // Fallback : basemaps par d√©faut (100 % utilisables sans cl√©)\r\n        const DEFAULT_BASELAYERS = {\r\n            street: {\r\n                label: \"Street\",\r\n                url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\r\n                options: {\r\n                    maxZoom: 19,\r\n                    attribution: \"&copy; OpenStreetMap contributors\"\r\n                }\r\n            },\r\n            topo: {\r\n                label: \"Topo\",\r\n                url: \"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png\",\r\n                options: {\r\n                    maxZoom: 17,\r\n                    attribution:\r\n                        \"Map data: &copy; OpenStreetMap contributors, SRTM | Map style: &copy; OpenTopoMap\"\r\n                }\r\n            },\r\n            satellite: {\r\n                label: \"Satellite\",\r\n                url: \"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\",\r\n                options: {\r\n                    maxZoom: 19,\r\n                    attribution:\r\n                        \"Tiles &copy; Esri ‚Äî Source: Esri, Earthstar Geographics, and the GIS user community\"\r\n                }\r\n            }\r\n        };\r\n\r\n        function _ensureMap(explicitMap) {\r\n            if (explicitMap && typeof explicitMap.setView === \"function\") {\r\n                _map = explicitMap;\r\n                Log.info(\"[GeoLeaf.Baselayers] _ensureMap: using explicit map passed to init().\", _map);\r\n                return;\r\n            }\r\n            if (_map && typeof _map.setView === \"function\") {\r\n                return;\r\n            }\r\n            const gl = global.GeoLeaf || {};\r\n            if (gl.Core && typeof gl.Core.getMap === \"function\") {\r\n                const m = gl.Core.getMap();\r\n                if (m && typeof m.setView === \"function\") {\r\n                    _map = m;\r\n                    Log.info(\"[GeoLeaf.Baselayers] _ensureMap: acquired map from GeoLeaf.Core.getMap()\", _map);\r\n                }\r\n            }\r\n        }\r\n\r\n        function _registerDefaultBaseLayers() {\r\n            Object.keys(DEFAULT_BASELAYERS).forEach(function (key) {\r\n                if (!_baseLayers[key]) {\r\n                    registerBaseLayer(key, DEFAULT_BASELAYERS[key]);\r\n                    Log.info(\"[GeoLeaf.Baselayers] _registerDefaultBaseLayers: registered\", key);\r\n                }\r\n            });\r\n        }\r\n\r\n        function _normalizeOptions(definition) {\r\n            const opts = Object.assign({}, definition.options || {});\r\n            // minZoom pour limiter le zoom arri√®re\r\n            if (typeof opts.minZoom !== \"number\") {\r\n                if (typeof definition.minZoom === \"number\") {\r\n                    opts.minZoom = definition.minZoom;\r\n                }\r\n            }\r\n            // maxZoom minimal pour √©viter les warnings \"no maxZoom specified\"\r\n            if (typeof opts.maxZoom !== \"number\") {\r\n                opts.maxZoom = typeof definition.maxZoom === \"number\" ? definition.maxZoom : 19;\r\n            }\r\n            if (!opts.attribution && definition.attribution) {\r\n                opts.attribution = definition.attribution;\r\n            }\r\n            return opts;\r\n        }\r\n\r\n        function registerBaseLayer(key, definition) {\r\n            if (!key) {\r\n                Log.warn(\"[GeoLeaf.Baselayers] registerBaseLayer appel√© sans cl√©.\");\r\n                return;\r\n            }\r\n            if (!definition) {\r\n                Log.warn(\"[GeoLeaf.Baselayers] D√©finition manquante pour la couche :\", key);\r\n                return;\r\n            }\r\n\r\n            // Utiliser definition.id si disponible, sinon la cl√©\r\n            const actualKey = definition.id || key;\r\n            let layerInstance = null;\r\n            const label = definition.label || actualKey;\r\n\r\n            // Cas 1 : on re√ßoit directement une instance de L.TileLayer\r\n            if (definition instanceof L.TileLayer) {\r\n                layerInstance = definition;\r\n            }\r\n            // Cas 2 : on re√ßoit un objet contenant .layer d√©j√† pr√™t\r\n            else if (definition.layer && definition.layer instanceof L.TileLayer) {\r\n                layerInstance = definition.layer;\r\n            }\r\n            // Cas 3 : on re√ßoit une config { url, options, ... } ‚Üí on cr√©e la tileLayer\r\n            else if (definition.url) {\r\n                const options = _normalizeOptions(definition);\r\n                layerInstance = L.tileLayer(definition.url, options);\r\n            } else {\r\n                Log.warn(\r\n                    \"[GeoLeaf.Baselayers] D√©finition invalide pour la couche :\",\r\n                    actualKey,\r\n                    \"(aucune url / aucun layer fourni)\"\r\n                );\r\n                return;\r\n            }\r\n\r\n            _baseLayers[actualKey] = {\r\n                key: actualKey,\r\n                label: label,\r\n                layer: layerInstance\r\n            };\r\n        }\r\n\r\n        function registerBaseLayers(definitions) {\r\n            if (!definitions || typeof definitions !== \"object\") {\r\n                Log.warn(\"[GeoLeaf.Baselayers] registerBaseLayers attend un objet de d√©finitions.\");\r\n                return;\r\n            }\r\n            Object.keys(definitions).forEach(function (key) {\r\n                registerBaseLayer(key, definitions[key]);\r\n            });\r\n        }\r\n\r\n        function _refreshUI() {\r\n            if (!global.document) {\r\n                return;\r\n            }\r\n            const elements = global.document.querySelectorAll(\"[data-gl-baselayer]\");\r\n            const leftPanel = global.document.getElementById('gl-left-panel');\r\n            let activeElement = null;\r\n\r\n            elements.forEach(function (el) {\r\n                const key = el.getAttribute(\"data-gl-baselayer\");\r\n                if (!key) {\r\n                    return;\r\n                }\r\n                const isActive = key === _activeKey;\r\n                if (isActive) {\r\n                    el.classList.add(\"gl-baselayer-active\", \"is-active\");\r\n                    el.setAttribute(\"aria-pressed\", \"true\");\r\n                    activeElement = el;\r\n                } else {\r\n                    el.classList.remove(\"gl-baselayer-active\", \"is-active\");\r\n                    el.setAttribute(\"aria-pressed\", \"false\");\r\n                }\r\n            });\r\n\r\n            // Animer l'indicateur vers le bouton actif\r\n            if (leftPanel && activeElement) {\r\n                _updateActiveIndicator(leftPanel, activeElement);\r\n            }\r\n        }\r\n\r\n        function _updateActiveIndicator(panel, activeButton) {\r\n            if (!panel || !activeButton) {\r\n                return;\r\n            }\r\n\r\n            const panelRect = panel.getBoundingClientRect();\r\n            const buttonRect = activeButton.getBoundingClientRect();\r\n\r\n            // Calculer la position relative du bouton par rapport au panneau\r\n            const left = buttonRect.left - panelRect.left;\r\n            const width = buttonRect.width;\r\n\r\n            // Mettre √† jour la position et la largeur de l'indicateur (::before)\r\n            panel.style.setProperty('--indicator-left', left + 'px');\r\n            panel.style.setProperty('--indicator-width', width + 'px');\r\n        }\r\n\r\n        function _createBaseLayerControlsUI(config) {\r\n            if (!global.document) {\r\n                return;\r\n            }\r\n\r\n            // Si config n'est pas fourni, essayer de le r√©cup√©rer depuis GeoLeaf.Config\r\n            if (!config && global.GeoLeaf && global.GeoLeaf.Config && typeof global.GeoLeaf.Config.get === 'function') {\r\n                config = {\r\n                    ui: global.GeoLeaf.Config.get('ui'),\r\n                    basemaps: global.GeoLeaf.Config.get('basemaps') || {}\r\n                };\r\n            }\r\n\r\n            // V√©rifier si showBaseLayerControls est activ√©\r\n            const showControls = config && config.ui && config.ui.showBaseLayerControls !== false;\r\n\r\n            let leftPanel = global.document.getElementById('gl-left-panel');\r\n\r\n            if (showControls) {\r\n                // Cr√©er le panneau s'il n'existe pas\r\n                if (!leftPanel) {\r\n                    leftPanel = global.document.createElement('div');\r\n                    leftPanel.id = 'gl-left-panel';\r\n                    leftPanel.className = 'gl-left-panel';\r\n\r\n                    // Trouver le conteneur de la carte pour y ins√©rer le panneau\r\n                    const mapContainer = global.document.getElementById('geoleaf-map') ||\r\n                                       global.document.querySelector('.gl-map');\r\n\r\n                    if (mapContainer) {\r\n                        mapContainer.appendChild(leftPanel);\r\n                    } else {\r\n                        // Fallback: ajouter au body\r\n                        global.document.body.appendChild(leftPanel);\r\n                    }\r\n                }\r\n\r\n                // Cr√©er les boutons de s√©lection de fond de carte\r\n                // SAFE: Cha√Æne vide pour nettoyer le contenu avant reconstruction\r\n                GeoLeaf.DOMSecurity.clearElementFast(leftPanel);\r\n\r\n                // Utiliser _baseLayers enregistr√©s plut√¥t que config.basemaps\r\n                // car les basemaps par d√©faut peuvent avoir √©t√© ajout√©s\r\n                Object.keys(_baseLayers).forEach(function(key) {\r\n                    const def = _baseLayers[key];\r\n                    const button = global.document.createElement('button');\r\n                    button.className = 'gl-baselayer-btn';\r\n                    button.setAttribute('data-gl-baselayer', key);\r\n                    button.setAttribute('aria-label', def.label || key);\r\n                    button.textContent = def.label || key;\r\n                    leftPanel.appendChild(button);\r\n                });\r\n                leftPanel.style.display = 'flex';\r\n\r\n                Log.info(\"[GeoLeaf.Baselayers] Contr√¥les de fond de carte cr√©√©s avec\", Object.keys(_baseLayers).length, \"boutons\");\r\n\r\n                // Initialiser la position de l'indicateur apr√®s un court d√©lai\r\n                // pour s'assurer que le DOM est compl√®tement rendu\r\n                setTimeout(function() {\r\n                    _refreshUI();\r\n                }, 50);\r\n            } else {\r\n                // Masquer ou supprimer le panneau si showBaseLayerControls est false\r\n                if (leftPanel) {\r\n                    leftPanel.style.display = 'none';\r\n                }\r\n            }\r\n        }\r\n\r\n        function _bindUIOnce() {\r\n            if (_uiBound || !global.document) {\r\n                return;\r\n            }\r\n            _uiBound = true;\r\n\r\n            // Un seul listener global : tout √©l√©ment avec data-gl-baselayer utilise le m√™me setBaseLayer()\r\n            global.document.addEventListener(\"click\", function (evt) {\r\n                const target = evt.target.closest(\"[data-gl-baselayer]\");\r\n                if (!target) {\r\n                    return;\r\n                }\r\n                const key = target.getAttribute(\"data-gl-baselayer\");\r\n                if (!key) {\r\n                    return;\r\n                }\r\n                evt.preventDefault();\r\n                setBaseLayer(key);\r\n            });\r\n\r\n            // Recalculer la position de l'indicateur lors du redimensionnement de la fen√™tre\r\n            let resizeTimeout;\r\n            global.addEventListener('resize', function() {\r\n                clearTimeout(resizeTimeout);\r\n                resizeTimeout = setTimeout(function() {\r\n                    _refreshUI();\r\n                }, 100);\r\n            });\r\n        }\r\n\r\n        function setBaseLayer(key, options) {\r\n            options = options || {};\r\n\r\n            if (!key) {\r\n                Log.warn(\"[GeoLeaf.Baselayers] setBaseLayer appel√© sans cl√©.\");\r\n                return;\r\n            }\r\n\r\n            const previousKey = _activeKey;\r\n\r\n            _ensureMap();\r\n            Log.info(\r\n                \"[GeoLeaf.Baselayers] setBaseLayer called: key=\",\r\n                key,\r\n                \"_map=\",\r\n                _map ? true : false\r\n            );\r\n            if (!_map) {\r\n                Log.warn(\r\n                    \"[GeoLeaf.Baselayers] Aucun L.Map disponible. Assure-toi que GeoLeaf.Core est initialis√©.\"\r\n                );\r\n                return;\r\n            }\r\n\r\n            if (!_baseLayers[key]) {\r\n                Log.warn(\"[GeoLeaf.Baselayers] Couche inconnue :\", key);\r\n                const keys = Object.keys(_baseLayers);\r\n                if (!previousKey && keys.length > 0) {\r\n                    const fallbackKey = keys[0];\r\n                    if (!options.silent) {\r\n                        Log.warn(\r\n                            \"[GeoLeaf.Baselayers] Bascule vers la premi√®re couche disponible :\",\r\n                            fallbackKey\r\n                        );\r\n                    }\r\n                    setBaseLayer(fallbackKey, { silent: true });\r\n                }\r\n                return;\r\n            }\r\n\r\n            // Si la couche est d√©j√† active, on ne fait que rafra√Æchir l'UI\r\n            if (_activeKey === key) {\r\n                _refreshUI();\r\n                return;\r\n            }\r\n\r\n            // Retirer l'ancienne couche si pr√©sente (avec garde-fous)\r\n            if (previousKey && _baseLayers[previousKey]) {\r\n                const prev = _baseLayers[previousKey].layer;\r\n                try {\r\n                    if (\r\n                        prev &&\r\n                        _map &&\r\n                        typeof _map.hasLayer === \"function\" &&\r\n                        _map.hasLayer(prev)\r\n                    ) {\r\n                        _map.removeLayer(prev);\r\n                    }\r\n                } catch (e) {\r\n                    Log.warn(\r\n                        \"[GeoLeaf.Baselayers] Impossible de retirer la couche pr√©c√©dente:\",\r\n                        e\r\n                    );\r\n                }\r\n            }\r\n\r\n            const nextLayer = _baseLayers[key].layer;\r\n            if (!nextLayer || typeof nextLayer.addTo !== \"function\") {\r\n                Log.error(\"[GeoLeaf.Baselayers] Couche invalide pour la cl√©:\", key);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                nextLayer.addTo(_map);\r\n            } catch (e) {\r\n                Log.error(\r\n                    \"[GeoLeaf.Baselayers] Impossible d'ajouter la couche au L.Map:\",\r\n                    e\r\n                );\r\n                return;\r\n            }\r\n\r\n            _activeKey = key;\r\n            _refreshUI();\r\n\r\n            Log.info(\"[GeoLeaf.Baselayers] Activated base layer:\", key);\r\n\r\n            // √âv√©nement personnalis√© : geoleaf:basemap:change\r\n            if (!options.silent) {\r\n                if (\r\n                    typeof document !== \"undefined\" &&\r\n                    typeof document.dispatchEvent === \"function\"\r\n                ) {\r\n                    const detail = {\r\n                        key,\r\n                        previousKey,\r\n                        map: _map,\r\n                        layer: nextLayer,\r\n                        source: \"geoleaf.baselayers\"\r\n                    };\r\n\r\n                    try {\r\n                        if (typeof CustomEvent === \"function\") {\r\n                            const event = new CustomEvent(\"geoleaf:basemap:change\", {\r\n                                detail\r\n                            });\r\n                            document.dispatchEvent(event);\r\n                        } else {\r\n                            const legacyEvent = document.createEvent(\"CustomEvent\");\r\n                            legacyEvent.initCustomEvent(\r\n                                \"geoleaf:basemap:change\",\r\n                                true,\r\n                                true,\r\n                                detail\r\n                            );\r\n                            document.dispatchEvent(legacyEvent);\r\n                        }\r\n                    } catch (err) {\r\n                        Log.warn(\r\n                            \"[GeoLeaf.Baselayers] Impossible d'√©mettre l'√©v√©nement geoleaf:basemap:change.\",\r\n                            err\r\n                        );\r\n                    }\r\n                }\r\n\r\n                Log.info(\"[GeoLeaf.Baselayers] Couche de fond active :\", key);\r\n            }\r\n        }\r\n\r\n        function getBaseLayers() {\r\n            return Object.assign({}, _baseLayers);\r\n        }\r\n\r\n        function getActiveKey() {\r\n            return _activeKey;\r\n        }\r\n\r\n        function getActiveLayer() {\r\n            return _activeKey && _baseLayers[_activeKey]\r\n                ? _baseLayers[_activeKey].layer\r\n                : null;\r\n        }\r\n\r\n        /**\r\n         * Initialisation du module Baselayers.\r\n         *\r\n         * Usage flexible :\r\n         * GeoLeaf.Baselayers.init({\r\n         *   map: mapLeaflet,              // optionnel si GeoLeaf.Core est d√©j√† initialis√©\r\n         *   baselayers: { street: {...}, topo: {...}, satellite: {...} },\r\n         *   defaultKey: \"street\"          // ou activeKey / initialKey\r\n         * });\r\n         *\r\n         * Si aucune couche n‚Äôest fournie, les 3 basemaps par d√©faut (OSM / OpenTopoMap / Esri WorldImagery)\r\n         * sont automatiquement enregistr√©es, et une est activ√©e.\r\n         */\r\n                function init(options) {\r\n            options = options || {};\r\n\r\n            if (options.map) {\r\n                _map = options.map;\r\n            } else {\r\n                _ensureMap();\r\n            }\r\n\r\n            _registerDefaultBaseLayers();\r\n\r\n            if (options.baselayers && typeof options.baselayers === \"object\") {\r\n                registerBaseLayers(options.baselayers);\r\n            }\r\n\r\n            if (options.activeKey) {\r\n                setBaseLayer(options.activeKey, { silent: true });\r\n            }\r\n\r\n            // Si aucune couche n'est active, on prend la premi√®re disponible.\r\n            if (!_activeKey) {\r\n                const keys = Object.keys(_baseLayers);\r\n                if (keys.length > 0) {\r\n                    const defaultKey = keys[0];\r\n                    Log.info(\"[GeoLeaf.Baselayers] init: aucune couche active, bascule sur\", defaultKey);\r\n                    setBaseLayer(defaultKey, { silent: true });\r\n                }\r\n            }\r\n\r\n            // Cr√©er les contr√¥les UI de fond de carte si la config le demande\r\n            _createBaseLayerControlsUI(options);\r\n\r\n            // Lie les boutons UI d√©clar√©s dans le DOM (data-gl-baselayer)\r\n            _bindUIOnce();\r\n\r\n            return {\r\n                map: _map,\r\n                activeKey: getActiveKey(),\r\n                layers: getBaseLayers()\r\n            };\r\n        }\r\n\r\n        return {\r\n            init: init,\r\n            registerBaseLayer: registerBaseLayer,\r\n            registerBaseLayers: registerBaseLayers,\r\n            setBaseLayer: setBaseLayer,\r\n            setActive: setBaseLayer, // alias pour compatibilit√©\r\n            getBaseLayers: getBaseLayers,\r\n            getActiveKey: getActiveKey,\r\n            getActiveLayer: getActiveLayer\r\n        };\r\n    })();\r\n\r\n    // Nommage stabilis√© : BaseLayers devient la forme officielle,\r\n    // Baselayers reste un alias de compatibilit√©.\r\n    GeoLeaf.Baselayers = Baselayers;\r\n    GeoLeaf.BaseLayers = Baselayers;\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf Filters Module\r\n * Filtrage des POI et Routes selon crit√®res (cat√©gories, tags, proximit√©, recherche, note)\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n    const Utils = GeoLeaf.Utils;\r\n\r\n    // ========================================\r\n    //   HELPER FUNCTIONS\r\n    // ========================================\r\n\r\n    /**\r\n     * Extrait une valeur depuis un chemin (ex: \"attributes.shortDescription\")\r\n     * @param {object} obj - Objet source\r\n     * @param {string} path - Chemin avec notation point\r\n     * @returns {*} Valeur trouv√©e ou null\r\n     * @private\r\n     */\r\n    function getNestedValue(obj, path) {\r\n        return path.split('.').reduce((current, prop) =>\r\n            current && current[prop] !== undefined ? current[prop] : null, obj);\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re les champs de recherche depuis le profil actif\r\n     * 1. Priorit√© : extrait les champs marqu√©s \"search\": true dans panels.detail.layout et panels.route.layout\r\n     * 2. Fallback : r√©cup√®re searchFields du filtre search dans le profil\r\n     * 3. Fallback final : champs par d√©faut\r\n     * @returns {Array<string>} Liste des chemins de champs √† rechercher\r\n     * @private\r\n     */\r\n    function getSearchFieldsFromProfile() {\r\n        try {\r\n            // Essayer de r√©cup√©rer depuis GeoLeaf.Config\r\n            if (GeoLeaf.Config && typeof GeoLeaf.Config.getActiveProfile === 'function') {\r\n                const profile = GeoLeaf.Config.getActiveProfile();\r\n\r\n                // 1. PRIORIT√â : Extraire les champs avec \"search\": true depuis tous les layouts\r\n                const searchableFieldsSet = new Set();\r\n\r\n                // Extraire depuis panels.detail.layout (POI)\r\n                if (profile && profile.panels && profile.panels.detail && Array.isArray(profile.panels.detail.layout)) {\r\n                    profile.panels.detail.layout\r\n                        .filter(item => item.search === true && item.field)\r\n                        .forEach(item => searchableFieldsSet.add(item.field));\r\n                }\r\n\r\n                // Extraire depuis panels.route.layout (Routes)\r\n                if (profile && profile.panels && profile.panels.route && Array.isArray(profile.panels.route.layout)) {\r\n                    profile.panels.route.layout\r\n                        .filter(item => item.search === true && item.field)\r\n                        .forEach(item => searchableFieldsSet.add(item.field));\r\n                }\r\n\r\n                if (searchableFieldsSet.size > 0) {\r\n                    const searchableFields = Array.from(searchableFieldsSet);\r\n                    if (Log) Log.debug('[Filters] Champs de recherche depuis layouts (search:true):', searchableFields);\r\n                    return searchableFields;\r\n                }\r\n\r\n                // 2. FALLBACK : Chercher searchFields dans panels.search.filters\r\n                if (profile && profile.panels && profile.panels.search && Array.isArray(profile.panels.search.filters)) {\r\n                    const searchFilter = profile.panels.search.filters.find(f => f.type === 'search');\r\n                    if (searchFilter && Array.isArray(searchFilter.searchFields) && searchFilter.searchFields.length > 0) {\r\n                        if (Log) Log.debug('[Filters] Champs de recherche depuis searchFields (fallback):', searchFilter.searchFields);\r\n                        return searchFilter.searchFields;\r\n                    }\r\n                }\r\n            }\r\n        } catch (err) {\r\n            if (Log) Log.warn('[Filters] Erreur extraction searchFields du profil:', err);\r\n        }\r\n\r\n        // 3. FALLBACK FINAL : champs par d√©faut\r\n        const defaultFields = ['title', 'label', 'name'];\r\n        if (Log) Log.debug('[Filters] Utilisation des champs de recherche par d√©faut:', defaultFields);\r\n        return defaultFields;\r\n    }\r\n\r\n    /**\r\n     * Extrait les coordonn√©es d'une route dans diff√©rents formats\r\n     * @param {object} route - Objet route\r\n     * @returns {Array<[number, number]>} Tableau de coordonn√©es [lat, lng]\r\n     * @private\r\n     */\r\n    function extractRouteCoords(route) {\r\n        // Cas 1 : tableau direct de [lat, lng]\r\n        if (Array.isArray(route.geometry) && route.geometry.length > 0) {\r\n            if (\r\n                Array.isArray(route.geometry[0]) &&\r\n                typeof route.geometry[0][0] === \"number\" &&\r\n                typeof route.geometry[0][1] === \"number\"\r\n            ) {\r\n                return route.geometry.map((pair) => [pair[0], pair[1]]);\r\n            }\r\n\r\n            // Cas 2 : GeoJSON-like dans un tableau\r\n            if (\r\n                route.geometry[0] &&\r\n                typeof route.geometry[0] === \"object\" &&\r\n                route.geometry[0].type === \"LineString\" &&\r\n                Array.isArray(route.geometry[0].coordinates)\r\n            ) {\r\n                return route.geometry[0].coordinates.map((c) => [c[1], c[0]]);\r\n            }\r\n        }\r\n\r\n        // Cas 3 : vrai objet GeoJSON\r\n        if (\r\n            route.geometry &&\r\n            typeof route.geometry === \"object\" &&\r\n            route.geometry.type === \"LineString\" &&\r\n            Array.isArray(route.geometry.coordinates)\r\n        ) {\r\n            return route.geometry.coordinates.map((c) => [c[1], c[0]]);\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n    // ========================================\r\n    //   PUBLIC API\r\n    // ========================================\r\n\r\n    /**\r\n     * Filtre une liste de POI selon les crit√®res fournis\r\n     * @param {Array} basePois - Liste compl√®te des POI\r\n     * @param {object} filterState - √âtat des filtres\r\n     * @param {Array<string>} [filterState.categoriesTree] - IDs des cat√©gories s√©lectionn√©es\r\n     * @param {Array<string>} [filterState.subCategoriesTree] - IDs des sous-cat√©gories s√©lectionn√©es\r\n     * @param {boolean} [filterState.hasMinRating] - Activer filtre note minimale\r\n     * @param {number} [filterState.minRating] - Note minimale\r\n     * @param {Array<string>} [filterState.selectedTags] - Tags s√©lectionn√©s\r\n     * @param {boolean} [filterState.hasTags] - Activer filtre tags\r\n     * @param {object} [filterState.dataTypes] - Types de donn√©es (poi, routes)\r\n     * @param {string} [filterState.searchText] - Texte de recherche\r\n     * @param {boolean} [filterState.hasSearchText] - Activer recherche textuelle\r\n     * @param {object} [filterState.proximity] - Filtre proximit√© {active, center, radius}\r\n     * @returns {Array} POI filtr√©s\r\n     */\r\n    function filterPoiList(basePois, filterState) {\r\n        const catsSel = filterState.categoriesTree || [];\r\n        const subsSel = filterState.subCategoriesTree || [];\r\n        const hasCats = catsSel.length > 0;\r\n        const hasSubs = subsSel.length > 0;\r\n        const hasMinRating = !!filterState.hasMinRating;\r\n        const minRating = filterState.minRating;\r\n        const selectedTags = filterState.selectedTags || [];\r\n        const hasTags = filterState.hasTags;\r\n        const dataTypes = filterState.dataTypes || { poi: true, routes: true };\r\n        const searchText = filterState.searchText || \"\";\r\n        const hasSearchText = filterState.hasSearchText || false;\r\n        const proximity = filterState.proximity || { active: false };\r\n\r\n        if (Log) {\r\n            Log.debug(\"[Filters] D√©but filtrage POI:\", {\r\n                totalPOI: basePois.length,\r\n                hasCats,\r\n                hasSubs,\r\n                hasSearchText,\r\n                proximityActive: proximity.active\r\n            });\r\n        }\r\n\r\n        if (!Array.isArray(basePois) || basePois.length === 0) {\r\n            if (Log) Log.debug(\"[Filters] Aucun POI √† filtrer\");\r\n            return [];\r\n        }\r\n\r\n        // Utilise GeoLeaf.Utils.getDistance() (formule de Haversine)\r\n        const getDistance = Utils ? Utils.getDistance : null;\r\n\r\n        return basePois.filter(function (poi) {\r\n            const attrs = poi.attributes || {};\r\n            const props = poi.properties || {};\r\n\r\n            // Filtre Type de donn√©es (POI / Routes)\r\n            const poiType = poi.type || attrs.type || props.type || 'poi';\r\n            if (poiType === 'route' || poiType === 'routes') {\r\n                if (!dataTypes.routes) return false;\r\n            } else {\r\n                if (!dataTypes.poi) return false;\r\n            }\r\n\r\n            // Filtre Recherche textuelle\r\n            if (hasSearchText) {\r\n                const searchFields = getSearchFieldsFromProfile();\r\n                let matchFound = false;\r\n\r\n                for (let i = 0; i < searchFields.length; i++) {\r\n                    const fieldPath = searchFields[i];\r\n                    const value = getNestedValue(poi, fieldPath);\r\n\r\n                    if (value && String(value).toLowerCase().includes(searchText)) {\r\n                        matchFound = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!matchFound) return false;\r\n            }\r\n\r\n            // Filtre Proximit√©\r\n            if (proximity.active && proximity.center && getDistance) {\r\n                let lat, lng;\r\n\r\n                // V√©rifier d'abord le format latlng [lat, lng]\r\n                if (poi.latlng && Array.isArray(poi.latlng) && poi.latlng.length === 2) {\r\n                    lat = poi.latlng[0];\r\n                    lng = poi.latlng[1];\r\n                } else {\r\n                    lat = poi.lat || poi.latitude || attrs.latitude || props.latitude ||\r\n                              (poi.coordinates && poi.coordinates[1]) ||\r\n                              (poi.geometry && poi.geometry.coordinates && poi.geometry.coordinates[1]);\r\n                    lng = poi.lng || poi.longitude || attrs.longitude || props.longitude ||\r\n                              (poi.coordinates && poi.coordinates[0]) ||\r\n                              (poi.geometry && poi.geometry.coordinates && poi.geometry.coordinates[0]);\r\n                }\r\n\r\n                if (lat && lng) {\r\n                    const distance = getDistance(proximity.center.lat, proximity.center.lng, lat, lng);\r\n                    if (distance > proximity.radius) return false;\r\n                } else {\r\n                    // Si pas de coordonn√©es, on exclut du filtre proximit√©\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            const catId =\r\n                attrs.categoryId ||\r\n                poi.categoryId ||\r\n                poi.category ||\r\n                props.categoryId ||\r\n                props.category ||\r\n                null;\r\n\r\n            const subId =\r\n                attrs.subCategoryId ||\r\n                poi.subCategoryId ||\r\n                poi.subCategory ||\r\n                poi.sub_category ||\r\n                props.subCategoryId ||\r\n                props.sub_category ||\r\n                null;\r\n\r\n            // Filtre cat√©gories / sous-cat√©gories (tree-view)\r\n            // Logique:\r\n            // - Si des sous-cat√©gories sont coch√©es: le POI doit avoir cette sous-cat√©gorie\r\n            // - Si seulement des cat√©gories sont coch√©es (sans sous-cat): le POI doit avoir cette cat√©gorie\r\n            if (hasCats || hasSubs) {\r\n                // Cas 1: Des sous-cat√©gories sont s√©lectionn√©es\r\n                if (hasSubs) {\r\n                    // Si le POI a une sous-cat√©gorie, v√©rifier qu'elle est dans la liste\r\n                    if (subId && subsSel.includes(String(subId))) {\r\n                        // OK - sous-cat√©gorie correspond\r\n                    } else {\r\n                        // POI n'a pas la bonne sous-cat√©gorie\r\n                        // On v√©rifie si sa cat√©gorie est s√©lectionn√©e SANS sous-cat√©gorie coch√©e\r\n                        // (permet de garder les POI dont la cat√©gorie est coch√©e mais pas leurs sous-cat)\r\n                        if (hasCats && catId && catsSel.includes(String(catId))) {\r\n                            // V√©rifier si aucune sous-cat de cette cat√©gorie n'est coch√©e\r\n                            // Pour simplifier, on rejette si des sous-cat sont coch√©es\r\n                            return false;\r\n                        } else {\r\n                            return false;\r\n                        }\r\n                    }\r\n                }\r\n                // Cas 2: Seulement des cat√©gories (pas de sous-cat)\r\n                else if (hasCats) {\r\n                    if (!catId || !catsSel.includes(String(catId))) {\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Filtre note minimale\r\n            if (hasMinRating) {\r\n                let avg = 0;\r\n                let hasRating = false;\r\n\r\n                // Cas 1: reviews est un objet avec rating (format actuel)\r\n                let reviewsObj = attrs.reviews || poi.reviews || props.reviews;\r\n                if (reviewsObj && typeof reviewsObj === \"object\" && !Array.isArray(reviewsObj)) {\r\n                    if (typeof reviewsObj.rating === \"number\") {\r\n                        avg = reviewsObj.rating;\r\n                        hasRating = true;\r\n                    }\r\n                }\r\n\r\n                // Cas 2: reviews est un array (ancien format)\r\n                else if (Array.isArray(reviewsObj) && reviewsObj.length > 0) {\r\n                    const sum = reviewsObj.reduce(\r\n                        (acc, r) => acc + (Number(r.rating) || 0),\r\n                        0\r\n                    );\r\n                    avg = sum / reviewsObj.length;\r\n                    hasRating = avg > 0;\r\n                }\r\n\r\n                // Cas 3: rating directement sur l'objet\r\n                else if (typeof attrs.rating === \"number\") {\r\n                    avg = attrs.rating;\r\n                    hasRating = true;\r\n                } else if (typeof poi.rating === \"number\") {\r\n                    avg = poi.rating;\r\n                    hasRating = true;\r\n                } else if (typeof props.rating === \"number\") {\r\n                    avg = props.rating;\r\n                    hasRating = true;\r\n                }\r\n\r\n                // Exclure si: 1) pas de note OU 2) note < minRating\r\n                // Comportement: quand filtre actif, seuls les POI avec note >= minRating passent\r\n                if (!hasRating || avg < minRating) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            // Tags (au moins UN des tags s√©lectionn√©s doit √™tre pr√©sent dans le POI)\r\n            if (hasTags) {\r\n                let poiTags =\r\n                    attrs.tags || poi.tags || props.tags || [];\r\n                if (!Array.isArray(poiTags)) {\r\n                    if (typeof poiTags === \"string\") {\r\n                        poiTags = poiTags.split(/[,;]+/);\r\n                    } else {\r\n                        poiTags = [];\r\n                    }\r\n                }\r\n                poiTags = poiTags\r\n                    .map((t) => String(t).trim())\r\n                    .filter(Boolean);\r\n\r\n                const hasAtLeastOne = selectedTags.some((tag) =>\r\n                    poiTags.includes(tag)\r\n                );\r\n                if (!hasAtLeastOne) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Filtre une liste de routes selon les crit√®res fournis\r\n     * @param {Array} baseRoutes - Liste compl√®te des routes\r\n     * @param {object} filterState - √âtat des filtres\r\n     * @param {Array<string>} [filterState.categoriesTree] - IDs des cat√©gories s√©lectionn√©es\r\n     * @param {Array<string>} [filterState.subCategoriesTree] - IDs des sous-cat√©gories s√©lectionn√©es\r\n     * @param {Array<string>} [filterState.selectedTags] - Tags s√©lectionn√©s\r\n     * @param {boolean} [filterState.hasTags] - Activer filtre tags\r\n     * @param {string} [filterState.searchText] - Texte de recherche\r\n     * @param {boolean} [filterState.hasSearchText] - Activer recherche textuelle\r\n     * @param {object} [filterState.proximity] - Filtre proximit√© {active, center, radius}\r\n     * @returns {Array} Routes filtr√©es\r\n     */\r\n    function filterRouteList(baseRoutes, filterState) {\r\n        const catsSel = filterState.categoriesTree || [];\r\n        const subsSel = filterState.subCategoriesTree || [];\r\n        const hasCats = catsSel.length > 0;\r\n        const hasSubs = subsSel.length > 0;\r\n        const selectedTags = filterState.selectedTags || [];\r\n        const hasTags = filterState.hasTags;\r\n        const hasMinRating = !!filterState.hasMinRating;\r\n        const minRating = filterState.minRating;\r\n        const searchText = filterState.searchText || \"\";\r\n        const hasSearchText = filterState.hasSearchText || false;\r\n        const proximity = filterState.proximity || { active: false };\r\n\r\n        if (Log) {\r\n            Log.debug(\"[Filters] D√©but filtrage routes:\", {\r\n                totalRoutes: baseRoutes.length,\r\n                hasCats,\r\n                hasSubs,\r\n                hasMinRating,\r\n                minRating,\r\n                hasSearchText,\r\n                proximityActive: proximity.active\r\n            });\r\n        }\r\n\r\n        if (!Array.isArray(baseRoutes) || baseRoutes.length === 0) {\r\n            if (Log) Log.debug(\"[Filters] Aucune route √† filtrer\");\r\n            return [];\r\n        }\r\n\r\n        // Utilise GeoLeaf.Utils.getDistance() (formule de Haversine)\r\n        const getDistance = Utils ? Utils.getDistance : null;\r\n\r\n        return baseRoutes.filter(function (route) {\r\n            const attrs = route.attributes || {};\r\n            const props = route.properties || {};\r\n\r\n            // Filtre Recherche textuelle\r\n            if (hasSearchText) {\r\n                const searchFields = getSearchFieldsFromProfile();\r\n                let matchFound = false;\r\n\r\n                for (let i = 0; i < searchFields.length; i++) {\r\n                    const fieldPath = searchFields[i];\r\n                    const value = getNestedValue(route, fieldPath);\r\n\r\n                    if (value && String(value).toLowerCase().includes(searchText)) {\r\n                        matchFound = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!matchFound) return false;\r\n            }\r\n\r\n            // Filtre cat√©gories / sous-cat√©gories (tree-view)\r\n            const catId =\r\n                attrs.categoryId ||\r\n                route.categoryId ||\r\n                route.category ||\r\n                props.categoryId ||\r\n                props.category ||\r\n                null;\r\n\r\n            const subId =\r\n                attrs.subCategoryId ||\r\n                route.subCategoryId ||\r\n                route.subCategory ||\r\n                route.sub_category ||\r\n                props.subCategoryId ||\r\n                props.sub_category ||\r\n                null;\r\n\r\n            // Filtre cat√©gories / sous-cat√©gories (tree-view)\r\n            // Logique:\r\n            // - Si des sous-cat√©gories sont coch√©es: la route doit avoir cette sous-cat√©gorie\r\n            // - Si seulement des cat√©gories sont coch√©es (sans sous-cat): la route doit avoir cette cat√©gorie\r\n            if (hasCats || hasSubs) {\r\n                // Cas 1: Des sous-cat√©gories sont s√©lectionn√©es\r\n                if (hasSubs) {\r\n                    if (subId && subsSel.includes(String(subId))) {\r\n                        // OK - sous-cat√©gorie correspond\r\n                    } else {\r\n                        // Route n'a pas la bonne sous-cat√©gorie\r\n                        if (hasCats && catId && catsSel.includes(String(catId))) {\r\n                            return false;\r\n                        } else {\r\n                            return false;\r\n                        }\r\n                    }\r\n                }\r\n                // Cas 2: Seulement des cat√©gories (pas de sous-cat)\r\n                else if (hasCats) {\r\n                    if (!catId || !catsSel.includes(String(catId))) {\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Filtre Tags (au moins UN des tags s√©lectionn√©s doit √™tre pr√©sent)\r\n            if (hasTags) {\r\n                let routeTags =\r\n                    attrs.tags || route.tags || props.tags || [];\r\n                if (!Array.isArray(routeTags)) {\r\n                    if (typeof routeTags === \"string\") {\r\n                        routeTags = routeTags.split(/[,;]+/);\r\n                    } else {\r\n                        routeTags = [];\r\n                    }\r\n                }\r\n                routeTags = routeTags\r\n                    .map((t) => String(t).trim())\r\n                    .filter(Boolean);\r\n\r\n                const hasAtLeastOne = selectedTags.some((tag) =>\r\n                    routeTags.includes(tag)\r\n                );\r\n                if (!hasAtLeastOne) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            // Filtre note minimale (m√™me logique que pour les POI)\r\n            if (hasMinRating) {\r\n                let avg = 0;\r\n                let hasRating = false;\r\n\r\n                // Cas 1: reviews est un objet avec rating (format actuel)\r\n                let reviewsObj = attrs.reviews || route.reviews || props.reviews;\r\n                if (reviewsObj && typeof reviewsObj === \"object\" && !Array.isArray(reviewsObj)) {\r\n                    if (typeof reviewsObj.rating === \"number\") {\r\n                        avg = reviewsObj.rating;\r\n                        hasRating = true;\r\n                    }\r\n                }\r\n\r\n                // Cas 2: reviews est un array (ancien format)\r\n                else if (Array.isArray(reviewsObj) && reviewsObj.length > 0) {\r\n                    const sum = reviewsObj.reduce(\r\n                        (acc, r) => acc + (Number(r.rating) || 0),\r\n                        0\r\n                    );\r\n                    avg = sum / reviewsObj.length;\r\n                    hasRating = avg > 0;\r\n                }\r\n\r\n                // Cas 3: rating directement sur l'objet\r\n                else if (typeof attrs.rating === \"number\") {\r\n                    avg = attrs.rating;\r\n                    hasRating = true;\r\n                } else if (typeof route.rating === \"number\") {\r\n                    avg = route.rating;\r\n                    hasRating = true;\r\n                } else if (typeof props.rating === \"number\") {\r\n                    avg = props.rating;\r\n                    hasRating = true;\r\n                }\r\n\r\n                // Exclure si: 1) pas de note OU 2) note < minRating\r\n                // Comportement: quand filtre actif, seules les routes avec note >= minRating passent\r\n                if (!hasRating || avg < minRating) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            // Filtre Proximit√© : v√©rifier si au moins un point de l'itin√©raire est dans le cercle\r\n            if (proximity.active && proximity.center && getDistance) {\r\n                const coords = extractRouteCoords(route);\r\n\r\n                if (coords.length === 0) {\r\n                    // Si pas de coordonn√©es, on exclut du filtre proximit√©\r\n                    return false;\r\n                }\r\n\r\n                // V√©rifier si au moins un point de l'itin√©raire est dans le rayon\r\n                let isInRadius = false;\r\n                for (let i = 0; i < coords.length; i++) {\r\n                    const lat = coords[i][0];\r\n                    const lng = coords[i][1];\r\n                    const distance = getDistance(proximity.center.lat, proximity.center.lng, lat, lng);\r\n                    if (distance <= proximity.radius) {\r\n                        isInRadius = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!isInRadius) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        });\r\n    }\r\n\r\n    // ========================================\r\n    //   EXPORT\r\n    // ========================================\r\n\r\n    GeoLeaf.Filters = {\r\n        filterPoiList,\r\n        filterRouteList\r\n    };\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf POI Module - √âtat Partag√©\r\n * Variables et constantes partag√©es entre tous les sous-modules POI\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    GeoLeaf._POIShared = GeoLeaf._POIShared || {};\r\n\r\n    // ========================================\r\n    //   CONSTANTES\r\n    // ========================================\r\n\r\n    const POI_MARKER_SIZE = GeoLeaf.Constants?.POI_MARKER_SIZE || 16;\r\n    const POI_MAX_ZOOM = GeoLeaf.Constants?.POI_MAX_ZOOM || 18;\r\n\r\n    // Ic√¥ne par d√©faut (cercle bleu SVG en base64)\r\n    const defaultIconUrl = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI4IiBmaWxsPSIjNGE5MGU1IiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMiIvPjwvc3ZnPg==\";\r\n\r\n    // ========================================\r\n    //   √âTAT PARTAG√â\r\n    // ========================================\r\n\r\n    /**\r\n     * √âtat mutable partag√© entre tous les sous-modules POI\r\n     * Accessible via GeoLeaf._POIShared.state\r\n     */\r\n    const state = {\r\n        // LayerGroup Leaflet contenant tous les marqueurs POI\r\n        poiLayerGroup: null,\r\n\r\n        // Cluster group (si activ√©)\r\n        poiClusterGroup: null,\r\n\r\n        // Tableau des donn√©es POI charg√©es\r\n        allPois: [],\r\n\r\n        // Map pour stocker les marqueurs Leaflet par ID de POI\r\n        poiMarkers: new Map(),\r\n\r\n        // Configuration du module POI\r\n        poiConfig: {},\r\n\r\n        // R√©f√©rence vers la carte Leaflet\r\n        mapInstance: null,\r\n\r\n        // Indicateur de chargement en cours\r\n        isLoading: false,\r\n\r\n        // √âl√©ment DOM pour le panneau lat√©ral POI\r\n        sidePanelElement: null,\r\n\r\n        // POI actuellement affich√© dans le panneau\r\n        currentPoiInPanel: null,\r\n\r\n        // Overlay de fond sombre pour le side panel\r\n        sidePanelOverlay: null,\r\n\r\n        // Index de l'image courante dans la galerie\r\n        currentGalleryIndex: 0\r\n    };\r\n\r\n    // ========================================\r\n    //   UTILITAIRES PARTAG√âS\r\n    // ========================================\r\n\r\n    /**\r\n     * Helper interne : garantit qu'un maxZoom num√©rique est d√©fini sur la carte.\r\n     * Utilis√© pour √©viter les erreurs du plugin de clustering (\"Map has no maxZoom specified\").\r\n     *\r\n     * @param {L.Map} map - Instance de la carte Leaflet\r\n     * @param {number} [fallback=18] - Valeur par d√©faut si map.options.maxZoom n'existe pas\r\n     */\r\n    function ensureMapMaxZoom(map, fallback = 18) {\r\n        if (!map || !map.options) return;\r\n        if (typeof map.options.maxZoom !== 'number' || isNaN(map.options.maxZoom)) {\r\n            map.options.maxZoom = fallback;\r\n        }\r\n    }\r\n\r\n    // ========================================\r\n    //   EXPORT\r\n    // ========================================\r\n\r\n    GeoLeaf._POIShared = {\r\n        // Constantes (lecture seule)\r\n        constants: Object.freeze({\r\n            POI_MARKER_SIZE,\r\n            POI_MAX_ZOOM,\r\n            defaultIconUrl\r\n        }),\r\n\r\n        // √âtat mutable (accessible en lecture/√©criture par sous-modules)\r\n        state,\r\n\r\n        // Utilitaires\r\n        ensureMapMaxZoom\r\n    };\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf POI Module - Normalizers\r\n * Fonctions de normalisation et extraction de donn√©es POI\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n    const Security = GeoLeaf.Security || {};\r\n    const Utils = GeoLeaf.Utils || {};\r\n\r\n    GeoLeaf._POINormalizers = GeoLeaf._POINormalizers || {};\r\n\r\n    // ========================================\r\n    //   NORMALISATION POI\r\n    // ========================================\r\n\r\n    /**\r\n     * Normalise un POI vers la structure standard { id, latlng, title, attributes: {...} }.\r\n     * Transforme l'ancien format vers le nouveau format attendu par le profile.json.\r\n     *\r\n     * @param {object} poi - POI au format brut (ancien ou nouveau).\r\n     * @returns {object} POI normalis√©.\r\n     */\r\n    function normalizePoi(poi) {\r\n        if (!poi) return null;\r\n\r\n        const p = poi;\r\n        // Pr√©f√©rer les champs \"attributes\" du nouveau sch√©ma\r\n        const attr = (p && typeof p.attributes === 'object' && p.attributes) ? p.attributes : {};\r\n        const props = p.properties || {};\r\n\r\n        // Helper to sanitize URLs\r\n        const sanitizeUrl = (url) => {\r\n            if (!url || typeof url !== 'string') return null;\r\n            const trimmed = url.trim();\r\n            if (trimmed.match(/^(https?:\\/\\/|data:image\\/)/i)) {\r\n                return trimmed;\r\n            }\r\n            return null;\r\n        };\r\n\r\n        // Helper to escape HTML - utilise Security.escapeHtml\r\n        const escapeHtml = Security.escapeHtml || ((str) => {\r\n            if (!str) return '';\r\n            const div = document.createElement('div');\r\n            div.textContent = str;\r\n            return div.innerHTML;\r\n        });\r\n\r\n        // Utilise resolveField si disponible\r\n        const resolveField = Utils.resolveField || ((obj, ...paths) => {\r\n            for (const path of paths) {\r\n                const keys = path.split('.');\r\n                let value = obj;\r\n                for (const key of keys) {\r\n                    if (value && typeof value === 'object' && key in value) {\r\n                        value = value[key];\r\n                    } else {\r\n                        value = null;\r\n                        break;\r\n                    }\r\n                }\r\n                if (value && typeof value === 'string' && value.trim()) {\r\n                    return value;\r\n                }\r\n            }\r\n            return '';\r\n        });\r\n\r\n        // Construire la structure normalis√©e\r\n        const normalized = {\r\n            id: p.id || null,\r\n            latlng: p.latlng || null,\r\n            // Le titre provient du champ label (nouvelle structure) ou des anciens champs\r\n            title: escapeHtml(resolveField(p, 'title', 'label', 'name', 'attributes.title', 'properties.label', 'properties.name') || 'Sans nom'),\r\n            // Pr√©server aussi label et name au niveau racine\r\n            label: escapeHtml(resolveField(p, 'label', 'name', 'title')),\r\n            name: escapeHtml(resolveField(p, 'name', 'label', 'title')),\r\n            description: escapeHtml(resolveField(p, 'description', 'attributes.description')),\r\n            // ‚úÖ IMPORTANT: Pr√©server les properties originales pour la r√©solution de champs comme \"properties.Name\"\r\n            properties: p.properties || {},\r\n            attributes: {\r\n                // D'abord, copier TOUS les attributs originaux pour pr√©server les champs sp√©cifiques\r\n                ...attr,\r\n                // Puis ajouter/surcharger avec les mappings normalis√©s\r\n                // Description courte : premier niveau du POI\r\n                shortDescription: escapeHtml(resolveField(p, 'description', 'attributes.shortDescription', 'properties.description')),\r\n                // Description longue : champ attributes.description_long ou anciens champs\r\n                longDescription: escapeHtml(resolveField(p, 'attributes.description_long', 'description_long', 'properties.description_long', 'attributes.longDescription')),\r\n                // Cat√©gories : pr√©f√©rer attributes.categoryId puis fallback anciens champs\r\n                categoryId: attr.categoryId || p.categoryId || p.category || props.category || null,\r\n                subCategoryId: attr.subCategoryId || p.subCategoryId || p.sub_category || props.sub_category || null,\r\n                // Image principale : attributes.photo ou attributes.mainImage, sinon premi√®re image de la galerie\r\n                mainImage: sanitizeUrl(attr.photo || attr.mainImage || props.photo || (attr.gallery && attr.gallery[0]) || (p.gallery && p.gallery[0]) || null),\r\n                // Galerie d'images : provenant de attributes.gallery ou anciens champs\r\n                gallery: ((attr.gallery || p.gallery || props.gallery || p.images || props.images) || [])\r\n                    .map(img => {\r\n                        if (typeof img === 'string') return sanitizeUrl(img);\r\n                        if (img && img.url) return sanitizeUrl(img.url);\r\n                        return null;\r\n                    })\r\n                    .filter(Boolean),\r\n                price: attr.price || p.price || props.price || null,\r\n                // Horaires d'ouverture : attributes.opening_hours (snake_case) ou openingHours camelCase\r\n                openingHours: attr.opening_hours || attr.openingHours || p.opening_hours || props.opening_hours || p.openingHours || props.openingHours || null,\r\n                openingHoursTable: null, // Sera construit √† partir de openingHours si n√©cessaire\r\n                reviews: attr.reviews || p.reviews || props.reviews || null,\r\n                // Tags : pr√©f√©rer attributes.tags\r\n                tags: (attr.tags || p.tags || props.tags || [])\r\n                    .map(t => escapeHtml(String(t))),\r\n                // Lien / site web : attributes.link (nouveau) ou anciens champs\r\n                website: sanitizeUrl(attr.link || attr.website || p.link || props.link || p.website || props.website || null),\r\n                address: escapeHtml(resolveField(p, 'attributes.address', 'address', 'properties.address')),\r\n                phone: escapeHtml(resolveField(p, 'attributes.phone', 'phone', 'properties.phone')),\r\n                email: escapeHtml(resolveField(p, 'attributes.email', 'email', 'properties.email')),\r\n                services: (attr.services || p.services || props.services || [])\r\n                    .map(s => escapeHtml(String(s)))\r\n            }\r\n        };\r\n\r\n        // Construire openingHoursTable si openingHours existe\r\n        if (normalized.attributes.openingHours && Array.isArray(normalized.attributes.openingHours)) {\r\n            normalized.attributes.openingHoursTable = normalized.attributes.openingHours.map(raw => {\r\n                if (raw == null) return null;\r\n                const text = String(raw).trim();\r\n                if (!text) return null;\r\n\r\n                const parts = text.split(':');\r\n                if (parts.length > 1) {\r\n                    const day = parts.shift().trim();\r\n                    const rest = parts.join(':').trim();\r\n\r\n                    let open = '';\r\n                    let close = '';\r\n                    const hoursParts = rest.split(/[‚Äì-]/);\r\n                    if (hoursParts.length > 1) {\r\n                        open = hoursParts[0].trim();\r\n                        close = hoursParts.slice(1).join('‚Äì').trim();\r\n                    } else {\r\n                        open = rest;\r\n                    }\r\n\r\n                    return { day, open, close };\r\n                }\r\n\r\n                return { day: text, open: '', close: '' };\r\n            }).filter(Boolean);\r\n        }\r\n\r\n        // ‚úÖ IMPORTANT: Pr√©server les m√©tadonn√©es de configuration de couche\r\n        // Ces champs sont ajout√©s par GeoJSON._convertFeatureToPOI\r\n        if (poi._sidepanelConfig) {\r\n            normalized._sidepanelConfig = poi._sidepanelConfig;\r\n        }\r\n        if (poi._layerConfig) {\r\n            normalized._layerConfig = poi._layerConfig;\r\n        }\r\n\r\n        return normalized;\r\n    }\r\n\r\n    /**\r\n     * Extrait la valeur d'un champ depuis un POI normalis√© en utilisant la notation point√©e.\r\n     *\r\n     * @param {object} normalizedPoi - POI normalis√©.\r\n     * @param {string} fieldPath - Chemin du champ (ex: \"title\", \"attributes.gallery\", \"attributes.reviews.rating\").\r\n     * @returns {*} Valeur du champ ou null si introuvable.\r\n     */\r\n    function getFieldValue(normalizedPoi, fieldPath) {\r\n        if (!normalizedPoi || !fieldPath) return null;\r\n\r\n        console.log('[DEBUG getFieldValue] Recherche:', fieldPath, 'dans POI:', {\r\n            id: normalizedPoi.id,\r\n            hasProperties: !!normalizedPoi.properties,\r\n            hasAttributes: !!normalizedPoi.attributes,\r\n            propertiesKeys: normalizedPoi.properties ? Object.keys(normalizedPoi.properties) : [],\r\n            attributesKeys: normalizedPoi.attributes ? Object.keys(normalizedPoi.attributes) : []\r\n        });\r\n\r\n        if (Log && typeof Log.debug === 'function') {\r\n            Log.debug(\"[POI.getFieldValue] Recherche fieldPath:\", fieldPath, \"| POI:\", normalizedPoi.id);\r\n        }\r\n\r\n        const parts = fieldPath.split('.');\r\n        let value = normalizedPoi;\r\n\r\n        for (const part of parts) {\r\n            if (value == null || typeof value !== 'object') {\r\n                if (Log && typeof Log.debug === 'function') {\r\n                    Log.debug(\"[POI.getFieldValue] Chemin interrompu √† la partie:\", part, \"| value actuelle:\", value);\r\n                }\r\n                return null;\r\n            }\r\n            value = value[part];\r\n        }\r\n\r\n        console.log('[DEBUG getFieldValue] Valeur trouv√©e:', value, 'pour fieldPath:', fieldPath);\r\n\r\n        if (Log && typeof Log.debug === 'function') {\r\n            Log.debug(\"[POI.getFieldValue] Valeur trouv√©e pour\", fieldPath, \":\", value);\r\n        }\r\n\r\n        // Retourner null pour les valeurs vides\r\n        if (value === undefined || value === '' || (Array.isArray(value) && value.length === 0)) {\r\n            console.log('[DEBUG getFieldValue] Valeur vide, retourne null');\r\n            if (Log && typeof Log.debug === 'function') {\r\n                Log.debug(\"[POI.getFieldValue] Valeur vide ou tableau vide, retourne null\");\r\n            }\r\n            return null;\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    /**\r\n     * Extrait les coordonn√©es d'un POI et les normalise en [lat, lng].\r\n     *\r\n     * @param {object} poi - POI brut.\r\n     * @returns {Array<number>|null} Coordonn√©es [lat, lng] ou null si invalides.\r\n     */\r\n    function extractCoordinates(poi) {\r\n        if (!poi) return null;\r\n\r\n        let lat, lng;\r\n\r\n        // Format 1: poi.latlng = [lat, lng]\r\n        if (Array.isArray(poi.latlng) && poi.latlng.length >= 2) {\r\n            lat = poi.latlng[0];\r\n            lng = poi.latlng[1];\r\n        }\r\n        // Format 2: poi.latlng = {lat, lng}\r\n        else if (poi.latlng && typeof poi.latlng === 'object') {\r\n            lat = poi.latlng.lat;\r\n            lng = poi.latlng.lng || poi.latlng.lon;\r\n        }\r\n        // Format 3: poi.lat, poi.lng\r\n        else if (typeof poi.lat === 'number' && typeof poi.lng === 'number') {\r\n            lat = poi.lat;\r\n            lng = poi.lng;\r\n        }\r\n        // Format 4: poi.latitude, poi.longitude\r\n        else if (typeof poi.latitude === 'number' && typeof poi.longitude === 'number') {\r\n            lat = poi.latitude;\r\n            lng = poi.longitude;\r\n        }\r\n        // Format 5: poi.geometry.coordinates (GeoJSON)\r\n        else if (poi.geometry && Array.isArray(poi.geometry.coordinates)) {\r\n            // GeoJSON: [lng, lat] (invers√©!)\r\n            lng = poi.geometry.coordinates[0];\r\n            lat = poi.geometry.coordinates[1];\r\n        }\r\n\r\n        // Validation\r\n        if (typeof lat !== 'number' || typeof lng !== 'number' || isNaN(lat) || isNaN(lng)) {\r\n            return null;\r\n        }\r\n\r\n        // Validation bounds\r\n        if (lat < -90 || lat > 90 || lng < -180 || lng > 180) {\r\n            return null;\r\n        }\r\n\r\n        return [lat, lng];\r\n    }\r\n\r\n    /**\r\n     * G√©n√®re un ID unique pour un POI sans ID.\r\n     *\r\n     * @param {object} poi - POI.\r\n     * @returns {string} ID g√©n√©r√©.\r\n     */\r\n    function generatePoiId(poi) {\r\n        const timestamp = Date.now();\r\n        const random = Math.floor(Math.random() * 10000);\r\n        const label = (poi.title || poi.label || poi.name || 'poi').toLowerCase().replace(/[^a-z0-9]/g, '-').substring(0, 20);\r\n        return `poi-${label}-${timestamp}-${random}`;\r\n    }\r\n\r\n    // ========================================\r\n    //   EXPORT\r\n    // ========================================\r\n\r\n    GeoLeaf._POINormalizers = {\r\n        normalizePoi,\r\n        getFieldValue,\r\n        extractCoordinates,\r\n        generatePoiId\r\n    };\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf POI Module - Popup & Tooltips\r\n * Gestion des popups rapides et tooltips sur les marqueurs.\r\n * D√©l√®gue le rendu au module _ContentBuilder centralis√©.\r\n *\r\n * @module poi/popup\r\n * @version 2.0.0\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log || console;\r\n    const Security = GeoLeaf.Security || {};\r\n    const Utils = GeoLeaf.Utils || {};\r\n\r\n    GeoLeaf._POIPopup = GeoLeaf._POIPopup || {};\r\n\r\n    // ========================================\r\n    //   UTILITAIRES LOCAUX\r\n    // ========================================\r\n\r\n    /**\r\n     * R√©cup√®re le ContentBuilder\r\n     * @returns {Object|null}\r\n     */\r\n    function getContentBuilder() {\r\n        return GeoLeaf._ContentBuilder || null;\r\n    }\r\n\r\n    /**\r\n     * R√©sout la valeur d'un champ √† partir d'un objet POI.\r\n     * D√©l√®gue √† Utils.resolveField si disponible.\r\n     *\r\n     * @param {object} poi - Objet POI source.\r\n     * @param {string} field - Chemin du champ (ex: \"attributes.photo\").\r\n     * @returns {*} Valeur du champ ou null.\r\n     */\r\n    function resolveField(poi, field) {\r\n        if (!poi || !field) return null;\r\n\r\n        if (Utils.resolveField) {\r\n            return Utils.resolveField(poi, field);\r\n        }\r\n\r\n        // Fallback minimal\r\n        const parts = field.split('.');\r\n        let current = poi;\r\n        for (const part of parts) {\r\n            if (current && typeof current === 'object' && part in current) {\r\n                current = current[part];\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n        return current;\r\n    }\r\n\r\n    /**\r\n     * √âchappe le HTML pour pr√©venir XSS.\r\n     * D√©l√®gue √† Security.escapeHtml si disponible.\r\n     *\r\n     * @param {string} str - Cha√Æne √† √©chapper.\r\n     * @returns {string} Cha√Æne √©chapp√©e.\r\n     */\r\n    function escapeHtml(str) {\r\n        if (!str) return '';\r\n        if (Security.escapeHtml) {\r\n            return Security.escapeHtml(str);\r\n        }\r\n        // Fallback\r\n        const div = document.createElement('div');\r\n        div.textContent = str;\r\n        return div.innerHTML;\r\n    }\r\n\r\n    // ========================================\r\n    //   CONFIGURATION\r\n    // ========================================\r\n\r\n    /**\r\n     * R√©cup√®re la configuration de popup pour une couche/POI.\r\n     *\r\n     * @param {object} poi - Donn√©es du POI.\r\n     * @returns {Array|null} Configuration detailPopup ou null.\r\n     */\r\n    function getPopupConfig(poi) {\r\n        // 1. Config attach√©e depuis la couche du POI\r\n        if (poi._layerConfig?.popup?.detailPopup) {\r\n            Log.info && Log.info('[POI Popup] Config popup depuis layerConfig');\r\n            return poi._layerConfig.popup.detailPopup;\r\n        }\r\n\r\n        // 2. Fallback: profil actif\r\n        const Config = GeoLeaf.Config;\r\n        if (Config && typeof Config.getActiveProfile === 'function') {\r\n            const profile = Config.getActiveProfile();\r\n\r\n            // Chercher la config dans les emplacements standards\r\n            if (profile?.popup?.detailPopup) {\r\n                Log.info && Log.info('[POI Popup] Config popup depuis profil actif (profile.popup.detailPopup)');\r\n                return profile.popup.detailPopup;\r\n            }\r\n\r\n            // ALTERNATIVE: V√©rifier aussi dans panels.poi (ancienne structure)\r\n            if (profile?.panels?.poi?.popup?.detailPopup) {\r\n                Log.info && Log.info('[POI Popup] Config popup depuis profil actif (profile.panels.poi.popup.detailPopup - ancienne structure)');\r\n                return profile.panels.poi.popup.detailPopup;\r\n            }\r\n        }\r\n\r\n        Log.warn && Log.warn('[POI Popup] Aucune configuration detailPopup trouv√©e pour POI:', poi.id || 'unknown');\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re la configuration de tooltip pour une couche/POI.\r\n     *\r\n     * @param {object} poi - Donn√©es du POI.\r\n     * @returns {Array|null} Configuration detailTooltip ou null.\r\n     */\r\n    function getTooltipConfig(poi) {\r\n        // 1. Config depuis popup.detailTooltip (structure standard)\r\n        if (poi._layerConfig?.popup?.detailTooltip) {\r\n            return poi._layerConfig.popup.detailTooltip;\r\n        }\r\n\r\n        // 2. Config depuis tooltip.detailTooltip\r\n        if (poi._layerConfig?.tooltip?.detailTooltip) {\r\n            return poi._layerConfig.tooltip.detailTooltip;\r\n        }\r\n\r\n        // 3. Config directe detailTooltip\r\n        if (poi._layerConfig?.detailTooltip) {\r\n            return poi._layerConfig.detailTooltip;\r\n        }\r\n\r\n        // 4. Fallback: profil actif\r\n        const Config = GeoLeaf.Config;\r\n        if (Config && typeof Config.getActiveProfile === 'function') {\r\n            const profile = Config.getActiveProfile();\r\n            if (profile?.popup?.detailTooltip) {\r\n                return profile.popup.detailTooltip;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    // ========================================\r\n    //   CONSTRUCTION DU CONTENU\r\n    // ========================================\r\n\r\n    /**\r\n     * Construit le contenu HTML d'un popup rapide pour un POI.\r\n     * Utilise ContentBuilder si disponible, sinon logique interne.\r\n     *\r\n     * @param {object} poi - Donn√©es du POI.\r\n     * @param {Function} resolveCategoryDisplay - Fonction pour r√©soudre l'affichage de cat√©gorie.\r\n     * @returns {string} HTML du popup.\r\n     */\r\n    function buildQuickPopupContent(poi, resolveCategoryDisplay) {\r\n        if (!poi) {\r\n            Log.warn && Log.warn('[POI Popup] POI invalide');\r\n            return '';\r\n        }\r\n\r\n        const config = getPopupConfig(poi);\r\n        const ContentBuilder = getContentBuilder();\r\n\r\n        // Si ContentBuilder disponible, d√©l√©guer\r\n        if (ContentBuilder && typeof ContentBuilder.buildPopupHTML === 'function') {\r\n            return ContentBuilder.buildPopupHTML(poi, config, {\r\n                resolveCategoryDisplay: resolveCategoryDisplay\r\n            });\r\n        }\r\n\r\n        // Fallback si ContentBuilder non charg√©\r\n        Log.warn && Log.warn('[POI Popup] ContentBuilder non disponible, fallback basique');\r\n        return buildFallbackPopup(poi, config, resolveCategoryDisplay);\r\n    }\r\n\r\n    /**\r\n     * Construit le contenu d'un tooltip pour un POI.\r\n     * Utilise ContentBuilder si disponible.\r\n     *\r\n     * @param {object} poi - Donn√©es du POI.\r\n     * @param {Function} resolveCategoryDisplay - Fonction pour r√©soudre l'affichage de cat√©gorie.\r\n     * @returns {string} HTML du tooltip.\r\n     */\r\n    function buildTooltipContent(poi, resolveCategoryDisplay) {\r\n        if (!poi) {\r\n            Log.warn && Log.warn('[POI Tooltip] POI invalide');\r\n            return '';\r\n        }\r\n\r\n        const config = getTooltipConfig(poi);\r\n        const ContentBuilder = getContentBuilder();\r\n\r\n        // Si ContentBuilder disponible, d√©l√©guer\r\n        if (ContentBuilder && typeof ContentBuilder.buildTooltipHTML === 'function') {\r\n            return ContentBuilder.buildTooltipHTML(poi, config, {\r\n                resolveCategoryDisplay: resolveCategoryDisplay\r\n            });\r\n        }\r\n\r\n        // Fallback si ContentBuilder non charg√©\r\n        return escapeHtml(\r\n            resolveField(poi, 'title') ||\r\n            resolveField(poi, 'label') ||\r\n            resolveField(poi, 'name') ||\r\n            'POI'\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Fallback pour construire un popup basique sans ContentBuilder.\r\n     *\r\n     * @param {object} poi - Donn√©es du POI.\r\n     * @param {Array} config - Configuration detailPopup.\r\n     * @param {Function} resolveCategoryDisplay - Fonction pour r√©soudre l'affichage de cat√©gorie.\r\n     * @returns {string} HTML du popup.\r\n     */\r\n    function buildFallbackPopup(poi, config, resolveCategoryDisplay) {\r\n        const title = escapeHtml(\r\n            resolveField(poi, 'title') ||\r\n            resolveField(poi, 'label') ||\r\n            resolveField(poi, 'name') ||\r\n            'POI'\r\n        );\r\n\r\n        const description = resolveField(poi, 'attributes.description') ||\r\n                            resolveField(poi, 'description') || '';\r\n\r\n        let html = '<div class=\"gl-poi-popup\">';\r\n        html += '<div class=\"gl-poi-popup__body\">';\r\n        html += '<h3 class=\"gl-poi-popup__title\"><span class=\"gl-poi-popup__title-text\">' + title + '</span></h3>';\r\n        if (description) {\r\n            html += '<p class=\"gl-poi-popup__desc\">' + escapeHtml(description) + '</p>';\r\n        }\r\n        html += '<a href=\"#\" class=\"gl-poi-popup__link\" data-poi-id=\"' + (poi.id || '') + '\">Voir plus >>></a>';\r\n        html += '</div></div>';\r\n\r\n        return html;\r\n    }\r\n\r\n    // ========================================\r\n    //   ATTACHMENT LEAFLET\r\n    // ========================================\r\n\r\n    /**\r\n     * Attache un tooltip √† un marqueur Leaflet.\r\n     *\r\n     * @param {L.Marker} marker - Marqueur Leaflet.\r\n     * @param {string} content - Contenu du tooltip (texte).\r\n     * @param {object} options - Options du tooltip.\r\n     */\r\n    function attachTooltip(marker, content, options) {\r\n        if (!marker || typeof marker.bindTooltip !== 'function') {\r\n            Log.warn && Log.warn('[POI Popup] Marker invalide pour attachTooltip');\r\n            return;\r\n        }\r\n\r\n        const defaultOptions = {\r\n            direction: \"top\",\r\n            offset: [0, -10],\r\n            opacity: 0.9,\r\n            className: \"gl-poi-tooltip\"\r\n        };\r\n\r\n        const finalOptions = Object.assign({}, defaultOptions, options || {});\r\n        marker.bindTooltip(content, finalOptions);\r\n    }\r\n\r\n    /**\r\n     * G√®re le tooltip d'un marqueur selon la configuration.\r\n     *\r\n     * @param {L.Marker} marker - Marqueur Leaflet.\r\n     * @param {object} poi - Donn√©es du POI.\r\n     * @param {object} config - Configuration POI globale.\r\n     * @param {Function} resolveCategoryDisplay - Fonction pour r√©soudre l'affichage de cat√©gorie.\r\n     */\r\n    function manageTooltip(marker, poi, config, resolveCategoryDisplay) {\r\n        if (!marker || !poi) return;\r\n\r\n        const tooltipMode = config?.tooltipMode || \"hover\"; // \"hover\", \"permanent\", \"none\"\r\n\r\n        if (tooltipMode === \"none\") {\r\n            return;\r\n        }\r\n\r\n        // Construire le contenu du tooltip\r\n        const tooltipText = buildTooltipContent(poi, resolveCategoryDisplay);\r\n\r\n        if (tooltipMode === \"permanent\") {\r\n            attachTooltip(marker, tooltipText, { permanent: true });\r\n        } else {\r\n            attachTooltip(marker, tooltipText);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Attache un popup √† un marqueur Leaflet.\r\n     *\r\n     * @param {L.Marker} marker - Marqueur Leaflet.\r\n     * @param {string} content - Contenu HTML du popup.\r\n     * @param {object} options - Options du popup.\r\n     */\r\n    function attachPopup(marker, content, options) {\r\n        if (!marker || typeof marker.bindPopup !== 'function') {\r\n            Log.error && Log.error('[POI Popup] Marker invalide ou pas de bindPopup');\r\n            return;\r\n        }\r\n\r\n        const defaultOptions = {\r\n            maxWidth: 300,\r\n            minWidth: 200,\r\n            className: \"gl-poi-popup-leaflet\",\r\n            closeButton: true,\r\n            autoPan: true\r\n        };\r\n\r\n        const finalOptions = Object.assign({}, defaultOptions, options || {});\r\n        marker.bindPopup(content, finalOptions);\r\n    }\r\n\r\n    // ========================================\r\n    //   EXPORT\r\n    // ========================================\r\n\r\n    GeoLeaf._POIPopup = {\r\n        // Construction de contenu\r\n        buildQuickPopupContent,\r\n        buildTooltipContent,\r\n\r\n        // Gestion Leaflet\r\n        attachTooltip,\r\n        manageTooltip,\r\n        attachPopup,\r\n\r\n        // Configuration\r\n        getPopupConfig,\r\n        getTooltipConfig\r\n    };\r\n\r\n    Log.info && Log.info('[GeoLeaf._POIPopup] Module POI Popup/Tooltip charg√© (v2.0.0)');\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf POI Module - Markers\r\n * Cr√©ation et gestion des marqueurs Leaflet pour les POI\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n    const Security = GeoLeaf.Security || {};\r\n\r\n    GeoLeaf._POIMarkers = GeoLeaf._POIMarkers || {};\r\n\r\n    // R√©f√©rences aux modules POI\r\n    const getShared = () => GeoLeaf._POIShared;\r\n    const getNormalizers = () => GeoLeaf._POINormalizers;\r\n    const getPopup = () => GeoLeaf._POIPopup;\r\n\r\n    /**\r\n     * Obtient la configuration de base des POI depuis le profil actif.\r\n     *\r\n     * @returns {object} Configuration de base { radius, weight, colorFill, colorStroke, fillOpacity, opacity, showIconsOnMap }.\r\n     */\r\n    function getPoiBaseConfig() {\r\n        const base = {\r\n            radius: 6,\r\n            weight: 1.5,\r\n            colorFill: \"#4a90e5\",\r\n            colorStroke: \"#ffffff\",\r\n            fillOpacity: 0.8,\r\n            opacity: 0.9,\r\n            showIconsOnMap: true\r\n        };\r\n\r\n        try {\r\n            if (GeoLeaf.Config && typeof GeoLeaf.Config.getActiveProfile === \"function\") {\r\n                const activeProfile = GeoLeaf.Config.getActiveProfile();\r\n                const poiCfg =\r\n                    activeProfile &&\r\n                    activeProfile.appearance &&\r\n                    activeProfile.appearance.poi;\r\n\r\n                if (poiCfg) {\r\n                    if (typeof poiCfg.radius === \"number\") base.radius = poiCfg.radius;\r\n                    if (typeof poiCfg.weight === \"number\") base.weight = poiCfg.weight;\r\n                    if (typeof poiCfg.fillOpacity === \"number\") base.fillOpacity = poiCfg.fillOpacity;\r\n                    if (typeof poiCfg.opacity === \"number\") base.opacity = poiCfg.opacity;\r\n                    if (typeof poiCfg.showIconsOnMap === \"boolean\") base.showIconsOnMap = poiCfg.showIconsOnMap;\r\n\r\n                    if (typeof poiCfg.colorFill === \"string\") {\r\n                        base.colorFill = poiCfg.colorFill;\r\n                    }\r\n                    if (typeof poiCfg.colorStroke === \"string\") {\r\n                        base.colorStroke = poiCfg.colorStroke;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Fallback sur variables CSS\r\n            if (typeof document !== \"undefined\" && typeof window !== \"undefined\" && window.getComputedStyle) {\r\n                const root = getComputedStyle(document.documentElement);\r\n                const fillCss = root.getPropertyValue(\"--gl-color-poi-fill-default\").trim();\r\n                const strokeCss = root.getPropertyValue(\"--gl-color-poi-stroke-default\").trim();\r\n                if (fillCss && !base.colorFill) base.colorFill = fillCss;\r\n                if (strokeCss && !base.colorStroke) base.colorStroke = strokeCss;\r\n            }\r\n        } catch (err) {\r\n            if (Log) Log.warn(\"[POI] getPoiBaseConfig() : Erreur lecture config :\", err);\r\n        }\r\n\r\n        return base;\r\n    }\r\n\r\n    /**\r\n     * R√©sout les couleurs d'un POI depuis category.style.json du profil actif.\r\n     * Ordre de priorit√© des couleurs :\r\n     * 1. Style de la couche (poi._layerConfig.style)\r\n     * 2. Style de cat√©gorie (category.style.json)\r\n     * 3. Style par d√©faut (baseConfig)\r\n     *\r\n     * @param {object} poi - Donn√©es du POI.\r\n     * @param {object} baseConfig - Configuration de base avec couleurs par d√©faut\r\n     * @returns {object} { colorFill, colorStroke, colorRoute, weight, radius, fillOpacity, opacity }\r\n     */\r\n    function resolveCategoryColors(poi, baseConfig) {\r\n        let colors = {\r\n            colorFill: baseConfig.colorFill,\r\n            colorStroke: baseConfig.colorStroke,\r\n            colorRoute: null,\r\n            weight: baseConfig.weight,\r\n            radius: baseConfig.radius,\r\n            fillOpacity: baseConfig.fillOpacity !== undefined ? baseConfig.fillOpacity : null,\r\n            opacity: baseConfig.opacity !== undefined ? baseConfig.opacity : null\r\n        };\r\n\r\n        // 1. Appliquer d'abord le style de la couche si disponible\r\n        if (poi._layerConfig && poi._layerConfig.style) {\r\n            const layerStyle = poi._layerConfig.style;\r\n            if (layerStyle.fillColor) colors.colorFill = layerStyle.fillColor;\r\n            if (layerStyle.color) colors.colorStroke = layerStyle.color;\r\n            if (typeof layerStyle.weight === 'number') colors.weight = layerStyle.weight;\r\n            if (typeof layerStyle.radius === 'number') colors.radius = layerStyle.radius;\r\n            if (typeof layerStyle.fillOpacity === 'number') colors.fillOpacity = layerStyle.fillOpacity;\r\n            if (typeof layerStyle.opacity === 'number') colors.opacity = layerStyle.opacity;\r\n        }\r\n\r\n        // 2. Appliquer ensuite les couleurs depuis les styleRules de la couche\r\n        if (GeoLeaf.Helpers && GeoLeaf.Helpers.StyleResolver) {\r\n            const styleColors = GeoLeaf.Helpers.StyleResolver.resolvePoiColors(poi);\r\n            if (styleColors.colorFill) colors.colorFill = styleColors.colorFill;\r\n            if (styleColors.colorStroke) colors.colorStroke = styleColors.colorStroke;\r\n            if (styleColors.colorRoute) colors.colorRoute = styleColors.colorRoute;\r\n        }\r\n\r\n        return colors;\r\n    }\r\n\r\n    /**\r\n     * R√©sout l'affichage d'un POI (ic√¥ne + couleurs) depuis la taxonomie et category.style.json du profil actif.\r\n     * Ordre de priorit√© des styles :\r\n     * 1. Style de la couche (poi._layerConfig.style) pour les couleurs\r\n     * 2. Style de cat√©gorie (category.style.json) pour les couleurs\r\n     * 3. Taxonomie pour les ic√¥nes\r\n     * 4. Style par d√©faut (baseConfig)\r\n     *\r\n     * @param {object} poi - Donn√©es du POI.\r\n     * @returns {object} Configuration d'affichage { useIcon, iconId, colorFill, colorStroke, weight, radius, fillOpacity, opacity }.\r\n     */\r\n    function resolveCategoryDisplay(poi) {\r\n        const categoriesConfig = (GeoLeaf.Config && typeof GeoLeaf.Config.getCategories === \"function\")\r\n            ? GeoLeaf.Config.getCategories()\r\n            : {};\r\n\r\n        const shared = getShared();\r\n        const poiConfig = shared ? shared.state.poiConfig : {};\r\n        const showIconsOnMap = (poiConfig.showIconsOnMap !== false);\r\n\r\n        const baseConfig = getPoiBaseConfig();\r\n\r\n        // R√©soudre les couleurs via resolveCategoryColors\r\n        const colors = resolveCategoryColors(poi, baseConfig);\r\n\r\n        let result = {\r\n            useIcon: false,\r\n            iconId: null,\r\n            colorFill: colors.colorFill,\r\n            colorStroke: colors.colorStroke,\r\n            colorRoute: colors.colorRoute,\r\n            weight: colors.weight,\r\n            radius: colors.radius,\r\n            fillOpacity: colors.fillOpacity,\r\n            opacity: colors.opacity\r\n        };\r\n\r\n        // D√©terminer si on utilise les ic√¥nes\r\n        if (showIconsOnMap) {\r\n            try {\r\n                const iconsConfig = (GeoLeaf.Config && typeof GeoLeaf.Config.getIconsConfig === \"function\")\r\n                    ? GeoLeaf.Config.getIconsConfig()\r\n                    : null;\r\n\r\n                if (iconsConfig && iconsConfig.showOnMap !== false) {\r\n                    result.useIcon = true;\r\n                }\r\n            } catch (e) {\r\n                // Fallback showIconsOnMap reste true par d√©faut\r\n            }\r\n        }\r\n\r\n        const categoryId = poi.categoryId || poi.category ||\r\n            (poi.attributes && poi.attributes.categoryId) ||\r\n            (poi.properties && poi.properties.categoryId) ||\r\n            (poi.properties && poi.properties.category);\r\n\r\n        const subCategoryId = poi.subCategoryId || poi.subCategory || poi.sub_category ||\r\n            (poi.attributes && poi.attributes.subCategoryId) ||\r\n            (poi.properties && poi.properties.subCategoryId) ||\r\n            (poi.properties && poi.properties.sub_category);\r\n\r\n        // R√©solution de l'ic√¥ne depuis la taxonomie (pas les couleurs)\r\n        if (subCategoryId && categoryId && categoriesConfig[categoryId]?.subcategories) {\r\n            const subCat = categoriesConfig[categoryId].subcategories[subCategoryId];\r\n            const cat = categoriesConfig[categoryId];\r\n\r\n            if (subCat) {\r\n                result.iconId = subCat.icon || subCat.iconId || cat.icon || cat.iconId || null;\r\n            } else {\r\n                result.iconId = cat.icon || cat.iconId || null;\r\n            }\r\n        } else if (categoryId && categoriesConfig[categoryId]) {\r\n            const cat = categoriesConfig[categoryId];\r\n            result.iconId = cat.icon || cat.iconId || null;\r\n        } else {\r\n            // Ne logger que si une cat√©gorie est r√©ellement d√©finie (√©viter les warnings pour undefined/null)\r\n            if (categoryId && categoryId !== 'undefined' && categoryId !== 'null' && Log) {\r\n                Log.warn(`[POI] resolveCategoryDisplay() : Cat√©gorie '${categoryId}' non trouv√©e dans la taxonomie.`);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Injecte le sprite SVG du profil actif dans le DOM (asynchrone).\r\n     * Lit la configuration des ic√¥nes depuis taxonomy.icons.\r\n     * √âvite les duplications en v√©rifiant l'existence.\r\n     * Note: La fonction reste nomm√©e \"Sync\" pour la compatibilit√©, mais utilise fetch (async) en interne.\r\n     */\r\n    async function ensureProfileSpriteInjectedSync() {\r\n        try {\r\n            if (typeof GeoLeaf.Config === \"undefined\" || typeof GeoLeaf.Config.getIconsConfig !== \"function\") {\r\n                if (Log) Log.warn(\"[POI] GeoLeaf.Config.getIconsConfig non disponible\");\r\n                return;\r\n            }\r\n\r\n            const iconsCfg = GeoLeaf.Config.getIconsConfig();\r\n            // Log seulement la premi√®re fois ou si la config change\r\n            if (!ensureProfileSpriteInjectedSync._lastConfig || JSON.stringify(iconsCfg) !== JSON.stringify(ensureProfileSpriteInjectedSync._lastConfig)) {\r\n                if (Log) Log.debug(\"[POI] IconsConfig r√©cup√©r√©:\", iconsCfg);\r\n                ensureProfileSpriteInjectedSync._lastConfig = iconsCfg;\r\n            }\r\n            if (!iconsCfg) {\r\n                if (Log) Log.warn(\"[POI] Aucune configuration d'ic√¥nes trouv√©e\");\r\n                return;\r\n            }\r\n\r\n            const spriteUrl = iconsCfg.spriteUrl;\r\n\r\n            if (!spriteUrl || typeof spriteUrl !== \"string\") {\r\n                if (Log) Log.warn(\"[POI] spriteUrl manquant ou invalide:\", spriteUrl);\r\n                return;\r\n            }\r\n\r\n            // V√©rifier si le sprite est d√©j√† inject√©\r\n            const existing = document.querySelector('svg[data-geoleaf-sprite=\"profile\"]');\r\n            if (existing) {\r\n                if (Log) Log.debug(\"[POI] Sprite SVG d√©j√† inject√©\");\r\n                return;\r\n            }\r\n\r\n            if (Log) Log.info(\"[POI] Chargement sprite depuis:\", spriteUrl);\r\n\r\n            // ‚úÖ NOUVEAU: Utiliser fetch asynchrone pour √©viter l'avertissement de d√©pr√©ciation\r\n            // et am√©liorer les performances en √©vitant de bloquer le thread principal\r\n            try {\r\n                const response = await fetch(spriteUrl);\r\n\r\n                if (response.ok) {\r\n                    const svgText = await response.text();\r\n\r\n                    // SAFE: Utilisation de DOMParser au lieu de innerHTML pour √©viter l'ex√©cution de scripts\r\n                    const parser = new DOMParser();\r\n                    const doc = parser.parseFromString(svgText, \"image/svg+xml\");\r\n\r\n                    // V√©rifier les erreurs de parsing\r\n                    const parserError = doc.querySelector(\"parsererror\");\r\n                    if (parserError) {\r\n                        if (Log) Log.warn(\"[POI] Erreur parsing SVG sprite :\", parserError.textContent);\r\n                        return;\r\n                    }\r\n\r\n                    const svgEl = doc.documentElement;\r\n                    if (svgEl && svgEl.tagName.toLowerCase() === \"svg\") {\r\n                        svgEl.setAttribute(\"data-geoleaf-sprite\", \"profile\");\r\n                        svgEl.style.position = \"absolute\";\r\n                        svgEl.style.width = \"0\";\r\n                        svgEl.style.height = \"0\";\r\n                        svgEl.style.overflow = \"hidden\";\r\n                        svgEl.setAttribute(\"aria-hidden\", \"true\");\r\n\r\n                        if (document.body.firstChild) {\r\n                            document.body.insertBefore(svgEl, document.body.firstChild);\r\n                        } else {\r\n                            document.body.appendChild(svgEl);\r\n                        }\r\n\r\n                        const symbolCount = svgEl.querySelectorAll('symbol').length;\r\n                        if (Log) Log.info(\"[POI] Sprite SVG profil inject√© dans le DOM (async).\", symbolCount, \"symboles charg√©s.\");\r\n                    }\r\n                } else {\r\n                    if (Log) Log.warn(\"[POI] Erreur chargement sprite profil: HTTP\", response.status);\r\n                }\r\n            } catch (err) {\r\n                if (Log) Log.warn(\"[POI] Erreur chargement sprite profil (async):\", err);\r\n            }\r\n        } catch (err) {\r\n            if (Log) Log.warn(\"[POI] Erreur chargement sprite profil :\", err);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Extrait les coordonn√©es d'un POI pour la cr√©ation de marqueur.\r\n     *\r\n     * @param {object} poi - Donn√©es du POI.\r\n     * @returns {[number, number]|null} [latitude, longitude] ou null si invalides.\r\n     */\r\n    function extractMarkerCoordinates(poi) {\r\n        if (!poi) {\r\n            if (Log) Log.warn(\"[POI] extractMarkerCoordinates() : POI invalide.\", poi);\r\n            return null;\r\n        }\r\n\r\n        const normalizers = getNormalizers();\r\n        if (!normalizers) {\r\n            if (Log) Log.error(\"[POI] extractMarkerCoordinates() : Module Normalizers non charg√©.\");\r\n            return null;\r\n        }\r\n\r\n        const coords = normalizers.extractCoordinates(poi);\r\n        if (!coords) {\r\n            if (Log) Log.warn(\"[POI] extractMarkerCoordinates() : POI sans coordonn√©es valides.\", poi);\r\n            return null;\r\n        }\r\n\r\n        return coords;\r\n    }\r\n\r\n    /**\r\n     * Construit l'ic√¥ne Leaflet (DivIcon) pour un marqueur POI.\r\n     * Mode ic√¥ne : utilise le sprite SVG profil avec cercle de fond.\r\n     * Mode simple : cercle simple sans ic√¥ne.\r\n     *\r\n     * @param {object} displayConfig - Configuration d'affichage { useIcon, iconId, colorFill, colorStroke, radius, weight, fillOpacity, opacity }.\r\n     * @returns {L.DivIcon} Ic√¥ne Leaflet configur√©e.\r\n     */\r\n    function buildMarkerIcon(displayConfig) {\r\n        const baseConfig = getPoiBaseConfig();\r\n        const radius = displayConfig.radius !== undefined ? displayConfig.radius : baseConfig.radius;\r\n        const weight = displayConfig.weight !== undefined ? displayConfig.weight : baseConfig.weight;\r\n        const fillOpacity = displayConfig.fillOpacity;\r\n        const strokeOpacity = displayConfig.opacity;\r\n\r\n        const iconSizeCircle = Math.max(Math.round((radius * 2) + (weight * 2)), 8);\r\n        const iconSizeIcon = Math.max(Math.round((radius * 2) + (weight * 2)), 16);\r\n\r\n        // Appliquer fillOpacity √† colorFill si d√©fini\r\n        let colorFill = displayConfig.colorFill;\r\n        if (fillOpacity !== null && typeof fillOpacity === 'number') {\r\n            // Convertir la couleur hex en rgba avec fillOpacity\r\n            if (colorFill && colorFill.startsWith('#')) {\r\n                const r = parseInt(colorFill.slice(1, 3), 16);\r\n                const g = parseInt(colorFill.slice(3, 5), 16);\r\n                const b = parseInt(colorFill.slice(5, 7), 16);\r\n                colorFill = 'rgba(' + r + ', ' + g + ', ' + b + ', ' + fillOpacity + ')';\r\n            }\r\n        }\r\n\r\n        // Appliquer opacity au stroke (colorStroke) si d√©fini\r\n        let colorStroke = displayConfig.colorStroke;\r\n        if (strokeOpacity !== null && typeof strokeOpacity === 'number') {\r\n            // Convertir la couleur hex en rgba avec opacity\r\n            if (colorStroke && colorStroke.startsWith('#')) {\r\n                const r = parseInt(colorStroke.slice(1, 3), 16);\r\n                const g = parseInt(colorStroke.slice(3, 5), 16);\r\n                const b = parseInt(colorStroke.slice(5, 7), 16);\r\n                colorStroke = 'rgba(' + r + ', ' + g + ', ' + b + ', ' + strokeOpacity + ')';\r\n            }\r\n        }\r\n\r\n        if (displayConfig.useIcon && displayConfig.iconId) {\r\n            // Mode ic√¥ne : DivIcon avec sprite m√©tier\r\n            const iconsConfig = (GeoLeaf.Config && typeof GeoLeaf.Config.getIconsConfig === \"function\")\r\n                ? GeoLeaf.Config.getIconsConfig()\r\n                : null;\r\n            const iconPrefix = (iconsConfig && iconsConfig.symbolPrefix) || \"gl-poi-cat-\";\r\n\r\n            const iconIdNormalized = String(displayConfig.iconId)\r\n                .trim()\r\n                .toLowerCase()\r\n                .replace(/\\s+/g, \"-\");\r\n\r\n            const symbolId = iconPrefix + iconIdNormalized;\r\n\r\n            const htmlIcon = [\r\n                '<div class=\"gl-poi-marker\" style=\"',\r\n                \"--gl-poi-fill:\", colorFill, \";\",\r\n                \"--gl-poi-stroke:\", colorStroke, \";\",\r\n                \"width:\", iconSizeIcon, \"px;\",\r\n                \"height:\", iconSizeIcon, \"px;\",\r\n                '\">',\r\n                '<svg class=\"gl-poi-marker__icon\" aria-hidden=\"true\" focusable=\"false\" viewBox=\"0 0 24 24\" style=\"overflow: visible;\">',\r\n                '<circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"', colorFill, '\" stroke=\"', colorStroke, '\" stroke-width=\"', weight, '\"/>',\r\n                '<svg x=\"2\" y=\"2\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" preserveAspectRatio=\"xMidYMid meet\" overflow=\"visible\">',\r\n                '<use href=\"#', symbolId, '\" style=\"color: #ffffff\"/>',\r\n                '</svg>',\r\n                \"</svg>\",\r\n                \"</div>\"\r\n            ].join(\"\");\r\n\r\n            return L.divIcon({\r\n                html: htmlIcon,\r\n                className: \"gl-poi-divicon\",\r\n                iconSize: [iconSizeIcon, iconSizeIcon],\r\n                iconAnchor: [iconSizeIcon / 2, iconSizeIcon / 2],\r\n                popupAnchor: [0, -(iconSizeIcon / 2)]\r\n            });\r\n        } else {\r\n            // Mode point simple (sans ic√¥ne)\r\n            const htmlCircle = [\r\n                '<div class=\"gl-poi-marker\" style=\"',\r\n                \"--gl-poi-fill:\", colorFill, \";\",\r\n                \"--gl-poi-stroke:\", colorStroke, \";\",\r\n                \"width:\", iconSizeCircle, \"px;\",\r\n                \"height:\", iconSizeCircle, \"px;\",\r\n                '\">',\r\n                '<svg class=\"gl-poi-marker__circle\" aria-hidden=\"true\" focusable=\"false\">',\r\n                '<circle cx=\"50%\" cy=\"50%\" r=\"', radius, '\"',\r\n                ' fill=\"', colorFill, '\"',\r\n                ' stroke=\"', colorStroke, '\"',\r\n                ' stroke-width=\"', weight, '\" />',\r\n                \"</svg>\",\r\n                \"</div>\"\r\n            ].join(\"\");\r\n\r\n            return L.divIcon({\r\n                html: htmlCircle,\r\n                className: \"gl-poi-divicon\",\r\n                iconSize: [iconSizeCircle, iconSizeCircle],\r\n                iconAnchor: [iconSizeCircle / 2, iconSizeCircle / 2],\r\n                popupAnchor: [0, -(iconSizeCircle / 2)]\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Attache les √©v√©nements et comportements √† un marqueur POI (tooltip, popup, side panel).\r\n     *\r\n     * @param {L.Marker} marker - Marqueur Leaflet √† configurer.\r\n     * @param {object} poi - Donn√©es du POI.\r\n     */\r\n    function attachMarkerEvents(marker, poi) {\r\n        // Attacher m√©tadonn√©es POI\r\n        marker._geoleafPoiData = poi;\r\n\r\n        const shared = getShared();\r\n        const poiConfig = shared ? shared.state.poiConfig : {};\r\n        const popupModule = getPopup();\r\n\r\n        // Gestion tooltip\r\n        if (popupModule && typeof popupModule.manageTooltip === 'function') {\r\n            popupModule.manageTooltip(marker, poi, poiConfig, resolveCategoryDisplay);\r\n        }\r\n\r\n        // V√©rifier si les popups sont activ√©s (par d√©faut: true)\r\n        const showPopup = (poiConfig.showPopup !== false);\r\n\r\n        if (showPopup) {\r\n            // Mode popup: afficher le popup avec lien \"Voir plus\"\r\n            if (popupModule && typeof popupModule.buildQuickPopupContent === 'function') {\r\n                const popupContent = popupModule.buildQuickPopupContent(poi, resolveCategoryDisplay);\r\n                if (popupContent) {\r\n                    if (popupModule.attachPopup) {\r\n                        popupModule.attachPopup(marker, popupContent);\r\n                    } else {\r\n                        marker.bindPopup(popupContent);\r\n                    }\r\n                } else {\r\n                    Log.error('[markers] Popup content vide pour POI:', poi.id);\r\n                }\r\n\r\n                // Initialiser le flag de popup actif\r\n                marker._geoleafPopupActive = false;\r\n\r\n                // Bloquer l'ouverture du tooltip pendant que le popup est actif\r\n                marker.on('tooltipopen', function() {\r\n                    if (marker._geoleafPopupActive) {\r\n                        marker.closeTooltip();\r\n                    }\r\n                });\r\n\r\n                // Attacher √©v√©nement pour le lien \"Voir plus\" du popup\r\n                marker.on('popupopen', function() {\r\n                    // Marquer le popup comme actif et fermer le tooltip\r\n                    marker._geoleafPopupActive = true;\r\n                    marker.closeTooltip();\r\n\r\n                    setTimeout(function() {\r\n                        const link = document.querySelector('.gl-poi-popup__link[data-poi-id=\"' + poi.id + '\"]');\r\n                        if (link) {\r\n                            if (Log) Log.info('[POI] Lien \"Voir plus\" trouv√© pour POI:', poi.id);\r\n\r\n                            // Retirer les anciens listeners pour √©viter les doublons\r\n                            const newLink = link.cloneNode(true);\r\n                            link.parentNode.replaceChild(newLink, link);\r\n\r\n                            newLink.addEventListener('click', function(e) {\r\n                                e.preventDefault();\r\n                                e.stopPropagation();\r\n\r\n                                if (Log) Log.info('[POI] Clic sur \"Voir plus\" pour POI:', poi.id);\r\n\r\n                                // Fermer le popup\r\n                                if (marker && marker.closePopup) {\r\n                                    marker.closePopup();\r\n                                }\r\n\r\n                                // Ouvrir le side panel avec un petit d√©lai\r\n                                setTimeout(function() {\r\n                                    if (Log) Log.info('[POI] Appel de showPoiDetails pour:', poi.id);\r\n                                    if (GeoLeaf.POI && typeof GeoLeaf.POI.showPoiDetails === 'function') {\r\n                                        GeoLeaf.POI.showPoiDetails(poi);\r\n                                    } else {\r\n                                        if (Log) Log.error('[POI] GeoLeaf.POI.showPoiDetails non disponible');\r\n                                    }\r\n                                }, 100);\r\n                            });\r\n                        } else {\r\n                            if (Log) Log.warn('[POI] Lien \"Voir plus\" non trouv√© pour POI:', poi.id);\r\n                        }\r\n                    }, 50);\r\n                });\r\n\r\n                // R√©activer le tooltip quand le popup se ferme\r\n                marker.on('popupclose', function() {\r\n                    marker._geoleafPopupActive = false;\r\n\r\n                    // R√©ouvrir le tooltip s'il est permanent (mode \"always\")\r\n                    if (marker.getTooltip() && marker.getTooltip().options.permanent) {\r\n                        setTimeout(function() {\r\n                            if (marker.openTooltip && !marker._geoleafPopupActive) {\r\n                                marker.openTooltip();\r\n                            }\r\n                        }, 50);\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            // Mode direct: ouvrir le side panel directement au clic sur le marker (sans popup)\r\n            marker.on('click', function(e) {\r\n                e.originalEvent.stopPropagation();\r\n\r\n                if (Log) Log.info('[POI] Clic direct sur marker (sans popup) pour POI:', poi.id);\r\n\r\n                if (GeoLeaf.POI && typeof GeoLeaf.POI.showPoiDetails === 'function') {\r\n                    GeoLeaf.POI.showPoiDetails(poi);\r\n                } else {\r\n                    if (Log) Log.error('[POI] GeoLeaf.POI.showPoiDetails non disponible');\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un marqueur Leaflet pour un POI.\r\n     * Orchestrateur principal : coordonn√©es ‚Üí affichage ‚Üí ic√¥ne ‚Üí √©v√©nements.\r\n     *\r\n     * @param {object} poi - Donn√©es du POI.\r\n     * @returns {L.Marker|null} Marqueur Leaflet ou null si invalide.\r\n     */\r\n    /**\r\n     * Cr√©e un marqueur Leaflet pour un POI.\r\n     * Orchestrateur principal : coordonn√©es ‚Üí affichage ‚Üí ic√¥ne ‚Üí √©v√©nements.\r\n     *\r\n     * @param {object} poi - Donn√©es du POI.\r\n     * @param {object} [options] - Options de cr√©ation.\r\n     * @param {boolean} [options.attachEvents=true] - Si false, ne pas attacher les √©v√©nements (popup, tooltip).\r\n     * @param {string} [options.pane] - Nom du pane Leaflet √† utiliser pour le z-index.\r\n     * @returns {L.Marker|null} Marqueur Leaflet ou null si invalide.\r\n     */\r\n    function createMarker(poi, options = {}) {\r\n        if (!poi) {\r\n            if (Log) Log.warn(\"[POI] createMarker() : POI invalide.\", poi);\r\n            return null;\r\n        }\r\n\r\n        const { attachEvents = true, pane } = options;\r\n\r\n        // Extraction coordonn√©es\r\n        const coords = extractMarkerCoordinates(poi);\r\n        if (!coords) {\r\n            return null;\r\n        }\r\n\r\n        const [lat, lon] = coords;\r\n\r\n        // R√©solution de l'affichage (ic√¥ne et couleurs)\r\n        const displayConfig = resolveCategoryDisplay(poi);\r\n\r\n        // Construction de l'ic√¥ne Leaflet\r\n        const customIcon = buildMarkerIcon(displayConfig);\r\n\r\n        // Options du marker avec pane si fourni\r\n        const markerOptions = { icon: customIcon };\r\n        if (pane) {\r\n            markerOptions.pane = pane;\r\n        }\r\n\r\n        // Cr√©ation du marqueur Leaflet avec le pane\r\n        const marker = L.marker([lat, lon], markerOptions);\r\n\r\n        // Attacher √©v√©nements et comportements (sauf si d√©sactiv√©)\r\n        if (attachEvents) {\r\n            attachMarkerEvents(marker, poi);\r\n        }\r\n\r\n        return marker;\r\n    }\r\n\r\n    // ========================================\r\n    //   EXPORT\r\n    // ========================================\r\n\r\n    GeoLeaf._POIMarkers = {\r\n        getPoiBaseConfig,\r\n        resolveCategoryDisplay,\r\n        ensureProfileSpriteInjectedSync,\r\n        extractMarkerCoordinates,\r\n        buildMarkerIcon,\r\n        attachMarkerEvents,\r\n        createMarker\r\n    };\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/**\r\n * @fileoverview Abstract Renderer Base Class\r\n * @description Base class providing common functionality for all renderers\r\n * @version 1.0.0\r\n * @phase Phase 5 - Code Optimization\r\n *\r\n * @author GeoLeaf Team\r\n * @since 3.1.0\r\n *\r\n * @benefits\r\n * - Eliminates ~20% code duplication across renderers\r\n * - Unified dependency resolution pattern\r\n * - Consistent error handling and logging\r\n * - Easier testing and maintenance\r\n */\r\n\r\n(function (global) {\r\n    'use strict';\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    if (!GeoLeaf._Renderers) GeoLeaf._Renderers = {};\r\n\r\n    /**\r\n     * @class AbstractRenderer\r\n     * @description Base class for all renderer implementations\r\n     *\r\n     * Common Patterns Extracted:\r\n     * - Dependency resolution (Log, Security, Config, Utils)\r\n     * - DOM element creation helpers\r\n     * - Event handler registration/cleanup\r\n     * - State management\r\n     * - Error handling and logging\r\n     *\r\n     * @example\r\n     * class MyCustomRenderer extends AbstractRenderer {\r\n     *     constructor(options) {\r\n     *         super(options);\r\n     *         this.init();\r\n     *     }\r\n     *\r\n     *     render(data) {\r\n     *         this.log('info', 'Rendering data', data);\r\n     *         const element = this.createElement('div', 'my-class');\r\n     *         // ... custom rendering logic\r\n     *         return element;\r\n     *     }\r\n     * }\r\n     */\r\n    class AbstractRenderer {\r\n        /**\r\n         * @constructor\r\n         * @param {Object} [options={}] - Renderer configuration options\r\n         * @param {string} [options.name='Renderer'] - Renderer name for logging\r\n         * @param {Object} [options.config={}] - Custom configuration\r\n         * @param {boolean} [options.debug=false] - Enable debug logging\r\n         */\r\n        constructor(options = {}) {\r\n            /**\r\n             * @private\r\n             * @type {string}\r\n             */\r\n            this._name = options.name || 'Renderer';\r\n\r\n            /**\r\n             * @private\r\n             * @type {Object}\r\n             */\r\n            this._config = options.config || {};\r\n\r\n            /**\r\n             * @private\r\n             * @type {boolean}\r\n             */\r\n            this._debug = options.debug || false;\r\n\r\n            /**\r\n             * @private\r\n             * @type {Array<Function>}\r\n             */\r\n            this._eventListeners = [];\r\n\r\n            /**\r\n             * @private\r\n             * @type {boolean}\r\n             */\r\n            this._initialized = false;\r\n\r\n            /**\r\n             * @private\r\n             * @type {WeakMap<HTMLElement, Object>}\r\n             */\r\n            this._stateMap = new WeakMap();\r\n        }\r\n\r\n        // ========================================\r\n        //   DEPENDENCY RESOLUTION\r\n        // ========================================\r\n\r\n        /**\r\n         * Get Log utility with fallback\r\n         * @protected\r\n         * @returns {Object} Log object\r\n         */\r\n        getLog() {\r\n            return GeoLeaf.Log || console;\r\n        }\r\n\r\n        /**\r\n         * Get Security utilities with fallback\r\n         * @protected\r\n         * @returns {Object} Security object with escapeHtml function\r\n         */\r\n        getSecurity() {\r\n            if (GeoLeaf.Security && typeof GeoLeaf.Security.escapeHtml === 'function') {\r\n                return GeoLeaf.Security;\r\n            }\r\n            // Fallback security utilities\r\n            return {\r\n                escapeHtml: (str) => {\r\n                    if (str == null) return '';\r\n                    const div = document.createElement('div');\r\n                    div.textContent = String(str);\r\n                    return div.innerHTML;\r\n                },\r\n                setSafeHTML: (element, html) => {\r\n                    if (!element) return;\r\n                    if (GeoLeaf.DOMSecurity && typeof GeoLeaf.DOMSecurity.setSafeHTML === 'function') {\r\n                        GeoLeaf.DOMSecurity.setSafeHTML(element, html);\r\n                    } else {\r\n                        element.textContent = html; // Safe fallback\r\n                    }\r\n                }\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Get Utils with field resolution\r\n         * @protected\r\n         * @returns {Object} Utils object with resolveField function\r\n         */\r\n        getUtils() {\r\n            if (GeoLeaf.Utils && typeof GeoLeaf.Utils.resolveField === 'function') {\r\n                return GeoLeaf.Utils;\r\n            }\r\n            // Fallback resolveField implementation\r\n            return {\r\n                resolveField: (obj, ...paths) => {\r\n                    if (!obj) return null;\r\n                    for (const path of paths) {\r\n                        if (!path) continue;\r\n                        const parts = String(path).split('.');\r\n                        let current = obj;\r\n                        let found = true;\r\n                        for (const part of parts) {\r\n                            if (current && typeof current === 'object' && part in current) {\r\n                                current = current[part];\r\n                            } else {\r\n                                found = false;\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (found && current !== undefined && current !== null) {\r\n                            return current;\r\n                        }\r\n                    }\r\n                    return null;\r\n                }\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Get active profile configuration\r\n         * @protected\r\n         * @returns {Object|null} Active profile or null\r\n         */\r\n        getActiveProfile() {\r\n            if (GeoLeaf.Config && typeof GeoLeaf.Config.getActiveProfile === 'function') {\r\n                return GeoLeaf.Config.getActiveProfile() || null;\r\n            }\r\n            return null;\r\n        }\r\n\r\n        // ========================================\r\n        //   LOGGING UTILITIES\r\n        // ========================================\r\n\r\n        /**\r\n         * Log message with level\r\n         * @protected\r\n         * @param {string} level - Log level (debug, info, warn, error)\r\n         * @param {string} message - Log message\r\n         * @param {...*} args - Additional arguments\r\n         */\r\n        log(level, message, ...args) {\r\n            if (level === 'debug' && !this._debug) return;\r\n\r\n            const log = this.getLog();\r\n            const prefix = `[${this._name}]`;\r\n\r\n            switch (level) {\r\n                case 'debug':\r\n                case 'info':\r\n                    log.info(prefix, message, ...args);\r\n                    break;\r\n                case 'warn':\r\n                    log.warn(prefix, message, ...args);\r\n                    break;\r\n                case 'error':\r\n                    log.error(prefix, message, ...args);\r\n                    break;\r\n                default:\r\n                    log.info(prefix, message, ...args);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Log debug message (if debug enabled)\r\n         * @protected\r\n         * @param {string} message - Debug message\r\n         * @param {...*} args - Additional arguments\r\n         */\r\n        debug(message, ...args) {\r\n            this.log('debug', message, ...args);\r\n        }\r\n\r\n        /**\r\n         * Log info message\r\n         * @protected\r\n         * @param {string} message - Info message\r\n         * @param {...*} args - Additional arguments\r\n         */\r\n        info(message, ...args) {\r\n            this.log('info', message, ...args);\r\n        }\r\n\r\n        /**\r\n         * Log warning message\r\n         * @protected\r\n         * @param {string} message - Warning message\r\n         * @param {...*} args - Additional arguments\r\n         */\r\n        warn(message, ...args) {\r\n            this.log('warn', message, ...args);\r\n        }\r\n\r\n        /**\r\n         * Log error message\r\n         * @protected\r\n         * @param {string} message - Error message\r\n         * @param {...*} args - Additional arguments\r\n         */\r\n        error(message, ...args) {\r\n            this.log('error', message, ...args);\r\n        }\r\n\r\n        // ========================================\r\n        //   DOM BUILDERS\r\n        // ========================================\r\n\r\n        /**\r\n         * Create DOM element with class and attributes\r\n         * @protected\r\n         * @param {string} tagName - HTML tag name\r\n         * @param {string|Array<string>} [className] - CSS class name(s)\r\n         * @param {Object} [attributes={}] - HTML attributes\r\n         * @returns {HTMLElement} Created element\r\n         *\r\n         * @example\r\n         * const div = this.createElement('div', 'my-class', { id: 'my-id', 'data-value': '123' });\r\n         * const button = this.createElement('button', ['btn', 'btn-primary'], { type: 'button' });\r\n         */\r\n        createElement(tagName, className, attributes = {}) {\r\n            const element = document.createElement(tagName);\r\n\r\n            if (className) {\r\n                if (Array.isArray(className)) {\r\n                    element.classList.add(...className);\r\n                } else {\r\n                    element.className = className;\r\n                }\r\n            }\r\n\r\n            Object.keys(attributes).forEach(key => {\r\n                element.setAttribute(key, attributes[key]);\r\n            });\r\n\r\n            return element;\r\n        }\r\n\r\n        /**\r\n         * Create text node with safe content\r\n         * @protected\r\n         * @param {string} text - Text content\r\n         * @returns {Text} Text node\r\n         */\r\n        createTextNode(text) {\r\n            return document.createTextNode(text || '');\r\n        }\r\n\r\n        /**\r\n         * Create element with safe text content\r\n         * @protected\r\n         * @param {string} tagName - HTML tag name\r\n         * @param {string} text - Text content\r\n         * @param {string} [className] - CSS class name\r\n         * @returns {HTMLElement} Element with text\r\n         */\r\n        createTextElement(tagName, text, className) {\r\n            const element = this.createElement(tagName, className);\r\n            element.textContent = text || '';\r\n            return element;\r\n        }\r\n\r\n        /**\r\n         * Create element with safe HTML content\r\n         * @protected\r\n         * @param {string} tagName - HTML tag name\r\n         * @param {string} html - HTML content (will be sanitized)\r\n         * @param {string} [className] - CSS class name\r\n         * @returns {HTMLElement} Element with HTML\r\n         */\r\n        createHTMLElement(tagName, html, className) {\r\n            const element = this.createElement(tagName, className);\r\n            const security = this.getSecurity();\r\n            security.setSafeHTML(element, html);\r\n            return element;\r\n        }\r\n\r\n        /**\r\n         * Append multiple children to parent element\r\n         * @protected\r\n         * @param {HTMLElement} parent - Parent element\r\n         * @param {...HTMLElement} children - Child elements to append\r\n         * @returns {HTMLElement} Parent element (for chaining)\r\n         */\r\n        appendChildren(parent, ...children) {\r\n            children.forEach(child => {\r\n                if (child) parent.appendChild(child);\r\n            });\r\n            return parent;\r\n        }\r\n\r\n        // ========================================\r\n        //   EVENT HANDLING\r\n        // ========================================\r\n\r\n        /**\r\n         * Register event listener with automatic cleanup\r\n         * @protected\r\n         * @param {HTMLElement} element - Target element\r\n         * @param {string} event - Event name\r\n         * @param {Function} handler - Event handler\r\n         * @param {Object} [options] - Event listener options\r\n         * @returns {Function} Cleanup function\r\n         */\r\n        addEventListener(element, event, handler, options) {\r\n            if (!element || !event || !handler) {\r\n                this.warn('addEventListener: invalid parameters');\r\n                return () => {};\r\n            }\r\n\r\n            const boundHandler = handler.bind(this);\r\n            element.addEventListener(event, boundHandler, options);\r\n\r\n            // Store for cleanup\r\n            const cleanup = () => {\r\n                element.removeEventListener(event, boundHandler, options);\r\n            };\r\n            this._eventListeners.push(cleanup);\r\n\r\n            return cleanup;\r\n        }\r\n\r\n        /**\r\n         * Remove all registered event listeners\r\n         * @protected\r\n         */\r\n        removeAllEventListeners() {\r\n            this._eventListeners.forEach(cleanup => cleanup());\r\n            this._eventListeners = [];\r\n        }\r\n\r\n        // ========================================\r\n        //   STATE MANAGEMENT\r\n        // ========================================\r\n\r\n        /**\r\n         * Set element state\r\n         * @protected\r\n         * @param {HTMLElement} element - Element to store state for\r\n         * @param {Object} state - State data\r\n         */\r\n        setState(element, state) {\r\n            if (element) {\r\n                this._stateMap.set(element, { ...state });\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get element state\r\n         * @protected\r\n         * @param {HTMLElement} element - Element to get state from\r\n         * @returns {Object|null} Element state or null\r\n         */\r\n        getState(element) {\r\n            return element ? this._stateMap.get(element) || null : null;\r\n        }\r\n\r\n        /**\r\n         * Update element state (merge with existing)\r\n         * @protected\r\n         * @param {HTMLElement} element - Element to update state for\r\n         * @param {Object} updates - State updates to merge\r\n         */\r\n        updateState(element, updates) {\r\n            if (element) {\r\n                const currentState = this.getState(element) || {};\r\n                this.setState(element, { ...currentState, ...updates });\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Delete element state\r\n         * @protected\r\n         * @param {HTMLElement} element - Element to delete state for\r\n         */\r\n        deleteState(element) {\r\n            if (element) {\r\n                this._stateMap.delete(element);\r\n            }\r\n        }\r\n\r\n        // ========================================\r\n        //   LIFECYCLE METHODS\r\n        // ========================================\r\n\r\n        /**\r\n         * Initialize renderer (called in constructor or manually)\r\n         * Override in subclasses for custom initialization\r\n         * @protected\r\n         */\r\n        init() {\r\n            if (this._initialized) {\r\n                this.warn('Renderer already initialized');\r\n                return;\r\n            }\r\n\r\n            this.debug('Initializing renderer');\r\n            this._initialized = true;\r\n        }\r\n\r\n        /**\r\n         * Check if renderer is initialized\r\n         * @public\r\n         * @returns {boolean} true if initialized\r\n         */\r\n        isInitialized() {\r\n            return this._initialized;\r\n        }\r\n\r\n        /**\r\n         * Destroy renderer and cleanup resources\r\n         * @public\r\n         */\r\n        destroy() {\r\n            this.debug('Destroying renderer');\r\n            this.removeAllEventListeners();\r\n            this._stateMap = new WeakMap();\r\n            this._initialized = false;\r\n        }\r\n\r\n        // ========================================\r\n        //   ABSTRACT METHODS (to be overridden)\r\n        // ========================================\r\n\r\n        /**\r\n         * Render content (must be implemented by subclasses)\r\n         * @abstract\r\n         * @param {*} data - Data to render\r\n         * @param {Object} [options] - Render options\r\n         * @returns {HTMLElement|string|null} Rendered content\r\n         * @throws {Error} If not implemented\r\n         */\r\n        render(data, options) {\r\n            throw new Error(`${this._name}.render() must be implemented by subclass`);\r\n        }\r\n    }\r\n\r\n    // Export to GeoLeaf namespace\r\n    GeoLeaf._Renderers.AbstractRenderer = AbstractRenderer;\r\n\r\n    if (GeoLeaf.Log) {\r\n        GeoLeaf.Log.info('[GeoLeaf._Renderers.AbstractRenderer] Base class loaded');\r\n    }\r\n\r\n})(window);\r\n","/**\n * POI Renderers - Field Renderers Module (Migrated to AbstractRenderer)\n * Rendu des champs simples: texte, badges, liens, tags\n *\n * @module poi/renderers/field-renderers\n * @requires renderers/abstract-renderer\n * @version 2.0.0 - Migrated to AbstractRenderer base class\n */\n((global) => {\n    'use strict';\n\n    const GeoLeaf = global.GeoLeaf || {};\n\n    // Ensure AbstractRenderer is loaded\n    if (!GeoLeaf._Renderers || !GeoLeaf._Renderers.AbstractRenderer) {\n        if (GeoLeaf.Log) {\n            GeoLeaf.Log.error('[FieldRenderers] AbstractRenderer not loaded! Load abstract-renderer.js first.');\n        }\n        return;\n    }\n\n    const AbstractRenderer = GeoLeaf._Renderers.AbstractRenderer;\n\n    /**\n     * @class FieldRenderers\n     * @extends AbstractRenderer\n     * @description Renders simple POI fields: text, badges, links, tags\n     */\n    class FieldRenderers extends AbstractRenderer {\n        constructor(options = {}) {\n            super({\n                name: 'FieldRenderers',\n                debug: options.debug || false,\n                config: options.config || {}\n            });\n            this.init();\n        }\n\n        /**\n         * Render method (required by AbstractRenderer)\n         * Delegates to specific render methods\n         * @param {Object} data - Render data {section, poi, value, type}\n         * @returns {HTMLElement|null} Rendered element\n         */\n        render(data) {\n            const { section, poi, value, type } = data;\n\n            switch (type) {\n                case 'text':\n                    return this.renderText(section, poi, value);\n                case 'badge':\n                    return this.renderBadge(section, value, poi);\n                case 'link':\n                    return this.renderLink(section, value);\n                case 'tags':\n                    return this.renderTags(section, value);\n                default:\n                    this.warn('Unknown render type:', type);\n                    return null;\n            }\n        }\n\n        /**\n         * Rend un champ texte (title, description, etc.)\n         * @param {Object} section - Section config\n         * @param {Object} poi - POI data\n         * @param {string} value - Text value\n         * @returns {HTMLElement|null}\n         */\n        async renderText(section, poi, value) {\n            const security = this.getSecurity();\n\n            // Cas sp√©cial pour le titre avec ic√¥ne\n            if (section.style === 'title' || section.variant === 'title') {\n                return await this._renderTitleWithIcon(poi, value);\n            }\n\n            // Texte normal ou multiline\n            if (!value) {\n                this.warn('renderText: no value provided');\n                return null;\n            }\n\n            const element = this.createElement(\n                section.variant === 'multiline' ? 'div' : 'p',\n                'gl-poi-sidepanel__desc'\n            );\n\n            if (section.variant === 'multiline') {\n                element.style.whiteSpace = 'pre-wrap';\n                element.style.lineHeight = '1.6';\n            }\n\n            element.textContent = value;\n            this.info('renderText: element created, variant:', section.variant || 'normal');\n\n            return element;\n        }\n\n        /**\n         * Rend un titre avec ic√¥ne SVG\n         * @private\n         * @param {Object} poi - POI data\n         * @param {string} value - Title text\n         * @returns {HTMLElement}\n         */\n        async _renderTitleWithIcon(poi, value) {\n            const titleH2 = this.createElement('h2', 'gl-poi-sidepanel__title');\n\n            // Ajouter l'ic√¥ne SVG au titre\n            const markers = this._getMarkers();\n            if (markers && markers.resolveCategoryDisplay && markers.ensureProfileSpriteInjectedSync) {\n                const displayInfo = markers.resolveCategoryDisplay(poi);\n                this.debug('_renderTitleWithIcon: displayInfo =', displayInfo);\n\n                if (displayInfo.iconId) {\n                    await markers.ensureProfileSpriteInjectedSync();\n\n                    const svgIcon = this._createCategoryIcon(displayInfo);\n                    if (svgIcon) {\n                        this.debug('_renderTitleWithIcon: SVG icon created successfully');\n                        titleH2.appendChild(svgIcon);\n                    } else {\n                        this.warn('_renderTitleWithIcon: SVG icon creation failed');\n                    }\n                } else {\n                    this.debug('_renderTitleWithIcon: No iconId in displayInfo');\n                }\n            } else {\n                this.warn('_renderTitleWithIcon: Markers or required methods not available');\n            }\n\n            // Ajouter le texte du titre\n            const titleSpan = this.createTextElement('span',\n                value || poi.title || poi.label || poi.name || 'POI',\n                'gl-poi-sidepanel__title-text'\n            );\n            titleH2.appendChild(titleSpan);\n\n            this.info('renderText: title element created with icon');\n            return titleH2;\n        }\n\n        /**\n         * Cr√©e une ic√¥ne SVG de cat√©gorie\n         * @private\n         * @param {Object} displayInfo - Display information {iconId, colorFill, colorStroke}\n         * @returns {SVGElement|null}\n         */\n        _createCategoryIcon(displayInfo) {\n            // R√©cup√©rer la config d'ic√¥nes depuis GeoLeaf.Config\n            const iconsConfig = (GeoLeaf.Config && typeof GeoLeaf.Config.getIconsConfig === 'function')\n                ? GeoLeaf.Config.getIconsConfig()\n                : null;\n\n            const iconPrefix = (iconsConfig && iconsConfig.symbolPrefix) || \"gl-poi-cat-\";\n            const iconIdNormalized = String(displayInfo.iconId).trim().toLowerCase().replace(/\\s+/g, '-');\n            const symbolId = iconPrefix + iconIdNormalized;\n\n            this.debug('_createCategoryIcon: symbolId =', symbolId, ', colors =', displayInfo.colorFill, displayInfo.colorStroke);\n            this.debug('_createCategoryIcon: iconPrefix from config =', iconPrefix);\n\n            // V√©rifier si le sprite existe dans le DOM\n            const sprite = document.querySelector('svg[data-geoleaf-sprite=\"profile\"]');\n            if (!sprite) {\n                this.warn('_createCategoryIcon: Sprite SVG non trouv√© dans le DOM! Le sprite doit √™tre charg√© avant.');\n            } else {\n                this.debug('_createCategoryIcon: Sprite trouv√©, nombre de symboles:', sprite.querySelectorAll('symbol').length);\n            }\n\n            // V√©rifier si le symbole existe dans le sprite\n            const spriteSymbol = sprite ? sprite.querySelector(`#${symbolId}`) : null;\n            if (!spriteSymbol) {\n                this.warn('_createCategoryIcon: Symbole non trouv√© dans le sprite:', symbolId);\n                if (sprite) {\n                    // Lister les symboles disponibles pour debug\n                    const availableSymbols = Array.from(sprite.querySelectorAll('symbol')).map(s => s.id).slice(0, 5);\n                    this.debug('_createCategoryIcon: Premiers symboles disponibles:', availableSymbols);\n                }\n            }\n\n            const svgIcon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n            svgIcon.setAttribute('width', '32');\n            svgIcon.setAttribute('height', '32');\n            svgIcon.setAttribute('viewBox', '0 0 24 24');\n            svgIcon.setAttribute('class', 'gl-poi-sidepanel__icon');\n            svgIcon.style.marginRight = '10px';\n            svgIcon.style.flexShrink = '0';\n\n            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n            circle.setAttribute('cx', '12');\n            circle.setAttribute('cy', '12');\n            circle.setAttribute('r', '10');\n            circle.setAttribute('fill', displayInfo.colorFill || '#3388ff');\n            circle.setAttribute('stroke', displayInfo.colorStroke || '#fff');\n            circle.setAttribute('stroke-width', '1.5');\n\n            svgIcon.appendChild(circle);\n\n            // Ajouter le symbole uniquement s'il existe\n            if (spriteSymbol) {\n                // SVG imbriqu√© pour le symbole (comme dans le popup)\n                const innerSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n                innerSvg.setAttribute('x', '4');\n                innerSvg.setAttribute('y', '4');\n                innerSvg.setAttribute('width', '16');\n                innerSvg.setAttribute('height', '16');\n                innerSvg.setAttribute('viewBox', '0 0 32 32');\n\n                const use = document.createElementNS('http://www.w3.org/2000/svg', 'use');\n                use.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', '#' + symbolId);\n                use.setAttribute('href', '#' + symbolId);\n                use.style.color = '#ffffff';\n\n                innerSvg.appendChild(use);\n                svgIcon.appendChild(innerSvg);\n            }\n\n            this.debug('_createCategoryIcon: SVG structure created');\n            return svgIcon;\n        }\n\n        /**\n         * Rend un badge (cat√©gorie, sous-cat√©gorie)\n         * @param {Object} section - Section config\n         * @param {string} value - Badge text\n         * @param {Object} poi - POI data\n         * @returns {HTMLElement|null}\n         */\n        renderBadge(section, value, poi) {\n            if (!value) return null;\n\n            const container = this.createElement('div', 'gl-poi-badge-container');\n            const badge = this.createTextElement('span', value, 'gl-poi-badge');\n\n            // R√©cup√©rer les couleurs depuis la taxonomie\n            const markers = this._getMarkers();\n            if (markers && markers.resolveCategoryDisplay) {\n                const displayInfo = markers.resolveCategoryDisplay(poi);\n                if (displayInfo.colorFill) {\n                    badge.style.background = displayInfo.colorFill;\n                    badge.style.color = '#fff';\n                }\n            }\n\n            container.appendChild(badge);\n            return container;\n        }\n\n        /**\n         * Rend un lien (website, etc.)\n         * @param {Object} section - Section config\n         * @param {string} url - URL\n         * @returns {HTMLElement|null}\n         */\n        renderLink(section, url) {\n            if (!url) return null;\n\n            const linkP = this.createElement('p', 'gl-poi-sidepanel__link');\n            const anchor = this.createElement('a', null, {\n                href: url,\n                target: '_blank',\n                rel: 'noopener noreferrer'\n            });\n\n            anchor.textContent = section.linkText || url;\n            linkP.appendChild(anchor);\n\n            return linkP;\n        }\n\n        /**\n         * Rend une liste de tags\n         * @param {Object} section - Section config\n         * @param {Array<string>} tags - Tags array\n         * @returns {HTMLElement|null}\n         */\n        renderTags(section, tags) {\n            if (!tags || !Array.isArray(tags) || tags.length === 0) return null;\n\n            const tagsDiv = this.createElement('div', 'gl-poi-sidepanel__tags');\n\n            tags.forEach(tag => {\n                if (tag) {\n                    const tagSpan = this.createTextElement('span', tag, 'gl-poi-tag');\n                    tagsDiv.appendChild(tagSpan);\n                }\n            });\n\n            return tagsDiv;\n        }\n\n        /**\n         * Get POI Markers module\n         * @private\n         * @returns {Object|null}\n         */\n        _getMarkers() {\n            return GeoLeaf._POIMarkers || null;\n        }\n    }\n\n    // Export to namespace\n    if (!GeoLeaf.POI) GeoLeaf.POI = {};\n    if (!GeoLeaf.POI.Renderers) GeoLeaf.POI.Renderers = {};\n\n    GeoLeaf.POI.Renderers.FieldRenderers = FieldRenderers;\n\n    // Lazy singleton instance for backward compatibility\n    let instance = null;\n    const getInstance = () => {\n        if (!instance) {\n            instance = new FieldRenderers();\n        }\n        return instance;\n    };\n\n    GeoLeaf.POI.Renderers.renderText = (section, poi, value) =>\n        getInstance().renderText(section, poi, value);\n\n    GeoLeaf.POI.Renderers.renderBadge = (section, value, poi) =>\n        getInstance().renderBadge(section, value, poi);\n\n    GeoLeaf.POI.Renderers.renderLink = (section, url) =>\n        getInstance().renderLink(section, url);\n\n    GeoLeaf.POI.Renderers.renderTags = (section, tags) =>\n        getInstance().renderTags(section, tags);\n\n    if (GeoLeaf.Log) {\n        GeoLeaf.Log.info('[POI.Renderers.FieldRenderers] Loaded (v2.0 - AbstractRenderer)');\n    }\n\n})(window);\n","/**\r\n * POI Renderers - Media Renderers Module (Migrated to AbstractRenderer)\r\n * Rendu des m√©dias: images, galeries, lightbox\r\n *\r\n * @module poi/renderers/media-renderers\r\n * @requires renderers/abstract-renderer\r\n * @version 2.0.0 - Migrated to AbstractRenderer base class\r\n */\r\n((global) => {\r\n    'use strict';\r\n\r\n    const GeoLeaf = global.GeoLeaf || {};\r\n\r\n    // Ensure AbstractRenderer is loaded\r\n    if (!GeoLeaf._Renderers || !GeoLeaf._Renderers.AbstractRenderer) {\r\n        console.error('[MediaRenderers] AbstractRenderer not loaded! Load abstract-renderer.js first.');\r\n        return;\r\n    }\r\n\r\n    const AbstractRenderer = GeoLeaf._Renderers.AbstractRenderer;\r\n\r\n    /**\r\n     * @class MediaRenderers\r\n     * @extends AbstractRenderer\r\n     * @description Renders media elements: images, galleries, lightbox\r\n     */\r\n    class MediaRenderers extends AbstractRenderer {\r\n        constructor(options = {}) {\r\n            super({\r\n                name: 'MediaRenderers',\r\n                debug: options.debug || false,\r\n                config: options.config || {}\r\n            });\r\n            this.init();\r\n        }\r\n\r\n        /**\r\n         * Render method (required by AbstractRenderer)\r\n         * @param {Object} data - Render data {section, value, type}\r\n         * @returns {HTMLElement|null} Rendered element\r\n         */\r\n        render(data) {\r\n            const { section, value, type } = data;\r\n\r\n            switch (type) {\r\n                case 'image':\r\n                    return this.renderImage(section, value);\r\n                case 'gallery':\r\n                    return this.renderGallery(section, value);\r\n                default:\r\n                    this.warn('Unknown media render type:', type);\r\n                    return null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Rend une image (hero ou normale)\r\n         * @param {Object} section - Section config\r\n         * @param {string} imageUrl - Image URL\r\n         * @returns {HTMLElement|null}\r\n         */\r\n        renderImage(section, imageUrl) {\r\n            if (!imageUrl) return null;\r\n\r\n            const className = section.variant === 'hero'\r\n                ? 'gl-poi-sidepanel__photo gl-poi-sidepanel__photo--hero'\r\n                : 'gl-poi-sidepanel__photo';\r\n\r\n            const photoDiv = this.createElement('div', className);\r\n            const img = this.createElement('img', null, {\r\n                src: imageUrl,\r\n                alt: section.label || 'Photo',\r\n                loading: 'lazy'\r\n            });\r\n\r\n            photoDiv.appendChild(img);\r\n            return photoDiv;\r\n        }\r\n\r\n        /**\r\n         * Rend une galerie d'images avec miniatures\r\n         * @param {Object} section - Section config\r\n         * @param {Array<string>} gallery - Array of image URLs\r\n         * @returns {HTMLElement|null}\r\n         */\r\n        renderGallery(section, gallery) {\r\n            if (!gallery || !Array.isArray(gallery) || gallery.length === 0) {\r\n                this.warn('renderGallery: invalid gallery data', gallery);\r\n                return null;\r\n            }\r\n\r\n            this.info('renderGallery: rendering', gallery.length, 'images');\r\n\r\n            const galleryDiv = this.createElement('div', 'gl-poi-gallery');\r\n\r\n            // Image principale\r\n            const mainDiv = this._createMainImage(gallery[0]);\r\n            galleryDiv.appendChild(mainDiv);\r\n\r\n            // Miniatures si plusieurs images\r\n            if (gallery.length > 1) {\r\n                const thumbsDiv = this._createThumbnails(gallery, mainDiv);\r\n                galleryDiv.appendChild(thumbsDiv);\r\n            }\r\n\r\n            return galleryDiv;\r\n        }\r\n\r\n        /**\r\n         * Cr√©e l'image principale de la galerie\r\n         * @private\r\n         * @param {string} imageUrl - Image URL\r\n         * @returns {HTMLElement}\r\n         */\r\n        _createMainImage(imageUrl) {\r\n            const mainDiv = this.createElement('div', 'gl-poi-gallery__main', {\r\n                'data-gallery-index': '0'\r\n            });\r\n\r\n            const mainImg = this.createElement('img', null, {\r\n                src: imageUrl,\r\n                alt: 'Image 1',\r\n                loading: 'lazy'\r\n            });\r\n\r\n            mainDiv.appendChild(mainImg);\r\n            return mainDiv;\r\n        }\r\n\r\n        /**\r\n         * Cr√©e les miniatures de la galerie\r\n         * @private\r\n         * @param {Array<string>} gallery - Array of image URLs\r\n         * @param {HTMLElement} mainDiv - Main image container\r\n         * @returns {HTMLElement}\r\n         */\r\n        _createThumbnails(gallery, mainDiv) {\r\n            const thumbsDiv = this.createElement('div', 'gl-poi-gallery__thumbnails');\r\n            const mainImg = mainDiv.querySelector('img');\r\n\r\n            gallery.forEach((imgUrl, index) => {\r\n                const thumbDiv = this._createThumbnail(imgUrl, index, mainImg, mainDiv, thumbsDiv);\r\n                thumbsDiv.appendChild(thumbDiv);\r\n            });\r\n\r\n            return thumbsDiv;\r\n        }\r\n\r\n        /**\r\n         * Cr√©e une miniature individuelle\r\n         * @private\r\n         * @param {string} imgUrl - Image URL\r\n         * @param {number} index - Image index\r\n         * @param {HTMLElement} mainImg - Main image element\r\n         * @param {HTMLElement} mainDiv - Main image container\r\n         * @param {HTMLElement} thumbsDiv - Thumbnails container\r\n         * @returns {HTMLElement}\r\n         */\r\n        _createThumbnail(imgUrl, index, mainImg, mainDiv, thumbsDiv) {\r\n            const thumbDiv = this.createElement('div',\r\n                index === 0 ? 'gl-poi-gallery__thumb active' : 'gl-poi-gallery__thumb',\r\n                { 'data-index': index.toString() }\r\n            );\r\n\r\n            const imgThumb = this.createElement('img', null, {\r\n                src: imgUrl,\r\n                alt: `Image ${index + 1}`,\r\n                loading: 'lazy'\r\n            });\r\n\r\n            thumbDiv.appendChild(imgThumb);\r\n\r\n            // Event listener pour changer l'image principale\r\n            this.addEventListener(thumbDiv, 'click', (e) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n\r\n                // Retirer la classe active de toutes les miniatures\r\n                const allThumbs = thumbsDiv.querySelectorAll('.gl-poi-gallery__thumb');\r\n                allThumbs.forEach(t => t.classList.remove('active'));\r\n\r\n                // Ajouter la classe active √† la miniature cliqu√©e\r\n                thumbDiv.classList.add('active');\r\n\r\n                // Changer l'image principale\r\n                mainImg.src = imgUrl;\r\n                mainImg.alt = `Image ${index + 1}`;\r\n                mainDiv.setAttribute('data-gallery-index', index.toString());\r\n\r\n                this.info('Gallery: Switched to image', index + 1);\r\n            }, true);\r\n\r\n            return thumbDiv;\r\n        }\r\n\r\n        /**\r\n         * Cleanup when gallery is destroyed\r\n         * @override\r\n         */\r\n        destroy() {\r\n            this.debug('Destroying MediaRenderers');\r\n            super.destroy();\r\n        }\r\n    }\r\n\r\n    // Export to namespace\r\n    if (!GeoLeaf.POI) GeoLeaf.POI = {};\r\n    if (!GeoLeaf.POI.Renderers) GeoLeaf.POI.Renderers = {};\r\n\r\n    GeoLeaf.POI.Renderers.MediaRenderers = MediaRenderers;\r\n\r\n    // Lazy singleton instance for backward compatibility\r\n    let instance = null;\r\n    const getInstance = () => {\r\n        if (!instance) {\r\n            instance = new MediaRenderers();\r\n        }\r\n        return instance;\r\n    };\r\n\r\n    GeoLeaf.POI.Renderers.renderImage = (section, imageUrl) =>\r\n        getInstance().renderImage(section, imageUrl);\r\n\r\n    GeoLeaf.POI.Renderers.renderGallery = (section, gallery) =>\r\n        getInstance().renderGallery(section, gallery);\r\n\r\n    if (GeoLeaf.Log) {\r\n        GeoLeaf.Log.info('[POI.Renderers.MediaRenderers] Loaded (v2.0 - AbstractRenderer)');\r\n    }\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf POI Module - Lightbox Manager\r\n * Gestion de l'affichage lightbox pour les images\r\n * Phase 6.2 - Extraction depuis core.js\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    /**\r\n     * Gestionnaire de lightbox pour affichage d'images en plein √©cran\r\n     */\r\n    class LightboxManager {\r\n        constructor() {\r\n            this.currentLightbox = null;\r\n            this.closeHandler = null;\r\n        }\r\n\r\n        /**\r\n         * Ouvre une lightbox pour afficher une image en plein √©cran\r\n         * @param {string} imageSrc - URL de l'image √† afficher\r\n         */\r\n        open(imageSrc) {\r\n            // Fermer lightbox pr√©c√©dente si existe\r\n            this.close();\r\n\r\n            const lightbox = document.createElement('div');\r\n            lightbox.className = 'gl-poi-lightbox';\r\n            lightbox.style.cssText = `\r\n                position: fixed;\r\n                top: 0;\r\n                left: 0;\r\n                right: 0;\r\n                bottom: 0;\r\n                background: rgba(0,0,0,0.95);\r\n                z-index: 10000;\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n                cursor: pointer;\r\n            `;\r\n\r\n            const img = document.createElement('img');\r\n            img.src = imageSrc;\r\n            img.style.cssText = `\r\n                max-width: 90%;\r\n                max-height: 90%;\r\n                object-fit: contain;\r\n            `;\r\n\r\n            lightbox.appendChild(img);\r\n            document.body.appendChild(lightbox);\r\n\r\n            // Stocker r√©f√©rence\r\n            this.currentLightbox = lightbox;\r\n\r\n            // Fermer en cliquant n'importe o√π\r\n            lightbox.addEventListener('click', () => {\r\n                this.close();\r\n            });\r\n\r\n            // Fermer avec Escape\r\n            this.closeHandler = (e) => {\r\n                if (e.key === 'Escape') {\r\n                    this.close();\r\n                }\r\n            };\r\n            document.addEventListener('keydown', this.closeHandler);\r\n        }\r\n\r\n        /**\r\n         * Ferme la lightbox active\r\n         */\r\n        close() {\r\n            if (this.currentLightbox && document.body.contains(this.currentLightbox)) {\r\n                document.body.removeChild(this.currentLightbox);\r\n            }\r\n\r\n            if (this.closeHandler) {\r\n                document.removeEventListener('keydown', this.closeHandler);\r\n                this.closeHandler = null;\r\n            }\r\n\r\n            this.currentLightbox = null;\r\n        }\r\n\r\n        /**\r\n         * V√©rifie si une lightbox est actuellement ouverte\r\n         * @returns {boolean}\r\n         */\r\n        isOpen() {\r\n            return this.currentLightbox !== null && document.body.contains(this.currentLightbox);\r\n        }\r\n    }\r\n\r\n    // Export global\r\n    GeoLeaf.LightboxManager = LightboxManager;\r\n\r\n    // Instance singleton pour usage simple\r\n    GeoLeaf._lightboxManager = new LightboxManager();\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/**\r\n * GeoLeaf POI Module - UI Behaviors\r\n * Comportements interactifs pour le side panel (accord√©ons, galeries)\r\n * Phase 6.2 - Extraction depuis core.js\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Comportements UI pour le side panel POI\r\n     */\r\n    const UIBehaviors = {\r\n        /**\r\n         * Attache le comportement d'accord√©on exclusif (un seul ouvert √† la fois)\r\n         * @param {HTMLElement} container - Conteneur parent des accord√©ons\r\n         */\r\n        attachSingleAccordionBehavior(container) {\r\n            const accordions = container.querySelectorAll('details.gl-accordion');\r\n            if (accordions.length === 0) return;\r\n\r\n            accordions.forEach(accordion => {\r\n                accordion.addEventListener('toggle', (event) => {\r\n                    // Si cet accord√©on vient d'√™tre ouvert\r\n                    if (event.target.open) {\r\n                        // Fermer tous les autres accord√©ons\r\n                        accordions.forEach(otherAccordion => {\r\n                            if (otherAccordion !== event.target && otherAccordion.open) {\r\n                                otherAccordion.removeAttribute('open');\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n\r\n            if (Log) Log.info('[POI] Comportement singleAccordion activ√©:', accordions.length, 'accord√©ons');\r\n        },\r\n\r\n        /**\r\n         * Attache les √©v√©nements de navigation pour une galerie d'images\r\n         * @param {HTMLElement} sidePanelElement - √âl√©ment du side panel\r\n         * @param {LightboxManager} lightboxManager - Instance du gestionnaire de lightbox\r\n         */\r\n        attachGalleryEvents(sidePanelElement, lightboxManager) {\r\n            if (!sidePanelElement) return;\r\n\r\n            // Navigation par miniatures\r\n            const thumbs = sidePanelElement.querySelectorAll('.gl-poi-gallery__thumb');\r\n            const mainImg = sidePanelElement.querySelector('.gl-poi-gallery__main img');\r\n\r\n            if (!mainImg || thumbs.length === 0) return;\r\n\r\n            thumbs.forEach((thumb) => {\r\n                thumb.addEventListener('click', () => {\r\n                    const index = parseInt(thumb.getAttribute('data-index'), 10);\r\n                    const imgSrc = thumb.querySelector('img').src;\r\n\r\n                    // Mettre √† jour l'image principale\r\n                    mainImg.src = imgSrc;\r\n                    mainImg.alt = `Image ${index + 1}`;\r\n\r\n                    // Mettre √† jour l'√©tat actif des miniatures\r\n                    thumbs.forEach(t => t.classList.remove('active'));\r\n                    thumb.classList.add('active');\r\n                });\r\n            });\r\n\r\n            // Clic sur l'image principale pour lightbox\r\n            mainImg.addEventListener('click', () => {\r\n                if (lightboxManager) {\r\n                    lightboxManager.open(mainImg.src);\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Configure tous les comportements UI pour le side panel\r\n         * @param {HTMLElement} container - Conteneur du side panel\r\n         * @param {LightboxManager} lightboxManager - Instance du gestionnaire de lightbox\r\n         */\r\n        setupAll(container, lightboxManager) {\r\n            this.attachSingleAccordionBehavior(container);\r\n            this.attachGalleryEvents(container, lightboxManager);\r\n        }\r\n    };\r\n\r\n    // Export global\r\n    GeoLeaf._POIUIBehaviors = UIBehaviors;\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/**\r\n * GeoLeaf POI Module - Component Renderers\r\n * Rendu des composants UI (badges, liens, listes, tableaux, tags)\r\n * Phase 6.2 - Extraction depuis core.js\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Renderers pour les composants UI du side panel\r\n     */\r\n    class ComponentRenderers {\r\n        constructor() {\r\n            // R√©f√©rence aux modules POI\r\n            this.getMarkers = () => GeoLeaf._POIMarkers;\r\n        }\r\n\r\n        /**\r\n         * Rend un badge avec style de cat√©gorie\r\n         * @param {object} section - Configuration de section\r\n         * @param {string} value - Valeur du badge\r\n         * @param {object} poi - POI complet\r\n         * @returns {HTMLElement|null}\r\n         */\r\n        renderBadge(section, value, poi) {\r\n            if (!value) return null;\r\n\r\n            const container = document.createElement('div');\r\n            container.className = 'gl-poi-badge-container';\r\n\r\n            const badge = document.createElement('span');\r\n            badge.className = 'gl-poi-badge';\r\n            badge.textContent = value;\r\n\r\n            // R√©cup√©rer les couleurs depuis la taxonomie si disponible\r\n            const markers = this.getMarkers();\r\n            if (markers && markers.resolveCategoryDisplay) {\r\n                const displayInfo = markers.resolveCategoryDisplay(poi);\r\n                if (displayInfo.colorFill) {\r\n                    badge.style.background = displayInfo.colorFill;\r\n                    badge.style.color = '#fff';\r\n                }\r\n            }\r\n\r\n            container.appendChild(badge);\r\n            return container;\r\n        }\r\n\r\n        /**\r\n         * Rend un lien externe\r\n         * @param {object} section - Configuration de section\r\n         * @param {string} url - URL du lien\r\n         * @returns {HTMLElement|null}\r\n         */\r\n        renderLink(section, url) {\r\n            if (!url) return null;\r\n\r\n            const container = document.createElement('div');\r\n            container.className = 'gl-poi-link-container';\r\n\r\n            const link = document.createElement('a');\r\n            link.className = 'gl-poi-website-link';\r\n            link.href = url;\r\n            link.target = '_blank';\r\n            link.rel = 'noopener noreferrer';\r\n            link.textContent = section.label || 'Visiter le site web ‚Üí';\r\n\r\n            container.appendChild(link);\r\n            return container;\r\n        }\r\n\r\n        /**\r\n         * Rend une liste (tableau de prix, etc.)\r\n         * @param {object} section - Configuration de section\r\n         * @param {Array|object} data - Donn√©es √† afficher\r\n         * @returns {HTMLElement|null}\r\n         */\r\n        renderList(section, data) {\r\n            if (!data) {\r\n                if (Log) Log.warn('[POI] renderList: data is null/undefined');\r\n                return null;\r\n            }\r\n\r\n            const div = document.createElement('div');\r\n            div.className = 'gl-poi-section';\r\n\r\n            // Cas sp√©cial pour price (objet)\r\n            if (typeof data === 'object' && !Array.isArray(data)) {\r\n                if (Log) Log.info('[POI] renderList: price object:', data);\r\n\r\n                if (data.from || data.to) {\r\n                    const p = document.createElement('p');\r\n                    const strong = document.createElement('strong');\r\n\r\n                    const safeFrom = Number.isFinite(Number(data.from)) ? Number(data.from) : null;\r\n                    const safeTo = Number.isFinite(Number(data.to)) ? Number(data.to) : null;\r\n                    const safeCurrency = data.currency || 'USD';\r\n\r\n                    if (safeFrom !== null && safeTo !== null) {\r\n                        strong.textContent = `De ${safeFrom} √† ${safeTo} ${safeCurrency}`;\r\n                    } else if (safeFrom !== null) {\r\n                        strong.textContent = `√Ä partir de ${safeFrom} ${safeCurrency}`;\r\n                    } else if (safeTo !== null) {\r\n                        strong.textContent = `Jusqu'√† ${safeTo} ${safeCurrency}`;\r\n                    }\r\n\r\n                    if (strong.textContent) {\r\n                        p.appendChild(strong);\r\n                        div.appendChild(p);\r\n                    }\r\n                }\r\n                if (data.description) {\r\n                    const desc = document.createElement('p');\r\n                    desc.textContent = data.description;\r\n                    desc.style.fontSize = '0.85rem';\r\n                    desc.style.color = 'var(--gl-color-text-muted)';\r\n                    div.appendChild(desc);\r\n                }\r\n\r\n                if (div.children.length === 0) {\r\n                    if (Log) Log.warn('[POI] renderList: price object has no displayable content');\r\n                    return null;\r\n                }\r\n                return div;\r\n            }\r\n\r\n            // Liste normale (array)\r\n            if (Array.isArray(data)) {\r\n                const variant = section.variant || 'disc';\r\n\r\n                const ul = document.createElement('ul');\r\n                ul.className = 'gl-poi-list-unordered';\r\n\r\n                // Appliquer le style de puce selon le variant\r\n                if (variant === 'disc' || variant === 'circle' || variant === 'square') {\r\n                    ul.style.listStyleType = variant;\r\n                } else {\r\n                    ul.style.listStyleType = 'disc'; // Par d√©faut\r\n                }\r\n\r\n                data.forEach(item => {\r\n                    const li = document.createElement('li');\r\n                    li.textContent = item;\r\n                    ul.appendChild(li);\r\n                });\r\n\r\n                div.appendChild(ul);\r\n            }\r\n\r\n            return div;\r\n        }\r\n\r\n        /**\r\n         * Rend un tableau avec en-t√™tes et bordures\r\n         * @param {object} section - Configuration de section\r\n         * @param {Array} data - Donn√©es du tableau\r\n         * @returns {HTMLElement|null}\r\n         */\r\n        renderTable(section, data) {\r\n            if (!data || !Array.isArray(data)) {\r\n                if (Log) Log.warn('[POI] renderTable: data is', data ? 'not an array' : 'null/undefined', '- type:', typeof data);\r\n                return null;\r\n            }\r\n\r\n            if (Log) Log.info('[POI] renderTable: rendering', data.length, 'rows');\r\n\r\n            // Transformer les cha√Ænes en objets si n√©cessaire\r\n            let tableData = data;\r\n            if (data.length > 0 && typeof data[0] === 'string' && section.columns && section.columns.length === 2) {\r\n                // D√©tecter le format \"Cl√© : Valeur\" ou \"Cl√© ‚Äì Valeur\"\r\n                tableData = data.map(str => {\r\n                    const separators = [' : ', ': ', ' ‚Äì ', '‚Äì', ' - ', '-'];\r\n                    for (const sep of separators) {\r\n                        const parts = str.split(sep);\r\n                        if (parts.length >= 2) {\r\n                            return {\r\n                                [section.columns[0].key]: parts[0].trim(),\r\n                                [section.columns[1].key]: parts.slice(1).join(sep).trim()\r\n                            };\r\n                        }\r\n                    }\r\n                    // Si aucun s√©parateur trouv√©, tout dans la premi√®re colonne\r\n                    return {\r\n                        [section.columns[0].key]: str,\r\n                        [section.columns[1].key]: ''\r\n                    };\r\n                });\r\n                if (Log) Log.info('[POI] renderTable: transformed string array to object array');\r\n            }\r\n\r\n            const table = document.createElement('table');\r\n            table.className = 'gl-poi-table';\r\n\r\n            // Gestion des bordures selon la configuration\r\n            const borders = section.borders || {};\r\n            if (borders.outer !== false) {\r\n                table.style.border = `1px solid ${borders.color || 'var(--gl-color-border-soft)'}`;\r\n            }\r\n\r\n            // En-t√™tes\r\n            if (section.columns) {\r\n                const thead = document.createElement('thead');\r\n                const tr = document.createElement('tr');\r\n                section.columns.forEach((col, index) => {\r\n                    const th = document.createElement('th');\r\n                    th.textContent = col.label;\r\n                    th.style.padding = '8px';\r\n                    th.style.textAlign = 'left';\r\n                    th.style.fontWeight = '600';\r\n                    th.style.backgroundColor = 'var(--gl-color-bg-subtle)';\r\n\r\n                    if (borders.row !== false) {\r\n                        th.style.borderBottom = `1px solid ${borders.color || 'var(--gl-color-border-soft)'}`;\r\n                    }\r\n                    if (borders.column && index > 0) {\r\n                        th.style.borderLeft = `1px solid ${borders.color || 'var(--gl-color-border-soft)'}`;\r\n                    }\r\n\r\n                    tr.appendChild(th);\r\n                });\r\n                thead.appendChild(tr);\r\n                table.appendChild(thead);\r\n            }\r\n\r\n            // Lignes de donn√©es\r\n            const tbody = document.createElement('tbody');\r\n            tableData.forEach((row, rowIndex) => {\r\n                const tr = document.createElement('tr');\r\n                if (section.columns) {\r\n                    section.columns.forEach((col, colIndex) => {\r\n                        const td = document.createElement('td');\r\n                        td.textContent = row[col.key] || '';\r\n                        td.style.padding = '8px';\r\n\r\n                        if (borders.row !== false && rowIndex < tableData.length - 1) {\r\n                            td.style.borderBottom = `1px solid ${borders.color || 'var(--gl-color-border-soft)'}`;\r\n                        }\r\n                        if (borders.column && colIndex > 0) {\r\n                            td.style.borderLeft = `1px solid ${borders.color || 'var(--gl-color-border-soft)'}`;\r\n                        }\r\n\r\n                        tr.appendChild(td);\r\n                    });\r\n                }\r\n                tbody.appendChild(tr);\r\n            });\r\n            table.appendChild(tbody);\r\n\r\n            return table;\r\n        }\r\n\r\n        /**\r\n         * Rend des tags\r\n         * @param {object} section - Configuration de section\r\n         * @param {Array<string>} tags - Liste de tags\r\n         * @returns {HTMLElement|null}\r\n         */\r\n        renderTags(section, tags) {\r\n            if (!tags || !Array.isArray(tags)) {\r\n                if (Log) Log.warn('[POI] renderTags: tags is', tags ? 'not an array' : 'null/undefined', '- type:', typeof tags, '- value:', tags);\r\n                return null;\r\n            }\r\n\r\n            if (tags.length === 0) {\r\n                if (Log) Log.warn('[POI] renderTags: tags array is empty');\r\n                return null;\r\n            }\r\n\r\n            if (Log) Log.info('[POI] renderTags: rendering', tags.length, 'tags');\r\n\r\n            const div = document.createElement('div');\r\n            div.className = 'gl-poi-sidepanel__tags';\r\n            div.style.display = 'flex';\r\n            div.style.flexWrap = 'wrap';\r\n            div.style.gap = '6px';\r\n\r\n            tags.forEach(tag => {\r\n                const tagSpan = document.createElement('span');\r\n                tagSpan.className = 'gl-poi-tag';\r\n                tagSpan.textContent = tag;\r\n                div.appendChild(tagSpan);\r\n            });\r\n\r\n            return div;\r\n        }\r\n\r\n        /**\r\n         * Rend les avis (reviews)\r\n         * @param {object} section - Configuration de section\r\n         * @param {Array} reviews - Liste d'avis\r\n         * @returns {HTMLElement|null}\r\n         */\r\n        renderReviews(section, reviews) {\r\n            if (!reviews || !Array.isArray(reviews)) {\r\n                if (Log) Log.warn('[POI] renderReviews: reviews is', reviews ? 'not an array' : 'null/undefined', '- type:', typeof reviews);\r\n                return null;\r\n            }\r\n\r\n            if (Log) Log.info('[POI] renderReviews: rendering', reviews.length, 'reviews');\r\n\r\n            const div = document.createElement('div');\r\n            div.className = 'gl-poi-reviews';\r\n\r\n            const maxCount = section.maxCount || 5;\r\n            reviews.slice(0, maxCount).forEach(review => {\r\n                const reviewDiv = document.createElement('div');\r\n                reviewDiv.className = 'gl-poi-review';\r\n                reviewDiv.style.borderLeft = '3px solid var(--gl-color-accent-soft)';\r\n                reviewDiv.style.paddingLeft = '12px';\r\n                reviewDiv.style.marginBottom = '12px';\r\n\r\n                const header = document.createElement('p');\r\n                header.style.fontSize = '0.875rem';\r\n                header.style.fontWeight = '600';\r\n                header.style.marginBottom = '4px';\r\n\r\n                const safeAuthor = review.authorName || 'Anonyme';\r\n                const safeRating = Number.isFinite(review.rating) ? review.rating : 0;\r\n                const verifiedMark = review.verified ? ' ‚úì' : '';\r\n                header.textContent = `${safeAuthor} - ‚≠ê${safeRating}/5${verifiedMark}`;\r\n                reviewDiv.appendChild(header);\r\n\r\n                if (review.comment) {\r\n                    const comment = document.createElement('p');\r\n                    comment.textContent = review.comment;\r\n                    comment.style.fontSize = '0.85rem';\r\n                    comment.style.marginBottom = '4px';\r\n                    reviewDiv.appendChild(comment);\r\n                }\r\n\r\n                if (review.createdAt) {\r\n                    const date = document.createElement('p');\r\n                    date.style.fontSize = '0.75rem';\r\n                    date.style.color = 'var(--gl-color-text-muted)';\r\n                    date.textContent = review.createdAt;\r\n                    reviewDiv.appendChild(date);\r\n                }\r\n\r\n                div.appendChild(reviewDiv);\r\n            });\r\n\r\n            return div;\r\n        }\r\n    }\r\n\r\n    // Export global\r\n    GeoLeaf.ComponentRenderers = ComponentRenderers;\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/**\n * GeoLeaf POI Module - Section Orchestrator\n * Orchestration du rendu des sections (dispatcher, extraction valeurs, accord√©ons)\n * Phase 6.2 - Extraction depuis core.js\n */\n(function (global) {\n    \"use strict\";\n\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\n    const Log = GeoLeaf.Log;\n    const Utils = GeoLeaf.Utils || {};\n\n    /**\n     * Orchestrateur de sections pour le side panel POI\n     */\n    class SectionOrchestrator {\n        constructor() {\n            // Initialiser les renderers\n            this.componentRenderers = null;\n            this.fieldRenderers = null;\n            this.mediaRenderers = null;\n        }\n\n        /**\n         * Initialise les renderers (lazy loading)\n         * @private\n         */\n        _initRenderers() {\n            if (!this.componentRenderers) {\n                this.componentRenderers = new GeoLeaf.ComponentRenderers();\n            }\n            if (!this.fieldRenderers && GeoLeaf.POI && GeoLeaf.POI.Renderers && GeoLeaf.POI.Renderers.FieldRenderers) {\n                this.fieldRenderers = new GeoLeaf.POI.Renderers.FieldRenderers({ debug: true });\n            }\n            if (!this.mediaRenderers && GeoLeaf.POI && GeoLeaf.POI.Renderers && GeoLeaf.POI.Renderers.MediaRenderers) {\n                this.mediaRenderers = new GeoLeaf.POI.Renderers.MediaRenderers({ debug: true });\n            }\n        }\n\n        /**\n         * R√©cup√®re la valeur d'un champ avec support du dot notation\n         * @param {object} poi - POI complet\n         * @param {string} fieldPath - Chemin du champ (ex: \"attributes.address.city\")\n         * @returns {*}\n         */\n        getFieldValue(poi, fieldPath) {\n            if (!fieldPath) return null;\n\n            const resolveField = Utils.resolveField || function(obj, path) {\n                const parts = path.split('.');\n                let current = obj;\n                for (const part of parts) {\n                    if (current && typeof current === 'object' && part in current) {\n                        current = current[part];\n                    } else {\n                        return null;\n                    }\n                }\n                return current;\n            };\n\n            const value = resolveField(poi, fieldPath);\n\n            if (Log && Log.info) {\n                Log.info('[POI] getFieldValue:', fieldPath, '‚Üí',\n                    value === undefined ? 'undefined' :\n                    value === null ? 'null' :\n                    value === '' ? '\"\"(empty string)' :\n                    Array.isArray(value) ? `Array(${value.length})` :\n                    (value && typeof value === 'object') ? `Object(${Object.keys(value).length} keys)` :\n                    value);\n            }\n\n            return value;\n        }\n\n        /**\n         * Wrappe un contenu dans un accord√©on <details>\n         * @param {object} section - Configuration de section\n         * @param {HTMLElement} content - Contenu √† wrapper\n         * @param {boolean} isOpen - Ouvrir par d√©faut\n         * @returns {HTMLElement}\n         */\n        wrapInAccordion(section, content, isOpen = false) {\n            const details = document.createElement('details');\n            details.className = 'gl-accordion';\n            if (isOpen) details.setAttribute('open', '');\n\n            const summary = document.createElement('summary');\n            summary.className = 'gl-accordion__header';\n            summary.textContent = section.label || 'Section';\n\n            const arrow = document.createElement('span');\n            arrow.className = 'gl-accordion__arrow';\n            arrow.textContent = '‚ñº';\n            summary.appendChild(arrow);\n\n            const panel = document.createElement('div');\n            panel.className = 'gl-accordion__panel';\n\n            const panelContent = document.createElement('div');\n            panelContent.className = 'gl-accordion__panel-content';\n            panelContent.appendChild(content);\n\n            panel.appendChild(panelContent);\n\n            details.appendChild(summary);\n            details.appendChild(panel);\n\n            return details;\n        }\n\n        /**\n         * Rend une section compl√®te selon son type\n         * @param {object} section - Configuration de section\n         * @param {object} poi - POI complet\n         * @param {object} state - √âtat partag√© POI\n         * @returns {Promise<HTMLElement|null>}\n         */\n        async renderSection(section, poi, state) {\n            if (!section || !section.type) return null;\n\n            // Initialiser les renderers si n√©cessaire\n            this._initRenderers();\n\n            // R√©soudre la valeur du champ\n            const fieldValue = this.getFieldValue(poi, section.field);\n\n            if (Log) {\n                const valueType = Array.isArray(fieldValue) ? `Array(${fieldValue.length})` :\n                                 (fieldValue && typeof fieldValue === 'object') ? `Object(${Object.keys(fieldValue).length} keys)` :\n                                 typeof fieldValue;\n                Log.debug('[POI] Section:', section.label || section.type, '- Field:', section.field, '- ValueType:', valueType, '- Value:', fieldValue);\n            }\n\n            // Ne pas afficher si la valeur est vide, SAUF pour:\n            // - text avec style='title' (le titre est obligatoire)\n            // - badge (peut avoir un comportement par d√©faut)\n            const isRequiredField = (section.type === 'text' && section.style === 'title') || section.type === 'badge';\n\n            // V√©rifier si la valeur est vraiment vide (null, undefined, '', [], {})\n            // ATTENTION: 0 est une valeur valide (pour les prix, m√©triques, etc.)\n            const isEmpty = (fieldValue === null || fieldValue === undefined || fieldValue === '') ||\n                           (Array.isArray(fieldValue) && fieldValue.length === 0) ||\n                           (typeof fieldValue === 'object' && !Array.isArray(fieldValue) && Object.keys(fieldValue).length === 0);\n\n            if (Log) {\n                Log.info('[POI] Check isEmpty for:', section.label,\n                    '- fieldValue:', fieldValue,\n                    '- isArray:', Array.isArray(fieldValue),\n                    '- arrayLength:', Array.isArray(fieldValue) ? fieldValue.length : 'N/A',\n                    '- isEmpty:', isEmpty);\n            }\n\n            if (isEmpty && !isRequiredField) {\n                if (Log) Log.warn('[POI] Section ignor√©e (valeur vide):', section.label || section.type);\n                return null;\n            }\n\n            if (Log) Log.info('[POI] ‚Üí Appel render pour:', section.label, '- Type:', section.type, '- Value:',\n                Array.isArray(fieldValue) ? `Array(${fieldValue.length})` :\n                (fieldValue && typeof fieldValue === 'object') ? 'Object' :\n                fieldValue);\n\n            // Cr√©er l'√©l√©ment selon le type\n            let content = null;\n\n            switch (section.type) {\n                case 'text':\n                case 'longtext': // Alias pour text avec plus de contenu\n                    if (this.fieldRenderers) {\n                        content = await this.fieldRenderers.renderText(section, poi, fieldValue);\n                    }\n                    break;\n                case 'number': // Afficher un nombre simple comme du texte\n                    if (this.fieldRenderers) {\n                        content = await this.fieldRenderers.renderText(section, poi, String(fieldValue));\n                    }\n                    break;\n                case 'metric': // Nombre avec suffixe/pr√©fixe\n                    const suffix = section.suffix || '';\n                    const prefix = section.prefix || '';\n                    if (this.fieldRenderers) {\n                        content = await this.fieldRenderers.renderText(section, poi, prefix + String(fieldValue) + suffix);\n                    }\n                    break;\n                case 'image':\n                    if (this.mediaRenderers) {\n                        content = this.mediaRenderers.renderImage(section, fieldValue);\n                    }\n                    break;\n                case 'gallery':\n                    if (this.mediaRenderers) {\n                        content = this.mediaRenderers.renderGallery(section, fieldValue);\n                    }\n                    break;\n                case 'badge':\n                    content = this.componentRenderers.renderBadge(section, fieldValue, poi);\n                    break;\n                case 'link':\n                    content = this.componentRenderers.renderLink(section, fieldValue);\n                    break;\n                case 'list':\n                    content = this.componentRenderers.renderList(section, fieldValue);\n                    break;\n                case 'table':\n                    content = this.componentRenderers.renderTable(section, fieldValue);\n                    break;\n                case 'tags':\n                    content = this.componentRenderers.renderTags(section, fieldValue);\n                    break;\n                case 'reviews':\n                    content = this.componentRenderers.renderReviews(section, fieldValue);\n                    break;\n                default:\n                    if (Log) Log.warn('[POI] Type de section inconnu:', section.type);\n                    return null;\n            }\n\n            if (!content) {\n                if (Log) Log.debug('[POI] Aucun contenu g√©n√©r√© pour:', section.label || section.type);\n                return null;\n            }\n\n            if (Log) Log.debug('[POI] Contenu g√©n√©r√© pour:', section.label || section.type, '- Accordion:', section.accordion);\n\n            // Wraper dans un accord√©on si n√©cessaire\n            if (section.accordion) {\n                return this.wrapInAccordion(section, content, section.defaultOpen);\n            }\n\n            return content;\n        }\n    }\n\n    // Export global\n    GeoLeaf.SectionOrchestrator = SectionOrchestrator;\n\n})(typeof window !== \"undefined\" ? window : global);\n","/**\n * Module Renderers/Links pour POI\n * Rendu des liens\n */\n(function (global) {\n    \"use strict\";\n\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\n    const Log = GeoLeaf.Log;\n\n    /**\n     * Module Links Renderer\n     * @namespace _POIRendererLinks\n     * @private\n     */\n    const _POIRendererLinks = {\n        /**\n         * Rend un lien (website, etc.)\n         * @param {Object} section - Configuration de la section\n         * @param {string} url - URL du lien\n         * @returns {HTMLElement|null}\n         */\n        renderLink(section, url) {\n            if (!url) return null;\n\n            const container = document.createElement('div');\n            container.className = 'gl-poi-link-container';\n\n            const link = document.createElement('a');\n            link.className = 'gl-poi-website-link';\n            link.href = url;\n            link.target = '_blank';\n            link.rel = 'noopener noreferrer';\n            link.textContent = section.label || url;\n\n            container.appendChild(link);\n            return container;\n        }\n    };\n\n    // Exposer dans l'espace de noms interne\n    GeoLeaf._POIRendererLinks = _POIRendererLinks;\n\n})(window);\n","/**\r\n * GeoLeaf POI Module - Renderers Core\r\n * Orchestrateur principal pour le rendu du side panel POI\r\n * Phase 6.2 - Version refactoris√©e (837 LOC ‚Üí ~140 LOC)\r\n *\r\n * Architecture modulaire:\r\n * - lightbox-manager.js: Gestion lightbox\r\n * - ui-behaviors.js: Comportements UI (accord√©ons, galerie)\r\n * - component-renderers.js: Renderers composants (badges, links, lists, tables, tags)\r\n * - section-orchestrator.js: Dispatcher de sections + extraction valeurs\r\n * - field-renderers-v2.js: Renderers texte\r\n * - media-renderers-v2.js: Renderers media\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    GeoLeaf._POIRenderers = GeoLeaf._POIRenderers || {};\r\n\r\n    // R√©f√©rence aux modules POI\r\n    const getShared = () => GeoLeaf._POIShared;\r\n    const getNormalizers = () => GeoLeaf._POINormalizers;\r\n\r\n    // Initialiser les nouveaux modules\r\n    let sectionOrchestrator = null;\r\n    let lightboxManager = null;\r\n    let uiBehaviors = null;\r\n\r\n    /**\r\n     * Initialise les modules (lazy loading)\r\n     * @private\r\n     */\r\n    function _initModules() {\r\n        if (!sectionOrchestrator && GeoLeaf.SectionOrchestrator) {\r\n            sectionOrchestrator = new GeoLeaf.SectionOrchestrator();\r\n        }\r\n        if (!lightboxManager) {\r\n            lightboxManager = GeoLeaf._lightboxManager || (GeoLeaf.LightboxManager ? new GeoLeaf.LightboxManager() : null);\r\n        }\r\n        if (!uiBehaviors) {\r\n            uiBehaviors = GeoLeaf._POIUIBehaviors;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Peuple le side panel avec les donn√©es du POI en utilisant le layout JSON.\r\n     *\r\n     * @param {object} poi - POI normalis√©.\r\n     * @param {object} customLayout - Layout personnalis√© (optionnel).\r\n     * @returns {Promise<void>}\r\n     */\r\n    async function populateSidePanel(poi, customLayout) {\r\n        console.log('[SIDEPANEL] populateSidePanel called for POI:', poi?.title || poi?.label);\r\n        // Initialiser les modules\r\n        _initModules();\r\n\r\n        const shared = getShared();\r\n        if (!shared) {\r\n            console.log('[SIDEPANEL] ERROR: shared is null');\r\n            return;\r\n        }\r\n        const state = shared.state;\r\n\r\n        if (!state.sidePanelElement) {\r\n            console.log('[SIDEPANEL] ERROR: sidePanelElement not found');\r\n            return;\r\n        }\r\n\r\n        const contentDiv = state.sidePanelElement.querySelector('.gl-poi-sidepanel__content');\r\n        if (!contentDiv) return;\r\n\r\n        // Clear contenu pr√©c√©dent\r\n        GeoLeaf.DOMSecurity.clearElementFast(contentDiv);\r\n\r\n        // Normaliser le POI\r\n        const normalizers = getNormalizers();\r\n        const normalized = normalizers ? normalizers.normalizePoi(poi) : poi;\r\n\r\n        if (Log) {\r\n            Log.debug('[POI] POI normalis√©:', normalized.title || normalized.label);\r\n            Log.debug('[POI] Champs attributes disponibles:', Object.keys(normalized.attributes || {}));\r\n        }\r\n\r\n        // R√©cup√©rer le layout depuis la config du profile\r\n        let layout = customLayout;\r\n\r\n        // ‚úÖ PRIORIT√â 1: V√©rifier si le POI a une configuration sidepanel attach√©e (depuis sa couche)\r\n        if (!layout && normalized._sidepanelConfig && normalized._sidepanelConfig.detailLayout) {\r\n            layout = normalized._sidepanelConfig.detailLayout;\r\n            if (Log) Log.info('[POI] Layout r√©cup√©r√© depuis la configuration de couche attach√©e au POI');\r\n        }\r\n\r\n        // ‚úÖ PRIORIT√â 2: Essayer de r√©cup√©rer depuis le profil actif\r\n        if (!layout) {\r\n            const Config = GeoLeaf.Config;\r\n            if (Config && typeof Config.getActiveProfile === 'function') {\r\n                const activeProfile = Config.getActiveProfile();\r\n                if (activeProfile && activeProfile.panels && activeProfile.panels.detail) {\r\n                    layout = activeProfile.panels.detail.layout;\r\n                    if (Log) Log.info('[POI] Layout r√©cup√©r√© depuis le profil actif:', activeProfile.id || 'unknown');\r\n                }\r\n            }\r\n        }\r\n\r\n        // Fallback sur poiConfig si disponible\r\n        if (!layout && state.poiConfig?.panels?.detail?.layout) {\r\n            layout = state.poiConfig.panels.detail.layout;\r\n        }\r\n\r\n        // Si toujours pas de layout, utiliser le layout par d√©faut\r\n        if (!layout || layout.length === 0) {\r\n            if (Log) Log.warn('[POI] Aucun layout trouv√©, utilisation du layout par d√©faut');\r\n            layout = _getDefaultLayout();\r\n        }\r\n\r\n        // ‚úÖ IMPORTANT: Trier les sections par leur propri√©t√© 'order' (si d√©finie)\r\n        const sortedLayout = [...layout].sort((a, b) => {\r\n            const orderA = typeof a.order === 'number' ? a.order : 999;\r\n            const orderB = typeof b.order === 'number' ? b.order : 999;\r\n            return orderA - orderB;\r\n        });\r\n\r\n        if (Log) Log.info('[POI] G√©n√©ration du side panel avec', sortedLayout.length, 'sections');\r\n\r\n        // Body du panneau\r\n        const body = document.createElement('div');\r\n        body.className = 'gl-poi-sidepanel__body';\r\n        console.log('[SIDEPANEL] Body created, will process', sortedLayout.length, 'sections');\r\n\r\n        // G√©n√©rer chaque section selon le layout tri√© (d√©l√©guer √† SectionOrchestrator)\r\n        for (const section of sortedLayout) {\r\n            try {\r\n                const element = sectionOrchestrator\r\n                    ? await sectionOrchestrator.renderSection(section, normalized, state)\r\n                    : null;\r\n\r\n                if (element) {\r\n                    body.appendChild(element);\r\n                    console.log('[SIDEPANEL] ‚úì Section added:', section.label || section.type);\r\n                    if (Log) Log.info('[POI] ‚úì Section ajout√©e:', section.label || section.type);\r\n                } else {\r\n                    console.log('[SIDEPANEL] ‚úó Section NULL:', section.label || section.type, '- field:', section.field);\r\n                    if (Log) Log.warn('[POI] ‚úó Section ignor√©e (element null):', section.label || section.type, '- field:', section.field);\r\n                }\r\n            } catch (error) {\r\n                console.error('[SIDEPANEL] ERROR rendering section:', section.label, error);\r\n                if (Log) Log.error('[POI] Erreur lors du rendu de la section:', section.label, error);\r\n            }\r\n        }\r\n\r\n        console.log('[SIDEPANEL] Appending body to contentDiv. Body has', body.children.length, 'children');\r\n        contentDiv.appendChild(body);\r\n        console.log('[SIDEPANEL] Body appended. ContentDiv now has', contentDiv.children.length, 'children');\r\n\r\n        // G√©rer le comportement singleAccordion si configur√©\r\n        const singleAccordion = normalized._sidepanelConfig?.singleAccordion;\r\n        if (singleAccordion === true && uiBehaviors) {\r\n            uiBehaviors.attachSingleAccordionBehavior(body);\r\n        }\r\n\r\n        // Attacher les √©v√©nements apr√®s le rendu\r\n        if (uiBehaviors) {\r\n            uiBehaviors.attachGalleryEvents(state.sidePanelElement, lightboxManager);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Retourne un layout par d√©faut si aucun n'est configur√©.\r\n     * @private\r\n     */\r\n    function _getDefaultLayout() {\r\n        return [\r\n            { type: 'text', field: 'title', style: 'title', accordion: false },\r\n            { type: 'image', field: 'attributes.mainImage', variant: 'hero', accordion: false },\r\n            { type: 'text', field: 'attributes.shortDescription', variant: 'short', accordion: false },\r\n            { type: 'text', label: 'Informations', field: 'attributes.longDescription', variant: 'multiline', accordion: true, defaultOpen: true },\r\n            { type: 'text', label: 'Description', field: 'attributes.description_long', variant: 'multiline', accordion: true, defaultOpen: true },\r\n            { type: 'gallery', label: 'Galerie photos', field: 'attributes.gallery', accordion: true, defaultOpen: true },\r\n            { type: 'list', label: 'Prix', field: 'attributes.price', accordion: true, defaultOpen: false },\r\n            { type: 'reviews', label: 'Avis r√©cents', field: 'attributes.reviews.recent', maxCount: 5, accordion: true, defaultOpen: false },\r\n            { type: 'tags', label: 'Tags', field: 'attributes.tags', accordion: false },\r\n            { type: 'link', label: 'Visiter le site web ‚Üí', field: 'attributes.website', accordion: false }\r\n        ];\r\n    }\r\n\r\n    // Export public dans un namespace s√©par√© pour √©viter d'√©craser l'agr√©gateur\r\n    GeoLeaf._POIRenderersCore = {\r\n        populateSidePanel\r\n    };\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * Module POI Renderers (Agr√©gateur)\r\n * Fa√ßade publique pour tous les renderers POI\r\n *\r\n * ARCHITECTURE REFACTORIS√âE :\r\n * - poi/renderers/fields.js : Champs texte et badges\r\n * - poi/renderers/media.js : Images et galeries\r\n * - poi/renderers/links.js : Liens externes\r\n * - poi/renderers/core.js : Logique de rendu principale (legacy)\r\n * - poi/renderers.js (ce fichier) : Agr√©gateur/fa√ßade publique\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n\r\n    /**\r\n     * Module POI Renderers\r\n     * D√©l√®gue aux sous-modules sp√©cialis√©s\r\n     * @namespace _POIRenderers\r\n     * @private\r\n     */\r\n    const _POIRenderers = {\r\n        /**\r\n         * Rend le contenu complet d'un POI\r\n         * (D√©l√©gu√© au core pour compatibilit√©)\r\n         * @param {Object} poi - Donn√©es du POI\r\n         * @param {Object} state - √âtat\r\n         * @returns {DocumentFragment}\r\n         */\r\n        renderContent(poi, state) {\r\n            // D√©l√©gation au module core (fichier original)\r\n            if (GeoLeaf._POIRenderersCore && typeof GeoLeaf._POIRenderersCore.renderContent === 'function') {\r\n                return GeoLeaf._POIRenderersCore.renderContent(poi, state);\r\n            }\r\n            if (GeoLeaf.Log) GeoLeaf.Log.error('[POI] Module _POIRenderersCore non disponible');\r\n            return document.createDocumentFragment();\r\n        },\r\n\r\n        /**\r\n         * Rend un champ texte\r\n         * (D√©l√©gu√© au module fields)\r\n         */\r\n        renderText(section, poi, value) {\r\n            if (GeoLeaf._POIRendererFields) {\r\n                return GeoLeaf._POIRendererFields.renderText(section, poi, value);\r\n            }\r\n            if (GeoLeaf.Log) GeoLeaf.Log.error('[POI] Module _POIRendererFields non disponible pour renderText');\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Rend un badge\r\n         * (D√©l√©gu√© au module fields)\r\n         */\r\n        renderBadge(section, value, poi) {\r\n            if (GeoLeaf._POIRendererFields) {\r\n                return GeoLeaf._POIRendererFields.renderBadge(section, value, poi);\r\n            }\r\n            if (GeoLeaf.Log) GeoLeaf.Log.error('[POI] Module _POIRendererFields non disponible pour renderBadge');\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Rend une image\r\n         * (D√©l√©gu√© au module media)\r\n         */\r\n        renderImage(section, imageUrl) {\r\n            if (GeoLeaf._POIRendererMedia) {\r\n                return GeoLeaf._POIRendererMedia.renderImage(section, imageUrl);\r\n            }\r\n            if (GeoLeaf.Log) GeoLeaf.Log.error('[POI] Module _POIRendererMedia non disponible pour renderImage');\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Rend une galerie\r\n         * (D√©l√©gu√© au module media)\r\n         */\r\n        renderGallery(section, gallery) {\r\n            if (GeoLeaf._POIRendererMedia) {\r\n                return GeoLeaf._POIRendererMedia.renderGallery(section, gallery);\r\n            }\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Rend un lien\r\n         * (D√©l√©gu√© au module links)\r\n         */\r\n        renderLink(section, url) {\r\n            if (GeoLeaf._POIRendererLinks) {\r\n                return GeoLeaf._POIRendererLinks.renderLink(section, url);\r\n            }\r\n            if (GeoLeaf.Log) GeoLeaf.Log.error('[POI] Module _POIRendererLinks non disponible pour renderLink');\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Peuple le side panel avec les donn√©es du POI\r\n         * (D√©l√©gu√© au module core)\r\n         * @returns {Promise<void>}\r\n         */\r\n        async populateSidePanel(poi, customLayout) {\r\n            if (GeoLeaf._POIRenderersCore && typeof GeoLeaf._POIRenderersCore.populateSidePanel === 'function') {\r\n                return await GeoLeaf._POIRenderersCore.populateSidePanel(poi, customLayout);\r\n            }\r\n            if (GeoLeaf.Log) GeoLeaf.Log.error('[POI] Module _POIRenderersCore non disponible pour populateSidePanel');\r\n        }\r\n    };\r\n\r\n    // Exposer dans l'espace de noms interne\r\n    GeoLeaf._POIRenderers = _POIRenderers;\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf POI Module - Side Panel\r\n * Gestion du panneau lat√©ral d'affichage d√©taill√© des POI\r\n * TODO Phase 4: D√©couper fonctions complexes en sous-fonctions <80 lignes\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Shorthand for createElement\r\n     */\r\n    const $create = (tag, props, ...children) => {\r\n        return GeoLeaf.Utils && GeoLeaf.Utils.createElement\r\n            ? GeoLeaf.Utils.createElement(tag, props, ...children)\r\n            : document.createElement(tag);\r\n    };\r\n\r\n    GeoLeaf._POISidePanel = GeoLeaf._POISidePanel || {};\r\n\r\n    // R√©f√©rence au module shared\r\n    const getShared = () => GeoLeaf._POIShared;\r\n    const getRenderers = () => GeoLeaf._POIRenderers;\r\n\r\n    /**\r\n     * Cr√©e l'√©l√©ment DOM du panneau lat√©ral si non existant.\r\n     */\r\n    function createSidePanel() {\r\n        const shared = getShared();\r\n        if (!shared) return;\r\n        const state = shared.state;\r\n\r\n        if (state.sidePanelElement) return; // D√©j√† cr√©√©\r\n\r\n        // Cr√©er l'overlay\r\n        const overlay = $create('div', {\r\n            className: 'gl-poi-sidepanel-overlay',\r\n            attributes: { 'aria-hidden': 'true' }\r\n        });\r\n        // Ajouter √† .gl-main pour support du mode plein √©cran\r\n        const glMain = document.querySelector('.gl-main');\r\n        if (glMain) {\r\n            glMain.appendChild(overlay);\r\n        } else {\r\n            document.body.appendChild(overlay);\r\n        }\r\n        state.sidePanelOverlay = overlay;\r\n\r\n        // Cr√©er le panneau\r\n        const panel = $create('aside', {\r\n            className: 'gl-poi-sidepanel',\r\n            attributes: {\r\n                'aria-hidden': 'true',\r\n                'role': 'complementary'\r\n            }\r\n        });\r\n\r\n        // Cr√©er le header avec bouton fermer\r\n        const header = $create('div', { className: 'gl-poi-sidepanel__header' });\r\n        const closeBtn = $create('button', {\r\n            className: 'gl-poi-sidepanel__close',\r\n            attributes: { 'aria-label': 'Fermer' },\r\n            textContent: '√ó',\r\n            onClick: closeSidePanel\r\n        });\r\n        header.appendChild(closeBtn);\r\n\r\n        // Cr√©er le content\r\n        const content = $create('div', { className: 'gl-poi-sidepanel__content' });\r\n\r\n        panel.appendChild(header);\r\n        panel.appendChild(content);\r\n        // Ajouter √† .gl-main pour support du mode plein √©cran\r\n        if (glMain) {\r\n            glMain.appendChild(panel);\r\n        } else {\r\n            document.body.appendChild(panel);\r\n        }\r\n        state.sidePanelElement = panel;\r\n        state.sidePanelContent = content;\r\n\r\n        // Event listeners\r\n        overlay.addEventListener('click', closeSidePanel);\r\n\r\n        if (Log) Log.info('[POI] Side panel cr√©√©.');\r\n    }\r\n\r\n    /**\r\n     * Ouvre le panneau lat√©ral avec les infos compl√®tes du POI.\r\n     *\r\n     * @param {object} poi - Donn√©es compl√®tes du POI.\r\n     * @param {object} customLayout - Layout personnalis√© (optionnel).\r\n     * @returns {Promise<void>}\r\n     */\r\n    async function openSidePanel(poi, customLayout) {\r\n        console.log('[SIDEPANEL-OPEN] openSidePanel called for POI:', poi?.id || poi?.name);\r\n        if (!poi) {\r\n            console.log('[SIDEPANEL-OPEN] ERROR: POI is null/undefined');\r\n            if (Log) Log.warn('[POI] openSidePanel() : POI invalide.');\r\n            return;\r\n        }\r\n\r\n        if (Log) {\r\n            Log.debug('[POI] openSidePanel:', poi.id || poi.name);\r\n        }\r\n\r\n        const shared = getShared();\r\n        if (!shared) {\r\n            console.log('[SIDEPANEL-OPEN] ERROR: shared is null');\r\n            return;\r\n        }\r\n        const state = shared.state;\r\n\r\n        // S'assurer que le panneau existe\r\n        if (!state.sidePanelElement) {\r\n            console.log('[SIDEPANEL-OPEN] Creating side panel element');\r\n            createSidePanel();\r\n        }\r\n\r\n        if (!state.sidePanelElement) {\r\n            console.log('[SIDEPANEL-OPEN] ERROR: sidePanelElement still null after creation');\r\n            if (Log) Log.error('[POI] openSidePanel() : Impossible de cr√©er le panneau lat√©ral.');\r\n            return;\r\n        }\r\n\r\n        state.currentPoiInPanel = poi;\r\n        state.currentGalleryIndex = 0;\r\n\r\n        // Peupler le panneau (la lightbox sera cr√©√©e par renderers.js si n√©cessaire)\r\n        const renderers = getRenderers();\r\n        console.log('[SIDEPANEL-OPEN] renderers:', !!renderers, '- populateSidePanel:', typeof renderers?.populateSidePanel);\r\n        if (renderers && typeof renderers.populateSidePanel === 'function') {\r\n            console.log('[SIDEPANEL-OPEN] Calling renderers.populateSidePanel');\r\n            await renderers.populateSidePanel(poi, customLayout);\r\n            console.log('[SIDEPANEL-OPEN] populateSidePanel completed');\r\n        } else {\r\n            console.log('[SIDEPANEL-OPEN] ERROR: renderers.populateSidePanel not available');\r\n        }\r\n\r\n        // Afficher l'overlay et le panneau avec animation\r\n        if (state.sidePanelOverlay) {\r\n            state.sidePanelOverlay.classList.add('open');\r\n        }\r\n        state.sidePanelElement.classList.add('open');\r\n        state.sidePanelElement.setAttribute('aria-hidden', 'false');\r\n\r\n        // Ajouter classe au body pour d√©caler la carte\r\n        document.body.classList.add('gl-poi-sidepanel-open');\r\n\r\n        if (Log) Log.info('[POI] Panneau lat√©ral ouvert pour :', poi.title || poi.name || poi.label);\r\n    }\r\n\r\n    /**\r\n     * Ferme le panneau lat√©ral.\r\n     */\r\n    function closeSidePanel() {\r\n        const shared = getShared();\r\n        if (!shared) return;\r\n        const state = shared.state;\r\n\r\n        if (!state.sidePanelElement) return;\r\n\r\n        state.sidePanelElement.classList.remove('open');\r\n        state.sidePanelElement.setAttribute('aria-hidden', 'true');\r\n\r\n        if (state.sidePanelOverlay) {\r\n            state.sidePanelOverlay.classList.remove('open');\r\n        }\r\n\r\n        // Retirer classe du body\r\n        document.body.classList.remove('gl-poi-sidepanel-open');\r\n\r\n        // Nettoyer la lightbox globale\r\n        const lightbox = document.querySelector('.gl-poi-lightbox-global');\r\n        if (lightbox) {\r\n            lightbox.remove();\r\n        }\r\n\r\n        state.currentPoiInPanel = null;\r\n\r\n        if (Log) Log.info('[POI] Panneau lat√©ral ferm√©.');\r\n    }\r\n\r\n    /**\r\n     * Alias pour fermer le panneau (API publique).\r\n     */\r\n    function hideSidePanel() {\r\n        closeSidePanel();\r\n    }\r\n\r\n    // ========================================\r\n    //   EXPORT\r\n    // ========================================\r\n\r\n    GeoLeaf._POISidePanel = {\r\n        createSidePanel,\r\n        openSidePanel,\r\n        closeSidePanel,\r\n        hideSidePanel\r\n    };\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf POI Module - Core\r\n * Fonctions principales d'initialisation, chargement et gestion des POI\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    GeoLeaf._POICore = GeoLeaf._POICore || {};\r\n\r\n    // R√©f√©rences aux modules POI\r\n    const getShared = () => GeoLeaf._POIShared;\r\n    const getMarkers = () => GeoLeaf._POIMarkers;\r\n    const getSidePanel = () => GeoLeaf._POISidePanel;\r\n    const getNormalizers = () => GeoLeaf._POINormalizers;\r\n\r\n    /**\r\n     * Fonction principale d'initialisation du module POI.\r\n     *\r\n     * @param {L.Map|object} mapOrOptions - Instance de la carte Leaflet ou objet {map, config}.\r\n     * @param {object} config - Configuration POI depuis GeoLeaf.config.json (optionnel si premier param est objet).\r\n     */\r\n    async function init(mapOrOptions, config) {\r\n        // Support pour les deux signatures: init(map, config) et init({map, config})\r\n        let map, opts;\r\n\r\n        if (mapOrOptions && typeof mapOrOptions === 'object' && mapOrOptions.map) {\r\n            map = mapOrOptions.map;\r\n            opts = mapOrOptions.config || mapOrOptions;\r\n        } else {\r\n            map = mapOrOptions;\r\n            opts = config;\r\n        }\r\n\r\n        if (!map || typeof map.addLayer !== 'function') {\r\n            if (Log) Log.error('[POI] Aucune carte Leaflet valide fournie. Impossible d\\'initialiser le module POI.');\r\n            return;\r\n        }\r\n\r\n        const shared = getShared();\r\n        if (!shared) {\r\n            if (Log) Log.error('[POI] Module shared non charg√©.');\r\n            return;\r\n        }\r\n\r\n        const state = shared.state;\r\n        const constants = shared.constants;\r\n\r\n        state.mapInstance = map;\r\n        state.poiConfig = opts || {};\r\n\r\n        if (Log) Log.info('[POI] Initialisation du module POI...');\r\n\r\n        // Forcer un maxZoom valide sur la carte\r\n        if (shared.ensureMapMaxZoom) {\r\n            shared.ensureMapMaxZoom(map, constants.POI_MAX_ZOOM);\r\n        }\r\n\r\n        // Cr√©er le layer group principal\r\n        state.poiLayerGroup = L.layerGroup().addTo(map);\r\n\r\n        // Cr√©er le cluster group si clustering activ√©\r\n        const clustering = state.poiConfig.clustering !== false;\r\n        if (clustering && typeof L !== 'undefined' && typeof L.markerClusterGroup === 'function') {\r\n            state.poiClusterGroup = L.markerClusterGroup({\r\n                maxClusterRadius: state.poiConfig.clusterRadius || 80,\r\n                disableClusteringAtZoom: state.poiConfig.disableClusteringAtZoom || constants.POI_MAX_ZOOM,\r\n                animate: false,\r\n                showCoverageOnHover: false\r\n            });\r\n            state.mapInstance.addLayer(state.poiClusterGroup);\r\n            if (Log) Log.info('[POI] Clustering activ√© (MarkerClusterGroup cr√©√©).');\r\n        }\r\n\r\n        // Cr√©er le panneau lat√©ral (cach√© par d√©faut)\r\n        const sidePanel = getSidePanel();\r\n        if (sidePanel && typeof sidePanel.createSidePanel === 'function') {\r\n            sidePanel.createSidePanel();\r\n        }\r\n\r\n        // Charger le sprite SVG AVANT de charger les POIs\r\n        const markers = getMarkers();\r\n        if (markers && typeof markers.ensureProfileSpriteInjectedSync === 'function') {\r\n            await markers.ensureProfileSpriteInjectedSync();\r\n        }\r\n\r\n        // Charger et afficher les POIs avec d√©lai pour attendre Storage\r\n        if (state.poiConfig.enabled !== false) {\r\n            // ‚úÖ NOUVEAU: Retarder le chargement initial pour laisser le temps au Storage de s'initialiser\r\n            setTimeout(() => {\r\n                if (Log) Log.info('[POI] Chargement des POI apr√®s d√©lai d\\'initialisation');\r\n                loadAndDisplay();\r\n            }, 1000);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * ‚úÖ NOUVELLE FONCTION: Charge et fusionne les POI stock√©s localement avec les POI existants\r\n     */\r\n    function loadAndMergeStoredPois(existingPois, callback) {\r\n        if (typeof callback !== 'function') {\r\n            if (Log) Log.error('[POI] loadAndMergeStoredPois: callback requis');\r\n            return;\r\n        }\r\n\r\n        // ‚úÖ NOUVEAU: V√©rification renforc√©e de la disponibilit√© du module Storage\r\n        const checkStorageAvailable = () => {\r\n            const available = typeof GeoLeaf !== 'undefined' &&\r\n                   GeoLeaf.Storage &&\r\n                   GeoLeaf.Storage.DB &&\r\n                   typeof GeoLeaf.Storage.DB.getAllFromSyncQueue === 'function';\r\n\r\n            if (Log) {\r\n                if (!available) {\r\n                    Log.info('[POI] Debug Storage - GeoLeaf:', typeof GeoLeaf !== 'undefined');\r\n                    Log.info('[POI] Debug Storage - GeoLeaf.Storage:', !!(GeoLeaf && GeoLeaf.Storage));\r\n                    Log.info('[POI] Debug Storage - GeoLeaf.Storage.DB:', !!(GeoLeaf && GeoLeaf.Storage && GeoLeaf.Storage.DB));\r\n                    Log.info('[POI] Debug Storage - getAllFromSyncQueue:', !!(GeoLeaf && GeoLeaf.Storage && GeoLeaf.Storage.DB && typeof GeoLeaf.Storage.DB.getAllFromSyncQueue === 'function'));\r\n                }\r\n            }\r\n\r\n            return available;\r\n        };\r\n\r\n        if (!checkStorageAvailable()) {\r\n            // ‚úÖ NOUVEAU: Retry apr√®s un d√©lai si Storage pas encore pr√™t\r\n            if (Log) Log.warn('[POI] Module Storage pas encore pr√™t, retry dans 1000ms...');\r\n            setTimeout(() => {\r\n                if (checkStorageAvailable()) {\r\n                    if (Log) Log.info('[POI] Module Storage maintenant disponible, retry...');\r\n                    loadAndMergeStoredPois(existingPois, callback);\r\n                } else {\r\n                    if (Log) Log.error('[POI] Module Storage toujours non disponible apr√®s retry, abandon.');\r\n                    callback(existingPois);\r\n                }\r\n            }, 1000);\r\n            return;\r\n        }\r\n\r\n        if (Log) Log.info('[POI] Module Storage disponible, r√©cup√©ration des POI...');\r\n\r\n        // Utiliser le module de synchronisation pour r√©cup√©rer les POI du cache\r\n        GeoLeaf.Storage.DB.getAllFromSyncQueue()\r\n            .then(queueItems => {\r\n                if (Log) Log.info(`[POI] R√©cup√©ration cache: ${queueItems.length} items trouv√©s`);\r\n\r\n                if (!Array.isArray(queueItems) || queueItems.length === 0) {\r\n                    if (Log) Log.info('[POI] Aucun POI trouv√© dans la file de synchronisation.');\r\n                    callback(existingPois);\r\n                    return;\r\n                }\r\n\r\n                // D√©bugger les types d'items trouv√©s\r\n                if (Log) {\r\n                    const itemTypes = queueItems.map(item => `${item.action}:${item.data?.type || 'no-type'}`);\r\n                    Log.info(`[POI] Types d'items dans le cache: [${itemTypes.join(', ')}]`);\r\n\r\n                    // DEBUG: Structure compl√®te des premiers items\r\n                    queueItems.slice(0, 2).forEach((item, i) => {\r\n                        Log.info(`[POI] DEBUG Item ${i}:`, {\r\n                            action: item.action,\r\n                            type: item.type,\r\n                            data_type: item.data?.type,\r\n                            keys: Object.keys(item),\r\n                            data_keys: item.data ? Object.keys(item.data) : 'no data'\r\n                        });\r\n                    });\r\n                }\r\n\r\n                // Filtrer les √©l√©ments POI (action 'add' ou 'update') et extraire les donn√©es\r\n                const cachedPois = [];\r\n                const normalizers = getNormalizers();\r\n\r\n                if (!normalizers) {\r\n                    if (Log) Log.error('[POI] Module Normalizers non disponible pour les POI du cache.');\r\n                    callback(existingPois);\r\n                    return;\r\n                }\r\n\r\n                queueItems.forEach(item => {\r\n                    // Essayer diff√©rents formats de structure pour les POI\r\n                    let isPoi = false;\r\n                    let poiData = null;\r\n                    let itemAction = null;\r\n\r\n                    // Format 1: item.data.type === 'poi' && item.action contient 'add'\r\n                    if (item.data && item.data.type === 'poi' && item.action &&\r\n                        (item.action.includes('add') || item.action.includes('update'))) {\r\n                        isPoi = true;\r\n                        poiData = item.data;\r\n                        itemAction = item.action;\r\n                    }\r\n                    // Format 2: item.type === 'poi' directement\r\n                    else if (item.type === 'poi') {\r\n                        isPoi = true;\r\n                        poiData = item;\r\n                        itemAction = item.action || 'add';\r\n                    }\r\n                    // Format 3: Contient un id POI et des coordonn√©es (detection heuristique)\r\n                    else if (item.data && (item.data.id || item.data.latlng || item.data.latitude)) {\r\n                        isPoi = true;\r\n                        poiData = item.data;\r\n                        itemAction = item.action || 'add';\r\n                        if (Log) Log.info(`[POI] D√©tection heuristique POI: ${item.data.id || 'no-id'}`);\r\n                    }\r\n                    // Format 4: L'item lui-m√™me est un POI (pas d'enveloppe data)\r\n                    else if (item.id && (item.latlng || item.latitude)) {\r\n                        isPoi = true;\r\n                        poiData = item;\r\n                        itemAction = 'add';\r\n                        if (Log) Log.info(`[POI] D√©tection POI direct: ${item.id}`);\r\n                    }\r\n\r\n                    if (isPoi && poiData) {\r\n                        // Normaliser le POI stock√© comme les autres\r\n                        const normalizedPoi = normalizers.normalizePoi(poiData);\r\n                        if (normalizedPoi) {\r\n                            cachedPois.push(normalizedPoi);\r\n                            if (Log) Log.info(`[POI] POI du cache normalis√©: ${normalizedPoi.id || 'Sans ID'} (action: ${itemAction})`);\r\n                        } else {\r\n                            if (Log) Log.warn('[POI] √âchec normalisation POI du cache:', poiData);\r\n                        }\r\n                    } else {\r\n                        if (Log) Log.debug(`[POI] Item ignor√© - action: ${item.action}, type: ${item.type || item.data?.type}, keys: ${Object.keys(item).join(',')}`);\r\n                    }\r\n                });\r\n\r\n                if (cachedPois.length > 0) {\r\n                    if (Log) Log.info(`[POI] ${cachedPois.length} POI(s) r√©cup√©r√©(s) du cache local.`);\r\n\r\n                    // Fusionner avec les POI existants (√©viter les doublons par ID)\r\n                    const mergedPois = [...existingPois];\r\n                    cachedPois.forEach(cachedPoi => {\r\n                        if (!mergedPois.find(p => p.id === cachedPoi.id)) {\r\n                            mergedPois.push(cachedPoi);\r\n                        }\r\n                    });\r\n\r\n                    callback(mergedPois);\r\n                } else {\r\n                    callback(existingPois);\r\n                }\r\n            })\r\n            .catch(err => {\r\n                if (Log) Log.error('[POI] Erreur lors de la r√©cup√©ration des POI du cache :', err);\r\n                callback(existingPois);\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Charge les POIs et les affiche sur la carte.\r\n     */\r\n    function loadAndDisplay() {\r\n        const shared = getShared();\r\n        if (!shared) return;\r\n        const state = shared.state;\r\n\r\n        if (state.isLoading) {\r\n            if (Log) Log.warn('[POI] Chargement d√©j√† en cours...');\r\n            return;\r\n        }\r\n\r\n        // 1) Essayer d'utiliser les POI normalis√©s du profil actif\r\n        try {\r\n            if (GeoLeaf.Config && typeof GeoLeaf.Config.getActiveProfilePoi === 'function') {\r\n                const profilePois = GeoLeaf.Config.getActiveProfilePoi();\r\n                if (Array.isArray(profilePois) && profilePois.length > 0) {\r\n                    state.allPois = profilePois;\r\n                    if (Log) Log.info(`[POI] ${state.allPois.length} POI(s) provenant du profil actif.`);\r\n\r\n                    // ‚úÖ CORRECTION: Charger aussi les POI du cache apr√®s les POI du profil\r\n                    loadAndMergeStoredPois(state.allPois, function(mergedPois) {\r\n                        state.allPois = mergedPois;\r\n                        displayPois(state.allPois);\r\n                    });\r\n                    return;\r\n                }\r\n            }\r\n        } catch (err) {\r\n            if (Log) Log.error('[POI] Erreur lors de la r√©cup√©ration des POI du profil actif :', err);\r\n        }\r\n\r\n        // ‚úÖ CORRECTION: Essayer de charger les POI stock√©s en cache AVANT le fallback dataUrl\r\n        loadAndMergeStoredPois([], function(cachedPois) {\r\n            if (cachedPois.length > 0) {\r\n                state.allPois = cachedPois;\r\n                if (Log) Log.info(`[POI] ${cachedPois.length} POI(s) charg√©(s) depuis le cache local.`);\r\n                displayPois(cachedPois);\r\n                return;\r\n            }\r\n\r\n            // 2) Fallback : charger un fichier JSON depuis dataUrl (mode historique)\r\n            const dataUrl = state.poiConfig.dataUrl;\r\n            if (!dataUrl) {\r\n                if (Log) Log.info('[POI] Aucune dataUrl sp√©cifi√©e et aucun POI en cache. Mode ajout manuel.');\r\n                return;\r\n            }\r\n\r\n            state.isLoading = true;\r\n            if (Log) Log.info('[POI] Chargement des donn√©es POI depuis :', dataUrl);\r\n\r\n            fetch(dataUrl)\r\n                .then(response => {\r\n                    if (!response.ok) {\r\n                        throw new Error(`Erreur HTTP ${response.status} lors du chargement de ${dataUrl}`);\r\n                    }\r\n                    return response.json();\r\n                })\r\n                .then(data => {\r\n                    if (Array.isArray(data)) {\r\n                        state.allPois = data;\r\n                    } else if (data && Array.isArray(data.pois)) {\r\n                        state.allPois = data.pois;\r\n                    } else {\r\n                        state.allPois = [];\r\n                    }\r\n                    if (Log) Log.info(`[POI] ${state.allPois.length} POI(s) charg√©(s) depuis dataUrl.`);\r\n                    displayPois(state.allPois);\r\n                })\r\n                .catch(err => {\r\n                    if (Log) Log.error('[POI] Erreur lors du chargement des POIs :', err);\r\n                })\r\n                .finally(() => {\r\n                    state.isLoading = false;\r\n                });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Affiche tous les POIs pass√©s en param√®tre sur la carte.\r\n     *\r\n     * @param {array} pois - Tableau d'objets POI.\r\n     */\r\n    function displayPois(pois) {\r\n        if (!pois || !Array.isArray(pois)) {\r\n            if (Log) Log.warn('[POI] displayPois() : Aucune donn√©e POI valide √† afficher.');\r\n            return;\r\n        }\r\n\r\n        const shared = getShared();\r\n        if (!shared) return;\r\n        const state = shared.state;\r\n        const constants = shared.constants;\r\n\r\n        // Nettoyer les layers existants\r\n        if (state.poiLayerGroup) {\r\n            state.poiLayerGroup.clearLayers();\r\n        }\r\n        if (state.poiClusterGroup) {\r\n            state.poiClusterGroup.clearLayers();\r\n        }\r\n\r\n        const clustering = state.poiConfig.clustering !== false;\r\n        const markers = getMarkers();\r\n\r\n        if (!markers || typeof markers.createMarker !== 'function') {\r\n            if (Log) Log.error('[POI] Module Markers non charg√©.');\r\n            return;\r\n        }\r\n\r\n        if (clustering && state.poiClusterGroup) {\r\n            // Mode clustering\r\n            pois.forEach(poi => {\r\n                const marker = markers.createMarker(poi);\r\n                if (marker) {\r\n                    state.poiClusterGroup.addLayer(marker);\r\n                    state.poiMarkers.set(poi.id || poi.title || poi.label, marker);\r\n                }\r\n            });\r\n\r\n            if (!state.mapInstance.hasLayer(state.poiClusterGroup)) {\r\n                state.mapInstance.addLayer(state.poiClusterGroup);\r\n            }\r\n\r\n            if (Log) Log.info('[POI] Affichage avec clustering.');\r\n        } else {\r\n            // Mode sans clustering\r\n            pois.forEach(poi => {\r\n                const marker = markers.createMarker(poi);\r\n                if (marker) {\r\n                    state.poiLayerGroup.addLayer(marker);\r\n                    state.poiMarkers.set(poi.id || poi.title || poi.label, marker);\r\n                }\r\n            });\r\n\r\n            if (!state.mapInstance.hasLayer(state.poiLayerGroup)) {\r\n                state.mapInstance.addLayer(state.poiLayerGroup);\r\n            }\r\n\r\n            if (Log) Log.info('[POI] Affichage sans clustering.');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Ajoute un POI manuellement sur la carte.\r\n     * CORRIG√â V3: Normalisation syst√©matique des nouveaux POI\r\n     *\r\n     * @param {object} poi - Donn√©es du POI.\r\n     * @returns {L.Marker|null} Marqueur cr√©√© ou null.\r\n     */\r\n    function addPoi(poi) {\r\n        if (!poi) {\r\n            if (Log) Log.warn('[POI] addPoi() : POI invalide.');\r\n            return null;\r\n        }\r\n\r\n        const shared = getShared();\r\n        if (!shared) return null;\r\n        const state = shared.state;\r\n\r\n        const normalizers = getNormalizers();\r\n        const markers = getMarkers();\r\n\r\n        if (!normalizers || !markers) {\r\n            if (Log) Log.error('[POI] Modules Normalizers ou Markers non charg√©s.');\r\n            return null;\r\n        }\r\n\r\n        // ‚úÖ CORRECTION V3: NORMALISER le POI avant traitement\r\n        // Ceci garantit une structure coh√©rente avec les POI existants\r\n        const normalizedPoi = normalizers.normalizePoi(poi);\r\n        if (!normalizedPoi) {\r\n            if (Log) Log.warn('[POI] addPoi() : √âchec de la normalisation du POI.', poi);\r\n            return null;\r\n        }\r\n\r\n        // G√©n√©rer un ID si manquant apr√®s normalisation\r\n        if (!normalizedPoi.id) {\r\n            normalizedPoi.id = normalizers.generatePoiId(normalizedPoi);\r\n        }\r\n\r\n        if (Log) {\r\n            Log.info('[POI] Adding normalized POI:', normalizedPoi.id);\r\n            Log.info('[POI] - Has _layerConfig:', !!normalizedPoi._layerConfig);\r\n            Log.info('[POI] - Has _sidepanelConfig:', !!normalizedPoi._sidepanelConfig);\r\n            Log.info('[POI] - Has _popupConfig:', !!normalizedPoi._popupConfig);\r\n            Log.info('[POI] - Attributes keys:', Object.keys(normalizedPoi.attributes || {}));\r\n        }\r\n\r\n        // Cr√©er le marqueur avec le POI normalis√©\r\n        const marker = markers.createMarker(normalizedPoi);\r\n        if (!marker) {\r\n            if (Log) Log.warn('[POI] addPoi() : Impossible de cr√©er le marqueur pour ce POI normalis√©.', normalizedPoi);\r\n            return null;\r\n        }\r\n\r\n        // Ajouter au bon layer group\r\n        const clustering = state.poiConfig.clustering !== false;\r\n        if (clustering && state.poiClusterGroup) {\r\n            state.poiClusterGroup.addLayer(marker);\r\n        } else {\r\n            state.poiLayerGroup.addLayer(marker);\r\n        }\r\n\r\n        // Stocker le POI NORMALIS√â dans la liste (important pour la coh√©rence)\r\n        state.allPois.push(normalizedPoi);\r\n        state.poiMarkers.set(normalizedPoi.id, marker);\r\n\r\n        // Note: La sauvegarde en cache est g√©r√©e par le submit-handler via SyncHandler\r\n        // pour √©viter la duplication et assurer la coh√©rence\r\n\r\n        if (Log) Log.info('[POI] ‚úÖ POI normalis√© ajout√© avec succ√®s :', normalizedPoi.id);\r\n\r\n        return marker;\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re tous les POI charg√©s.\r\n     *\r\n     * @returns {array} Tableau des POI.\r\n     */\r\n    function getAllPois() {\r\n        const shared = getShared();\r\n        return shared ? shared.state.allPois : [];\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re un POI par son ID.\r\n     *\r\n     * @param {string} id - ID du POI.\r\n     * @returns {object|null} POI trouv√© ou null.\r\n     */\r\n    function getPoiById(id) {\r\n        const shared = getShared();\r\n        if (!shared) return null;\r\n        const state = shared.state;\r\n\r\n        return state.allPois.find(p => p.id === id) || null;\r\n    }\r\n\r\n    /**\r\n     * Recharge les POI (efface et r√©affiche).\r\n     *\r\n     * @param {array} pois - Nouveau tableau de POI (optionnel).\r\n     */\r\n    function reload(pois) {\r\n        const shared = getShared();\r\n        if (!shared) return;\r\n        const state = shared.state;\r\n\r\n        if (pois && Array.isArray(pois)) {\r\n            state.allPois = pois;\r\n        }\r\n\r\n        displayPois(state.allPois);\r\n\r\n        if (Log) Log.info('[POI] POI recharg√©s.');\r\n    }\r\n\r\n    // ========================================\r\n    //   EXPORT\r\n    // ========================================\r\n\r\n    GeoLeaf._POICore = {\r\n        init,\r\n        loadAndDisplay,\r\n        displayPois,\r\n        addPoi,\r\n        getAllPois,\r\n        getPoiById,\r\n        reload,\r\n        getDisplayedPoisCount: function() {\r\n            const shared = getShared();\r\n            return shared && shared.state ? (shared.state.allPois || []).length : 0;\r\n        }\r\n    };\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf POI Module - Aggregator\r\n *\r\n * Ce fichier est maintenant un agr√©gateur UMD qui expose l'API publique du module POI.\r\n * Les fonctionnalit√©s principales sont impl√©ment√©es dans les sous-modules :\r\n *\r\n * - poi/shared.js      : √âtat partag√© et constantes\r\n * - poi/normalizers.js : Normalisation des donn√©es POI\r\n * - poi/popup.js       : Popups et tooltips\r\n * - poi/markers.js     : Cr√©ation de marqueurs\r\n * - poi/sidepanel.js   : Panneau lat√©ral\r\n * - poi/renderers.js   : Rendu du contenu\r\n * - poi/core.js        : Fonctions principales (init, load, display)\r\n *\r\n * En production, Rollup bundle automatiquement tous les modules ensemble.\r\n * En d√©veloppement, chaque module est charg√© s√©par√©ment dans demo/index.html.\r\n *\r\n * Pour plus de d√©tails, voir docs/poi/POI_SPLIT_STRATEGY.md\r\n *\r\n * @version 2.1.0\r\n * @since 2.0.0\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    // R√©f√©rences aux sous-modules POI (charg√©s via getters pour √©viter les d√©pendances circulaires)\r\n    const POICore = () => GeoLeaf._POICore;\r\n    const POISidePanel = () => GeoLeaf._POISidePanel;\r\n    const POIShared = () => GeoLeaf._POIShared;\r\n\r\n    /**\r\n     * API publique du module POI\r\n     * Toutes les fonctions d√©l√®guent aux sous-modules appropri√©s\r\n     */\r\n    // Pr√©server GeoLeaf.POI.Renderers s'il existe d√©j√† (d√©fini par field-renderers.js, etc.)\r\n    const existingRenderers = GeoLeaf.POI && GeoLeaf.POI.Renderers;\r\n\r\n    GeoLeaf.POI = (function () {\r\n        return {\r\n            // Restaurer les Renderers d√©finis avant\r\n            Renderers: existingRenderers || {},\r\n\r\n            /**\r\n             * Initialise le module POI avec la carte et la configuration.\r\n             * Supporte deux signatures: init(map, config) et init({map, config}).\r\n             *\r\n             * @param {L.Map|object} mapOrOptions - Instance Leaflet ou objet avec {map, config}\r\n             * @param {object} [config] - Configuration POI (optionnel si premier param est objet)\r\n             */\r\n            init: function (mapOrOptions, config) {\r\n                const core = POICore();\r\n                if (!core) {\r\n                    if (Log) Log.error('[POI] Module Core non charg√©.');\r\n                    return;\r\n                }\r\n                core.init(mapOrOptions, config);\r\n            },\r\n\r\n            /**\r\n             * Charge et affiche les POIs sur la carte.\r\n             */\r\n            loadAndDisplay: function () {\r\n                const core = POICore();\r\n                if (!core) {\r\n                    if (Log) Log.error('[POI] Module Core non charg√©.');\r\n                    return;\r\n                }\r\n                core.loadAndDisplay();\r\n            },\r\n\r\n            /**\r\n             * Affiche un tableau de POIs sur la carte.\r\n             *\r\n             * @param {array} pois - Tableau d'objets POI\r\n             */\r\n            displayPois: function (pois) {\r\n                const core = POICore();\r\n                if (!core) {\r\n                    if (Log) Log.error('[POI] Module Core non charg√©.');\r\n                    return;\r\n                }\r\n                core.displayPois(pois);\r\n            },\r\n\r\n            /**\r\n             * Ajoute un POI manuellement √† la carte.\r\n             *\r\n             * @param {object} poi - Donn√©es du POI\r\n             * @returns {L.Marker|null} Marqueur cr√©√© ou null\r\n             */\r\n            addPoi: function (poi) {\r\n                const core = POICore();\r\n                if (!core) {\r\n                    if (Log) Log.error('[POI] Module Core non charg√©.');\r\n                    return null;\r\n                }\r\n                return core.addPoi(poi);\r\n            },\r\n\r\n            /**             * Ajoute un nouveau POI √† la carte.\r\n             *\r\n             * @param {object} poi - Donn√©es du POI √† ajouter\r\n             * @returns {boolean} true si ajout r√©ussi, false sinon\r\n             */\r\n            add: function (poi) {\r\n                const core = POICore();\r\n                if (!core) {\r\n                    if (Log) Log.error('[POI] Module Core non charg√©.');\r\n                    return false;\r\n                }\r\n                return core.addPoi(poi);\r\n            },\r\n\r\n            /**\r\n             * Alias pour add() - ajoute un POI.\r\n             *\r\n             * @param {object} poi - Donn√©es du POI\r\n             * @returns {boolean} true si ajout r√©ussi, false sinon\r\n             */\r\n            addPoi: function (poi) {\r\n                return this.add(poi);\r\n            },\r\n\r\n            /**             * R√©cup√®re tous les POI charg√©s.\r\n             *\r\n             * @returns {array} Tableau des POI\r\n             */\r\n            getAllPois: function () {\r\n                const core = POICore();\r\n                if (!core) return [];\r\n                return core.getAllPois();\r\n            },\r\n\r\n            /**\r\n             * R√©cup√®re un POI par son ID.\r\n             *\r\n             * @param {string} id - ID du POI\r\n             * @returns {object|null} POI trouv√© ou null\r\n             */\r\n            getPoiById: function (id) {\r\n                const core = POICore();\r\n                if (!core) return null;\r\n                return core.getPoiById(id);\r\n            },\r\n\r\n            /**\r\n             * Recharge les POIs (efface et r√©affiche).\r\n             *\r\n             * @param {array} [pois] - Nouveau tableau de POI (optionnel)\r\n             */\r\n            reload: function (pois) {\r\n                const core = POICore();\r\n                if (!core) {\r\n                    if (Log) Log.error('[POI] Module Core non charg√©.');\r\n                    return;\r\n                }\r\n                core.reload(pois);\r\n            },\r\n\r\n            /**\r\n             * Affiche le panneau lat√©ral avec les d√©tails d'un POI.\r\n             *\r\n             * @param {object} poi - Donn√©es du POI\r\n             * @param {array} [customLayout] - Layout personnalis√© (optionnel)\r\n             * @returns {Promise<void>}\r\n             */\r\n            showPoiDetails: async function (poi, customLayout) {\r\n                const sidePanel = POISidePanel();\r\n                if (!sidePanel) {\r\n                    if (Log) Log.error('[POI] Module SidePanel non charg√©.');\r\n                    return;\r\n                }\r\n                await sidePanel.openSidePanel(poi, customLayout);\r\n            },\r\n\r\n            /**\r\n             * Ferme le panneau lat√©ral.\r\n             */\r\n            hideSidePanel: function () {\r\n                const sidePanel = POISidePanel();\r\n                if (!sidePanel) {\r\n                    if (Log) Log.error('[POI] Module SidePanel non charg√©.');\r\n                    return;\r\n                }\r\n                sidePanel.closeSidePanel();\r\n            },\r\n\r\n            /**\r\n             * Alias pour showPoiDetails avec layout personnalis√©.\r\n             *\r\n             * @param {object} poi - Donn√©es du POI\r\n             * @param {array} customLayout - Layout personnalis√©\r\n             */\r\n            openSidePanelWithLayout: function (poi, customLayout) {\r\n                this.showPoiDetails(poi, customLayout);\r\n            },\r\n\r\n            /**\r\n             * R√©cup√®re le layer group Leaflet actif (cluster ou simple).\r\n             *\r\n             * @returns {L.LayerGroup|L.MarkerClusterGroup|null} Layer group ou null\r\n             */\r\n            getLayer: function () {\r\n                const shared = POIShared();\r\n                if (!shared) return null;\r\n                const state = shared.state;\r\n                return state.poiClusterGroup || state.poiLayerGroup;\r\n            },\r\n\r\n            /**\r\n             * Obtient le nombre de POI actuellement affich√©s.\r\n             *\r\n             * @returns {number} Nombre de POI affich√©s\r\n             */\r\n            getDisplayedPoisCount: function () {\r\n                const core = POICore();\r\n                if (!core) {\r\n                    if (Log) Log.error('[POI] Module Core non charg√©.');\r\n                    return 0;\r\n                }\r\n                return core.getDisplayedPoisCount();\r\n            },\r\n\r\n            /**\r\n             * Helper pour tests unitaires : efface tous les POI.\r\n             * @private\r\n             */\r\n            _clearAllForTests: function () {\r\n                const shared = POIShared();\r\n                if (!shared) return;\r\n                const state = shared.state;\r\n\r\n                if (Log) Log.info('[POI] _clearAllForTests: Suppression de', state.allPois.length, 'POI(s) et', state.poiMarkers.size, 'marqueur(s)');\r\n\r\n                state.allPois = [];\r\n                state.poiMarkers.clear();\r\n                if (state.poiClusterGroup) state.poiClusterGroup.clearLayers();\r\n                if (state.poiLayerGroup) state.poiLayerGroup.clearLayers();\r\n            }\r\n        };\r\n    })();\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/**\r\n * GeoLeaf GeoJSON Module - Shared State & Constants\r\n * √âtat partag√© et constantes pour le module GeoJSON\r\n *\r\n * @module geojson/shared\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * √âtat partag√© du module GeoJSON\r\n     * Accessible via GeoLeaf._GeoJSONShared.state\r\n     */\r\n    GeoLeaf._GeoJSONShared = GeoLeaf._GeoJSONShared || {};\r\n\r\n    /**\r\n     * √âtat interne partag√© entre les sous-modules\r\n     */\r\n    GeoLeaf._GeoJSONShared.state = {\r\n        /**\r\n         * R√©f√©rence vers la carte Leaflet.\r\n         * @type {L.Map|null}\r\n         */\r\n        map: null,\r\n\r\n        /**\r\n         * Groupe contenant toutes les couches GeoJSON (conteneur parent).\r\n         * @type {L.LayerGroup|null}\r\n         */\r\n        layerGroup: null,\r\n\r\n        /**\r\n         * LEGACY: Couche L.GeoJSON principale (pour compatibilit√© descendante).\r\n         * @deprecated Utiliser layers pour multi-couches.\r\n         * @type {L.GeoJSON|null}\r\n         */\r\n        geoJsonLayer: null,\r\n\r\n        /**\r\n         * Map des couches individuelles par ID.\r\n         * Structure: Map<layerId, {id, label, layer, visible, config, clusterGroup}>\r\n         * @type {Map<string, Object>}\r\n         */\r\n        layers: new Map(),\r\n\r\n        /**\r\n         * Compteur pour g√©n√©rer des IDs uniques si non fourni.\r\n         * @type {number}\r\n         */\r\n        layerIdCounter: 0,\r\n\r\n        /**\r\n         * Cache l√©ger des features par couche (geojson/features d√©j√† converties).\r\n         * Map<layerId, { features: Array, geometryType: string }>\r\n         * @type {Map<string, Object>}\r\n         */\r\n        featureCache: new Map(),\r\n\r\n        /**\r\n         * Options par d√©faut du module GeoJSON.\r\n         */\r\n        options: {\r\n            /**\r\n             * Style par d√©faut des g√©om√©tries (polygones / lignes).\r\n             */\r\n            defaultStyle: {\r\n                color: \"#2E7D32\",\r\n                weight: 2,\r\n                opacity: 0.9,\r\n                fillColor: \"#66BB6A\",\r\n                fillOpacity: 0.4\r\n            },\r\n            /**\r\n             * Style des points (circleMarker).\r\n             */\r\n            defaultPointStyle: {\r\n                radius: 6,\r\n                color: \"#1B5E20\",\r\n                weight: 2,\r\n                fillColor: \"#66BB6A\",\r\n                fillOpacity: 0.9\r\n            },\r\n            /**\r\n             * Fonction de rappel pour chaque feature.\r\n             * @param {Object} feature\r\n             * @param {L.Layer} layer\r\n             */\r\n            onEachFeature: null,\r\n            /**\r\n             * Fonction pointToLayer personnalis√©e (si fournie).\r\n             * @param {Object} feature\r\n             * @param {L.LatLng} latlng\r\n             * @returns {L.Layer}\r\n             */\r\n            pointToLayer: null,\r\n            /**\r\n             * Adapter automatiquement la vue sur les donn√©es charg√©es.\r\n             */\r\n            fitBoundsOnLoad: true,\r\n            /**\r\n             * ZOOM max lors du fitBounds (facultatif).\r\n             */\r\n            maxZoomOnFit: GeoLeaf.CONSTANTS ? GeoLeaf.CONSTANTS.GEOJSON_MAX_ZOOM_ON_FIT : 18\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Constantes pour la gestion des panes Leaflet et z-index\r\n     */\r\n    GeoLeaf._GeoJSONShared.PANE_CONFIG = {\r\n        BASEMAP_NAME: 'geoleaf-basemap',\r\n        BASEMAP_ZINDEX: 200,\r\n        LAYER_PREFIX: 'geoleaf-layer-',\r\n        LAYER_BASE_ZINDEX: 400,\r\n        MIN_LAYER_ZINDEX: 0,\r\n        MAX_LAYER_ZINDEX: 99\r\n    };\r\n\r\n    /**\r\n     * Helpers pour la gestion des panes\r\n     */\r\n    GeoLeaf._GeoJSONShared.PaneHelpers = {\r\n        /**\r\n         * G√©n√®re le nom du pane pour un zIndex donn√©\r\n         * @param {number} zIndex - zIndex de la couche (0-99)\r\n         * @returns {string} Nom du pane\r\n         */\r\n        getPaneName(zIndex) {\r\n            const config = GeoLeaf._GeoJSONShared.PANE_CONFIG;\r\n            return `${config.LAYER_PREFIX}${zIndex || 0}`;\r\n        },\r\n\r\n        /**\r\n         * Valide et clamp un zIndex dans la plage autoris√©e\r\n         * @param {number} zIndex - zIndex √† valider\r\n         * @returns {number} zIndex valide (0-99)\r\n         */\r\n        validateZIndex(zIndex) {\r\n            const config = GeoLeaf._GeoJSONShared.PANE_CONFIG;\r\n            return Math.max(config.MIN_LAYER_ZINDEX, Math.min(config.MAX_LAYER_ZINDEX, Math.floor(zIndex)));\r\n        },\r\n\r\n        /**\r\n         * Applique le pane √† un layer ou marker\r\n         * @param {L.Layer} layer - Layer Leaflet\r\n         * @param {number} zIndex - zIndex de la couche\r\n         */\r\n        applyPaneToLayer(layer, zIndex) {\r\n            if (layer && layer.options) {\r\n                layer.options.pane = this.getPaneName(zIndex);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Map des op√©rateurs de comparaison pour styleRules.\r\n     * Supporte : >, >=, <, <=, ==, ===, eq (alias ==), !=, !==, contains, startsWith, endsWith, in, notIn, between\r\n     */\r\n    GeoLeaf._GeoJSONShared.STYLE_OPERATORS = {\r\n        '>': (a, b) => Number(a) > Number(b),\r\n        '>=': (a, b) => Number(a) >= Number(b),\r\n        '<': (a, b) => Number(a) < Number(b),\r\n        '<=': (a, b) => Number(a) <= Number(b),\r\n        '==': (a, b) => a == b,\r\n        '===': (a, b) => a === b,\r\n        'eq': (a, b) => a == b,  // Alias pour ==\r\n        '!=': (a, b) => a != b,\r\n        '!==': (a, b) => a !== b,\r\n        'neq': (a, b) => a != b, // Alias pour !=\r\n        'contains': (a, b) => String(a).toLowerCase().includes(String(b).toLowerCase()),\r\n        'startsWith': (a, b) => String(a).toLowerCase().startsWith(String(b).toLowerCase()),\r\n        'endsWith': (a, b) => String(a).toLowerCase().endsWith(String(b).toLowerCase()),\r\n        'in': (a, b) => Array.isArray(b) && b.includes(a),\r\n        'notIn': (a, b) => Array.isArray(b) && !b.includes(a),\r\n        'between': (a, b) => {\r\n            if (!Array.isArray(b) || b.length !== 2) return false;\r\n            const num = Number(a);\r\n            const min = Number(b[0]);\r\n            const max = Number(b[1]);\r\n            return num >= min && num <= max;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * R√©initialise l'√©tat partag√© (utile pour les tests)\r\n     */\r\n    GeoLeaf._GeoJSONShared.reset = function () {\r\n        const state = GeoLeaf._GeoJSONShared.state;\r\n        state.map = null;\r\n        state.layerGroup = null;\r\n        state.geoJsonLayer = null;\r\n        state.layers = new Map();\r\n        state.layerIdCounter = 0;\r\n        state.featureCache = new Map();\r\n        // R√©initialiser les options par d√©faut\r\n        state.options = {\r\n            defaultStyle: {\r\n                color: \"#2E7D32\",\r\n                weight: 2,\r\n                opacity: 0.9,\r\n                fillColor: \"#66BB6A\",\r\n                fillOpacity: 0.4\r\n            },\r\n            defaultPointStyle: {\r\n                radius: 6,\r\n                color: \"#1B5E20\",\r\n                weight: 2,\r\n                fillColor: \"#66BB6A\",\r\n                fillOpacity: 0.9\r\n            },\r\n            onEachFeature: null,\r\n            pointToLayer: null,\r\n            fitBoundsOnLoad: true,\r\n            maxZoomOnFit: GeoLeaf.CONSTANTS ? GeoLeaf.CONSTANTS.GEOJSON_MAX_ZOOM_ON_FIT : 18\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Getter pour le Log (lazy loading)\r\n     */\r\n    GeoLeaf._GeoJSONShared.getLog = function () {\r\n        return GeoLeaf.Log || console;\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf GeoJSON Module - Style Resolver\r\n * √âvaluation des r√®gles de style dynamiques (styleRules)\r\n *\r\n * @module geojson/style-resolver\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // D√©pendance lazy vers shared\r\n    const getShared = () => GeoLeaf._GeoJSONShared;\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n\r\n    GeoLeaf._GeoJSONStyleResolver = GeoLeaf._GeoJSONStyleResolver || {};\r\n\r\n    /**\r\n     * R√©sout une valeur imbriqu√©e dans un objet via un chemin (ex: \"properties.name\").\r\n     * @param {Object} obj - Objet source\r\n     * @param {string} path - Chemin (dot notation)\r\n     * @returns {*} Valeur trouv√©e ou null\r\n     */\r\n    GeoLeaf._GeoJSONStyleResolver.getNestedValue = function (obj, path) {\r\n        if (!obj || !path) return null;\r\n        return path.split('.').reduce((current, prop) =>\r\n            current && current[prop] !== undefined ? current[prop] : null, obj);\r\n    };\r\n\r\n    /**\r\n     * √âvalue une condition simple contre une feature GeoJSON.\r\n     * @param {Object} feature - Feature GeoJSON\r\n     * @param {Object} condition - {field, operator, value}\r\n     * @param {Object} STYLE_OPERATORS - Op√©rateurs de comparaison\r\n     * @param {Object} Log - Logger\r\n     * @returns {boolean} true si la condition est remplie\r\n     */\r\n    GeoLeaf._GeoJSONStyleResolver.evaluateCondition = function (feature, condition, STYLE_OPERATORS, Log) {\r\n        const { field, operator, value } = condition;\r\n        if (!field || !operator) return false;\r\n\r\n        // R√©soudre la valeur du champ depuis la feature\r\n        const fieldValue = GeoLeaf._GeoJSONStyleResolver.getNestedValue(feature, field);\r\n\r\n        // Si le champ n'existe pas, la condition n'est pas remplie\r\n        if (fieldValue === null || fieldValue === undefined) return false;\r\n\r\n        // Obtenir la fonction de comparaison\r\n        const compareFn = STYLE_OPERATORS[operator];\r\n        if (!compareFn) {\r\n            Log.warn && Log.warn('[GeoJSON] Op√©rateur styleRules inconnu:', operator);\r\n            return false;\r\n        }\r\n\r\n        // √âvaluer la condition\r\n        try {\r\n            return compareFn(fieldValue, value);\r\n        } catch (e) {\r\n            Log.warn && Log.warn('[GeoJSON] Erreur √©valuation condition:', e.message);\r\n            return false;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * √âvalue les r√®gles de style (styleRules) contre une feature GeoJSON.\r\n     * Retourne le style de la PREMI√àRE r√®gle correspondante (ordre du tableau).\r\n     * Supporte les formats:\r\n     * - Simple: {when: {field, operator, value}, style: {...}}\r\n     * - Compos√©: {when: {all: [{field, operator, value}, ...]}, style: {...}}\r\n     *\r\n     * @param {Object} feature - Feature GeoJSON\r\n     * @param {Array} styleRules - Tableau de r√®gles\r\n     * @returns {Object|null} Style de la premi√®re r√®gle correspondante, ou null\r\n     */\r\n    GeoLeaf._GeoJSONStyleResolver.evaluateStyleRules = function (feature, styleRules) {\r\n        if (!Array.isArray(styleRules) || styleRules.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        const shared = getShared();\r\n        const Log = getLog();\r\n        const STYLE_OPERATORS = shared.STYLE_OPERATORS;\r\n\r\n        for (const rule of styleRules) {\r\n            if (!rule || !rule.when || !rule.style) continue;\r\n\r\n            // Support du format compos√© avec \"all\": [conditions]\r\n            if (rule.when.all && Array.isArray(rule.when.all)) {\r\n                // V√©rifier que TOUTES les conditions sont remplies\r\n                const allConditionsMet = rule.when.all.every(condition =>\r\n                    GeoLeaf._GeoJSONStyleResolver.evaluateCondition(feature, condition, STYLE_OPERATORS, Log)\r\n                );\r\n\r\n                if (allConditionsMet) {\r\n                    return rule.style;\r\n                }\r\n            }\r\n            // Format simple avec field, operator, value\r\n            else if (rule.when.field && rule.when.operator) {\r\n                const conditionMet = GeoLeaf._GeoJSONStyleResolver.evaluateCondition(\r\n                    feature,\r\n                    rule.when,\r\n                    STYLE_OPERATORS,\r\n                    Log\r\n                );\r\n\r\n                if (conditionMet) {\r\n                    return rule.style;\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    /**\r\n     * Construit les options Leaflet pour L.geoJSON √† partir des options GeoLeaf.\r\n     *\r\n     * @param {Object} options - Options GeoLeaf\r\n     * @returns {Object} - Options Leaflet\r\n     */\r\n    GeoLeaf._GeoJSONStyleResolver.buildLeafletOptions = function (options) {\r\n        const evaluateStyleRules = GeoLeaf._GeoJSONStyleResolver.evaluateStyleRules;\r\n\r\n        const normalizeStyle = (style) => {\r\n            if (!style || typeof style !== 'object') {\r\n                return {};\r\n            }\r\n\r\n            const normalized = {};\r\n\r\n            // Format imbriqu√© fill/stroke\r\n            if (style.fill || style.stroke) {\r\n                if (style.fill) {\r\n                    if (style.fill.color) normalized.fillColor = style.fill.color;\r\n                    if (typeof style.fill.opacity === 'number') {\r\n                        normalized.fillOpacity = style.fill.opacity;\r\n                    } else {\r\n                        normalized.fillOpacity = 1.0;\r\n                    }\r\n                }\r\n\r\n                if (style.stroke) {\r\n                    if (style.stroke.color) normalized.color = style.stroke.color;\r\n                    if (typeof style.stroke.opacity === 'number') normalized.opacity = style.stroke.opacity;\r\n                    if (typeof style.stroke.widthPx === 'number') normalized.weight = style.stroke.widthPx;\r\n                    if (style.stroke.dashArray) normalized.dashArray = style.stroke.dashArray;\r\n                    if (style.stroke.lineCap) normalized.lineCap = style.stroke.lineCap;\r\n                    if (style.stroke.lineJoin) normalized.lineJoin = style.stroke.lineJoin;\r\n                }\r\n\r\n                // Propri√©t√©s communes\r\n                if (style.shape) normalized.shape = style.shape;\r\n                if (typeof style.sizePx === 'number') {\r\n                    normalized.radius = style.sizePx;\r\n                    normalized.sizePx = style.sizePx;\r\n                }\r\n            } else {\r\n                Object.assign(normalized, style);\r\n                if (typeof normalized.fillOpacity !== 'number') {\r\n                    normalized.fillOpacity = 1.0;\r\n                }\r\n            }\r\n\r\n            return normalized;\r\n        };\r\n\r\n        const leafletOptions = {\r\n            /**\r\n             * Style pour polygones / lignes.\r\n             * Priorit√© : defaultStyle < styleRules (premi√®re correspondante) < feature.properties.style\r\n             */\r\n            style(feature) {\r\n                // 1. Commencer avec le style par d√©faut\r\n                let finalStyle = Object.assign({}, normalizeStyle(options.defaultStyle));\r\n\r\n                // 2. Appliquer les styleRules (premi√®re r√®gle correspondante gagne)\r\n                if (options.styleRules && Array.isArray(options.styleRules)) {\r\n                    const matchedStyle = evaluateStyleRules(feature, options.styleRules);\r\n                    if (matchedStyle) {\r\n                        finalStyle = Object.assign({}, finalStyle, normalizeStyle(matchedStyle));\r\n                    }\r\n                }\r\n\r\n                // 3. Mode interactif\r\n                const interactiveShapes = typeof options.interactiveShape === \"boolean\"\r\n                    ? options.interactiveShape\r\n                    : (GeoLeaf.Config && GeoLeaf.Config.get ? GeoLeaf.Config.get('ui.interactiveShapes', false) : false);\r\n                finalStyle.interactive = interactiveShapes;\r\n\r\n                return finalStyle;\r\n            },\r\n\r\n            /**\r\n             * Gestion des points (Point / MultiPoint).\r\n             */\r\n            pointToLayer: options.pointToLayer\r\n                ? function (feature, latlng) {\r\n                      return options.pointToLayer(feature, latlng);\r\n                  }\r\n                : function (feature, latlng) {\r\n                      // Utiliser le param√®tre interactiveShape d√©fini pour cette couche\r\n                      const interactiveShapes = typeof options.interactiveShape === \"boolean\"\r\n                          ? options.interactiveShape\r\n                          : (GeoLeaf.Config && GeoLeaf.Config.get ? GeoLeaf.Config.get('ui.interactiveShapes', false) : false);\r\n                      const pointStyle = GeoLeaf.Utils && GeoLeaf.Utils.mergeOptions\r\n                          ? GeoLeaf.Utils.mergeOptions(options.defaultPointStyle, { interactive: interactiveShapes })\r\n                          : Object.assign({}, options.defaultPointStyle, { interactive: interactiveShapes });\r\n                      return global.L.circleMarker(latlng, pointStyle);\r\n                  },\r\n\r\n            /**\r\n             * Callback pour chaque entit√©.\r\n             */\r\n            onEachFeature: function (feature, layer) {\r\n                // Popup simple par d√©faut si popupContent fourni\r\n                if (\r\n                    feature &&\r\n                    feature.properties &&\r\n                    typeof feature.properties.popupContent === \"string\"\r\n                ) {\r\n                    layer.bindPopup(feature.properties.popupContent);\r\n                }\r\n\r\n                // Callback custom utilisateur\r\n                if (typeof options.onEachFeature === \"function\") {\r\n                    options.onEachFeature(feature, layer);\r\n                }\r\n            }\r\n        };\r\n\r\n        return leafletOptions;\r\n    };\r\n\r\n    // Exposer aussi via _StyleRules pour compatibilit√© avec le module Themes\r\n    GeoLeaf._StyleRules = {\r\n        evaluate: GeoLeaf._GeoJSONStyleResolver.evaluateStyleRules,\r\n        operators: GeoLeaf._GeoJSONShared ? GeoLeaf._GeoJSONShared.STYLE_OPERATORS : {},\r\n        getNestedValue: GeoLeaf._GeoJSONStyleResolver.getNestedValue\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf GeoJSON Module - Visibility Manager\r\n * Gestionnaire centralis√© de visibilit√© des couches avec gestion des priorit√©s\r\n *\r\n * G√®re trois sources de modification de visibilit√© :\r\n * - 'user': Action manuelle de l'utilisateur (toggle, show/hide explicite)\r\n * - 'theme': Modification par application d'un th√®me\r\n * - 'zoom': Modification automatique selon le niveau de zoom\r\n *\r\n * R√®gles de priorit√© :\r\n * 1. user > theme > zoom (l'utilisateur a toujours le dernier mot)\r\n * 2. Une action 'user' annule les flags 'theme' et 'zoom'\r\n * 3. Une action 'theme' peut override 'zoom' mais pas 'user'\r\n * 4. Une action 'zoom' ne change jamais l'√©tat si 'user' ou 'theme' est actif\r\n *\r\n * @module geojson/visibility-manager\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // D√©pendances lazy\r\n    const getShared = () => GeoLeaf._GeoJSONShared;\r\n    const getState = () => GeoLeaf._GeoJSONShared.state;\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n\r\n    GeoLeaf._LayerVisibilityManager = GeoLeaf._LayerVisibilityManager || {};\r\n\r\n    /**\r\n     * √âtats de visibilit√© possibles\r\n     * @private\r\n     */\r\n    const VisibilitySource = {\r\n        USER: 'user',\r\n        THEME: 'theme',\r\n        ZOOM: 'zoom',\r\n        SYSTEM: 'system'  // Chargement initial, etc.\r\n    };\r\n\r\n    /**\r\n     * Initialise les m√©tadonn√©es de visibilit√© pour une couche\r\n     * @param {Object} layerData - Donn√©es de la couche\r\n     * @private\r\n     */\r\n    function initVisibilityMetadata(layerData) {\r\n        if (!layerData._visibility) {\r\n            layerData._visibility = {\r\n                current: false,           // √âtat actuel physique sur la carte (true/false)\r\n                logicalState: false,      // √âtat logique (bouton ON/OFF, ind√©pendant du zoom)\r\n                source: VisibilitySource.SYSTEM,  // Derni√®re source de modification\r\n                userOverride: false,      // L'utilisateur a forc√© un √©tat\r\n                themeOverride: false,     // Un th√®me a forc√© un √©tat\r\n                themeDesired: null,       // Visibilit√© voulue par le th√®me (true/false)\r\n                zoomConstrained: false    // La couche est limit√©e par le zoom\r\n            };\r\n        }\r\n    }\r\n\r\n    /**\r\n     * D√©finit la visibilit√© d'une couche avec gestion de priorit√©\r\n     *\r\n     * @param {string} layerId - ID de la couche\r\n     * @param {boolean} visible - √âtat de visibilit√© souhait√©\r\n     * @param {string} source - Source de la modification ('user' | 'theme' | 'zoom' | 'system')\r\n     * @returns {boolean} - true si la visibilit√© a √©t√© modifi√©e, false sinon\r\n     */\r\n    GeoLeaf._LayerVisibilityManager.setVisibility = function (layerId, visible, source) {\r\n        const state = getState();\r\n        const Log = getLog();\r\n        const layerData = state.layers.get(layerId);\r\n\r\n        if (!layerData) {\r\n            Log.warn(\"[VisibilityManager] Couche introuvable:\", layerId);\r\n            return false;\r\n        }\r\n\r\n        // Initialiser les m√©tadonn√©es si n√©cessaire\r\n        initVisibilityMetadata(layerData);\r\n\r\n        const meta = layerData._visibility;\r\n        const oldVisible = meta.current;\r\n        const oldSource = meta.source;\r\n\r\n        // Appliquer les r√®gles de priorit√©\r\n        const canChange = this._canChangeVisibility(meta, source, visible);\r\n\r\n        if (!canChange) {\r\n            Log.debug(\r\n                `[VisibilityManager] Changement refus√© pour ${layerId}: ` +\r\n                `source=${source}, userOverride=${meta.userOverride}, themeOverride=${meta.themeOverride}`\r\n            );\r\n            return false;\r\n        }\r\n\r\n        // Mettre √† jour les flags selon la source\r\n        this._updateVisibilityFlags(meta, source, visible);\r\n\r\n        // Appliquer le changement effectif\r\n        const changed = this._applyVisibilityChange(layerId, layerData, visible);\r\n\r\n        if (changed) {\r\n            meta.current = visible;\r\n            meta.source = source;\r\n\r\n            Log.debug(\r\n                `[VisibilityManager] ${layerId}: ${oldVisible} ‚Üí ${visible} ` +\r\n                `(source: ${oldSource} ‚Üí ${source})`\r\n            );\r\n\r\n            // Mettre √† jour les anciens flags pour compatibilit√©\r\n            layerData.visible = visible;\r\n            layerData.userDisabled = meta.userOverride && !visible;\r\n            layerData.themeHidden = meta.themeOverride && !visible;\r\n\r\n            // Notifier la l√©gende\r\n            this._notifyLegend(layerId, visible);\r\n\r\n            // √âmettre l'√©v√©nement\r\n            this._fireVisibilityEvent(layerId, visible, source);\r\n        }\r\n\r\n        return changed;\r\n    };\r\n\r\n    /**\r\n     * V√©rifie si la visibilit√© peut √™tre modifi√©e selon les r√®gles de priorit√©\r\n     * @param {Object} meta - M√©tadonn√©es de visibilit√©\r\n     * @param {string} source - Source de la modification\r\n     * @returns {boolean}\r\n     * @private\r\n     */\r\n    GeoLeaf._LayerVisibilityManager._canChangeVisibility = function (meta, source, desiredVisible) {\r\n        // L'utilisateur peut toujours modifier\r\n        if (source === VisibilitySource.USER) {\r\n            return true;\r\n        }\r\n\r\n        // IMPORTANT: Le zoom DOIT TOUJOURS pouvoir modifier l'affichage physique (current)\r\n        // m√™me si userOverride est true. Cela permet d'afficher/masquer selon les seuils de zoom\r\n        // tout en gardant logicalState ind√©pendant.\r\n        if (source === VisibilitySource.ZOOM) {\r\n            return true;\r\n        }\r\n\r\n        // Si l'utilisateur a d√©fini un override, seul l'utilisateur peut changer l'√©tat logique\r\n        if (meta.userOverride) {\r\n            return false;\r\n        }\r\n\r\n        // Ne jamais r√©activer ce qu'un th√®me a explicitement masqu√©\r\n        if (source === VisibilitySource.ZOOM && meta.themeOverride && meta.themeDesired === false && desiredVisible === true) {\r\n            return false;\r\n        }\r\n\r\n        // Les th√®mes peuvent override le zoom mais pas l'utilisateur\r\n        if (source === VisibilitySource.THEME) {\r\n            return true;\r\n        }\r\n\r\n        // Par d√©faut, autoriser (pour 'system' et autres)\r\n        return true;\r\n    };\r\n\r\n    /**\r\n     * Met √† jour les flags de visibilit√© selon la source\r\n     * @param {Object} meta - M√©tadonn√©es de visibilit√©\r\n     * @param {string} source - Source de la modification\r\n     * @param {boolean} visible - √âtat de visibilit√©\r\n     * @private\r\n     */\r\n    GeoLeaf._LayerVisibilityManager._updateVisibilityFlags = function (meta, source, visible) {\r\n        switch (source) {\r\n            case VisibilitySource.USER:\r\n                meta.userOverride = true;\r\n                meta.themeOverride = false;  // Reset theme override\r\n                meta.zoomConstrained = false;\r\n                meta.logicalState = visible; // Mettre √† jour l'√©tat logique\r\n                break;\r\n\r\n            case VisibilitySource.THEME:\r\n                // Ne pas override userOverride si d√©j√† pr√©sent\r\n                if (!meta.userOverride) {\r\n                    meta.themeOverride = true;\r\n                    meta.themeDesired = visible;\r\n                    meta.zoomConstrained = false;\r\n                    meta.logicalState = visible; // Mettre √† jour l'√©tat logique\r\n                }\r\n                break;\r\n\r\n            case VisibilitySource.ZOOM:\r\n                // Marquer la contrainte zoom (sauf override utilisateur)\r\n                // NE PAS modifier logicalState - le zoom n'affecte pas l'√©tat logique\r\n                if (!meta.userOverride) {\r\n                    meta.zoomConstrained = true;\r\n                }\r\n                break;\r\n\r\n            case VisibilitySource.SYSTEM:\r\n                // Reset tous les overrides pour un chargement propre\r\n                meta.userOverride = false;\r\n                meta.themeOverride = false;\r\n                meta.themeDesired = null;\r\n                meta.zoomConstrained = false;\r\n                meta.logicalState = visible; // Initialiser l'√©tat logique\r\n                break;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Applique physiquement le changement de visibilit√© (add/remove layer)\r\n     * @param {string} layerId - ID de la couche\r\n     * @param {Object} layerData - Donn√©es de la couche\r\n     * @param {boolean} visible - √âtat de visibilit√© souhait√©\r\n     * @returns {boolean} - true si un changement a √©t√© effectu√©\r\n     * @private\r\n     */\r\n    GeoLeaf._LayerVisibilityManager._applyVisibilityChange = function (layerId, layerData, visible) {\r\n        const state = getState();\r\n        const Log = getLog();\r\n\r\n        if (!layerData.layer) {\r\n            Log.warn(\"[VisibilityManager] Layer Leaflet manquant pour:\", layerId);\r\n            return false;\r\n        }\r\n\r\n        // D√©terminer quelle couche g√©rer (cluster ou layer)\r\n        const layerToManage = layerData.clusterGroup || layerData.layer;\r\n        const isCurrentlyOnMap = state.map && state.map.hasLayer(layerToManage);\r\n\r\n        // Si d√©j√† dans l'√©tat souhait√©, ne rien faire\r\n        if (visible && isCurrentlyOnMap) {\r\n            return false;\r\n        }\r\n        if (!visible && !isCurrentlyOnMap) {\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            if (visible) {\r\n                // Cas 1 : Cluster partag√© avec POI\r\n                if (layerData.useSharedCluster && layerData.clusterGroup) {\r\n                    layerData.clusterGroup.addLayer(layerData.layer);\r\n                }\r\n                // Cas 2 : Cluster ind√©pendant\r\n                else if (layerData.clusterGroup) {\r\n                    state.map.addLayer(layerData.clusterGroup);\r\n                    if (layerData.clusterGroup.refreshClusters) {\r\n                        layerData.clusterGroup.refreshClusters();\r\n                    }\r\n                }\r\n                // Cas 3 : Pas de cluster - ajouter directement √† la map pour respecter le pane\r\n                else {\r\n                    state.map.addLayer(layerData.layer);\r\n                }\r\n            } else {\r\n                // Cas 1 : Cluster partag√© avec POI\r\n                if (layerData.useSharedCluster && layerData.clusterGroup) {\r\n                    layerData.clusterGroup.removeLayer(layerData.layer);\r\n                }\r\n                // Cas 2 : Cluster ind√©pendant\r\n                else if (layerData.clusterGroup) {\r\n                    state.map.removeLayer(layerData.clusterGroup);\r\n                }\r\n                // Cas 3 : Pas de cluster - retirer directement de la map\r\n                else {\r\n                    state.map.removeLayer(layerData.layer);\r\n                }\r\n            }\r\n\r\n            // Synchroniser l'UI du Layer Manager et le bouton labels apr√®s changement r√©ussi\r\n            // Utilise le refresh debounced pour grouper les changements multiples (ex: zoom)\r\n            if (GeoLeaf.LayerManager && typeof GeoLeaf.LayerManager.refresh === 'function') {\r\n                GeoLeaf.LayerManager.refresh(); // Debounced par d√©faut (100ms)\r\n            }\r\n\r\n            if (GeoLeaf._LabelButtonManager && typeof GeoLeaf._LabelButtonManager.syncImmediate === 'function') {\r\n                GeoLeaf._LabelButtonManager.syncImmediate(layerId);\r\n            }\r\n\r\n            return true;\r\n\r\n        } catch (err) {\r\n            Log.error(`[VisibilityManager] Erreur lors du changement de visibilit√© de ${layerId}:`, err);\r\n            return false;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Notifie le module Legend d'un changement de visibilit√©\r\n     * @param {string} layerId - ID de la couche\r\n     * @param {boolean} visible - √âtat de visibilit√©\r\n     * @private\r\n     */\r\n    GeoLeaf._LayerVisibilityManager._notifyLegend = function (layerId, visible) {\r\n        if (GeoLeaf.Legend && typeof GeoLeaf.Legend.setLayerVisibility === \"function\") {\r\n            GeoLeaf.Legend.setLayerVisibility(layerId, visible);\r\n        }\r\n\r\n        // Notifier aussi le module Labels pour masquer/afficher les √©tiquettes\r\n        if (GeoLeaf.Labels) {\r\n            if (visible) {\r\n                // Si la couche devient visible, v√©rifier si les labels doivent √™tre affich√©s\r\n                // refreshLabels ne fait rien si les labels ne sont pas enabled\r\n                if (typeof GeoLeaf.Labels.refreshLabels === \"function\") {\r\n                    GeoLeaf.Labels.refreshLabels(layerId);\r\n                }\r\n            } else {\r\n                // Si la couche devient invisible, masquer les labels (sans changer enabled)\r\n                if (typeof GeoLeaf.Labels._hideLabelsForLayer === \"function\") {\r\n                    GeoLeaf.Labels._hideLabelsForLayer(layerId);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Synchroniser le bouton de label pour refl√©ter la visibilit√© de la couche\r\n        if (GeoLeaf._LabelButtonManager && typeof GeoLeaf._LabelButtonManager.syncImmediate === \"function\") {\r\n            GeoLeaf._LabelButtonManager.syncImmediate(layerId);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * √âmet un √©v√©nement de changement de visibilit√©\r\n     * @param {string} layerId - ID de la couche\r\n     * @param {boolean} visible - √âtat de visibilit√©\r\n     * @param {string} source - Source du changement\r\n     * @private\r\n     */\r\n    GeoLeaf._LayerVisibilityManager._fireVisibilityEvent = function (layerId, visible, source) {\r\n        const state = getState();\r\n        if (!state.map) return;\r\n\r\n        try {\r\n            state.map.fire(\"geoleaf:geojson:visibility-changed\", {\r\n                layerId: layerId,\r\n                visible: visible,\r\n                source: source\r\n            });\r\n        } catch (e) {\r\n            // Silencieux\r\n        }\r\n    };\r\n\r\n    /**\r\n     * R√©initialise les overrides utilisateur pour une couche\r\n     * Utilis√© par les th√®mes pour reprendre le contr√¥le\r\n     *\r\n     * @param {string} layerId - ID de la couche\r\n     */\r\n    GeoLeaf._LayerVisibilityManager.resetUserOverride = function (layerId) {\r\n        const state = getState();\r\n        const layerData = state.layers.get(layerId);\r\n\r\n        if (layerData && layerData._visibility) {\r\n            layerData._visibility.userOverride = false;\r\n            getLog().debug(`[VisibilityManager] User override r√©initialis√© pour ${layerId}`);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * R√©initialise tous les overrides utilisateur\r\n     * Utilis√© par les th√®mes lors d'un changement complet de th√®me\r\n     */\r\n    GeoLeaf._LayerVisibilityManager.resetAllUserOverrides = function () {\r\n        const state = getState();\r\n        let count = 0;\r\n\r\n        state.layers.forEach((layerData, layerId) => {\r\n            if (layerData._visibility && layerData._visibility.userOverride) {\r\n                layerData._visibility.userOverride = false;\r\n                count++;\r\n            }\r\n        });\r\n\r\n        if (count > 0) {\r\n            getLog().debug(`[VisibilityManager] ${count} user override(s) r√©initialis√©(s)`);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Obtient l'√©tat de visibilit√© complet d'une couche\r\n     * @param {string} layerId - ID de la couche\r\n     * @returns {Object|null} - M√©tadonn√©es de visibilit√© ou null\r\n     */\r\n    GeoLeaf._LayerVisibilityManager.getVisibilityState = function (layerId) {\r\n        const state = getState();\r\n        const layerData = state.layers.get(layerId);\r\n\r\n        if (!layerData) {\r\n            return null;\r\n        }\r\n\r\n        initVisibilityMetadata(layerData);\r\n\r\n        return {\r\n            current: layerData._visibility.current,\r\n            source: layerData._visibility.source,\r\n            userOverride: layerData._visibility.userOverride,\r\n            themeOverride: layerData._visibility.themeOverride,\r\n            zoomConstrained: layerData._visibility.zoomConstrained\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Exporte les constantes pour utilisation externe\r\n     */\r\n    GeoLeaf._LayerVisibilityManager.VisibilitySource = VisibilitySource;\r\n\r\n    getLog().info(\"[GeoLeaf._LayerVisibilityManager] Module charg√©\");\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf GeoJSON Layer Manager - Store\r\n * Layer CRUD operations: get, query, remove, z-index\r\n *\r\n * @module geojson/layer-manager/store\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // D√©pendances lazy\r\n    const getShared = () => GeoLeaf._GeoJSONShared;\r\n    const getState = () => GeoLeaf._GeoJSONShared.state;\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n\r\n    const LayerManager = GeoLeaf._GeoJSONLayerManager = GeoLeaf._GeoJSONLayerManager || {};\r\n\r\n    /**\r\n     * R√©cup√®re une couche sp√©cifique par son ID.\r\n     *\r\n     * @param {string} layerId - ID de la couche\r\n     * @returns {Object|null} - { id, label, layer, visible, config, clusterGroup } ou null\r\n     */\r\n    LayerManager.getLayerById = function (layerId) {\r\n        const state = getState();\r\n        return state.layers.get(layerId) || null;\r\n    };\r\n\r\n    /**\r\n     * R√©cup√®re les donn√©es d'une couche (geojson, geometryType, config).\r\n     * Utilis√© par le module Themes pour appliquer les styles.\r\n     *\r\n     * @param {string} layerId - ID de la couche\r\n     * @returns {Object|null} - { geojson, geometryType, config } ou null\r\n     */\r\n    LayerManager.getLayerData = function (layerId) {\r\n        const state = getState();\r\n        const layerData = state.layers.get(layerId);\r\n        if (!layerData) return null;\r\n\r\n        return {\r\n            geojson: layerData.geojson || null,\r\n            features: layerData.features || [],\r\n            geometryType: layerData.geometryType || 'unknown',\r\n            config: layerData.config || {},\r\n            layer: layerData.layer\r\n        };\r\n    };\r\n\r\n    /**\r\n     * R√©cup√®re toutes les couches charg√©es.\r\n     *\r\n     * @returns {Array<Object>} - Tableau de { id, label, visible, type, featureCount }\r\n     *\r\n     * Note: 'visible' retourne l'√©tat LOGIQUE de la couche (activ√©e/d√©sactiv√©e par l'utilisateur ou le th√®me),\r\n     * pas l'√©tat physique sur la carte (qui peut √™tre masqu√©e par le zoom).\r\n     * C'est l'√©tat qui doit √™tre refl√©t√© par le bouton ON/OFF du gestionnaire de couches.\r\n     */\r\n    LayerManager.getAllLayers = function () {\r\n        const state = getState();\r\n        const Log = getLog();\r\n        const layers = [];\r\n        state.layers.forEach((layerData, id) => {\r\n            // Utiliser logicalState qui est ind√©pendant du zoom\r\n            const meta = layerData._visibility;\r\n            const logicalVisible = meta && typeof meta.logicalState === 'boolean'\r\n                ? meta.logicalState\r\n                : (layerData.visible || false);\r\n\r\n            // DEBUG\r\n            if (Log && id === 'hebergements') {\r\n                Log.info(`[getAllLayers] ${id}: logicalState=${meta?.logicalState}, current=${meta?.current}, visible=${layerData.visible}, userOverride=${meta?.userOverride}, themeOverride=${meta?.themeOverride}`);\r\n            }\r\n\r\n            layers.push({\r\n                id: id,\r\n                label: layerData.label,\r\n                visible: logicalVisible,\r\n                type: LayerManager.detectLayerType(layerData.layer),\r\n                featureCount: layerData.layer ? layerData.layer.getLayers().length : 0\r\n            });\r\n        });\r\n        return layers;\r\n    };\r\n\r\n    /**\r\n     * D√©tecte le type de g√©om√©trie dominant d'une couche.\r\n     *\r\n     * @param {L.GeoJSON} layer\r\n     * @returns {string} - \"poi\", \"route\", \"area\", ou \"mixed\"\r\n     */\r\n    LayerManager.detectLayerType = function (layer) {\r\n        if (!layer || typeof layer.eachLayer !== 'function') return \"mixed\";\r\n\r\n        const types = { Point: 0, LineString: 0, Polygon: 0 };\r\n\r\n        layer.eachLayer((l) => {\r\n            if (l.feature && l.feature.geometry) {\r\n                const geomType = l.feature.geometry.type;\r\n                if (geomType.includes(\"Point\")) types.Point++;\r\n                else if (geomType.includes(\"LineString\")) types.LineString++;\r\n                else if (geomType.includes(\"Polygon\")) types.Polygon++;\r\n            }\r\n        });\r\n\r\n        const max = Math.max(types.Point, types.LineString, types.Polygon);\r\n        if (max === 0) return \"mixed\";\r\n        if (types.Point === max) return \"poi\";\r\n        if (types.LineString === max) return \"route\";\r\n        if (types.Polygon === max) return \"area\";\r\n        return \"mixed\";\r\n    };\r\n\r\n    /**\r\n     * Supprime une couche.\r\n     *\r\n     * @param {string} layerId - ID de la couche\r\n     */\r\n    LayerManager.removeLayer = function (layerId) {\r\n        const state = getState();\r\n        const Log = getLog();\r\n        const layerData = state.layers.get(layerId);\r\n\r\n        if (!layerData) {\r\n            Log.warn(\"[GeoLeaf.GeoJSON] removeLayer: couche introuvable :\", layerId);\r\n            return;\r\n        }\r\n\r\n        // Retirer de la carte\r\n        if (layerData.visible) {\r\n            LayerManager.hideLayer(layerId);\r\n        }\r\n\r\n        // D√©truire les objets Leaflet\r\n        if (layerData.clusterGroup) {\r\n            layerData.clusterGroup.clearLayers();\r\n        }\r\n        if (layerData.layer) {\r\n            layerData.layer.clearLayers();\r\n        }\r\n\r\n        // Retirer de la Map\r\n        state.layers.delete(layerId);\r\n        state.featureCache.delete(layerId);\r\n\r\n        Log.debug(\"[GeoLeaf.GeoJSON] Couche supprim√©e :\", layerId);\r\n    };\r\n\r\n    /**\r\n     * Met √† jour le zIndex d'une couche (ordre d'empilement sur la carte).\r\n     * Recr√©√©e la couche avec le nouveau pane si elle est visible.\r\n     *\r\n     * @param {string} layerId - ID de la couche\r\n     * @param {number} newZIndex - Nouveau zIndex (0-99)\r\n     * @returns {boolean} - true si la mise √† jour a r√©ussi\r\n     */\r\n    LayerManager.updateLayerZIndex = function (layerId, newZIndex) {\r\n        const state = getState();\r\n        const Log = getLog();\r\n        const layerData = state.layers.get(layerId);\r\n\r\n        if (!layerData) {\r\n            Log.warn(\"[GeoLeaf.GeoJSON] updateLayerZIndex: couche introuvable :\", layerId);\r\n            return false;\r\n        }\r\n\r\n        // Validation et clamping 0-99\r\n        const PaneHelpers = getShared().PaneHelpers;\r\n        newZIndex = PaneHelpers.validateZIndex(newZIndex);\r\n\r\n        const oldZIndex = layerData.config.zIndex || 0;\r\n        if (oldZIndex === newZIndex) {\r\n            Log.debug(\"[GeoLeaf.GeoJSON] updateLayerZIndex: zIndex identique, aucun changement :\", layerId);\r\n            return true;\r\n        }\r\n\r\n        Log.info(`[GeoLeaf.GeoJSON] Changement zIndex pour ${layerId}: ${oldZIndex} ‚Üí ${newZIndex}`);\r\n\r\n        // Mettre √† jour la config\r\n        layerData.config.zIndex = newZIndex;\r\n\r\n        // Si la couche n'est pas visible, juste mettre √† jour la config\r\n        const VisibilityManager = GeoLeaf._LayerVisibilityManager;\r\n        const visState = VisibilityManager ? VisibilityManager.getVisibilityState(layerId) : null;\r\n        const isVisible = visState ? visState.current : layerData.visible;\r\n\r\n        if (!isVisible) {\r\n            Log.debug(\"[GeoLeaf.GeoJSON] Couche non visible, zIndex mis √† jour dans config uniquement\");\r\n            return true;\r\n        }\r\n\r\n        // Couche visible : besoin de changer le pane\r\n        const newPaneName = PaneHelpers.getPaneName(newZIndex);\r\n        const newPane = state.map.getPane(newPaneName);\r\n\r\n        if (!newPane) {\r\n            Log.error(`[GeoLeaf.GeoJSON] Pane ${newPaneName} introuvable`);\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            // Retirer temporairement de la carte\r\n            if (layerData.clusterGroup) {\r\n                state.map.removeLayer(layerData.clusterGroup);\r\n            } else {\r\n                state.map.removeLayer(layerData.layer);\r\n            }\r\n\r\n            // Changer le pane du layer Leaflet\r\n            if (layerData.layer && layerData.layer.options) {\r\n                layerData.layer.options.pane = newPaneName;\r\n\r\n                // Mettre √† jour chaque feature/layer individuelle\r\n                layerData.layer.eachLayer(function(subLayer) {\r\n                    if (subLayer.options) {\r\n                        subLayer.options.pane = newPaneName;\r\n                    }\r\n                    // Forcer le re-rendu en changeant le pane du path SVG\r\n                    if (subLayer._path && subLayer._path.parentNode) {\r\n                        const newPaneElement = state.map.getPane(newPaneName);\r\n                        if (newPaneElement) {\r\n                            newPaneElement.appendChild(subLayer._path);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Changer le pane du clusterGroup si pr√©sent\r\n            if (layerData.clusterGroup && layerData.clusterGroup.options) {\r\n                layerData.clusterGroup.options.pane = newPaneName;\r\n            }\r\n\r\n            // Remettre sur la carte directement\r\n            if (layerData.clusterGroup) {\r\n                state.map.addLayer(layerData.clusterGroup);\r\n            } else {\r\n                state.map.addLayer(layerData.layer);\r\n            }\r\n\r\n            Log.debug(`[GeoLeaf.GeoJSON] Couche ${layerId} d√©plac√©e vers pane ${newPaneName}`);\r\n\r\n            // D√©clencher √©v√©nement de changement\r\n            if (state.map) {\r\n                state.map.fire(\"geoleaf:geojson:zindex-changed\", {\r\n                    layerId: layerId,\r\n                    oldZIndex: oldZIndex,\r\n                    newZIndex: newZIndex\r\n                });\r\n            }\r\n\r\n            return true;\r\n        } catch (error) {\r\n            Log.error(`[GeoLeaf.GeoJSON] Erreur lors du changement de zIndex pour ${layerId}:`, error);\r\n            return false;\r\n        }\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf GeoJSON Layer Manager - Visibility\r\n * Show/hide/toggle layers, zoom-based visibility\r\n *\r\n * @module geojson/layer-manager/visibility\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const getState = () => GeoLeaf._GeoJSONShared.state;\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n    const ScaleUtils = GeoLeaf.Utils && GeoLeaf.Utils.ScaleUtils;\r\n\r\n    const LayerManager = GeoLeaf._GeoJSONLayerManager = GeoLeaf._GeoJSONLayerManager || {};\r\n\r\n    /**\r\n     * Affiche une couche (rend visible).\r\n     *\r\n     * @param {string} layerId - ID de la couche\r\n     */\r\n    LayerManager.showLayer = function (layerId) {\r\n        const state = getState();\r\n        const Log = getLog();\r\n        const layerData = state.layers.get(layerId);\r\n\r\n        if (!layerData) {\r\n            Log.warn(\"[GeoLeaf.GeoJSON] showLayer: couche introuvable :\", layerId);\r\n            return;\r\n        }\r\n\r\n        // Utiliser le gestionnaire de visibilit√© centralis√©\r\n        const VisibilityManager = GeoLeaf._LayerVisibilityManager;\r\n        if (!VisibilityManager) {\r\n            Log.error(\"[GeoLeaf.GeoJSON] LayerVisibilityManager non disponible\");\r\n            return;\r\n        }\r\n\r\n        const changed = VisibilityManager.setVisibility(\r\n            layerId,\r\n            true,\r\n            VisibilityManager.VisibilitySource.USER\r\n        );\r\n\r\n        // IMPORTANT: Recalculer la visibilit√© physique en fonction du zoom\r\n        // setVisibility met √† jour logicalState (bouton), mais il faut aussi recalculer current\r\n        LayerManager.updateLayerVisibilityByZoom();\r\n\r\n        // Charger la l√©gende si disponible (uniquement si changement effectu√©)\r\n        if (changed) {\r\n            LayerManager._loadLayerLegend(layerId, layerData);\r\n\r\n            // G√©rer les labels au moment de l'activation\r\n            if (GeoLeaf.Labels && GeoLeaf.Labels.hasLabelConfig(layerId)) {\r\n                // V√©rifier si visibleByDefault est true pour les labels\r\n                const visibleByDefault = layerData.currentStyle?.label?.visibleByDefault === true;\r\n\r\n                if (visibleByDefault) {\r\n                    // Activer et afficher les labels imm√©diatement\r\n                    GeoLeaf.Labels.enableLabels(layerId, {}, true);\r\n                } else if (GeoLeaf.Labels.areLabelsEnabled(layerId)) {\r\n                    // Sinon, juste rafra√Æchir si d√©j√† activ√©s\r\n                    GeoLeaf.Labels.refreshLabels(layerId);\r\n                }\r\n            }\r\n            if (GeoLeaf._LabelButtonManager) {\r\n                GeoLeaf._LabelButtonManager.syncImmediate(layerId);\r\n            }\r\n\r\n            Log.debug(\"[GeoLeaf.GeoJSON] Couche affich√©e :\", layerId);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Masque une couche (rend invisible).\r\n     *\r\n     * @param {string} layerId - ID de la couche\r\n     */\r\n    LayerManager.hideLayer = function (layerId) {\r\n        const state = getState();\r\n        const Log = getLog();\r\n        const layerData = state.layers.get(layerId);\r\n\r\n        if (!layerData) {\r\n            Log.warn(\"[GeoLeaf.GeoJSON] hideLayer: couche introuvable :\", layerId);\r\n            return;\r\n        }\r\n\r\n        // Utiliser le gestionnaire de visibilit√© centralis√©\r\n        const VisibilityManager = GeoLeaf._LayerVisibilityManager;\r\n        if (!VisibilityManager) {\r\n            Log.error(\"[GeoLeaf.GeoJSON] LayerVisibilityManager non disponible\");\r\n            return;\r\n        }\r\n\r\n        const changed = VisibilityManager.setVisibility(\r\n            layerId,\r\n            false,\r\n            VisibilityManager.VisibilitySource.USER\r\n        );\r\n\r\n        // IMPORTANT: Recalculer la visibilit√© physique (even on hide, to ensure consistency)\r\n        LayerManager.updateLayerVisibilityByZoom();\r\n\r\n        if (changed) {\r\n            // Masquer les labels et mettre √† jour le bouton\r\n            if (GeoLeaf.Labels) {\r\n                GeoLeaf.Labels.disableLabels(layerId);\r\n            }\r\n            if (GeoLeaf._LabelButtonManager) {\r\n                GeoLeaf._LabelButtonManager.syncImmediate(layerId);\r\n            }\r\n\r\n            Log.debug(\"[GeoLeaf.GeoJSON] Couche masqu√©e :\", layerId);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Toggle la visibilit√© d'une couche.\r\n     *\r\n     * @param {string} layerId - ID de la couche\r\n     */\r\n    LayerManager.toggleLayer = function (layerId) {\r\n        const state = getState();\r\n        const Log = getLog();\r\n        const layerData = state.layers.get(layerId);\r\n\r\n        if (!layerData) {\r\n            Log.warn(\"[GeoLeaf.GeoJSON] toggleLayer: couche introuvable :\", layerId);\r\n            return;\r\n        }\r\n\r\n        // Obtenir l'√©tat actuel via le gestionnaire de visibilit√©\r\n        const VisibilityManager = GeoLeaf._LayerVisibilityManager;\r\n        if (!VisibilityManager) {\r\n            Log.error(\"[GeoLeaf.GeoJSON] LayerVisibilityManager non disponible\");\r\n            return;\r\n        }\r\n\r\n        const visState = VisibilityManager.getVisibilityState(layerId);\r\n        const currentlyVisible = visState ? visState.current : layerData.visible;\r\n\r\n        // Toggle\r\n        if (currentlyVisible) {\r\n            LayerManager.hideLayer(layerId);\r\n        } else {\r\n            LayerManager.showLayer(layerId);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Affiche une couche (interne, sans v√©rifier visible).\r\n     * @deprecated Utiliser GeoLeaf._LayerVisibilityManager.setVisibility() √† la place\r\n     * @private\r\n     */\r\n    LayerManager._showLayerInternal = function (layerId, layerData) {\r\n        const Log = getLog();\r\n        Log.warn(\"[GeoLeaf.GeoJSON] _showLayerInternal() est d√©pr√©ci√©, utiliser LayerVisibilityManager\");\r\n\r\n        // Rediriger vers le gestionnaire centralis√©\r\n        const VisibilityManager = GeoLeaf._LayerVisibilityManager;\r\n        if (VisibilityManager) {\r\n            VisibilityManager.setVisibility(\r\n                layerId,\r\n                true,\r\n                VisibilityManager.VisibilitySource.SYSTEM\r\n            );\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Masque une couche (interne, sans v√©rifier visible).\r\n     * @deprecated Utiliser GeoLeaf._LayerVisibilityManager.setVisibility() √† la place\r\n     * @private\r\n     */\r\n    LayerManager._hideLayerInternal = function (layerId, layerData) {\r\n        const Log = getLog();\r\n        Log.warn(\"[GeoLeaf.GeoJSON] _hideLayerInternal() est d√©pr√©ci√©, utiliser LayerVisibilityManager\");\r\n\r\n        // Rediriger vers le gestionnaire centralis√©\r\n        const VisibilityManager = GeoLeaf._LayerVisibilityManager;\r\n        if (VisibilityManager) {\r\n            VisibilityManager.setVisibility(\r\n                layerId,\r\n                false,\r\n                VisibilityManager.VisibilitySource.SYSTEM\r\n            );\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Met √† jour la visibilit√© des couches en fonction de layerScale du style actif.\r\n     * Respecte les pr√©f√©rences utilisateur (d√©sactivation manuelle ou par th√®me).\r\n     * Utilise le gestionnaire de visibilit√© centralis√© avec source 'zoom'.\r\n     * Ex√©cution imm√©diate pour r√©activit√© pendant le zoom (le debounce LayerManager.refresh √©vite les saccades d'UI).\r\n     */\r\n    LayerManager.updateLayerVisibilityByZoom = function () {\r\n        const state = getState();\r\n        const Log = getLog();\r\n        if (!state.map) return;\r\n\r\n        const VisibilityManager = GeoLeaf._LayerVisibilityManager;\r\n        if (!VisibilityManager) {\r\n            Log.error(\"[GeoLeaf.GeoJSON] LayerVisibilityManager non disponible\");\r\n            return;\r\n        }\r\n\r\n        const currentScale = (ScaleUtils && typeof ScaleUtils.calculateMapScale === \"function\")\r\n            ? ScaleUtils.calculateMapScale(state.map, { logger: Log })\r\n            : 0;\r\n\r\n        const normalizeScaleValue = (value) => {\r\n            if (typeof value !== \"number\") return null;\r\n            return value <= 0 ? null : value;\r\n        };\r\n\r\n        state.layers.forEach((layerData, layerId) => {\r\n            const config = layerData.config;\r\n            if (!config) return;\r\n\r\n            const hasCurrentStyle = !!layerData.currentStyle;\r\n            const styleScale = hasCurrentStyle ? layerData.currentStyle.layerScale : null;\r\n            if (!styleScale && hasCurrentStyle) {\r\n                if (Log && typeof Log.warn === \"function\") {\r\n                    Log.warn(`[GeoLeaf.GeoJSON] layerScale manquant pour ${layerId}, couche laiss√©e visible par d√©faut`);\r\n                }\r\n            }\r\n\r\n            const minScale = normalizeScaleValue(styleScale && styleScale.minScale);\r\n            const maxScale = normalizeScaleValue(styleScale && styleScale.maxScale);\r\n\r\n            const shouldBeVisibleByScale = (ScaleUtils && typeof ScaleUtils.isScaleInRange === \"function\")\r\n                ? ScaleUtils.isScaleInRange(currentScale, minScale, maxScale, Log)\r\n                : true;\r\n\r\n            // Base visibility: user override > theme intent > config default\r\n            const meta = layerData._visibility;\r\n            let baseVisible;\r\n            if (meta && meta.userOverride) {\r\n                // IMPORTANT: Pour userOverride, utiliser logicalState (√©tat bouton), pas current (√©tat zoom)\r\n                baseVisible = meta.logicalState;\r\n            } else if (meta && meta.themeOverride) {\r\n                baseVisible = meta.themeDesired;\r\n            } else {\r\n                // visibility.active parameter is deprecated - now managed by layerScale in style files\r\n                baseVisible = true;\r\n            }\r\n\r\n            // R√àGLE CRITIQUE :\r\n            // - L'AFFICHAGE sur la carte RESPECTE TOUJOURS les seuils de zoom\r\n            // - Le BOUTON (via logicalState) reste ind√©pendant du zoom\r\n            // - Utilisateur voit : bouton ON, mais couche cach√©e si hors zoom\r\n            const shouldBeVisible = baseVisible && shouldBeVisibleByScale;\r\n\r\n            VisibilityManager.setVisibility(\r\n                layerId,\r\n                shouldBeVisible,\r\n                VisibilityManager.VisibilitySource.ZOOM\r\n            );\r\n        });\r\n    };\r\n\r\n    /**\r\n     * √âmet un √©v√©nement de changement de visibilit√©.\r\n     *\r\n     * @param {string} layerId\r\n     * @param {boolean} visible\r\n     * @private\r\n     */\r\n    LayerManager._fireLayerVisibilityEvent = function (layerId, visible) {\r\n        const state = getState();\r\n        if (!state.map) return;\r\n\r\n        try {\r\n            state.map.fire(\"geoleaf:geojson:visibility-changed\", {\r\n                layerId: layerId,\r\n                visible: visible\r\n            });\r\n        } catch (e) {\r\n            // Silencieux\r\n        }\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf GeoJSON Layer Manager - Style\r\n * Style normalization, hatch patterns, style application\r\n *\r\n * @module geojson/layer-manager/style\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const getState = () => GeoLeaf._GeoJSONShared.state;\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n\r\n    const LayerManager = GeoLeaf._GeoJSONLayerManager = GeoLeaf._GeoJSONLayerManager || {};\r\n\r\n    /**\r\n     * Cr√©e un pattern SVG pour le hachurage\r\n     * @private\r\n     * @param {string} layerId - ID de la couche (pour l'unicit√© du pattern)\r\n     * @param {Object} hatchConfig - Configuration du hachurage\r\n     * @returns {string} - ID du pattern SVG\r\n     */\r\n    function _createHatchPattern(layerId, hatchConfig) {\r\n        if (!hatchConfig || !hatchConfig.enabled) {\r\n            return null;\r\n        }\r\n\r\n        // Cr√©er un ID unique bas√© sur les param√®tres du hatch\r\n        const type = hatchConfig.type || 'diagonal';\r\n        const angle = hatchConfig.angleDeg || 0;\r\n        const spacing = hatchConfig.spacingPx || 10;\r\n        const strokeColor = (hatchConfig.stroke?.color || '#000000').replace('#', '');\r\n        const strokeWidth = hatchConfig.stroke?.widthPx || 1;\r\n        const strokeOpacity = hatchConfig.stroke?.opacity || 1;\r\n\r\n        // Hash des param√®tres pour cr√©er un ID unique\r\n        const configHash = `${type}-${angle}-${spacing}-${strokeColor}-${strokeWidth}-${strokeOpacity}`;\r\n        const patternId = `hatch-${layerId}-${configHash}`;\r\n\r\n        // Si le pattern existe d√©j√†, le r√©utiliser\r\n        const existingPattern = document.getElementById(patternId);\r\n        if (existingPattern) {\r\n            return patternId;\r\n        }\r\n\r\n        // Cr√©er le pattern SVG\r\n        const pattern = document.createElementNS('http://www.w3.org/2000/svg', 'pattern');\r\n        pattern.setAttribute('id', patternId);\r\n        pattern.setAttribute('patternUnits', 'userSpaceOnUse');\r\n        pattern.setAttribute('width', spacing);\r\n        pattern.setAttribute('height', spacing);\r\n\r\n        // Cr√©er les lignes selon le type\r\n        if (type === 'dot') {\r\n            // Pattern de points (stipple)\r\n            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\r\n            circle.setAttribute('cx', spacing / 2);\r\n            circle.setAttribute('cy', spacing / 2);\r\n            circle.setAttribute('r', Math.max(0.5, strokeWidth / 2));\r\n            circle.setAttribute('fill', `#${strokeColor}`);\r\n            circle.setAttribute('fill-opacity', strokeOpacity);\r\n            pattern.appendChild(circle);\r\n        } else if (type === 'cross') {\r\n            // Croix (horizontal + vertical)\r\n            const lineH = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n            lineH.setAttribute('x1', '0');\r\n            lineH.setAttribute('y1', spacing / 2);\r\n            lineH.setAttribute('x2', spacing);\r\n            lineH.setAttribute('y2', spacing / 2);\r\n            lineH.setAttribute('stroke', `#${strokeColor}`);\r\n            lineH.setAttribute('stroke-width', strokeWidth);\r\n            lineH.setAttribute('stroke-opacity', strokeOpacity);\r\n            pattern.appendChild(lineH);\r\n\r\n            const lineV = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n            lineV.setAttribute('x1', spacing / 2);\r\n            lineV.setAttribute('y1', '0');\r\n            lineV.setAttribute('x2', spacing / 2);\r\n            lineV.setAttribute('y2', spacing);\r\n            lineV.setAttribute('stroke', `#${strokeColor}`);\r\n            lineV.setAttribute('stroke-width', strokeWidth);\r\n            lineV.setAttribute('stroke-opacity', strokeOpacity);\r\n            pattern.appendChild(lineV);\r\n        } else if (type === 'x') {\r\n            // Croix diagonale (45¬∞ + 135¬∞)\r\n            const line1 = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n            line1.setAttribute('x1', '0');\r\n            line1.setAttribute('y1', '0');\r\n            line1.setAttribute('x2', spacing);\r\n            line1.setAttribute('y2', spacing);\r\n            line1.setAttribute('stroke', `#${strokeColor}`);\r\n            line1.setAttribute('stroke-width', strokeWidth);\r\n            line1.setAttribute('stroke-opacity', strokeOpacity);\r\n            pattern.appendChild(line1);\r\n\r\n            const line2 = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n            line2.setAttribute('x1', spacing);\r\n            line2.setAttribute('y1', '0');\r\n            line2.setAttribute('x2', '0');\r\n            line2.setAttribute('y2', spacing);\r\n            line2.setAttribute('stroke', `#${strokeColor}`);\r\n            line2.setAttribute('stroke-width', strokeWidth);\r\n            line2.setAttribute('stroke-opacity', strokeOpacity);\r\n            pattern.appendChild(line2);\r\n        } else {\r\n            // Simple ligne (diagonal, horizontal, vertical)\r\n            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n\r\n            if (type === 'horizontal' || angle === 0) {\r\n                line.setAttribute('x1', '0');\r\n                line.setAttribute('y1', spacing / 2);\r\n                line.setAttribute('x2', spacing);\r\n                line.setAttribute('y2', spacing / 2);\r\n            } else if (type === 'vertical' || angle === 90) {\r\n                line.setAttribute('x1', spacing / 2);\r\n                line.setAttribute('y1', '0');\r\n                line.setAttribute('x2', spacing / 2);\r\n                line.setAttribute('y2', spacing);\r\n            } else {\r\n                // Diagonal avec angle - cr√©er une vraie diagonale\r\n                line.setAttribute('x1', '0');\r\n                line.setAttribute('y1', '0');\r\n                line.setAttribute('x2', spacing);\r\n                line.setAttribute('y2', spacing);\r\n                // Appliquer la rotation depuis le centre du pattern\r\n                if (angle != null && angle !== 45) {\r\n                    const centerX = spacing / 2;\r\n                    const centerY = spacing / 2;\r\n                    pattern.setAttribute('patternTransform', `rotate(${angle} ${centerX} ${centerY})`);\r\n                }\r\n            }\r\n\r\n            line.setAttribute('stroke', `#${strokeColor}`);\r\n            line.setAttribute('stroke-width', strokeWidth);\r\n            line.setAttribute('stroke-opacity', strokeOpacity);\r\n            pattern.appendChild(line);\r\n        }\r\n\r\n        // Retourner juste l'ID du pattern\r\n        // Les patterns seront cr√©√©s dans _applyHatchToLayer quand le SVG Leaflet existe\r\n        return patternId;\r\n    }\r\n\r\n    /**\r\n     * Applique le hachurage SVG √† un layer Leaflet\r\n     * @private\r\n     * @param {L.Layer} layer - Layer Leaflet\r\n     * @param {string} patternId - ID du pattern SVG\r\n     */\r\n    function _applyHatchToLayer(layer, patternId, hatchConfig) {\r\n        if (!layer || !patternId) return;\r\n\r\n        // Log supprim√© pour √©viter des milliers de logs dans les boucles eachLayer\r\n        // ...log supprim√© pour √©viter du bruit inutile...\r\n\r\n        // S'assurer que le pattern existe dans le SVG de Leaflet\r\n        let mapSvg = document.querySelector('.leaflet-overlay-pane svg');\r\n        if (!mapSvg) {\r\n            // Retry avec d√©lai si SVG n'existe pas encore\r\n            const retryCount = 5;\r\n            const retryDelay = 100; // ms\r\n            let attempts = 0;\r\n            const tryApplyHatch = () => {\r\n                mapSvg = document.querySelector('.leaflet-overlay-pane svg');\r\n                if (mapSvg) {\r\n                    _applyHatchToLayer(layer, patternId, hatchConfig);\r\n                    return;\r\n                }\r\n                attempts++;\r\n                if (attempts < retryCount) {\r\n                    setTimeout(tryApplyHatch, retryDelay);\r\n                }\r\n            };\r\n            setTimeout(tryApplyHatch, retryDelay);\r\n            return;\r\n        }\r\n\r\n        // V√©rifier si le pattern existe d√©j√†\r\n        let pattern = mapSvg.querySelector(`#${patternId}`);\r\n        if (!pattern && hatchConfig) {\r\n            // Cr√©er le pattern maintenant\r\n            const spacing = hatchConfig.spacingPx || 10;\r\n            const type = hatchConfig.type || 'diagonal';\r\n            const angle = hatchConfig.angleDeg;\r\n            const strokeColor = hatchConfig.stroke?.color || '#000000';\r\n            const strokeWidth = hatchConfig.stroke?.widthPx || 1;\r\n            const strokeOpacity = hatchConfig.stroke?.opacity || 1;\r\n\r\n            // Assurer que la couleur a toujours le # pour les attributs SVG\r\n            const colorWithHash = strokeColor.startsWith('#') ? strokeColor : `#${strokeColor}`;\r\n\r\n            pattern = document.createElementNS('http://www.w3.org/2000/svg', 'pattern');\r\n            pattern.setAttribute('id', patternId);\r\n            pattern.setAttribute('patternUnits', 'userSpaceOnUse');\r\n            pattern.setAttribute('width', spacing);\r\n            pattern.setAttribute('height', spacing);\r\n\r\n            // Cr√©er le contenu selon le type\r\n            if (type === 'dot') {\r\n                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\r\n                circle.setAttribute('cx', spacing / 2);\r\n                circle.setAttribute('cy', spacing / 2);\r\n                // Rayon proportionnel au spacing:\r\n                // Plus petit spacing (plus dense) = points plus petits\r\n                // Plus grand spacing (moins dense) = points plus gros pour compenser\r\n                // spacing 6px ‚Üí r=0.42, spacing 12px ‚Üí r=0.84\r\n                circle.setAttribute('r', Math.max(0.3, spacing * 0.07));\r\n                circle.setAttribute('fill', colorWithHash);\r\n                circle.setAttribute('fill-opacity', strokeOpacity);\r\n                pattern.appendChild(circle);\r\n            } else if (type === 'diagonal') {\r\n                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n                line.setAttribute('x1', '0');\r\n                line.setAttribute('y1', '0');\r\n                line.setAttribute('x2', spacing);\r\n                line.setAttribute('y2', spacing);\r\n                line.setAttribute('stroke', colorWithHash);\r\n                line.setAttribute('stroke-width', strokeWidth);\r\n                line.setAttribute('stroke-opacity', strokeOpacity);\r\n                if (angle != null && angle !== 45) {\r\n                    const centerX = spacing / 2;\r\n                    const centerY = spacing / 2;\r\n                    pattern.setAttribute('patternTransform', `rotate(${angle} ${centerX} ${centerY})`);\r\n                }\r\n                pattern.appendChild(line);\r\n            } else if (type === 'cross') {\r\n                // Ligne horizontale\r\n                const hLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n                hLine.setAttribute('x1', '0');\r\n                hLine.setAttribute('y1', spacing / 2);\r\n                hLine.setAttribute('x2', spacing);\r\n                hLine.setAttribute('y2', spacing / 2);\r\n                hLine.setAttribute('stroke', colorWithHash);\r\n                hLine.setAttribute('stroke-width', strokeWidth);\r\n                hLine.setAttribute('stroke-opacity', strokeOpacity);\r\n                pattern.appendChild(hLine);\r\n                // Ligne verticale\r\n                const vLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n                vLine.setAttribute('x1', spacing / 2);\r\n                vLine.setAttribute('y1', '0');\r\n                vLine.setAttribute('x2', spacing / 2);\r\n                vLine.setAttribute('y2', spacing);\r\n                vLine.setAttribute('stroke', colorWithHash);\r\n                vLine.setAttribute('stroke-width', strokeWidth);\r\n                vLine.setAttribute('stroke-opacity', strokeOpacity);\r\n                pattern.appendChild(vLine);\r\n            } else if (type === 'x') {\r\n                // Diagonale principal (TL to BR)\r\n                const line1 = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n                line1.setAttribute('x1', '0');\r\n                line1.setAttribute('y1', '0');\r\n                line1.setAttribute('x2', spacing);\r\n                line1.setAttribute('y2', spacing);\r\n                line1.setAttribute('stroke', colorWithHash);\r\n                line1.setAttribute('stroke-width', strokeWidth);\r\n                line1.setAttribute('stroke-opacity', strokeOpacity);\r\n                pattern.appendChild(line1);\r\n                // Diagonale secondaire (TR to BL)\r\n                const line2 = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n                line2.setAttribute('x1', spacing);\r\n                line2.setAttribute('y1', '0');\r\n                line2.setAttribute('x2', '0');\r\n                line2.setAttribute('y2', spacing);\r\n                line2.setAttribute('stroke', colorWithHash);\r\n                line2.setAttribute('stroke-width', strokeWidth);\r\n                line2.setAttribute('stroke-opacity', strokeOpacity);\r\n                pattern.appendChild(line2);\r\n            } else if (type === 'horizontal') {\r\n                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n                line.setAttribute('x1', '0');\r\n                line.setAttribute('y1', spacing / 2);\r\n                line.setAttribute('x2', spacing);\r\n                line.setAttribute('y2', spacing / 2);\r\n                line.setAttribute('stroke', colorWithHash);\r\n                line.setAttribute('stroke-width', strokeWidth);\r\n                line.setAttribute('stroke-opacity', strokeOpacity);\r\n                pattern.appendChild(line);\r\n            } else if (type === 'vertical') {\r\n                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n                line.setAttribute('x1', spacing / 2);\r\n                line.setAttribute('y1', '0');\r\n                line.setAttribute('x2', spacing / 2);\r\n                line.setAttribute('y2', spacing);\r\n                line.setAttribute('stroke', colorWithHash);\r\n                line.setAttribute('stroke-width', strokeWidth);\r\n                line.setAttribute('stroke-opacity', strokeOpacity);\r\n                pattern.appendChild(line);\r\n            }\r\n\r\n            // Ajouter au defs du SVG\r\n            let defs = mapSvg.querySelector('defs');\r\n            if (!defs) {\r\n                defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\r\n                mapSvg.insertBefore(defs, mapSvg.firstChild);\r\n            }\r\n            defs.appendChild(pattern);\r\n        }\r\n\r\n        // Fonction pour appliquer le pattern √† un √©l√©ment path\r\n        const applyToPath = (path) => {\r\n            if (path && path.setAttribute) {\r\n                const fillUrl = `url(#${patternId})`;\r\n                const currentFill = path.getAttribute('fill');\r\n\r\n                // N'appliquer que si diff√©rent (√©vite boucle infinie)\r\n                if (currentFill !== fillUrl) {\r\n                    path.setAttribute('fill', fillUrl);\r\n                }\r\n\r\n                // S'assurer que l'opacit√© de remplissage est visible pour les patterns\r\n                if (hatchConfig && hatchConfig.renderMode === 'pattern_only') {\r\n                    const curFillOpacity = path.getAttribute('fill-opacity');\r\n                    if (curFillOpacity == null || Number(curFillOpacity) <= 0) {\r\n                        path.setAttribute('fill-opacity', '1');\r\n                    }\r\n                }\r\n\r\n                // Observer les changements pour r√©appliquer le pattern\r\n                if (!path._hatchObserver) {\r\n                    const observer = new MutationObserver((mutations) => {\r\n                        mutations.forEach((mutation) => {\r\n                            if (mutation.type === 'attributes' && mutation.attributeName === 'fill') {\r\n                                const newFill = path.getAttribute('fill');\r\n                                // Ne r√©appliquer que si vraiment diff√©rent\r\n                                if (newFill !== fillUrl && !newFill.includes(patternId)) {\r\n                                    path.setAttribute('fill', fillUrl);\r\n                                }\r\n                            }\r\n                        });\r\n                    });\r\n                    observer.observe(path, { attributes: true, attributeFilter: ['fill'] });\r\n                    path._hatchObserver = observer;\r\n                }\r\n            }\r\n        };\r\n\r\n        // Pour les layers individuels\r\n        if (layer._path) {\r\n            applyToPath(layer._path);\r\n        }\r\n\r\n        // Pour les groupes de layers\r\n        if (typeof layer.eachLayer === 'function') {\r\n            layer.eachLayer(sublayer => {\r\n                if (sublayer._path) {\r\n                    applyToPath(sublayer._path);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Normalise le format de style vers le format Leaflet\r\n     * @private\r\n     * @param {Object} style - Style source (format imbriqu√© ou plat)\r\n     * @param {string} layerId - ID de la couche (pour les patterns SVG)\r\n     * @returns {Object} - Style normalis√© au format Leaflet\r\n     */\r\n    function _normalizeStyleToLeaflet(style, layerId) {\r\n        if (!style || typeof style !== 'object') {\r\n            return {};\r\n        }\r\n\r\n        const normalized = {};\r\n\r\n        // Nouveau format imbriqu√© avec fill/stroke\r\n        if (style.fill || style.stroke) {\r\n            // Fill (remplissage)\r\n            if (style.fill) {\r\n                if (style.fill.color) normalized.fillColor = style.fill.color;\r\n                if (typeof style.fill.opacity === 'number') normalized.fillOpacity = style.fill.opacity;\r\n                if (style.fill.pattern) normalized.fillPattern = style.fill.pattern;\r\n            }\r\n\r\n            // Si hatch avec renderMode=\"pattern_only\", forcer un fillColor et une fillOpacity visible\r\n            // (Leaflet a besoin d'un fillColor pour appliquer un pattern et l'opacit√© doit √™tre > 0)\r\n            if (style.hatch && style.hatch.enabled && style.hatch.renderMode === 'pattern_only') {\r\n                if (!normalized.fillColor) normalized.fillColor = '#ffffff';\r\n                // Override toute valeur de fill.opacity fournie par le style (souvent 0.0) pour rendre le pattern visible\r\n                normalized.fillOpacity = 1.0;\r\n            }\r\n\r\n            // Stroke (contour)\r\n            if (style.stroke) {\r\n                if (style.stroke.color) normalized.color = style.stroke.color;\r\n                if (typeof style.stroke.opacity === 'number') normalized.opacity = style.stroke.opacity;\r\n                if (typeof style.stroke.widthPx === 'number') normalized.weight = style.stroke.widthPx;\r\n                if (style.stroke.dashArray) normalized.dashArray = style.stroke.dashArray;\r\n                if (style.stroke.lineCap) normalized.lineCap = style.stroke.lineCap;\r\n                if (style.stroke.lineJoin) normalized.lineJoin = style.stroke.lineJoin;\r\n            }\r\n\r\n            // Casing (bordure/contour pour polylines)\r\n            if (style.casing && style.casing.enabled) {\r\n                normalized._casing = {\r\n                    enabled: true,\r\n                    color: style.casing.color || '#000000',\r\n                    opacity: typeof style.casing.opacity === 'number' ? style.casing.opacity : 1.0,\r\n                    weight: typeof style.casing.widthPx === 'number' ? style.casing.widthPx : 1.0,\r\n                    dashArray: style.casing.dashArray || null,\r\n                    lineCap: style.casing.lineCap || null,\r\n                    lineJoin: style.casing.lineJoin || null\r\n                };\r\n            }\r\n\r\n            // Propri√©t√©s communes\r\n            if (style.shape) normalized.shape = style.shape;\r\n            if (typeof style.sizePx === 'number') {\r\n                normalized.radius = style.sizePx;\r\n                normalized.sizePx = style.sizePx;\r\n            }\r\n\r\n            // Hatch (hachurage) - copie de la structure compl√®te\r\n            if (style.hatch) {\r\n                normalized.hatch = { ...style.hatch };\r\n                // Normaliser le stroke du hatch si pr√©sent\r\n                if (style.hatch.stroke) {\r\n                    const hatchStroke = {};\r\n                    if (style.hatch.stroke.color) hatchStroke.color = style.hatch.stroke.color;\r\n                    if (typeof style.hatch.stroke.opacity === 'number') hatchStroke.opacity = style.hatch.stroke.opacity;\r\n                    if (typeof style.hatch.stroke.widthPx === 'number') hatchStroke.widthPx = style.hatch.stroke.widthPx;\r\n                    normalized.hatch.stroke = hatchStroke;\r\n                }\r\n\r\n                // Cr√©er le pattern SVG et l'appliquer comme fillPattern\r\n                if (style.hatch.enabled && layerId) {\r\n                    const patternId = _createHatchPattern(layerId, style.hatch);\r\n                    if (patternId) {\r\n                        // Stocker l'ID du pattern pour application ult√©rieure\r\n                        normalized._hatchPatternId = patternId;\r\n\r\n                        // Si renderMode = \"pattern_only\", on utilise le pattern comme fill\r\n                        // IMPORTANT: on NE d√©finit PAS fillOpacity=0 car cela rendrait le pattern invisible!\r\n                        // Le pattern SVG s'affichera avec son propre rendu via l'attribut fill=\"url(#pattern-id)\"\r\n                        if (style.hatch.renderMode === 'pattern_only') {\r\n                            // Rendre le pattern visible: fillOpacity doit √™tre > 0 et un fillColor doit exister\r\n                            normalized.fillColor = normalized.fillColor || '#ffffff';\r\n                            normalized.fillOpacity = 1.0;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // Ancien format plat (r√©trocompatibilit√©)\r\n        else {\r\n            // Copier toutes les propri√©t√©s directement\r\n            Object.assign(normalized, style);\r\n        }\r\n\r\n        return normalized;\r\n    }\r\n\r\n    /**\r\n     * Applique un nouveau style √† une couche existante.\r\n     * Utilis√© par le module Themes pour changer dynamiquement l'apparence.\r\n     *\r\n     * @param {string} layerId - ID de la couche\r\n     * @param {Object} styleConfig - Configuration du style { style, styleRules }\r\n     * @returns {boolean} - true si le style a √©t√© appliqu√© avec succ√®s\r\n     */\r\n    LayerManager.setLayerStyle = function (layerId, styleConfig) {\r\n        const state = getState();\r\n        const Log = getLog();\r\n        const layerData = state.layers.get(layerId);\r\n\r\n        if (!layerData) {\r\n            Log.warn(\"[GeoLeaf.GeoJSON] setLayerStyle: couche introuvable :\", layerId);\r\n            return false;\r\n        }\r\n\r\n        const leafletLayer = layerData.layer;\r\n        if (!leafletLayer || typeof leafletLayer.setStyle !== 'function') {\r\n            Log.warn(\"[GeoLeaf.GeoJSON] setLayerStyle: couche sans m√©thode setStyle :\", layerId);\r\n            return false;\r\n        }\r\n\r\n        // Pr√©parer le style par d√©faut (ne pas utiliser defaultStyle qui peut contenir les anciennes valeurs)\r\n        const baseStyle = {\r\n            color: '#3388ff',\r\n            weight: 3,\r\n            opacity: 0.65,\r\n            fillColor: '#3388ff',\r\n            fillOpacity: 0.2\r\n        };\r\n\r\n        // Normaliser le style (defaultStyle ou style) vers format Leaflet\r\n        const rawStyle = styleConfig.defaultStyle || styleConfig.style || {};\r\n        const normalizedStyle = _normalizeStyleToLeaflet(rawStyle, layerId);\r\n        const defaultStyle = Object.assign({}, baseStyle, normalizedStyle);\r\n\r\n        // Pr√©parer les styleRules\r\n        const styleRules = Array.isArray(styleConfig.styleRules) ? styleConfig.styleRules : [];\r\n\r\n        // Fonction de style dynamique\r\n        const styleFn = (feature) => {\r\n            // 1. Commencer avec le style par d√©faut\r\n            let finalStyle = Object.assign({}, defaultStyle);\r\n\r\n            // 2. Appliquer les styleRules (premi√®re r√®gle correspondante gagne)\r\n            if (styleRules.length > 0 && GeoLeaf._GeoJSONStyleResolver) {\r\n                const matchedStyle = GeoLeaf._GeoJSONStyleResolver.evaluateStyleRules(feature, styleRules);\r\n                if (matchedStyle) {\r\n                    // Normaliser le style de la r√®gle vers format Leaflet\r\n                    const normalizedRuleStyle = _normalizeStyleToLeaflet(matchedStyle, layerId);\r\n                    finalStyle = Object.assign({}, finalStyle, normalizedRuleStyle);\r\n                }\r\n            }\r\n\r\n            // 3. NE PAS appliquer properties.style ou properties.color pour permettre aux r√®gles de s'appliquer\r\n            // Comment√© car cela √©crase les r√®gles de style\r\n            // const featureStyle = feature && feature.properties && feature.properties.style\r\n            //     ? feature.properties.style\r\n            //     : null;\r\n            // if (featureStyle) {\r\n            //     finalStyle = Object.assign({}, finalStyle, featureStyle);\r\n            // }\r\n\r\n            return finalStyle;\r\n        };\r\n\r\n        // Appliquer le style √† toutes les features de la couche\r\n        try {\r\n            let styled = 0;\r\n            let skipped = 0;\r\n            let markersRecreated = 0;\r\n            const layersToRecreate = [];\r\n\r\n            // Premi√®re passe : identifier et styler ou marquer pour recr√©ation\r\n            leafletLayer.eachLayer(function(layer) {\r\n                if (!layer.feature) {\r\n                    skipped++;\r\n                    return;\r\n                }\r\n\r\n                const style = styleFn(layer.feature);\r\n\r\n                // Cas 1: Layers avec setStyle (Path, CircleMarker, Polyline, etc.)\r\n                if (layer.setStyle && typeof layer.setStyle === 'function') {\r\n                    layer.setStyle(style);\r\n                    styled++;\r\n\r\n                    // G√©rer le casing (bordure pour polylines)\r\n                    if (style._casing && style._casing.enabled && layer instanceof global.L.Polyline && !(layer instanceof global.L.Polygon)) {\r\n                        const casingConfig = style._casing;\r\n\r\n                        // Cr√©er ou mettre √† jour la polyline de casing (dessous, plus large)\r\n                        if (!layer._casingLayer) {\r\n                            // Cr√©er une nouvelle couche de casing\r\n                            const casingStyle = {\r\n                                color: casingConfig.color,\r\n                                opacity: casingConfig.opacity,\r\n                                weight: casingConfig.weight,\r\n                                dashArray: casingConfig.dashArray,\r\n                                lineCap: casingConfig.lineCap || 'butt',\r\n                                lineJoin: casingConfig.lineJoin || 'miter',\r\n                                fill: false\r\n                            };\r\n\r\n                            layer._casingLayer = global.L.polyline(layer.getLatLngs(), casingStyle);\r\n                            // Ajouter la couche de casing au m√™me parent (group ou map)\r\n                            if (leafletLayer && leafletLayer.addLayer) {\r\n                                leafletLayer.addLayer(layer._casingLayer);\r\n                            } else if (layer._map) {\r\n                                layer._map.addLayer(layer._casingLayer);\r\n                            }\r\n                            // Mettre la couche de casing derri√®re la couche principale\r\n                            if (layer._casingLayer.setZIndex) {\r\n                                layer._casingLayer.setZIndex((layer.options.zIndex || 0) - 1);\r\n                            }\r\n                        } else {\r\n                            // Mettre √† jour le style existant\r\n                            layer._casingLayer.setStyle({\r\n                                color: casingConfig.color,\r\n                                opacity: casingConfig.opacity,\r\n                                weight: casingConfig.weight,\r\n                                dashArray: casingConfig.dashArray,\r\n                                lineCap: casingConfig.lineCap || 'butt',\r\n                                lineJoin: casingConfig.lineJoin || 'miter'\r\n                            });\r\n                        }\r\n                    } else if (!style._casing || !style._casing.enabled) {\r\n                        // Supprimer la couche de casing si elle existe mais n'est plus n√©cessaire\r\n                        if (layer._casingLayer && leafletLayer && leafletLayer.removeLayer) {\r\n                            leafletLayer.removeLayer(layer._casingLayer);\r\n                            layer._casingLayer = null;\r\n                        }\r\n                    }\r\n\r\n                    // Appliquer le hachurage si pr√©sent dans ce style\r\n                    if (style._hatchPatternId && style.hatch) {\r\n                        const patternId = style._hatchPatternId;\r\n                        const hatchConfig = style.hatch;\r\n                        // Log supprim√© pour √©viter des milliers de logs (appel√© pour chaque feature)\r\n                        // ...log supprim√© pour √©viter du bruit inutile...\r\n\r\n                        // Appliquer imm√©diatement si le path existe\r\n                        if (layer._path) {\r\n                            setTimeout(() => {\r\n                                _applyHatchToLayer(layer, patternId, hatchConfig);\r\n                            }, 0);\r\n                        }\r\n\r\n                        // Ajouter aussi un listener pour quand le layer est ajout√©/re-ajout√©\r\n                        if (!layer._hatchPatternId || layer._hatchPatternId !== patternId) {\r\n                            layer._hatchPatternId = patternId;\r\n\r\n                            // Supprimer l'ancien listener s'il existe\r\n                            if (layer._hatchListener) {\r\n                                layer.off('add', layer._hatchListener);\r\n                            }\r\n\r\n                            // Cr√©er le nouveau listener\r\n                            layer._hatchListener = function() {\r\n                                if (this._path) {\r\n                                    _applyHatchToLayer(this, patternId, hatchConfig);\r\n                                }\r\n                            };\r\n\r\n                            layer.on('add', layer._hatchListener);\r\n                        }\r\n                    }\r\n                }\r\n                // Cas 2: Markers avec ic√¥nes - besoin de recr√©er avec nouvelle ic√¥ne\r\n                else if (global.L && layer instanceof global.L.Marker) {\r\n                    layersToRecreate.push({ layer, feature: layer.feature, style });\r\n                } else {\r\n                    skipped++;\r\n                }\r\n            });\r\n\r\n            // Seconde passe : recr√©er les markers avec les nouvelles couleurs\r\n            if (layersToRecreate.length > 0) {\r\n                const POIMarkers = global.GeoLeaf && global.GeoLeaf._POIMarkers;\r\n\r\n                layersToRecreate.forEach(({ layer, feature, style }) => {\r\n                    const latlng = layer.getLatLng();\r\n\r\n                    // Utiliser le syst√®me POI pour cr√©er une nouvelle ic√¥ne color√©e\r\n                    if (POIMarkers && typeof POIMarkers.buildMarkerIcon === 'function') {\r\n                        const poiData = {\r\n                            ...feature.properties,\r\n                            latlng: [latlng.lat, latlng.lng],\r\n                            attributes: feature.properties.attributes || {},\r\n                            _layerConfig: { style: style } // Passer le style pour resolveCategoryColors\r\n                        };\r\n\r\n                        let displayConfig = {};\r\n                        if (typeof POIMarkers.resolveCategoryDisplay === 'function') {\r\n                            displayConfig = POIMarkers.resolveCategoryDisplay(poiData);\r\n                        }\r\n\r\n                        // Override avec tous les param√®tres du style\r\n                        if (style.fillColor) {\r\n                            displayConfig.colorFill = style.fillColor;\r\n                        }\r\n                        if (style.color) {\r\n                            displayConfig.colorStroke = style.color;\r\n                        }\r\n                        if (typeof style.radius === 'number') {\r\n                            displayConfig.radius = style.radius;\r\n                        }\r\n                        if (typeof style.weight === 'number') {\r\n                            displayConfig.weight = style.weight;\r\n                        }\r\n                        if (typeof style.fillOpacity === 'number') {\r\n                            displayConfig.fillOpacity = style.fillOpacity;\r\n                        }\r\n                        if (typeof style.opacity === 'number') {\r\n                            displayConfig.opacity = style.opacity;\r\n                        }\r\n\r\n                        const newIcon = POIMarkers.buildMarkerIcon(displayConfig);\r\n                        layer.setIcon(newIcon);\r\n                        markersRecreated++;\r\n                    } else {\r\n                        // Fallback: remplacer par un CircleMarker\r\n                        const newMarker = global.L.circleMarker(latlng, style);\r\n                        newMarker.feature = feature;\r\n                        leafletLayer.removeLayer(layer);\r\n                        leafletLayer.addLayer(newMarker);\r\n                        markersRecreated++;\r\n                    }\r\n                });\r\n            }\r\n\r\n            Log.debug(`[GeoLeaf.GeoJSON] Style appliqu√©: ${styled + markersRecreated} features (${styled} setStyle, ${markersRecreated} markers)`);\r\n\r\n            // Appliquer le hachurage global uniquement si pas de styleRules avec hatch\r\n            const hasHatchInRules = styleRules.some(rule => rule.style?.hatch?.enabled);\r\n\r\n            if (defaultStyle._hatchPatternId && !hasHatchInRules) {\r\n                const patternId = defaultStyle._hatchPatternId;\r\n\r\n                // Appliquer imm√©diatement\r\n                _applyHatchToLayer(leafletLayer, patternId);\r\n\r\n                // Log r√©sum√© au lieu de logs individuels\r\n                Log.debug(`[GeoLeaf.GeoJSON] Hachures appliqu√©es: pattern=${patternId}, features=${styled}`);\r\n\r\n                // Supprimer les anciens listeners pour √©viter les doublons\r\n                if (layerData._hatchListeners) {\r\n                    leafletLayer.off('add', layerData._hatchListeners.onAdd);\r\n                    if (global.L && global.L.DomEvent) {\r\n                        leafletLayer.eachLayer(layer => {\r\n                            if (layer._path) {\r\n                                layer.off('add', layerData._hatchListeners.onLayerAdd);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n\r\n                // Cr√©er les listeners pour r√©appliquer le hachurage apr√®s les redraws\r\n                const onAdd = () => {\r\n                    setTimeout(() => _applyHatchToLayer(leafletLayer, patternId), 0);\r\n                };\r\n\r\n                const onLayerAdd = function() {\r\n                    if (this._path) {\r\n                        this._path.setAttribute('fill', `url(#${patternId})`);\r\n                    }\r\n                };\r\n\r\n                // Ajouter les listeners\r\n                leafletLayer.on('add', onAdd);\r\n                leafletLayer.eachLayer(layer => {\r\n                    if (layer._path) {\r\n                        layer.on('add', onLayerAdd);\r\n                    }\r\n                });\r\n\r\n                // Stocker les listeners pour nettoyage futur\r\n                layerData._hatchListeners = { onAdd, onLayerAdd };\r\n                layerData._hatchPatternId = patternId;\r\n            }\r\n\r\n            // Mettre √† jour la config stock√©e pour que les futures √©valuations utilisent le nouveau style\r\n            layerData.config = Object.assign({}, layerData.config, {\r\n                style: styleConfig.defaultStyle || styleConfig.style,\r\n                styleRules: styleRules\r\n            });\r\n\r\n            // Stocker currentStyle pour les labels\r\n            layerData.currentStyle = styleConfig;\r\n\r\n            // Mettre √† jour l'√©tat du bouton des labels imm√©diatement\r\n            if (GeoLeaf._LabelButtonManager) {\r\n                GeoLeaf._LabelButtonManager.syncImmediate(layerId);\r\n            }\r\n\r\n            // R√©√©valuer la visibilit√© apr√®s application du style (layerScale)\r\n            if (GeoLeaf._GeoJSONLayerManager && typeof GeoLeaf._GeoJSONLayerManager.updateLayerVisibilityByZoom === \"function\") {\r\n                GeoLeaf._GeoJSONLayerManager.updateLayerVisibilityByZoom();\r\n            }\r\n\r\n            Log.debug(\"[GeoLeaf.GeoJSON] Style appliqu√© avec succ√®s :\", layerId);\r\n            return true;\r\n        } catch (err) {\r\n            Log.error(\"[GeoLeaf.GeoJSON] Erreur setLayerStyle :\", layerId, err.message);\r\n            return false;\r\n        }\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf GeoJSON Layer Manager - Integration\r\n * Layer Manager UI registration, legend loading, populate with all configs\r\n *\r\n * @module geojson/layer-manager/integration\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const getState = () => GeoLeaf._GeoJSONShared.state;\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n\r\n    const LayerManager = GeoLeaf._GeoJSONLayerManager = GeoLeaf._GeoJSONLayerManager || {};\r\n\r\n    /**\r\n     * Enregistre les couches dans le module LayerManager.\r\n     */\r\n    LayerManager.registerWithLayerManager = function () {\r\n        const state = getState();\r\n        const Log = getLog();\r\n        const LMgr = GeoLeaf.LayerManager;\r\n\r\n        Log.info(`[GeoLeaf.GeoJSON] registerWithLayerManager() appel√© avec ${state.layers.size} couche(s)`);\r\n\r\n        if (!LMgr || typeof LMgr._registerGeoJsonLayer !== \"function\") {\r\n            Log.warn(\"[GeoLeaf.GeoJSON] Module LayerManager non disponible, pas d'int√©gration gestionnaire de couches\");\r\n            return;\r\n        }\r\n\r\n        // Grouper les layers par idSection\r\n        const sectionMap = new Map();\r\n\r\n        state.layers.forEach((layerData, id) => {\r\n            // Log pour debug - VOIR TOUTES LES COUCHES\r\n            // Utiliser layerManagerId d√©fini dans layer.json\r\n            const sectionId = layerData.config.layerManagerId || \"geojson-default\";\r\n\r\n            if (!sectionMap.has(sectionId)) {\r\n                sectionMap.set(sectionId, {\r\n                    id: sectionId,\r\n                    order: 99,\r\n                    items: []\r\n                });\r\n            }\r\n\r\n            const type = LayerManager.detectLayerType(layerData.layer);\r\n            let legendType = \"fill\";\r\n            if (type === \"poi\") legendType = \"circle\";\r\n            else if (type === \"route\") legendType = \"line\";\r\n            else if (type === \"area\") legendType = \"fill\";\r\n\r\n            let color = \"#3388ff\";\r\n            if (layerData.config.style) {\r\n                color = layerData.config.style.fillColor || layerData.config.style.color || color;\r\n            } else if (layerData.config.pointStyle) {\r\n                color = layerData.config.pointStyle.fillColor || color;\r\n            }\r\n\r\n            // D√©tecter si la couche a des labels (dans la config OU dans le style courant)\r\n            let hasLabels = false;\r\n            let labelsConfig = null;\r\n\r\n            // V√©rifier d'abord dans la config de la couche\r\n            if (layerData.config.labels && layerData.config.labels.enabled) {\r\n                hasLabels = true;\r\n                labelsConfig = layerData.config.labels;\r\n            }\r\n\r\n            // V√©rifier ensuite dans le style actuel (currentStyle)\r\n            if (!hasLabels && layerData.currentStyle && layerData.currentStyle.label && layerData.currentStyle.label.enabled) {\r\n                hasLabels = true;\r\n                // Cr√©er une config de labels minimale bas√©e sur le style\r\n                labelsConfig = { enabled: true };\r\n            }\r\n\r\n            // Log pour TOUTES les couches pour comprendre le probl√®me\r\n            if (Log) {\r\n                Log.info(`[GeoJSON LayerManager] üîç Pr√©paration item ${id}:`, {\r\n                    hasConfig: !!layerData.config,\r\n                    hasStyles: !!(layerData.config && layerData.config.styles),\r\n                    styles: layerData.config ? layerData.config.styles : 'NO CONFIG',\r\n                    configKeys: layerData.config ? Object.keys(layerData.config).sort() : []\r\n                });\r\n            }\r\n\r\n            sectionMap.get(sectionId).items.push({\r\n                id: id,\r\n                label: layerData.label,\r\n                type: legendType,\r\n                color: color,\r\n                visible: layerData.visible,\r\n                toggleable: true,\r\n                order: 0,\r\n                zIndex: layerData.config.zIndex || 0,\r\n                themes: layerData.config.themes || null,\r\n                labels: hasLabels ? labelsConfig : null,\r\n                styles: layerData.config.styles || null\r\n            });\r\n        });\r\n\r\n        // Ajouter chaque section au gestionnaire de couches\r\n        sectionMap.forEach((section) => {\r\n            // Trier les items par zIndex d√©croissant (zIndex √©lev√© = en haut = affich√© au-dessus)\r\n            section.items.sort((a, b) => (b.zIndex || 0) - (a.zIndex || 0));\r\n\r\n            // Enregistrer chaque couche dans le LayerManager\r\n            section.items.forEach((item) => {\r\n                Log.debug(`[GeoLeaf.GeoJSON] Enregistrement couche \"${item.id}\" dans section \"${section.id}\"`);\r\n                LMgr._registerGeoJsonLayer(item.id, {\r\n                    layerManagerId: section.id,\r\n                    label: item.label,\r\n                    themes: item.themes,\r\n                    styles: item.styles,\r\n                    labels: item.labels\r\n                });\r\n            });\r\n\r\n            Log.debug(\"[GeoLeaf.GeoJSON] Section couche '\" + section.id + \"' cr√©√©e avec \" + section.items.length + \" couche(s)\");\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Charge la l√©gende d'une couche si disponible\r\n     * @param {string} layerId - ID de la couche\r\n     * @param {Object} layerData - Donn√©es de la couche\r\n     * @private\r\n     */\r\n    LayerManager._loadLayerLegend = function (layerId, layerData) {\r\n        const Log = getLog();\r\n\r\n        const config = layerData.config || {};\r\n\r\n        // Nouveau flux : g√©n√©rer la l√©gende depuis le style JSON\r\n        if (GeoLeaf.Legend && typeof GeoLeaf.Legend.loadLayerLegend === \"function\") {\r\n            // D√©terminer le style courant\r\n            const styleSelector = GeoLeaf._LayerManagerStyleSelector;\r\n            let styleId = null;\r\n\r\n            if (styleSelector && typeof styleSelector.getCurrentStyle === \"function\") {\r\n                styleId = styleSelector.getCurrentStyle(layerId) || null;\r\n            }\r\n\r\n            // Fallback depuis metadata √©ventuelle\r\n            if (!styleId && layerData.currentStyleMetadata && layerData.currentStyleMetadata.id) {\r\n                styleId = layerData.currentStyleMetadata.id;\r\n            }\r\n\r\n            // Fallback depuis la config de styles\r\n            if (!styleId && config.styles && Array.isArray(config.styles.available)) {\r\n                const available = config.styles.available;\r\n                // Essayer de trouver l'ID correspondant au fichier default\r\n                const defaultFile = config.styles.default;\r\n                const defaultByFile = defaultFile ? available.find(s => s.file === defaultFile) : null;\r\n                styleId = (defaultByFile && defaultByFile.id) || (available[0] && available[0].id) || \"default\";\r\n            }\r\n\r\n            if (!styleId) {\r\n                styleId = \"default\";\r\n            }\r\n\r\n            GeoLeaf.Legend.loadLayerLegend(layerId, styleId, config);\r\n            return;\r\n        }\r\n\r\n        // Legacy fallback: charger un fichier de l√©gende statique si d√©clar√©\r\n        if (!GeoLeaf.Legend || typeof GeoLeaf.Legend.addLayerLegend !== \"function\") {\r\n            return;\r\n        }\r\n\r\n        if (!config.legends || !Array.isArray(config.legends.available)) {\r\n            return;\r\n        }\r\n\r\n        let activeStyle = layerData.activeStyle;\r\n        if (!activeStyle && config.styles && Array.isArray(config.styles.available)) {\r\n            const defaultStyle = config.styles.available.find(s => s.id === \"default\");\r\n            activeStyle = defaultStyle ? defaultStyle.id : (config.styles.available[0] ? config.styles.available[0].id : \"default\");\r\n        }\r\n        if (!activeStyle) {\r\n            activeStyle = \"default\";\r\n        }\r\n\r\n        const legendEntry = config.legends.available.find(l => l.id === activeStyle);\r\n        if (!legendEntry || !legendEntry.file) {\r\n            Log.warn(`[GeoLeaf.GeoJSON] Pas de l√©gende trouv√©e pour le style ${activeStyle} de la couche ${layerId}`);\r\n            return;\r\n        }\r\n\r\n        const profileId = config._profileId;\r\n        const layerDir = config._layerDirectory;\r\n        const legendDir = config.legends.directory || \"legends\";\r\n\r\n        if (!profileId || !layerDir) {\r\n            Log.warn(\"[GeoLeaf.GeoJSON] M√©tadonn√©es manquantes (profileId ou layerDirectory) pour charger la l√©gende\");\r\n            return;\r\n        }\r\n\r\n        const Config = GeoLeaf.Config;\r\n        const dataCfg = Config && Config.get ? Config.get('data') : null;\r\n        const profilesBasePath = (dataCfg && dataCfg.profilesBasePath) || \"profiles\";\r\n\r\n        const legendPath = `${profilesBasePath}/${profileId}/${layerDir}/${legendDir}/${legendEntry.file}`;\r\n\r\n        fetch(legendPath)\r\n            .then(response => {\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP ${response.status}`);\r\n                }\r\n                return response.json();\r\n            })\r\n            .then(legendData => {\r\n                GeoLeaf.Legend.addLayerLegend(layerId, activeStyle, legendData);\r\n                Log.debug(`[GeoLeaf.GeoJSON] L√©gende charg√©e pour ${layerId} (${activeStyle})`);\r\n            })\r\n            .catch(error => {\r\n                Log.warn(`[GeoLeaf.GeoJSON] Erreur chargement l√©gende pour ${layerId}:`, error.message);\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Peuple le LayerManager avec TOUTES les configurations de couches disponibles.\r\n     * Contrairement √† registerWithLayerManager() qui ne montre que les couches charg√©es (th√®me actif),\r\n     * cette fonction affiche TOUTES les couches et met √† jour l'√©tat coch√© selon le th√®me actif.\r\n     *\r\n     * @param {Object} activeThemeConfig - Configuration du th√®me actif (contient liste des layers visibles)\r\n     * @returns {void}\r\n     */\r\n    LayerManager.populateLayerManagerWithAllConfigs = function(activeThemeConfig) {\r\n            // ...logs nettoy√©s...\r\n        const Log = getLog();\r\n        const LMgr = GeoLeaf.LayerManager;\r\n\r\n        if (!LMgr || typeof LMgr._registerGeoJsonLayer !== \"function\") {\r\n            Log.warn(\"[GeoLeaf.GeoJSON] populateLayerManagerWithAllConfigs: Module LayerManager non disponible\");\r\n            return;\r\n        }\r\n\r\n        if (!GeoLeaf._allLayerConfigs || !Array.isArray(GeoLeaf._allLayerConfigs)) {\r\n            Log.warn(\"[GeoLeaf.GeoJSON] populateLayerManagerWithAllConfigs: GeoLeaf._allLayerConfigs non disponible\");\r\n            return;\r\n        }\r\n\r\n        Log.info(`[GeoLeaf.GeoJSON] Peuplement LayerManager avec ${GeoLeaf._allLayerConfigs.length} configs de couches...`);\r\n        // ...log debug supprim√©...\r\n\r\n        // Obtenir la liste des couches actives du th√®me\r\n        // Les layers peuvent √™tre des objets {id, visible, style} ou des strings simples\r\n        let activeThemeLayers = [];\r\n        if (activeThemeConfig && Array.isArray(activeThemeConfig.layers)) {\r\n            activeThemeLayers = activeThemeConfig.layers.map(l => l.id || l);\r\n        }\r\n        Log.debug(`[GeoLeaf.GeoJSON] Couches actives du th√®me: ${activeThemeLayers.join(', ')}`);\r\n\r\n        // Grouper les configs par sectionId (layerManagerId)\r\n        const sectionMap = new Map();\r\n\r\n        GeoLeaf._allLayerConfigs.forEach(config => {\r\n            const sectionId = config.layerManagerId || \"geojson-default\";\r\n\r\n            if (!sectionMap.has(sectionId)) {\r\n                sectionMap.set(sectionId, {\r\n                    id: sectionId,\r\n                    items: []\r\n                });\r\n            }\r\n\r\n            // D√©terminer si la couche est active dans le th√®me courant\r\n            const isActive = activeThemeLayers.includes(config.id);\r\n\r\n            // Log pour debug - VOIR CE QUI EST DANS config POUR TOUTES LES COUCHES\r\n            // ...logs supprim√©s ([GeoJSON LayerManager] config debug)...\r\n\r\n            sectionMap.get(sectionId).items.push({\r\n                id: config.id,\r\n                label: config.label,\r\n                layerManagerId: sectionId,\r\n                themes: config.themes || null,\r\n                isActive: isActive,\r\n                zIndex: config.zIndex || 0,\r\n                styles: config.styles || null,\r\n                labels: config.labels || null\r\n            });\r\n        });\r\n\r\n        // Enregistrer chaque couche avec le LayerManager\r\n        sectionMap.forEach((section) => {\r\n            // Trier par zIndex d√©croissant\r\n            section.items.sort((a, b) => (b.zIndex || 0) - (a.zIndex || 0));\r\n\r\n            section.items.forEach((item) => {\r\n                Log.debug(`[GeoLeaf.GeoJSON] Enregistrement couche \"${item.id}\" dans section \"${section.id}\" (actif: ${item.isActive})`);\r\n                LMgr._registerGeoJsonLayer(item.id, {\r\n                    layerManagerId: section.id,\r\n                    label: item.label,\r\n                    themes: item.themes,\r\n                    checked: item.isActive,\r\n                    styles: item.styles,\r\n                    labels: item.labels\r\n                });\r\n            });\r\n\r\n            Log.debug(`[GeoLeaf.GeoJSON] Section \"${section.id}\" peupl√©e avec ${section.items.length} couche(s)`);\r\n        });\r\n\r\n        Log.info(`[GeoLeaf.GeoJSON] LayerManager peupl√© avec succ√®s`);\r\n\r\n        // Mettre √† jour l'UI du LayerManager si n√©cessaire\r\n        if (LMgr._updateUI && typeof LMgr._updateUI === \"function\") {\r\n            Log.debug(\"[GeoLeaf.GeoJSON] Appel LayerManager._updateUI()\");\r\n            LMgr._updateUI();\r\n        }\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf GeoJSON Module - Popup & Tooltip\r\n * Gestion des popups et tooltips unifi√©s\r\n *\r\n * @module geojson/popup-tooltip\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // D√©pendances lazy\r\n    const getState = () => GeoLeaf._GeoJSONShared.state;\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n\r\n    GeoLeaf._GeoJSONPopupTooltip = GeoLeaf._GeoJSONPopupTooltip || {};\r\n\r\n    /**\r\n     * Convertit une feature GeoJSON en format POI pour le side panel.\r\n     * Utilise _Normalizer si disponible, sinon cr√©e un POI par d√©faut.\r\n     * Enrichissement centralis√© pour tous les POIs.\r\n     *\r\n     * @param {Object} feature - Feature GeoJSON\r\n     * @param {Object} def - D√©finition de la couche\r\n     * @returns {Object} - Objet POI format√©\r\n     */\r\n    GeoLeaf._GeoJSONPopupTooltip.convertFeatureToPOI = function (feature, def) {\r\n        let poi;\r\n\r\n        // Utiliser le Normalizer centralis√© si disponible\r\n        const Normalizer = GeoLeaf._Normalizer;\r\n        if (Normalizer && typeof Normalizer.normalizeFromGeoJSON === 'function') {\r\n            poi = Normalizer.normalizeFromGeoJSON(feature, def);\r\n        } else {\r\n            // Fallback: logique locale\r\n            const props = feature.properties || {};\r\n\r\n            poi = {\r\n                id: props.id || (\"geojson-feature-\" + Math.random().toString(36).substr(2, 9)),\r\n                // R√©solution case-insensitive du titre (28 janvier 2026)\r\n                title: props.NAME || props.Name || props.name ||\r\n                       props.TITLE || props.Title || props.title ||\r\n                       props.LABEL || props.Label || props.label || \"Sans titre\",\r\n                description: props.description || props.desc || \"\",\r\n                // Conserver properties pour compatibilit√© avec les configs qui utilisent \"properties.field\"\r\n                properties: { ...props },\r\n                attributes: {\r\n                    source: \"geojson\",\r\n                    layerId: def.id,\r\n                    layerLabel: def.label,\r\n                    ...props\r\n                }\r\n            };\r\n\r\n            // Ajouter les coordonn√©es dans tous les formats support√©s\r\n            if (feature.geometry && feature.geometry.coordinates) {\r\n                // Format latlng array [lat, lng] pour compatibilit√© POI\r\n                poi.latlng = [\r\n                    feature.geometry.coordinates[1], // lat\r\n                    feature.geometry.coordinates[0]  // lng\r\n                ];\r\n                // Format geometry pour compatibilit√© GeoJSON\r\n                poi.geometry = feature.geometry;\r\n                // Format location pour compatibilit√© legacy\r\n                poi.location = {\r\n                    lat: feature.geometry.coordinates[1],\r\n                    lng: feature.geometry.coordinates[0]\r\n                };\r\n            }\r\n        }\r\n\r\n        // Enrichissement centralis√© pour tous les POIs\r\n        if (poi) {\r\n            poi.attributes = poi.attributes || {};\r\n            poi.attributes.source = \"geojson\";\r\n            poi.attributes.layerId = def.id;\r\n            poi.attributes.layerLabel = def.label;\r\n\r\n            // Attacher la configuration de la couche\r\n            poi._layerConfig = def;\r\n\r\n            // Utiliser getSidepanelConfig pour la normalisation correcte\r\n            const Loader = GeoLeaf._GeoJSONLoader;\r\n            const sidepanelLayout = Loader && Loader.getSidepanelConfig ? Loader.getSidepanelConfig(def) : null;\r\n            if (sidepanelLayout) {\r\n                poi._sidepanelConfig = {\r\n                    detailLayout: sidepanelLayout\r\n                };\r\n            }\r\n        }\r\n\r\n        return poi;\r\n    };\r\n\r\n    /**\r\n     * Attache un popup unifi√© compatible avec le syst√®me POI.\r\n     *\r\n     * @param {Object} feature - Feature GeoJSON\r\n     * @param {L.Layer} layer - Couche Leaflet\r\n     * @param {Object} def - D√©finition de la couche\r\n     */\r\n    GeoLeaf._GeoJSONPopupTooltip.bindUnifiedPopup = function (feature, layer, def) {\r\n        const Log = getLog();\r\n\r\n        if (!feature.properties) return;\r\n\r\n        // Si interactiveShape est false, ne rien attacher (la couche est non-cliquable)\r\n        if (def.interactiveShape === false) {\r\n            return;\r\n        }\r\n\r\n        // V√©rifier le param√®tre showPopup de la couche (d√©faut: true)\r\n        const showPopup = typeof def.showPopup === 'boolean' ? def.showPopup : true;\r\n\r\n        // Si showPopup est false, mode DIRECT: toggle du panneau lat√©ral au clic (sans popup)\r\n        if (!showPopup) {\r\n            layer.on(\"click\", (e) => {\r\n                if (e && e.originalEvent) e.originalEvent.stopPropagation();\r\n\r\n                // Masquer le tooltip si pr√©sent\r\n                if (layer.getTooltip && layer.getTooltip()) {\r\n                    try {\r\n                        if (typeof layer.closeTooltip === 'function') layer.closeTooltip();\r\n                        else layer.unbindTooltip();\r\n                    } catch (err) { /* ignore */ }\r\n                }\r\n\r\n                if (GeoLeaf.POI && typeof GeoLeaf.POI.showPoiDetails === \"function\") {\r\n                    const poiData = GeoLeaf._GeoJSONPopupTooltip.convertFeatureToPOI(feature, def);\r\n                    const shared = GeoLeaf._POIShared && GeoLeaf._POIShared.state;\r\n                    const current = shared ? shared.currentPoiInPanel : null;\r\n\r\n                    // Toggle: si le m√™me POI est ouvert, fermer le panneau, sinon l'ouvrir\r\n                    if (current && poiData && current.id && poiData.id && current.id === poiData.id) {\r\n                        if (GeoLeaf.POI && typeof GeoLeaf.POI.hideSidePanel === 'function') {\r\n                            GeoLeaf.POI.hideSidePanel();\r\n                        }\r\n                    } else {\r\n                        GeoLeaf.POI.showPoiDetails(poiData);\r\n                    }\r\n                }\r\n            });\r\n            return;\r\n        }\r\n\r\n        // Si un popup existe d√©j√† (cr√©√© par POI Markers), le conserver\r\n        if (layer.getPopup()) {\r\n            return;\r\n        }\r\n\r\n        // Convertir la feature en POI normalis√©\r\n        const poiData = GeoLeaf._GeoJSONPopupTooltip.convertFeatureToPOI(feature, def);\r\n\r\n        // Utiliser ContentBuilder si disponible\r\n        const ContentBuilder = GeoLeaf._ContentBuilder;\r\n        // Utiliser le helper pour r√©cup√©rer la config popup (28 janvier 2026)\r\n        const Loader = GeoLeaf._GeoJSONLoader;\r\n\r\n        let popupConfig = null;\r\n        try {\r\n            popupConfig = Loader && Loader.getPopupConfig ? Loader.getPopupConfig(def) : null;\r\n        } catch (e) {\r\n            // ...log supprim√© ([DEBUG] bindUnifiedPopup - ERREUR getPopupConfig)...\r\n        }\r\n\r\n        // ...logs supprim√©s ([POPUP] bindUnifiedPopup)...\r\n        if (ContentBuilder && typeof ContentBuilder.buildPopupHTML === 'function') {\r\n            const markersModule = GeoLeaf._POIMarkers;\r\n            const resolveCategoryDisplay = markersModule && typeof markersModule.resolveCategoryDisplay === 'function'\r\n                ? markersModule.resolveCategoryDisplay\r\n                : null;\r\n\r\n            const popupContent = ContentBuilder.buildPopupHTML(poiData, popupConfig, {\r\n                resolveCategoryDisplay: resolveCategoryDisplay\r\n            });\r\n\r\n            if (popupContent) {\r\n                layer.bindPopup(popupContent);\r\n            }\r\n        } else {\r\n            // Fallback: utiliser POIPopup module\r\n            const popupModule = GeoLeaf._POIPopup;\r\n            if (popupModule && typeof popupModule.buildQuickPopupContent === 'function') {\r\n                const markersModule = GeoLeaf._POIMarkers;\r\n                const resolveCategoryDisplay = markersModule && typeof markersModule.resolveCategoryDisplay === 'function'\r\n                    ? markersModule.resolveCategoryDisplay\r\n                    : null;\r\n\r\n                const popupContent = popupModule.buildQuickPopupContent(poiData, resolveCategoryDisplay);\r\n                if (popupContent) {\r\n                    layer.bindPopup(popupContent);\r\n                }\r\n            } else {\r\n                // Fallback minimal sans modules\r\n                const Security = GeoLeaf.Security || {\r\n                    escapeHtml: (str) => {\r\n                        if (!str) return \"\";\r\n                        const div = document.createElement(\"div\");\r\n                        div.textContent = String(str);\r\n                        return div.innerHTML;\r\n                    }\r\n                };\r\n\r\n                const props = feature.properties;\r\n                const name = props.name || props.label || props.title || \"Sans titre\";\r\n                const description = props.description || props.desc || \"\";\r\n\r\n                let popupHtml = '<div class=\"gl-geojson-popup\">';\r\n                popupHtml += '<h3 class=\"gl-popup-title\">' + Security.escapeHtml(name) + '</h3>';\r\n\r\n                if (description) {\r\n                    popupHtml += '<p class=\"gl-popup-description\">' + Security.escapeHtml(description) + '</p>';\r\n                }\r\n\r\n                if (GeoLeaf.POI && typeof GeoLeaf.POI.showPoiDetails === \"function\") {\r\n                    popupHtml += '<a href=\"#\" class=\"gl-poi-popup__link\" data-layer-id=\"' + def.id + '\" data-feature-id=\"' + (props.id || '') + '\">Voir d√©tails ‚Üí</a>';\r\n                }\r\n\r\n                popupHtml += '</div>';\r\n                layer.bindPopup(popupHtml);\r\n            }\r\n        }\r\n\r\n        // Flag pour tracker l'√©tat du popup\r\n        layer._geoleafPopupActive = false;\r\n\r\n        // Fermer le tooltip quand le popup s'ouvre\r\n        layer.on('popupopen', () => {\r\n            layer._geoleafPopupActive = true;\r\n\r\n            // Fermer le tooltip si pr√©sent\r\n            if (layer.getTooltip && layer.getTooltip()) {\r\n                try {\r\n                    if (typeof layer.closeTooltip === 'function') {\r\n                        layer.closeTooltip();\r\n                    }\r\n                } catch (err) {\r\n                    Log.warn('[GeoJSON] Erreur fermeture tooltip:', err);\r\n                }\r\n            }\r\n\r\n            // D√©l√©gation d'√©v√©nement pour le lien \"Voir d√©tails\"\r\n            const popup = layer.getPopup();\r\n            if (!popup) return;\r\n\r\n            const popupEl = popup.getElement();\r\n            if (!popupEl) return;\r\n\r\n            const link = popupEl.querySelector('.gl-poi-popup__link');\r\n            if (link) {\r\n                link.addEventListener('click', (e) => {\r\n                    e.preventDefault();\r\n                    if (GeoLeaf.POI && typeof GeoLeaf.POI.showPoiDetails === \"function\") {\r\n                        const poiData = GeoLeaf._GeoJSONPopupTooltip.convertFeatureToPOI(feature, def);\r\n                        GeoLeaf.POI.showPoiDetails(poiData);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        // R√©activer le tooltip quand le popup se ferme\r\n        layer.on('popupclose', () => {\r\n            layer._geoleafPopupActive = false;\r\n\r\n            // R√©ouvrir le tooltip s'il est permanent (mode \"always\")\r\n            if (layer.getTooltip() && layer.getTooltip().options.permanent) {\r\n                setTimeout(() => {\r\n                    if (layer.openTooltip && !layer._geoleafPopupActive) {\r\n                        layer.openTooltip();\r\n                    }\r\n                }, 50);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Attache un tooltip unifi√© √† une couche selon sa configuration.\r\n     *\r\n     * @param {Object} feature - Feature GeoJSON\r\n     * @param {L.Layer} layer - Couche Leaflet\r\n     * @param {Object} def - D√©finition de la couche\r\n     */\r\n    GeoLeaf._GeoJSONPopupTooltip.bindUnifiedTooltip = function (feature, layer, def) {\r\n        const state = getState();\r\n\r\n        if (!feature.properties || !layer) return;\r\n\r\n        // R√©cup√©rer les param√®tres de tooltip de la couche\r\n        const tooltipMode = def.tooltipMode || \"hover\"; // \"always\", \"never\", \"hover\"\r\n        const tooltipMinZoom = typeof def.tooltipMinZoom === \"number\" ? def.tooltipMinZoom : 0;\r\n\r\n        // Si mode \"never\", ne rien faire\r\n        if (tooltipMode === \"never\") {\r\n            return;\r\n        }\r\n\r\n        // Construire le texte du tooltip par d√©faut\r\n        const props = feature.properties;\r\n        const tooltipText = props.name || props.label || props.title || props.id || \"Sans titre\";\r\n\r\n        // Utiliser le helper pour r√©cup√©rer la config tooltip (28 janvier 2026)\r\n        const Loader = GeoLeaf._GeoJSONLoader;\r\n        const tooltipConfig = Loader && Loader.getTooltipConfig ? Loader.getTooltipConfig(def) : null;\r\n\r\n        // Convertir la feature en POI pour avoir access aux champs via attributes.*\r\n        const featureAsPoi = GeoLeaf._GeoJSONPopupTooltip.convertFeatureToPOI(feature, def);\r\n\r\n        // Fonction pour construire le contenu du tooltip\r\n        const buildTooltipContent = () => {\r\n            // Utiliser ContentBuilder si disponible\r\n            const ContentBuilder = GeoLeaf._ContentBuilder;\r\n            if (ContentBuilder && typeof ContentBuilder.buildTooltipHTML === 'function') {\r\n                const content = ContentBuilder.buildTooltipHTML(featureAsPoi, tooltipConfig);\r\n                return content || tooltipText;\r\n            }\r\n\r\n            // Fallback: utiliser POIPopup module\r\n            const POIPopup = GeoLeaf._POIPopup;\r\n            if (POIPopup && typeof POIPopup.buildTooltipContent === 'function') {\r\n                const content = POIPopup.buildTooltipContent(featureAsPoi);\r\n                return content || tooltipText;\r\n            }\r\n\r\n            // Fallback minimal\r\n            return tooltipText;\r\n        };\r\n\r\n        // Fonction pour g√©rer l'affichage du tooltip selon le zoom\r\n        const updateTooltipVisibility = () => {\r\n            if (!state.map) return;\r\n\r\n            // Ne pas afficher le tooltip si un popup est actif sur cette couche\r\n            if (layer._geoleafPopupActive) return;\r\n\r\n            const currentZoom = state.map.getZoom();\r\n            const shouldShow = currentZoom >= tooltipMinZoom;\r\n\r\n            const content = buildTooltipContent();\r\n\r\n            if (shouldShow) {\r\n                if (!layer.getTooltip()) {\r\n                    const opts = {\r\n                        direction: 'top',\r\n                        offset: [0, -10],\r\n                        opacity: 0.9,\r\n                        className: 'gl-geojson-tooltip',\r\n                        permanent: tooltipMode === 'always'\r\n                    };\r\n                    layer.bindTooltip(content, opts);\r\n                    if (tooltipMode === 'always' && layer.openTooltip) {\r\n                        layer.openTooltip();\r\n                    }\r\n                } else {\r\n                    // update existing tooltip content\r\n                    const tooltip = layer.getTooltip();\r\n                    if (tooltip && tooltip.setContent) tooltip.setContent(content);\r\n                }\r\n            } else {\r\n                if (layer.getTooltip()) {\r\n                    try {\r\n                        if (typeof layer.closeTooltip === 'function') {\r\n                            layer.closeTooltip();\r\n                        } else {\r\n                            layer.unbindTooltip();\r\n                        }\r\n                    } catch (err) {\r\n                        /* ignore */\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        // Stocker la r√©f√©rence pour le nettoyage\r\n        layer._geoleafTooltipUpdate = updateTooltipVisibility;\r\n\r\n        // Bloquer l'ouverture du tooltip pendant que le popup est actif\r\n        layer.on('tooltipopen', (e) => {\r\n            if (layer._geoleafPopupActive) {\r\n                layer.closeTooltip();\r\n            }\r\n        });\r\n\r\n        // Attendre que la couche soit ajout√©e √† la map avant d'initialiser\r\n        layer.on('add', () => {\r\n            // Initialiser le tooltip\r\n            updateTooltipVisibility();\r\n\r\n            // Ajouter le listener sur le zoom\r\n            if (state.map) {\r\n                state.map.on('zoomend', updateTooltipVisibility);\r\n            }\r\n        });\r\n\r\n        // Nettoyer le listener quand la couche est retir√©e\r\n        layer.on('remove', () => {\r\n            if (state.map && layer._geoleafTooltipUpdate) {\r\n                state.map.off('zoomend', layer._geoleafTooltipUpdate);\r\n            }\r\n        });\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf GeoJSON Module - Clustering\r\n * Gestion des strat√©gies de clustering (unified, by-source, etc.)\r\n *\r\n * @module geojson/clustering\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // D√©pendances lazy\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n\r\n    GeoLeaf._GeoJSONClustering = GeoLeaf._GeoJSONClustering || {};\r\n\r\n    /**\r\n     * R√©cup√®re la configuration POI globale.\r\n     *\r\n     * @returns {Object}\r\n     */\r\n    GeoLeaf._GeoJSONClustering.getPoiConfig = function () {\r\n        const Config = GeoLeaf.Config;\r\n        if (Config && typeof Config.get === \"function\") {\r\n            return Config.get(\"poiConfig\") || {};\r\n        }\r\n        return {};\r\n    };\r\n\r\n    /**\r\n     * R√©cup√®re le cluster partag√© du module POI s'il existe.\r\n     *\r\n     * @returns {L.MarkerClusterGroup|null}\r\n     */\r\n    GeoLeaf._GeoJSONClustering.getSharedPOICluster = function () {\r\n        const Log = getLog();\r\n\r\n        try {\r\n            const POI = GeoLeaf.POI;\r\n            if (!POI || typeof POI.getLayer !== \"function\") {\r\n                Log.info(\"[GeoLeaf.GeoJSON] ‚ùå Module POI non disponible ou getLayer() manquant\");\r\n                return null;\r\n            }\r\n\r\n            const poiLayer = POI.getLayer();\r\n\r\n            if (!poiLayer) {\r\n                Log.info(\"[GeoLeaf.GeoJSON] ‚ùå POI.getLayer() retourne null/undefined\");\r\n                return null;\r\n            }\r\n\r\n            Log.info(\"[GeoLeaf.GeoJSON] üîç POI.getLayer() retourn√©:\", {\r\n                hasAddLayer: typeof poiLayer.addLayer === \"function\",\r\n                hasRemoveLayer: typeof poiLayer.removeLayer === \"function\",\r\n                hasFeatureGroup: poiLayer._featureGroup !== undefined,\r\n                hasGroup: poiLayer._group !== undefined,\r\n                hasClusterGroup: poiLayer._markerCluster !== undefined,\r\n                isMarkerClusterGroup: poiLayer.constructor && poiLayer.constructor.name === 'MarkerClusterGroup',\r\n                constructor: poiLayer.constructor ? poiLayer.constructor.name : 'unknown'\r\n            });\r\n\r\n            // V√©rifier si c'est un markerClusterGroup ou LayerGroup valide\r\n            // Accepter tout layer avec addLayer/removeLayer (plus permissif)\r\n            if (poiLayer &&\r\n                typeof poiLayer.addLayer === \"function\" &&\r\n                typeof poiLayer.removeLayer === \"function\") {\r\n                Log.info(\"[GeoLeaf.GeoJSON] ‚úÖ Cluster/Layer POI r√©cup√©r√© avec succ√®s\");\r\n                return poiLayer;\r\n            }\r\n\r\n            Log.warn(\"[GeoLeaf.GeoJSON] ‚ùå POI.getLayer() ne retourne pas un layer valide (checks failed)\");\r\n        } catch (e) {\r\n            Log.error(\"[GeoLeaf.GeoJSON] ‚ùå Impossible de r√©cup√©rer le cluster POI :\", e);\r\n        }\r\n        return null;\r\n    };\r\n\r\n    /**\r\n     * D√©termine la strat√©gie de clustering pour une couche.\r\n     *\r\n     * @param {Object} def - D√©finition de la couche\r\n     * @param {Object} geojsonData - Donn√©es GeoJSON\r\n     * @returns {Object} - { shouldCluster: boolean, useSharedCluster: boolean }\r\n     */\r\n    GeoLeaf._GeoJSONClustering.getClusteringStrategy = function (def, geojsonData) {\r\n        const Log = getLog();\r\n        const poiConfig = GeoLeaf._GeoJSONClustering.getPoiConfig();\r\n\r\n        // Normaliser def.clustering: peut √™tre boolean ou object\r\n        const clusteringConfig = typeof def.clustering === 'object' ? def.clustering : { enabled: def.clustering };\r\n        const isClusteringEnabled = clusteringConfig.enabled === true;\r\n        const isClusteringDisabled = clusteringConfig.enabled === false;\r\n\r\n        // Override explicite dans la couche: clustering.enabled: false (priorit√© absolue)\r\n        if (isClusteringDisabled) {\r\n            return { shouldCluster: false, useSharedCluster: false };\r\n        }\r\n\r\n        // Si clustering d√©sactiv√© globalement ET pas d'override dans la couche\r\n        if (!poiConfig.clustering && !isClusteringEnabled) {\r\n            return { shouldCluster: false, useSharedCluster: false };\r\n        }\r\n\r\n        // V√©rifier si la couche contient des Points\r\n        const hasPoints = geojsonData.features && geojsonData.features.some(f =>\r\n            f.geometry && f.geometry.type && f.geometry.type.includes(\"Point\")\r\n        );\r\n\r\n        if (!hasPoints) {\r\n            return { shouldCluster: false, useSharedCluster: false };\r\n        }\r\n\r\n        // Override explicite dans la couche: clustering.enabled: true\r\n        if (isClusteringEnabled) {\r\n            // Si la couche a des param√®tres de clustering sp√©cifiques, cr√©er un cluster ind√©pendant\r\n            const clusterRadius = clusteringConfig.maxClusterRadius || (typeof def.clusterRadius === \"number\" ? def.clusterRadius : null);\r\n            const disableAtZoom = clusteringConfig.disableClusteringAtZoom || (typeof def.disableClusteringAtZoom === \"number\" ? def.disableClusteringAtZoom : null);\r\n\r\n            const hasCustomClusterParams =\r\n                (clusterRadius !== null && clusterRadius !== (poiConfig.clusterRadius || 80)) ||\r\n                (disableAtZoom !== null && disableAtZoom !== (poiConfig.disableClusteringAtZoom || 18));\r\n\r\n            if (hasCustomClusterParams) {\r\n                return {\r\n                    shouldCluster: true,\r\n                    useSharedCluster: false  // Cluster ind√©pendant avec param√®tres personnalis√©s\r\n                };\r\n            }\r\n\r\n            // Sinon, respecter la strat√©gie globale\r\n            const strategy = poiConfig.clusterStrategy || \"unified\";\r\n            return {\r\n                shouldCluster: true,\r\n                useSharedCluster: strategy === \"unified\"\r\n            };\r\n        }\r\n\r\n        // Lire la strat√©gie configur√©e\r\n        const strategy = poiConfig.clusterStrategy || \"unified\";\r\n\r\n        switch (strategy) {\r\n            case \"unified\":\r\n                // Un seul cluster partag√© pour tous\r\n                return { shouldCluster: true, useSharedCluster: true };\r\n\r\n            case \"by-layer\":\r\n                // Cluster ind√©pendant par couche: respecte clustering.enabled: true/false en config\r\n                // Par d√©faut, pas de cluster SAUF si clustering.enabled === true\r\n                return {\r\n                    shouldCluster: isClusteringEnabled,\r\n                    useSharedCluster: false  // Chaque couche a son propre cluster\r\n                };\r\n\r\n            case \"by-source\":\r\n                // Cluster s√©par√© par source\r\n                const sourceConfig = poiConfig.clusterStrategies?.[\"by-source\"]?.sources || {};\r\n                const shouldClusterGeoJSON = sourceConfig.geojson !== false;\r\n                return {\r\n                    shouldCluster: shouldClusterGeoJSON,\r\n                    useSharedCluster: false\r\n                };\r\n\r\n            case \"json-only\":\r\n                // Cluster uniquement pour JSON, pas GeoJSON\r\n                const jsonOnlyConfig = poiConfig.clusterStrategies?.[\"json-only\"] || {};\r\n                return {\r\n                    shouldCluster: jsonOnlyConfig.geojsonClustering === true,\r\n                    useSharedCluster: false\r\n                };\r\n\r\n            default:\r\n                // Par d√©faut : comportement unifi√© (r√©trocompatibilit√©)\r\n                Log.warn(\"[GeoLeaf.GeoJSON] Strat√©gie de clustering inconnue: \" + strategy + \". Utilisation de 'unified'.\");\r\n                return { shouldCluster: true, useSharedCluster: true };\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Cr√©e un cluster ind√©pendant avec les options sp√©cifi√©es.\r\n     *\r\n     * @param {Object} options - Options de clustering\r\n     * @returns {L.MarkerClusterGroup|null}\r\n     */\r\n    GeoLeaf._GeoJSONClustering.createIndependentCluster = function (options = {}) {\r\n        if (!global.L || !global.L.markerClusterGroup) {\r\n            return null;\r\n        }\r\n\r\n        return global.L.markerClusterGroup({\r\n            maxClusterRadius: options.clusterRadius || 80,\r\n            disableClusteringAtZoom: options.disableClusteringAtZoom || 18,\r\n            animate: options.animate !== undefined ? options.animate : false,\r\n            spiderfyOnMaxZoom: options.spiderfyOnMaxZoom !== undefined ? options.spiderfyOnMaxZoom : false,\r\n            showCoverageOnHover: options.showCoverageOnHover !== undefined ? options.showCoverageOnHover : false,\r\n            zoomToBoundsOnClick: options.zoomToBoundsOnClick !== undefined ? options.zoomToBoundsOnClick : true\r\n        });\r\n    };\r\n\r\n})(window);\r\n","/**\n * GeoLeaf GeoJSON Module - Layer Configuration Manager\n * Gestion de la configuration et des options des couches\n *\n * @module geojson/layer-config-manager\n */\n(function (global) {\n    \"use strict\";\n\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\n\n    // D√©pendances lazy\n    const getShared = () => GeoLeaf._GeoJSONShared;\n    const getState = () => GeoLeaf._GeoJSONShared.state;\n    const getLog = () => (GeoLeaf.Log || console);\n\n    GeoLeaf._GeoJSONLayerConfig = GeoLeaf._GeoJSONLayerConfig || {};\n\n    /**\n     * R√©sout le chemin absolu d'un fichier de donn√©es\n     *\n     * @param {string} dataFile - Nom du fichier de donn√©es\n     * @param {Object} profile - Profil actif\n     * @param {string} [layerDirectory] - Dossier de la couche\n     * @returns {string} Chemin absolu r√©solu\n     */\n    GeoLeaf._GeoJSONLayerConfig.resolveDataFilePath = function (dataFile, profile, layerDirectory) {\n        const Config = GeoLeaf.Config;\n        const dataCfg = Config && Config.get ? Config.get('data') : null;\n        const profilesBasePath = (dataCfg && dataCfg.profilesBasePath) || \"profiles\";\n        const profileId = (dataCfg && dataCfg.activeProfile) || profile.id;\n\n        // Si dataFile commence par ../, on r√©sout relativement au dossier du profil\n        if (dataFile.startsWith('../')) {\n            // dataFile = \"../raw/file.json\" -> \"profiles/tourism/raw/file.json\"\n            const relativePath = dataFile.replace('../', '');\n            return `${profilesBasePath}/${profileId}/${relativePath}`;\n        }\n\n        // Si dataFile commence par /, c'est un chemin absolu\n        if (dataFile.startsWith('/')) {\n            return dataFile;\n        }\n\n        // Sinon, relatif au dossier de la couche (layers/tourism_poi_all/data/file.json)\n        if (layerDirectory) {\n            return `${profilesBasePath}/${profileId}/${layerDirectory}/${dataFile}`;\n        }\n\n        // Fallback: relatif au dossier du profil\n        return `${profilesBasePath}/${profileId}/${dataFile}`;\n    };\n\n    /**\n     * Inf√®re le type de g√©om√©trie d'une couche\n     *\n     * @param {Object} def - D√©finition de la couche\n     * @param {Object} geojsonData - Donn√©es GeoJSON\n     * @returns {string} Type de g√©om√©trie ('point', 'line', 'polygon', 'unknown')\n     */\n    GeoLeaf._GeoJSONLayerConfig.inferGeometryType = function (def, geojsonData) {\n        if (def && typeof def.geometryType === \"string\") return def.geometryType;\n        const features = geojsonData && Array.isArray(geojsonData.features)\n            ? geojsonData.features\n            : [];\n        const first = features.find(f => f && f.geometry && f.geometry.type);\n        if (!first) return \"unknown\";\n        const geometryType = first.geometry.type.toLowerCase();\n        if (geometryType.includes(\"point\")) return \"point\";\n        if (geometryType.includes(\"line\")) return \"line\";\n        if (geometryType.includes(\"polygon\")) return \"polygon\";\n        return \"unknown\";\n    };\n\n    /**\n     * Construit les options Leaflet pour une couche sp√©cifique\n     * Configure pointToLayer, onEachFeature, styles, popups, tooltips et panes\n     *\n     * @param {Object} def - D√©finition de la couche depuis profile.json\n     * @param {string} def.id - ID unique de la couche\n     * @param {number} [def.zIndex] - Index z pour le positionnement\n     * @param {Object} [def.style] - Style par d√©faut de la couche\n     * @param {Array} [def.styleRules] - R√®gles de style conditionnelles\n     * @param {boolean} [def.interactiveShape=false] - Rendre les formes interactives\n     * @param {boolean} [def.showIconsOnMap=false] - Afficher ic√¥nes SVG pour les points\n     * @param {Object} baseOptions - Options de base du module GeoJSON\n     * @returns {Object} Options Leaflet configur√©es (pointToLayer, onEachFeature, style, etc.)\n     * @example\n     * const options = GeoLeaf._GeoJSONLayerConfig.buildLayerOptions(\n     *   { id: 'poi_tourism', zIndex: 100, showIconsOnMap: true },\n     *   { defaultPointStyle: { radius: 8 } }\n     * );\n     */\n    GeoLeaf._GeoJSONLayerConfig.buildLayerOptions = function (def, baseOptions) {\n        const state = getState();\n        const mergedOptions = Object.assign({}, state.options, baseOptions);\n\n        // Style des polygones / lignes\n        if (def.style && typeof def.style === \"object\") {\n            mergedOptions.defaultStyle = Object.assign(\n                {},\n                mergedOptions.defaultStyle,\n                def.style\n            );\n        }\n\n        // R√®gles de style dynamiques (styleRules)\n        if (Array.isArray(def.styleRules) && def.styleRules.length > 0) {\n            mergedOptions.styleRules = def.styleRules;\n        }\n\n        // D√©terminer le param√®tre interactiveShape pour cette couche\n        mergedOptions.interactiveShape = typeof def.interactiveShape === \"boolean\"\n            ? def.interactiveShape\n            : (GeoLeaf.Config && GeoLeaf.Config.get ? GeoLeaf.Config.get('ui.interactiveShapes', false) : false);\n\n        // V√©rifier si on doit afficher les ic√¥nes SVG sur la carte\n        const showIconsOnMap = typeof def.showIconsOnMap === 'boolean' ? def.showIconsOnMap : false;\n\n        // D√©terminer le pane √† utiliser pour cette couche\n        const PaneHelpers = GeoLeaf._GeoJSONShared.PaneHelpers;\n        const paneName = PaneHelpers.getPaneName(def.zIndex);\n\n        // Style des points\n        if (showIconsOnMap) {\n            // Mode IC√îNE : utiliser les ic√¥nes SVG du profil\n            mergedOptions.pointToLayer = function (feature, latlng) {\n                // Convertir la feature en POI pour obtenir les infos de cat√©gorie\n                const PopupTooltip = GeoLeaf._GeoJSONPopupTooltip;\n                const poiData = PopupTooltip ? PopupTooltip.convertFeatureToPOI(feature, def) : null;\n\n                if (poiData) {\n                    // Convertir le format ancien 'fields' au nouveau 'detailPopup'\n                    const popupConfig = def.popup || {};\n                    const convertedPopup = {\n                        enabled: popupConfig.enabled,\n                        // Format ancien: { fields: [...] } ‚Üí Format nouveau: { detailPopup: [...] }\n                        detailPopup: popupConfig.detailPopup || popupConfig.fields || [],\n                        // Aussi supporter l'ancien format de tooltip\n                        detailTooltip: popupConfig.detailTooltip || (popupConfig.tooltip && popupConfig.tooltip.fields) || []\n                    };\n\n                    // Passer toute la configuration de la couche au POI\n                    poiData._layerConfig = {\n                        style: mergedOptions.defaultStyle || {},\n                        popup: convertedPopup,\n                        tooltip: def.tooltip || {},\n                        sidepanelConfig: def.sidepanelConfig || {}\n                    };\n                }\n\n                // Utiliser le syst√®me de markers POI pour cr√©er l'ic√¥ne\n                const markers = GeoLeaf._POIMarkers;\n                if (markers && typeof markers.createMarker === 'function' && poiData) {\n                    const attachEvents = mergedOptions.interactiveShape !== false;\n                    const marker = markers.createMarker(poiData, { attachEvents, pane: paneName });\n                    // S'assurer que le pane est d√©fini sur le marker\n                    if (marker && marker.options) {\n                        marker.options.pane = paneName;\n                    }\n                    return marker;\n                }\n\n                // Fallback sur circleMarker avec pane\n                const pointStyle = Object.assign(\n                    {},\n                    mergedOptions.defaultPointStyle,\n                    def.pointStyle,\n                    { interactive: mergedOptions.interactiveShape, pane: paneName }\n                );\n                return global.L.circleMarker(latlng, pointStyle);\n            };\n        } else if (def.pointStyle && typeof def.pointStyle === \"object\") {\n            // Mode CIRCLE : utiliser circleMarker classique avec pane\n            const pointStyle = Object.assign(\n                {},\n                mergedOptions.defaultPointStyle,\n                def.pointStyle,\n                { interactive: mergedOptions.interactiveShape, pane: paneName }\n            );\n            mergedOptions.pointToLayer = function (feature, latlng) {\n                return global.L.circleMarker(latlng, pointStyle);\n            };\n        }\n\n        // Callback onEachFeature : int√©gration popups + side panel + tooltips\n        const originalOnEachFeature = typeof def.onEachFeature === \"function\" ? def.onEachFeature : null;\n\n        mergedOptions.onEachFeature = function (feature, layer) {\n            // Popup unifi√©\n            const PopupTooltip = GeoLeaf._GeoJSONPopupTooltip;\n            if (PopupTooltip) {\n                PopupTooltip.bindUnifiedPopup(feature, layer, def);\n                PopupTooltip.bindUnifiedTooltip(feature, layer, def);\n            }\n\n            // Callback custom si fourni\n            if (originalOnEachFeature) {\n                originalOnEachFeature(feature, layer);\n            }\n        };\n\n        // Ajouter le pane aux defaultPointStyle pour que le style-resolver l'utilise dans son fallback\n        if (mergedOptions.defaultPointStyle) {\n            mergedOptions.defaultPointStyle = Object.assign({}, mergedOptions.defaultPointStyle, { pane: paneName });\n        } else {\n            mergedOptions.defaultPointStyle = { pane: paneName };\n        }\n\n        // Utiliser le StyleResolver pour construire les options Leaflet finales\n        if (GeoLeaf._GeoJSONStyleResolver && GeoLeaf._GeoJSONStyleResolver.buildLeafletOptions) {\n            return GeoLeaf._GeoJSONStyleResolver.buildLeafletOptions(mergedOptions);\n        }\n\n        return mergedOptions;\n    };\n\n    /**\n     * Charge la l√©gende d'une couche depuis son fichier legends/*.json\n     * R√©sout automatiquement le chemin selon le style actif et la config du profil\n     *\n     * @param {Object} profile - Profil contenant la configuration\n     * @param {string} profile.id - ID du profil (ex: 'tourism')\n     * @param {string} [profile.basePath] - Chemin de base du profil\n     * @param {Object} layerDef - D√©finition de la couche depuis profile.json\n     * @param {string} layerDef.id - ID de la couche\n     * @param {string} [layerDef.style='default'] - Style actif de la couche\n     * @param {Object} [layerDef.legends] - Configuration des l√©gendes\n     * @param {string} [layerDef.legends.directory='legends'] - Dossier des l√©gendes\n     * @param {string} [layerDef.legends.default] - Fichier l√©gende par d√©faut\n     * @returns {void} Charge et affiche la l√©gende via GeoLeaf.Legend.loadLegend()\n     * @example\n     * GeoLeaf._GeoJSONLayerConfig.loadLayerLegend(\n     *   { id: 'tourism', basePath: '../profiles/tourism' },\n     *   { id: 'poi_all', style: 'par_categorie', legends: { directory: 'legends' } }\n     * );\n     */\n    GeoLeaf._GeoJSONLayerConfig.loadLayerLegend = function (profile, layerDef) {\n        const Log = getLog();\n\n        if (!layerDef) {\n            if (Log) Log.debug(\"[GeoLeaf.GeoJSON] Pas de d√©finition de couche\");\n            return;\n        }\n\n        // Pour v3.0, la config de la couche est d√©j√† dans layerDef (enrichie par profile.js)\n        const layerConfig = layerDef.legends ? layerDef : null;\n\n        if (!layerConfig || !layerConfig.legends) {\n            if (Log) Log.debug(\"[GeoLeaf.GeoJSON] Pas de config legends pour cette couche\");\n            return;\n        }\n\n        const legendsConfig = layerConfig.legends;\n        const legendDirectory = legendsConfig.directory || \"legends\";\n\n        // D√©terminer le style actif de la couche\n        const activeStyle = layerDef.style || \"default\";\n\n        // Construire le nom de fichier de la l√©gende\n        let legendFile;\n        if (activeStyle === \"default\" && legendsConfig.default) {\n            legendFile = legendsConfig.default;\n        } else {\n            legendFile = `${activeStyle}.legend.json`;\n        }\n\n        // Construire le chemin de la l√©gende\n        const profileBasePath = profile.basePath || \"./profiles/\" + profile.id;\n        const layerDirectory = layerDef._layerDirectory || \"layers/\" + layerDef.id;\n        const legendPath = `${profileBasePath}/${layerDirectory}/${legendDirectory}/${legendFile}`;\n\n        if (Log) Log.debug(`[GeoLeaf.GeoJSON] Chargement l√©gende pour style \"${activeStyle}\": ${legendPath}`);\n\n        // Charger et afficher la l√©gende directement\n        if (GeoLeaf.Legend && typeof GeoLeaf.Legend.loadLegend === \"function\") {\n            GeoLeaf.Legend.loadLegend(legendPath)\n                .then(success => {\n                    if (success && Log) {\n                        Log.info(`[GeoLeaf.GeoJSON] L√©gende affich√©e pour ${layerDef.id} (style: ${activeStyle})`);\n                    }\n                })\n                .catch(error => {\n                    if (Log) Log.warn(`[GeoLeaf.GeoJSON] Erreur chargement l√©gende: ${error.message}`);\n                });\n        } else {\n            if (Log) Log.warn(\"[GeoLeaf.GeoJSON] Module Legend non disponible\");\n        }\n    };\n\n    /**\n     * Charge le style par d√©faut d'une couche depuis son fichier styles/*.style.json\n     * Fonction asynchrone utilisant fetch() pour charger le JSON\n     *\n     * @async\n     * @param {string} layerId - ID de la couche (utilis√© pour le logging)\n     * @param {Object} layerDef - D√©finition de la couche\n     * @param {Object} layerDef.styles - Configuration des styles\n     * @param {string} layerDef.styles.default - Nom du fichier de style par d√©faut\n     * @param {string} [layerDef.styles.directory='styles'] - Dossier des styles\n     * @param {string} layerDef._profileId - ID du profil (m√©tadonn√©e interne)\n     * @param {string} layerDef._layerDirectory - Dossier de la couche (m√©tadonn√©e interne)\n     * @returns {Promise<Object>} Style charg√© (objet JSON pars√©)\n     * @throws {Error} \"Pas de style par d√©faut d√©fini\" si styles.default manquant\n     * @throws {Error} \"M√©tadonn√©es manquantes\" si _profileId ou _layerDirectory absent\n     * @throws {Error} \"HTTP {status}\" si le fetch √©choue\n     * @example\n     * try {\n     *   const style = await GeoLeaf._GeoJSONLayerConfig.loadDefaultStyle(\n     *     'provincia_ar',\n     *     { styles: { default: 'd√©faut.json' }, _profileId: 'tourism', _layerDirectory: 'layers/provincia_ar' }\n     *   );\n     *   console.log('Style charg√©:', style);\n     * } catch (err) {\n     *   console.error('Erreur chargement style:', err);\n     * }\n     */\n    GeoLeaf._GeoJSONLayerConfig.loadDefaultStyle = async function (layerId, layerDef) {\n        const Log = getLog();\n\n        if (!layerDef.styles || !layerDef.styles.default) {\n            throw new Error(\"Pas de style par d√©faut d√©fini\");\n        }\n\n        const profileId = layerDef._profileId;\n        const layerDirectory = layerDef._layerDirectory;\n\n        if (!profileId || !layerDirectory) {\n            throw new Error(\"M√©tadonn√©es manquantes (profileId ou layerDirectory)\");\n        }\n\n        const Config = global.GeoLeaf.Config;\n        const dataCfg = Config && Config.get ? Config.get('data') : null;\n        const profilesBasePath = (dataCfg && dataCfg.profilesBasePath) || \"profiles\";\n\n        const styleDirectory = layerDef.styles.directory || \"styles\";\n        const styleFile = layerDef.styles.default;\n        const stylePath = `${profilesBasePath}/${profileId}/${layerDirectory}/${styleDirectory}/${styleFile}`;\n\n        Log.debug(\"[GeoLeaf.GeoJSON] Chargement style par d√©faut:\", stylePath);\n\n        const response = await fetch(stylePath);\n        if (!response.ok) {\n            throw new Error(`HTTP ${response.status}`);\n        }\n\n        const styleData = await response.json();\n        Log.debug(\"[GeoLeaf.GeoJSON] Style charg√©:\", styleData);\n        return styleData;\n    };\n\n})(window);\n","/**\r\n * GeoLeaf GeoJSON Module - Feature Validator\r\n * Validation stricte des features GeoJSON selon sch√©ma centralis√©\r\n *\r\n * @module geojson/feature-validator\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // D√©pendances lazy\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n\r\n    GeoLeaf._GeoJSONFeatureValidator = GeoLeaf._GeoJSONFeatureValidator || {};\r\n\r\n    /**\r\n     * Valide une FeatureCollection enti√®re et retourne les features valides\r\n     *\r\n     * @param {Object} collection - FeatureCollection GeoJSON\r\n     * @returns {Object} { validFeatures: Array, errors: Array }\r\n     */\r\n    GeoLeaf._GeoJSONFeatureValidator.validateFeatureCollection = function (collection) {\r\n        const Log = getLog();\r\n        const errors = [];\r\n        const validFeatures = [];\r\n\r\n        if (!collection || typeof collection !== \"object\") {\r\n            Log.warn(\"[GeoLeaf.GeoJSON.Validator] Collection non valide : type invalide\");\r\n            return { validFeatures: [], errors: [{ message: \"Collection non valide\" }] };\r\n        }\r\n\r\n        // Accepter les FeatureCollections ou les arrays de features\r\n        const features = collection.type === \"FeatureCollection\"\r\n            ? collection.features\r\n            : Array.isArray(collection)\r\n                ? collection\r\n                : [collection];\r\n\r\n        if (!Array.isArray(features)) {\r\n            Log.warn(\"[GeoLeaf.GeoJSON.Validator] Pas de features √† valider\");\r\n            return { validFeatures: [], errors: [] };\r\n        }\r\n\r\n        features.forEach((feature, index) => {\r\n            const result = GeoLeaf._GeoJSONFeatureValidator.validateFeature(feature, index);\r\n            if (result.valid) {\r\n                validFeatures.push(feature);\r\n            } else {\r\n                errors.push(...result.errors);\r\n            }\r\n        });\r\n\r\n        return { validFeatures, errors };\r\n    };\r\n\r\n    /**\r\n     * Valide une single feature\r\n     *\r\n     * @param {Object} feature - Feature GeoJSON\r\n     * @param {number} [index] - Index dans la collection (pour logging)\r\n     * @returns {Object} { valid: Boolean, errors: Array }\r\n     */\r\n    GeoLeaf._GeoJSONFeatureValidator.validateFeature = function (feature, index) {\r\n        const Log = getLog();\r\n        const errors = [];\r\n        const featureId = feature?.properties?.id || feature?.id || index || \"unknown\";\r\n\r\n        // Type feature\r\n        if (!feature || feature.type !== \"Feature\") {\r\n            errors.push({\r\n                featureId,\r\n                field: \"type\",\r\n                message: \"Feature doit avoir type='Feature'\",\r\n                severity: \"error\"\r\n            });\r\n            Log.warn(`[GeoLeaf.GeoJSON.Validator] Feature ${featureId}: type invalide`);\r\n            return { valid: false, errors };\r\n        }\r\n\r\n        // G√©om√©trie\r\n        const geomResult = GeoLeaf._GeoJSONFeatureValidator.validateGeometry(\r\n            feature.geometry,\r\n            featureId\r\n        );\r\n        if (!geomResult.valid) {\r\n            errors.push(...geomResult.errors);\r\n        }\r\n\r\n        // Propri√©t√©s\r\n        const propsResult = GeoLeaf._GeoJSONFeatureValidator.validateProperties(\r\n            feature.properties,\r\n            featureId\r\n        );\r\n        if (!propsResult.valid) {\r\n            errors.push(...propsResult.errors);\r\n        }\r\n\r\n        if (errors.length > 0) {\r\n            Log.warn(\r\n                `[GeoLeaf.GeoJSON.Validator] Feature ${featureId} rejet√©e : ${errors.map(e => e.message).join(\"; \")}`\r\n            );\r\n            return { valid: false, errors };\r\n        }\r\n\r\n        return { valid: true, errors: [] };\r\n    };\r\n\r\n    /**\r\n     * Valide la g√©om√©trie d'une feature\r\n     *\r\n     * @param {Object} geometry - Geometry GeoJSON\r\n     * @param {string|number} featureId - Feature identifier (for logging)\r\n     * @returns {Object} { valid: Boolean, errors: Array }\r\n     */\r\n    GeoLeaf._GeoJSONFeatureValidator.validateGeometry = function (geometry, featureId) {\r\n        const errors = [];\r\n        const validTypes = [\"Point\", \"LineString\", \"MultiLineString\", \"Polygon\", \"MultiPolygon\"];\r\n\r\n        if (!geometry || typeof geometry !== \"object\") {\r\n            errors.push({\r\n                featureId,\r\n                field: \"geometry\",\r\n                message: \"geometry requis et doit √™tre un objet\",\r\n                severity: \"error\"\r\n            });\r\n            return { valid: false, errors };\r\n        }\r\n\r\n        if (!geometry.type) {\r\n            errors.push({\r\n                featureId,\r\n                field: \"geometry.type\",\r\n                message: \"geometry.type requis\",\r\n                severity: \"error\"\r\n            });\r\n            return { valid: false, errors };\r\n        }\r\n\r\n        if (!validTypes.includes(geometry.type)) {\r\n            errors.push({\r\n                featureId,\r\n                field: \"geometry.type\",\r\n                message: `Type de g√©om√©trie invalide '${geometry.type}'. Doit √™tre : ${validTypes.join(\", \")}`,\r\n                severity: \"error\"\r\n            });\r\n            return { valid: false, errors };\r\n        }\r\n\r\n        if (!Array.isArray(geometry.coordinates) || geometry.coordinates.length === 0) {\r\n            errors.push({\r\n                featureId,\r\n                field: \"geometry.coordinates\",\r\n                message: \"geometry.coordinates doit √™tre un array non-vide\",\r\n                severity: \"error\"\r\n            });\r\n            return { valid: false, errors };\r\n        }\r\n\r\n        return { valid: errors.length === 0, errors };\r\n    };\r\n\r\n    /**\r\n     * Valide les propri√©t√©s d'une feature\r\n     *\r\n     * @param {Object} properties - Feature properties\r\n     * @param {string|number} featureId - Feature identifier (for logging)\r\n     * @returns {Object} { valid: Boolean, errors: Array }\r\n     */\r\n    GeoLeaf._GeoJSONFeatureValidator.validateProperties = function (properties, featureId) {\r\n        const errors = [];\r\n\r\n        if (!properties || typeof properties !== \"object\") {\r\n            errors.push({\r\n                featureId,\r\n                field: \"properties\",\r\n                message: \"properties requis et doit √™tre un objet\",\r\n                severity: \"error\"\r\n            });\r\n            return { valid: false, errors };\r\n        }\r\n\r\n        // Au moins un nom (name, title, ou autre identifier)\r\n        const hasName = properties.name || properties.title || properties.label;\r\n        if (!hasName) {\r\n            errors.push({\r\n                featureId,\r\n                field: \"properties.name\",\r\n                message: \"properties doit contenir au moins name, title ou label\",\r\n                severity: \"error\"\r\n            });\r\n        }\r\n\r\n        // Validation des types num√©riques\r\n        if (typeof properties.distance_km !== \"undefined\" && typeof properties.distance_km !== \"number\") {\r\n            errors.push({\r\n                featureId,\r\n                field: \"properties.distance_km\",\r\n                message: \"distance_km doit √™tre un nombre\",\r\n                severity: \"warning\"\r\n            });\r\n        }\r\n\r\n        if (typeof properties.distance_km === \"number\" && properties.distance_km < 0) {\r\n            errors.push({\r\n                featureId,\r\n                field: \"properties.distance_km\",\r\n                message: \"distance_km doit √™tre >= 0\",\r\n                severity: \"warning\"\r\n            });\r\n        }\r\n\r\n        if (typeof properties.duration_min !== \"undefined\" && typeof properties.duration_min !== \"number\") {\r\n            errors.push({\r\n                featureId,\r\n                field: \"properties.duration_min\",\r\n                message: \"duration_min doit √™tre un nombre\",\r\n                severity: \"warning\"\r\n            });\r\n        }\r\n\r\n        if (typeof properties.duration_min === \"number\" && properties.duration_min < 0) {\r\n            errors.push({\r\n                featureId,\r\n                field: \"properties.duration_min\",\r\n                message: \"duration_min doit √™tre >= 0\",\r\n                severity: \"warning\"\r\n            });\r\n        }\r\n\r\n        if (typeof properties.rating !== \"undefined\") {\r\n            if (typeof properties.rating !== \"number\") {\r\n                errors.push({\r\n                    featureId,\r\n                    field: \"properties.rating\",\r\n                    message: \"rating doit √™tre un nombre\",\r\n                    severity: \"warning\"\r\n                });\r\n            } else if (properties.rating < 0 || properties.rating > 5) {\r\n                errors.push({\r\n                    featureId,\r\n                    field: \"properties.rating\",\r\n                    message: \"rating doit √™tre entre 0 et 5\",\r\n                    severity: \"warning\"\r\n                });\r\n            }\r\n        }\r\n\r\n        // Validation des couleurs hex\r\n        if (typeof properties.color !== \"undefined\" && typeof properties.color === \"string\") {\r\n            if (!/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(properties.color)) {\r\n                errors.push({\r\n                    featureId,\r\n                    field: \"properties.color\",\r\n                    message: `color invalide '${properties.color}'. Format: #RGB ou #RRGGBB`,\r\n                    severity: \"warning\"\r\n                });\r\n            }\r\n        }\r\n\r\n        // Validation des opacity\r\n        if (typeof properties.opacity !== \"undefined\") {\r\n            if (typeof properties.opacity !== \"number\") {\r\n                errors.push({\r\n                    featureId,\r\n                    field: \"properties.opacity\",\r\n                    message: \"opacity doit √™tre un nombre\",\r\n                    severity: \"warning\"\r\n                });\r\n            } else if (properties.opacity < 0 || properties.opacity > 1) {\r\n                errors.push({\r\n                    featureId,\r\n                    field: \"properties.opacity\",\r\n                    message: \"opacity doit √™tre entre 0 et 1\",\r\n                    severity: \"warning\"\r\n                });\r\n            }\r\n        }\r\n\r\n        // Validation des weight\r\n        if (typeof properties.weight !== \"undefined\") {\r\n            if (typeof properties.weight !== \"number\") {\r\n                errors.push({\r\n                    featureId,\r\n                    field: \"properties.weight\",\r\n                    message: \"weight doit √™tre un nombre\",\r\n                    severity: \"warning\"\r\n                });\r\n            } else if (properties.weight < 0) {\r\n                errors.push({\r\n                    featureId,\r\n                    field: \"properties.weight\",\r\n                    message: \"weight doit √™tre >= 0\",\r\n                    severity: \"warning\"\r\n                });\r\n            }\r\n        }\r\n\r\n        // Validation des URLs\r\n        const urlFields = [\"link\", \"photo\", \"url\"];\r\n        urlFields.forEach(field => {\r\n            if (typeof properties[field] !== \"undefined\" && typeof properties[field] === \"string\") {\r\n                if (!GeoLeaf._GeoJSONFeatureValidator.isValidUrl(properties[field])) {\r\n                    errors.push({\r\n                        featureId,\r\n                        field: `properties.${field}`,\r\n                        message: `${field} n'est pas une URL valide`,\r\n                        severity: \"warning\"\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        // Validation email\r\n        if (typeof properties.email !== \"undefined\" && typeof properties.email === \"string\") {\r\n            if (!GeoLeaf._GeoJSONFeatureValidator.isValidEmail(properties.email)) {\r\n                errors.push({\r\n                    featureId,\r\n                    field: \"properties.email\",\r\n                    message: \"email invalide\",\r\n                    severity: \"warning\"\r\n                });\r\n            }\r\n        }\r\n\r\n        // Validation tags (doit √™tre array de strings)\r\n        if (typeof properties.tags !== \"undefined\") {\r\n            if (!Array.isArray(properties.tags)) {\r\n                errors.push({\r\n                    featureId,\r\n                    field: \"properties.tags\",\r\n                    message: \"tags doit √™tre un array\",\r\n                    severity: \"warning\"\r\n                });\r\n            } else {\r\n                properties.tags.forEach((tag, idx) => {\r\n                    if (typeof tag !== \"string\") {\r\n                        errors.push({\r\n                            featureId,\r\n                            field: `properties.tags[${idx}]`,\r\n                            message: \"tag doit √™tre une string\",\r\n                            severity: \"warning\"\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        // V√©rifier que properties ne contient pas d'objets imbriqu√©s (√† plat obligatoirement)\r\n        Object.entries(properties).forEach(([key, value]) => {\r\n            if (value !== null && typeof value === \"object\" && !Array.isArray(value)) {\r\n                errors.push({\r\n                    featureId,\r\n                    field: `properties.${key}`,\r\n                    message: `Propri√©t√© imbriqu√©e d√©tect√©e. Les propri√©t√©s doivent √™tre plates (strings, nombres, arrays). Objet trouv√©: ${JSON.stringify(value)}`,\r\n                    severity: \"error\"\r\n                });\r\n            }\r\n        });\r\n\r\n        // Les erreurs \"error\" invalident la feature, pas les \"warning\"\r\n        const hasErrors = errors.some(e => e.severity === \"error\");\r\n        return { valid: !hasErrors, errors };\r\n    };\r\n\r\n    /**\r\n     * Valide qu'une string est une URL valide\r\n     *\r\n     * @param {string} url - URL √† valider\r\n     * @returns {Boolean}\r\n     */\r\n    GeoLeaf._GeoJSONFeatureValidator.isValidUrl = function (url) {\r\n        if (typeof url !== \"string\") return false;\r\n        try {\r\n            new URL(url);\r\n            return true;\r\n        } catch {\r\n            // Accepter aussi les URLs relatives\r\n            return /^(https?:\\/\\/|\\/|\\.\\.?\\/)/.test(url);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Valide qu'une string est un email valide\r\n     *\r\n     * @param {string} email - Email √† valider\r\n     * @returns {Boolean}\r\n     */\r\n    GeoLeaf._GeoJSONFeatureValidator.isValidEmail = function (email) {\r\n        if (typeof email !== \"string\") return false;\r\n        return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\r\n    };\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/**\r\n * GeoLeaf GeoJSON Loader - Config Helpers\r\n * Accesseurs de configuration normalis√©e + d√©l√©gu√©s d√©pr√©ci√©s\r\n *\r\n * @module geojson/loader/config-helpers\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    GeoLeaf._GeoJSONLoader = GeoLeaf._GeoJSONLoader || {};\r\n\r\n    /**\r\n     * R√©cup√®re la configuration des champs popup d'une couche.\r\n     *\r\n     * @param {Object} def - D√©finition de la couche (normalis√©e ou originale)\r\n     * @returns {Array|null} - Array de configurations de champs ou null\r\n     */\r\n    GeoLeaf._GeoJSONLoader.getPopupConfig = function(def) {\r\n        if (!def) return null;\r\n\r\n        // Structure normalis√©e (apr√®s passage dans loadProfile)\r\n        if (def.popupFields && Array.isArray(def.popupFields)) {\r\n            return def.popupFields;\r\n        }\r\n\r\n        // Structure originale (depuis config JSON)\r\n        if (def.popup && def.popup.fields && Array.isArray(def.popup.fields)) {\r\n            return def.popup.fields;\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    /**\r\n     * R√©cup√®re la configuration des champs tooltip d'une couche.\r\n     *\r\n     * @param {Object} def - D√©finition de la couche (normalis√©e ou originale)\r\n     * @returns {Array|null} - Array de configurations de champs ou null\r\n     */\r\n    GeoLeaf._GeoJSONLoader.getTooltipConfig = function(def) {\r\n        if (!def) return null;\r\n\r\n        // Structure normalis√©e (apr√®s passage dans loadProfile)\r\n        if (def.tooltipFields && Array.isArray(def.tooltipFields)) {\r\n            return def.tooltipFields;\r\n        }\r\n\r\n        // Structure originale (depuis config JSON)\r\n        if (def.tooltip && def.tooltip.fields && Array.isArray(def.tooltip.fields)) {\r\n            return def.tooltip.fields;\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    /**\r\n     * R√©cup√®re la configuration des champs sidepanel d'une couche.\r\n     *\r\n     * @param {Object} def - D√©finition de la couche (normalis√©e ou originale)\r\n     * @returns {Array|null} - Array de configurations de champs ou null\r\n     */\r\n    GeoLeaf._GeoJSONLoader.getSidepanelConfig = function(def) {\r\n        if (!def) return null;\r\n\r\n        // Structure normalis√©e (apr√®s passage dans loadProfile)\r\n        if (def.sidepanelFields && Array.isArray(def.sidepanelFields)) {\r\n            return def.sidepanelFields;\r\n        }\r\n\r\n        // Structure originale (depuis config JSON)\r\n        if (def.sidepanel && def.sidepanel.detailLayout && Array.isArray(def.sidepanel.detailLayout)) {\r\n            return def.sidepanel.detailLayout;\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    // ‚îÄ‚îÄ‚îÄ D√©l√©gu√©s d√©pr√©ci√©s ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\r\n\r\n    /**\r\n     * @deprecated Utiliser GeoLeaf._GeoJSONLayerConfig.resolveDataFilePath()\r\n     */\r\n    GeoLeaf._GeoJSONLoader._resolveDataFilePath = function (dataFile, profile, layerDirectory) {\r\n        return GeoLeaf._GeoJSONLayerConfig.resolveDataFilePath(dataFile, profile, layerDirectory);\r\n    };\r\n\r\n    /**\r\n     * @deprecated Utiliser GeoLeaf._GeoJSONLayerConfig.inferGeometryType()\r\n     */\r\n    GeoLeaf._GeoJSONLoader._inferGeometryType = function (def, geojsonData) {\r\n        return GeoLeaf._GeoJSONLayerConfig.inferGeometryType(def, geojsonData);\r\n    };\r\n\r\n    /**\r\n     * @deprecated Utiliser GeoLeaf._GeoJSONLayerConfig.buildLayerOptions()\r\n     */\r\n    GeoLeaf._GeoJSONLoader._buildLayerOptions = function (def, baseOptions) {\r\n        return GeoLeaf._GeoJSONLayerConfig.buildLayerOptions(def, baseOptions);\r\n    };\r\n\r\n    /**\r\n     * @deprecated Utiliser GeoLeaf._GeoJSONLayerConfig.loadLayerLegend()\r\n     */\r\n    GeoLeaf._GeoJSONLoader._loadLayerLegend = function (profile, layerDef) {\r\n        return GeoLeaf._GeoJSONLayerConfig.loadLayerLegend(profile, layerDef);\r\n    };\r\n\r\n    /**\r\n     * @deprecated Utiliser GeoLeaf._GeoJSONLayerConfig.loadDefaultStyle()\r\n     */\r\n    GeoLeaf._GeoJSONLoader._loadDefaultStyle = function (layerId, layerDef) {\r\n        return GeoLeaf._GeoJSONLayerConfig.loadDefaultStyle(layerId, layerDef);\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf GeoJSON Loader - Data\r\n * Chargement direct de donn√©es GeoJSON (URL ou objet JS)\r\n *\r\n * @module geojson/loader/data\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // D√©pendances lazy\r\n    const getState = () => GeoLeaf._GeoJSONShared.state;\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n\r\n    GeoLeaf._GeoJSONLoader = GeoLeaf._GeoJSONLoader || {};\r\n\r\n    /**\r\n     * Charge un fichier GeoJSON via une URL.\r\n     *\r\n     * @param {string} url - URL du fichier GeoJSON.\r\n     * @param {Object} [options] - Options additionnelles, fusionn√©es avec celles du module.\r\n     * @returns {Promise<L.GeoJSON|null>}\r\n     */\r\n    GeoLeaf._GeoJSONLoader.loadUrl = async function (url, options = {}) {\r\n        const state = getState();\r\n        const Log = getLog();\r\n\r\n        if (!url) {\r\n            Log.warn(\"[GeoLeaf.GeoJSON] URL GeoJSON manquante.\");\r\n            return state.geoJsonLayer;\r\n        }\r\n\r\n        if (!state.map) {\r\n            Log.error(\"[GeoLeaf.GeoJSON] Module non initialis√©. Appelle GeoLeaf.GeoJSON.init() avant loadUrl().\");\r\n            return null;\r\n        }\r\n\r\n        const mergedOptions = GeoLeaf.Utils && GeoLeaf.Utils.mergeOptions\r\n            ? GeoLeaf.Utils.mergeOptions(state.options, options)\r\n            : Object.assign({}, state.options, options);\r\n\r\n        try {\r\n            // Sprint 3.3: Use unified FetchHelper for GeoJSON loading\r\n            const FetchHelper = GeoLeaf.Utils?.FetchHelper;\r\n\r\n            let data;\r\n            if (FetchHelper) {\r\n                data = await FetchHelper.get(url, {\r\n                    timeout: 20000, // GeoJSON files can be large\r\n                    retries: 2\r\n                });\r\n            } else {\r\n                // Fallback to raw fetch\r\n                const response = await fetch(url);\r\n                if (!response.ok) {\r\n                    throw new Error(\"HTTP \" + response.status + \" pour \" + url);\r\n                }\r\n                data = await response.json();\r\n            }\r\n\r\n            GeoLeaf._GeoJSONLoader.addData(data, mergedOptions);\r\n            return state.geoJsonLayer;\r\n        } catch (err) {\r\n            Log.error(\"[GeoLeaf.GeoJSON] Erreur lors du chargement GeoJSON :\", err);\r\n            return state.geoJsonLayer;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Ajoute des donn√©es GeoJSON pass√©es directement en objet JS.\r\n     * Valide les features selon le sch√©ma strict avant ajout.\r\n     *\r\n     * @param {Object} geojsonData - Objet GeoJSON valide.\r\n     * @param {Object} [options] - Options additionnelles, fusionn√©es avec celles du module.\r\n     */\r\n    GeoLeaf._GeoJSONLoader.addData = function (geojsonData, options = {}) {\r\n        const state = getState();\r\n        const Log = getLog();\r\n\r\n        if (!geojsonData) {\r\n            Log.warn(\"[GeoLeaf.GeoJSON] Aucune donn√©e GeoJSON fournie √† addData().\");\r\n            return;\r\n        }\r\n\r\n        if (!state.map || !state.geoJsonLayer) {\r\n            Log.error(\"[GeoLeaf.GeoJSON] Module non initialis√©. Appelle GeoLeaf.GeoJSON.init() avant addData().\");\r\n            return;\r\n        }\r\n\r\n        const mergedOptions = GeoLeaf.Utils && GeoLeaf.Utils.mergeOptions\r\n            ? GeoLeaf.Utils.mergeOptions(state.options, options)\r\n            : Object.assign({}, state.options, options);\r\n\r\n        // Met √† jour les options de la couche si besoin\r\n        if (GeoLeaf._GeoJSONStyleResolver && GeoLeaf._GeoJSONStyleResolver.buildLeafletOptions) {\r\n            state.geoJsonLayer.options = GeoLeaf._GeoJSONStyleResolver.buildLeafletOptions(mergedOptions);\r\n        }\r\n\r\n        // Validation stricte des features GeoJSON\r\n        let dataToAdd = geojsonData;\r\n        if (GeoLeaf._GeoJSONFeatureValidator && typeof GeoLeaf._GeoJSONFeatureValidator.validateFeatureCollection === \"function\") {\r\n            const validationResult = GeoLeaf._GeoJSONFeatureValidator.validateFeatureCollection(geojsonData);\r\n\r\n            if (validationResult.errors.length > 0) {\r\n                Log.warn(\r\n                    `[GeoLeaf.GeoJSON] Validation: ${validationResult.errors.length} feature(s) rejet√©e(s), ${validationResult.validFeatures.length} accept√©e(s)`\r\n                );\r\n            }\r\n\r\n            // Ajouter uniquement les features valides\r\n            if (validationResult.validFeatures.length > 0) {\r\n                if (geojsonData.type === \"FeatureCollection\") {\r\n                    dataToAdd = {\r\n                        type: \"FeatureCollection\",\r\n                        features: validationResult.validFeatures\r\n                    };\r\n                } else {\r\n                    dataToAdd = validationResult.validFeatures.length === 1\r\n                        ? validationResult.validFeatures[0]\r\n                        : { type: \"FeatureCollection\", features: validationResult.validFeatures };\r\n                }\r\n            } else {\r\n                Log.warn(\"[GeoLeaf.GeoJSON] Aucune feature valide √† ajouter apr√®s validation\");\r\n                return;\r\n            }\r\n        }\r\n\r\n        // Ajoute les donn√©es valid√©es\r\n        state.geoJsonLayer.addData(dataToAdd);\r\n\r\n        // Adapter la vue sur les donn√©es si demand√©\r\n        if (mergedOptions.fitBoundsOnLoad && state.layerGroup) {\r\n            const bounds = state.layerGroup.getBounds();\r\n            if (bounds.isValid()) {\r\n                const fitOptions = {};\r\n                if (typeof mergedOptions.maxZoomOnFit === \"number\") {\r\n                    fitOptions.maxZoom = mergedOptions.maxZoomOnFit;\r\n                }\r\n                state.map.fitBounds(bounds, fitOptions);\r\n            }\r\n        }\r\n\r\n        // √âv√©nement custom pour l'√©cosyst√®me GeoLeaf\r\n        try {\r\n            state.map.fire(\"geoleaf:geojson:loaded\", {\r\n                data: geojsonData,\r\n                layer: state.geoJsonLayer\r\n            });\r\n        } catch (e) {\r\n            // On ne bloque jamais si fire √©choue\r\n        }\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf GeoJSON Loader - Single Layer\r\n * Pipeline complet de chargement d'une couche individuelle\r\n *\r\n * @module geojson/loader/single-layer\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // D√©pendances lazy\r\n    const getState = () => GeoLeaf._GeoJSONShared.state;\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n\r\n    GeoLeaf._GeoJSONLoader = GeoLeaf._GeoJSONLoader || {};\r\n\r\n    /**\r\n     * Charge une couche GeoJSON individuelle.\r\n     *\r\n     * @param {string} layerId - ID unique de la couche\r\n     * @param {string} layerLabel - Libell√© de la couche\r\n     * @param {Object} def - D√©finition de la couche depuis le profil\r\n     * @param {Object} baseOptions - Options de base\r\n     * @returns {Promise<Object>} - M√©tadonn√©es de la couche charg√©e\r\n     * @private\r\n     */\r\n    GeoLeaf._GeoJSONLoader._loadSingleLayer = function (layerId, layerLabel, def, baseOptions) {\r\n        const state = getState();\r\n        const Log = getLog();\r\n\r\n        const fromCache = !!def._cachedData;\r\n        const dataPromise = fromCache\r\n            ? Promise.resolve(def._cachedData)\r\n            : fetch(def.url).then((response) => {\r\n                if (!response.ok) {\r\n                    throw new Error(\"HTTP \" + response.status + \" pour \" + def.url);\r\n                }\r\n\r\n                if (def.type === \"gpx\" || def.url.endsWith(\".gpx\")) {\r\n                    return response.text();\r\n                }\r\n\r\n                return response.json();\r\n            });\r\n\r\n        return dataPromise\r\n            .then((rawData) => {\r\n                if (fromCache) {\r\n                    delete def._cachedData;\r\n                }\r\n\r\n                const DataConverter = GeoLeaf._DataConverter;\r\n                let geojsonData;\r\n\r\n                if (def.type === \"gpx\" || def.url.endsWith(\".gpx\")) {\r\n                    if (typeof rawData === \"string\") {\r\n                        geojsonData = DataConverter && typeof DataConverter.convertGpxToGeoJSON === \"function\"\r\n                            ? DataConverter.convertGpxToGeoJSON(rawData)\r\n                            : { type: \"FeatureCollection\", features: [] };\r\n                    } else {\r\n                        Log.warn(\"[GeoLeaf.GeoJSON._loadSingleLayer] GPX n'est pas un string\", layerId);\r\n                        geojsonData = { type: \"FeatureCollection\", features: [] };\r\n                    }\r\n                } else {\r\n                    geojsonData = DataConverter ? DataConverter.autoConvert(rawData) : rawData;\r\n                }\r\n\r\n                Log.debug(\"[GeoLeaf.GeoJSON._loadSingleLayer] Donn√©es converties\", {\r\n                    layerId: layerId,\r\n                    type: def.type,\r\n                    features: geojsonData.features ? geojsonData.features.length : 0,\r\n                    source: fromCache ? \"cache\" : \"network\"\r\n                });\r\n\r\n                const PaneHelpers = GeoLeaf._GeoJSONShared.PaneHelpers;\r\n                const PaneConfig = GeoLeaf._GeoJSONShared.PANE_CONFIG;\r\n\r\n                const layerOptions = GeoLeaf._GeoJSONLoader._buildLayerOptions(def, baseOptions);\r\n                layerOptions.pane = PaneHelpers.getPaneName(def.zIndex);\r\n                const leafletLayer = global.L.geoJSON(geojsonData, layerOptions);\r\n\r\n                // D√©terminer la strat√©gie de clustering\r\n                const ClusteringModule = GeoLeaf._GeoJSONClustering;\r\n                const clusterStrategy = ClusteringModule\r\n                    ? ClusteringModule.getClusteringStrategy(def, geojsonData)\r\n                    : { shouldCluster: false, useSharedCluster: false };\r\n\r\n                let clusterGroup = null;\r\n                let useSharedCluster = false;\r\n\r\n                if (clusterStrategy.shouldCluster) {\r\n                    if (clusterStrategy.useSharedCluster) {\r\n                        // Utiliser le cluster POI partag√©\r\n                        Log.info(\"[GeoLeaf.GeoJSON] üîÑ Tentative r√©cup√©ration cluster POI partag√© pour:\", layerId);\r\n                        let poiCluster = ClusteringModule ? ClusteringModule.getSharedPOICluster() : null;\r\n\r\n                        if (poiCluster) {\r\n                            clusterGroup = poiCluster;\r\n                            clusterGroup.addLayer(leafletLayer);\r\n                            useSharedCluster = true;\r\n                            Log.info(\"[GeoLeaf.GeoJSON] ‚úÖ Couche ajout√©e au cluster POI partag√© (strat√©gie: unified) :\", layerId);\r\n                        } else {\r\n                            // Le cluster POI n'est pas encore cr√©√©, attendre un peu et r√©essayer\r\n                            Log.debug(\"[GeoLeaf.GeoJSON] Cluster POI non disponible imm√©diatement, tentative apr√®s d√©lai :\", layerId);\r\n\r\n                            // Stocker temporairement sans cluster\r\n                            const tempLayerData = {\r\n                                id: layerId,\r\n                                label: layerLabel,\r\n                                layer: leafletLayer,\r\n                                visible: true,\r\n                                config: def,\r\n                                clusterGroup: null,\r\n                                useSharedCluster: false,\r\n                                pendingSharedCluster: true\r\n                            };\r\n\r\n                            state.layers.set(layerId, tempLayerData);\r\n\r\n                            // R√©essayer apr√®s un court d√©lai\r\n                            setTimeout(() => {\r\n                                poiCluster = ClusteringModule ? ClusteringModule.getSharedPOICluster() : null;\r\n\r\n                                if (poiCluster) {\r\n                                    poiCluster.addLayer(leafletLayer);\r\n                                    tempLayerData.clusterGroup = poiCluster;\r\n                                    tempLayerData.useSharedCluster = true;\r\n                                    tempLayerData.pendingSharedCluster = false;\r\n                                    Log.debug(\"[GeoLeaf.GeoJSON] Couche ajout√©e au cluster POI partag√© (apr√®s d√©lai) :\", layerId);\r\n                                } else {\r\n                                    Log.warn(\"[GeoLeaf.GeoJSON] Cluster POI toujours non disponible, cr√©ation cluster ind√©pendant :\", layerId);\r\n                                    if (global.L.markerClusterGroup) {\r\n                                        const independentCluster = global.L.markerClusterGroup({\r\n                                            maxClusterRadius: def.clusterRadius || 80,\r\n                                            disableClusteringAtZoom: def.disableClusteringAtZoom || 18,\r\n                                            animate: false,\r\n                                            showCoverageOnHover: false\r\n                                        });\r\n\r\n                                        // Forcer le pane sur tous les markers du cluster\r\n                                        independentCluster.on('layeradd', function(e) {\r\n                                            PaneHelpers.applyPaneToLayer(e.layer, def.zIndex || 0);\r\n                                        });\r\n\r\n                                        independentCluster.addLayer(leafletLayer);\r\n                                        tempLayerData.clusterGroup = independentCluster;\r\n                                        tempLayerData.useSharedCluster = false;\r\n                                        tempLayerData.pendingSharedCluster = false;\r\n\r\n                                        if (tempLayerData.visible) {\r\n                                            state.map.addLayer(independentCluster);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }, 500);\r\n\r\n                            return {\r\n                                id: layerId,\r\n                                label: layerLabel,\r\n                                featureCount: leafletLayer.getLayers().length\r\n                            };\r\n                        }\r\n                    } else {\r\n                        // Cr√©er un cluster ind√©pendant (by-source)\r\n                        if (global.L.markerClusterGroup) {\r\n                            clusterGroup = global.L.markerClusterGroup({\r\n                                maxClusterRadius: def.clusterRadius || 80,\r\n                                disableClusteringAtZoom: def.disableClusteringAtZoom || 18,\r\n                                animate: false,\r\n                                spiderfyOnMaxZoom: false,\r\n                                showCoverageOnHover: false,\r\n                                zoomToBoundsOnClick: true\r\n                            });\r\n\r\n                            // Forcer le pane sur tous les markers du cluster\r\n                            const paneName = PaneHelpers.getPaneName(def.zIndex);\r\n                            clusterGroup.on('layeradd', function(e) {\r\n                                PaneHelpers.applyPaneToLayer(e.layer, def.zIndex || 0);\r\n                            });\r\n\r\n                            clusterGroup.addLayer(leafletLayer);\r\n                            Log.debug(\"[GeoLeaf.GeoJSON] Couche avec cluster ind√©pendant (strat√©gie: by-source) :\", layerId);\r\n                        }\r\n                    }\r\n                } else {\r\n                    Log.debug(\"[GeoLeaf.GeoJSON] Couche sans clustering :\", layerId);\r\n                }\r\n\r\n                // Stocker la couche\r\n                const inferredGeometry = GeoLeaf._GeoJSONLoader._inferGeometryType(def, geojsonData);\r\n\r\n                // Calculer le zIndex si non d√©fini\r\n                let zIndex = def.zIndex;\r\n                if (typeof zIndex !== 'number') {\r\n                    // Calculer automatiquement bas√© sur l'ordre d'apparition\r\n                    const allLayerIds = Array.from(state.layers.keys());\r\n                    zIndex = Math.max(PaneConfig.MIN_LAYER_ZINDEX, PaneConfig.MAX_LAYER_ZINDEX - allLayerIds.length);\r\n                    Log.debug(`[GeoLeaf.GeoJSON] zIndex auto-assign√© pour ${layerId}: ${zIndex}`);\r\n                } else {\r\n                    // Validation et clamping 0-99\r\n                    const validatedZIndex = PaneHelpers.validateZIndex(zIndex);\r\n                    if (validatedZIndex !== def.zIndex) {\r\n                        Log.warn(`[GeoLeaf.GeoJSON] zIndex ${def.zIndex} clamped to ${validatedZIndex} pour ${layerId}`);\r\n                    }\r\n                    zIndex = validatedZIndex;\r\n                }\r\n                def.zIndex = zIndex;\r\n\r\n                const Config = GeoLeaf.Config;\r\n                const dataCfg = Config && Config.get ? Config.get('data') : null;\r\n                const profilesBasePath = (dataCfg && dataCfg.profilesBasePath) || \"profiles\";\r\n                const layerBasePath = `${profilesBasePath}/${def._profileId}/${def._layerDirectory}`;\r\n\r\n                const layerData = {\r\n                    id: layerId,\r\n                    label: layerLabel,\r\n                    layer: leafletLayer,\r\n                    visible: true,\r\n                    config: def,\r\n                    clusterGroup: clusterGroup,\r\n                    legendsConfig: def.legends,\r\n                    basePath: layerBasePath,\r\n                    useSharedCluster: useSharedCluster,\r\n                    geojson: geojsonData,\r\n                    features: Array.isArray(geojsonData.features) ? geojsonData.features : [],\r\n                    geometryType: def.geometryType || inferredGeometry\r\n                };\r\n\r\n                // Initialiser les m√©tadonn√©es de visibilit√© AVANT d'ajouter √† la map\r\n                layerData._visibility = {\r\n                    current: false,\r\n                    logicalState: false,\r\n                    source: 'system',\r\n                    userOverride: false,\r\n                    themeOverride: false,\r\n                    themeDesired: null,\r\n                    zoomConstrained: false\r\n                };\r\n\r\n                state.layers.set(layerId, layerData);\r\n\r\n                // Mettre en cache pour l'UI (filtre, recherche)\r\n                state.featureCache.set(layerId, {\r\n                    features: layerData.features,\r\n                    geometryType: layerData.geometryType\r\n                });\r\n\r\n                // Mettre en cache les donn√©es GeoJSON pour les chargements suivants\r\n                if (GeoLeaf.ThemeCache && typeof GeoLeaf.ThemeCache.store === 'function') {\r\n                    const profileId = def._profileId || (GeoLeaf.Config && GeoLeaf.Config.getActiveProfileId ? GeoLeaf.Config.getActiveProfileId() : null);\r\n                    GeoLeaf.ThemeCache.store(layerId, profileId, geojsonData, { contentLength: def.contentLength });\r\n                }\r\n\r\n                // Appliquer imm√©diatement les seuils de zoom pour cette couche\r\n                if (GeoLeaf._GeoJSONLayerManager) {\r\n                    GeoLeaf._GeoJSONLayerManager.updateLayerVisibilityByZoom();\r\n                }\r\n\r\n                // NE PAS ajouter automatiquement √† la carte au chargement\r\n                // Les th√®mes contr√¥leront la visibilit√© des couches\r\n                layerData.visible = false;\r\n\r\n                // FitBounds UNIQUEMENT si pas de syst√®me de th√®mes\r\n                const shouldFitBounds = def.fitBoundsOnLoad && !GeoLeaf.ThemeSelector;\r\n                if (shouldFitBounds && leafletLayer.getBounds().isValid()) {\r\n                    const fitOptions = {};\r\n                    if (typeof def.maxZoomOnFit === \"number\") {\r\n                        fitOptions.maxZoom = def.maxZoomOnFit;\r\n                    }\r\n                    state.map.fitBounds(leafletLayer.getBounds(), fitOptions);\r\n                }\r\n\r\n                // Charger le style par d√©faut si styles.default est d√©fini\r\n                if (def.styles && def.styles.default) {\r\n                    GeoLeaf._GeoJSONLoader._loadDefaultStyle(layerId, def)\r\n                        .then((styleData) => {\r\n                            if (styleData && GeoLeaf._GeoJSONLayerManager) {\r\n                                Log.debug(\"[GeoLeaf.GeoJSON] Application du style par d√©faut pour:\", layerId);\r\n\r\n                                // Stocker currentStyle dans layerData pour les labels\r\n                                const layerDataForStyle = state.layers.get(layerId);\r\n                                if (layerDataForStyle) {\r\n                                    layerDataForStyle.currentStyle = styleData;\r\n                                    Log.debug(\"[GeoLeaf.GeoJSON] currentStyle stock√© pour:\", layerId);\r\n                                }\r\n\r\n                                GeoLeaf._GeoJSONLayerManager.setLayerStyle(layerId, styleData);\r\n\r\n                                // Initialiser les labels selon le style\r\n                                if (GeoLeaf.Labels && typeof GeoLeaf.Labels.initializeLayerLabels === 'function') {\r\n                                    GeoLeaf.Labels.initializeLayerLabels(layerId);\r\n                                }\r\n\r\n                                // Synchroniser le bouton de label maintenant que currentStyle est d√©fini\r\n                                if (GeoLeaf._LabelButtonManager) {\r\n                                    GeoLeaf._LabelButtonManager.syncImmediate(layerId);\r\n                                }\r\n                            }\r\n                        })\r\n                        .catch((err) => {\r\n                            Log.warn(\"[GeoLeaf.GeoJSON] Erreur chargement style par d√©faut:\", layerId, err.message);\r\n                        });\r\n                } else {\r\n                    // Pas de style par d√©faut: initialiser les labels depuis la config legacy si pr√©sents\r\n                    if (def.labels && def.labels.enabled && GeoLeaf.Labels && typeof GeoLeaf.Labels.initializeLayerLabels === 'function') {\r\n                        GeoLeaf.Labels.initializeLayerLabels(layerId);\r\n                    }\r\n\r\n                    // Synchroniser le bouton de label\r\n                    if (GeoLeaf._LabelButtonManager) {\r\n                        GeoLeaf._LabelButtonManager.syncImmediate(layerId);\r\n                    }\r\n                }\r\n                Log.debug(\"[GeoLeaf.GeoJSON] Couche charg√©e avec succ√®s :\", layerId, \"(\" + leafletLayer.getLayers().length + \" features)\");\r\n\r\n                return {\r\n                    id: layerId,\r\n                    label: layerLabel,\r\n                    featureCount: leafletLayer.getLayers().length\r\n                };\r\n            });\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf GeoJSON Loader - Profile\r\n * Orchestration du chargement par profil, batch loading, LayerManager population\r\n *\r\n * @module geojson/loader/profile\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    // D√©pendances lazy\r\n    const getState = () => GeoLeaf._GeoJSONShared.state;\r\n    const getLog = () => (GeoLeaf.Log || console);\r\n\r\n    GeoLeaf._GeoJSONLoader = GeoLeaf._GeoJSONLoader || {};\r\n\r\n    /**\r\n     * Charge automatiquement les couches GeoJSON d√©clar√©es dans le profil actif.\r\n     *\r\n     * @param {Object} [options] - Options suppl√©mentaires globales appliqu√©es √† toutes les couches.\r\n     * @returns {Promise<Array<Object>>} - Tableau des couches effectivement charg√©es avec m√©tadonn√©es.\r\n     */\r\n    GeoLeaf._GeoJSONLoader.loadFromActiveProfile = function (options = {}) {\r\n        const state = getState();\r\n        const Log = getLog();\r\n        const Config = GeoLeaf.Config;\r\n\r\n\r\n\r\n        if (!Config || typeof Config.getActiveProfile !== \"function\") {\r\n\r\n            Log.warn(\r\n                \"[GeoLeaf.GeoJSON] Module Config ou Config.getActiveProfile() non disponible ; chargement GeoJSON par profil impossible.\"\r\n            );\r\n            return Promise.resolve([]);\r\n        }\r\n\r\n        const profile = Config.getActiveProfile();\r\n\r\n\r\n        if (!profile || typeof profile !== \"object\") {\r\n\r\n            Log.warn(\"[GeoLeaf.GeoJSON] Aucun profil actif ou profil invalide ; aucun GeoJSON charg√©.\");\r\n            return Promise.resolve([]);\r\n        }\r\n\r\n        let layersDef = [];\r\n\r\n        // Format 1 : profil.geojsonLayers = [...]\r\n        if (Array.isArray(profile.geojsonLayers)) {\r\n            layersDef = profile.geojsonLayers;\r\n        }\r\n        // Format 2 : profil.geojson.layers = [...]\r\n        else if (profile.geojson && Array.isArray(profile.geojson.layers)) {\r\n            layersDef = profile.geojson.layers;\r\n        }\r\n        // Format 3 : profil.layers = [...] (nouveau mod√®le Full Layer)\r\n        else if (Array.isArray(profile.layers)) {\r\n            layersDef = profile.layers;\r\n        }\r\n        // Format 4 : v3.0 avec Config.getActiveProfileLayersConfig() (nouvelles couches modulaires)\r\n        else if (Config.Profile && typeof Config.Profile.getActiveProfileLayersConfig === \"function\") {\r\n            const layersConfig = Config.Profile.getActiveProfileLayersConfig();\r\n            if (Array.isArray(layersConfig)) {\r\n                layersDef = layersConfig;\r\n                Log.info(\"[GeoLeaf.GeoJSON] Utilisation du syst√®me v3.0 - \" + layersConfig.length + \" couches d√©tect√©es\");\r\n            }\r\n        }\r\n\r\n        if (!layersDef.length) {\r\n            Log.info(\r\n                \"[GeoLeaf.GeoJSON] Aucun bloc geojsonLayers / geojson.layers / layers d√©fini dans le profil actif ; rien √† charger.\"\r\n            );\r\n            return Promise.resolve([]);\r\n        }\r\n\r\n        // Limite de s√©curit√© : max 50 couches (augment√©e pour profils riches)\r\n        if (layersDef.length > 50) {\r\n            Log.warn(\r\n                \"[GeoLeaf.GeoJSON] Beaucoup de couches GeoJSON d√©tect√©es (\" + layersDef.length + \"). Cela peut affecter les performances.\"\r\n            );\r\n        } else if (layersDef.length > 20) {\r\n            Log.info(\r\n                \"[GeoLeaf.GeoJSON] \" + layersDef.length + \" couches GeoJSON d√©tect√©es. Profil riche d√©tect√©.\"\r\n            );\r\n        }\r\n\r\n        const baseOptions = options || {};\r\n        const batchSize = 3;\r\n        const batchDelay = 200;\r\n        const self = this;\r\n\r\n        const tasks = layersDef.map((def, index) => async () => {\r\n            if (!def || typeof def !== \"object\") {\r\n                Log.warn(\"[GeoLeaf.GeoJSON] Descripteur GeoJSON de profil invalide, ignor√© :\", { index, def });\r\n                return null;\r\n            }\r\n\r\n            if (typeof def.active === \"boolean\" && def.active === false) {\r\n                Log.debug(\"[GeoLeaf.GeoJSON] Couche d√©sactiv√©e (active: false), ignor√©e :\", def.id || \"(sans ID)\");\r\n                return null;\r\n            }\r\n\r\n            const layerDirectory = def._layerDirectory || null;\r\n            const layerUrl = def.url || (def.dataFile ? self._resolveDataFilePath(def.dataFile, profile, layerDirectory) : null);\r\n\r\n            if (!layerUrl) {\r\n                Log.warn(\"[GeoLeaf.GeoJSON] Descripteur GeoJSON sans URL ou dataFile, ignor√© :\", {\r\n                    index,\r\n                    id: def.id,\r\n                    label: def.label\r\n                });\r\n                return null;\r\n            }\r\n\r\n            const normalizedDef = { ...def, url: layerUrl };\r\n            normalizedDef._profileId = profile.id;\r\n            normalizedDef._layerDirectory = layerDirectory;\r\n\r\n            // Normalisation unifi√©e des configurations\r\n            if (def.popup && typeof def.popup === 'object') {\r\n                normalizedDef.showPopup = def.popup.enabled !== false;\r\n                if (def.popup.fields && Array.isArray(def.popup.fields)) {\r\n                    normalizedDef.popupFields = def.popup.fields;\r\n                }\r\n                normalizedDef.popup = def.popup;\r\n            }\r\n\r\n            if (def.tooltip && typeof def.tooltip === 'object') {\r\n                normalizedDef.showTooltip = def.tooltip.enabled !== false;\r\n                if (def.tooltip.fields && Array.isArray(def.tooltip.fields)) {\r\n                    normalizedDef.tooltipFields = def.tooltip.fields;\r\n                }\r\n                if (def.tooltip.mode) {\r\n                    normalizedDef.tooltipMode = def.tooltip.mode;\r\n                }\r\n                normalizedDef.tooltip = def.tooltip;\r\n            }\r\n\r\n            if (def.sidepanel && typeof def.sidepanel === 'object') {\r\n                if (def.sidepanel.detailLayout && Array.isArray(def.sidepanel.detailLayout)) {\r\n                    normalizedDef.sidepanelFields = def.sidepanel.detailLayout;\r\n                }\r\n                normalizedDef.sidepanel = def.sidepanel;\r\n            }\r\n\r\n            if (def.clustering && typeof def.clustering === 'object') {\r\n                normalizedDef.clustering = def.clustering.enabled !== false;\r\n                if (typeof def.clustering.maxClusterRadius === 'number') {\r\n                    normalizedDef.maxClusterRadius = def.clustering.maxClusterRadius;\r\n                    normalizedDef.clusterRadius = def.clustering.maxClusterRadius;\r\n                }\r\n                if (typeof def.clustering.disableClusteringAtZoom === 'number') {\r\n                    normalizedDef.disableClusteringAtZoom = def.clustering.disableClusteringAtZoom;\r\n                }\r\n            }\r\n\r\n            if (def.search && typeof def.search === 'object') {\r\n                normalizedDef.search = def.search;\r\n            }\r\n\r\n            if (def.table && typeof def.table === 'object') {\r\n                normalizedDef.table = def.table;\r\n            }\r\n\r\n            const layerId = def.id || (\"geojson-layer-\" + (state.layerIdCounter++));\r\n            const layerLabel = def.label || layerId;\r\n\r\n            Log.debug(\"[GeoLeaf.GeoJSON] Chargement couche GeoJSON :\", {\r\n                profileId: profile.id || \"(inconnu)\",\r\n                layerId: layerId,\r\n                url: layerUrl\r\n            });\r\n\r\n            try {\r\n                return await GeoLeaf._GeoJSONLoader._loadSingleLayer(layerId, layerLabel, normalizedDef, baseOptions);\r\n            } catch (err) {\r\n                Log.error(\"[GeoLeaf.GeoJSON] √âchec chargement couche :\", {\r\n                    layerId: layerId,\r\n                    url: layerUrl,\r\n                    error: err\r\n                });\r\n                return null;\r\n            }\r\n        });\r\n\r\n        return this._loadLayersByBatch(tasks, batchSize, batchDelay).then((layers) => {\r\n            const loadedLayers = layers.filter(Boolean);\r\n\r\n            Log.info(\"[GeoLeaf.GeoJSON] \" + loadedLayers.length + \" couche(s) GeoJSON charg√©e(s)\");\r\n            Log.info(`[GeoLeaf.GeoJSON] Avant v√©rif LayerManager - loadedLayers: ${loadedLayers.length}, _GeoJSONLayerManager existe: ${!!GeoLeaf._GeoJSONLayerManager}`);\r\n\r\n            // Int√©gration avec LayerManager si disponible\r\n            if (loadedLayers.length > 0 && GeoLeaf._GeoJSONLayerManager) {\r\n                GeoLeaf._GeoJSONLayerManager.registerWithLayerManager();\r\n            }\r\n\r\n            // Fit bounds sur l'ensemble des couches si demand√©\r\n            if (baseOptions.fitBoundsOnLoad !== false && state.map && state.layerGroup) {\r\n                const bounds = state.layerGroup.getBounds();\r\n                if (bounds.isValid()) {\r\n                    const fitOptions = {};\r\n                    if (typeof baseOptions.maxZoomOnFit === \"number\") {\r\n                        fitOptions.maxZoom = baseOptions.maxZoomOnFit;\r\n                    }\r\n                    state.map.fitBounds(bounds, fitOptions);\r\n                    Log.debug(\"[GeoLeaf.GeoJSON] Carte ajust√©e sur l'emprise des couches GeoJSON\");\r\n\r\n                    // √âmettre un √©v√©nement apr√®s le fitBounds\r\n                    const onMoveEnd = function() {\r\n                        state.map.off('moveend', onMoveEnd);\r\n                        try {\r\n                            const event = new CustomEvent('geoleaf:fitbounds:complete', { detail: { bounds: bounds } });\r\n                            document.dispatchEvent(event);\r\n                        } catch (e) {\r\n                            // fallback si CustomEvent n'est pas dispo\r\n                        }\r\n                    };\r\n                    state.map.on('moveend', onMoveEnd);\r\n                }\r\n            }\r\n\r\n            // √âv√©nement global\r\n            try {\r\n                state.map.fire(\"geoleaf:geojson:layers-loaded\", {\r\n                    count: loadedLayers.length,\r\n                    layers: loadedLayers.map(l => ({ id: l.id, label: l.label }))\r\n                });\r\n            } catch (e) {\r\n                // Silencieux\r\n            }\r\n\r\n            return loadedLayers;\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Ex√©cute un tableau de t√¢ches async par lots.\r\n     *\r\n     * @param {Array<Function>} tasks - Fonctions async √† ex√©cuter\r\n     * @param {number} [batchSize=3] - Taille des lots\r\n     * @param {number} [delayMs=200] - D√©lai entre les lots (non utilis√© actuellement)\r\n     * @returns {Promise<Array>}\r\n     * @private\r\n     */\r\n    GeoLeaf._GeoJSONLoader._loadLayersByBatch = async function (tasks, batchSize = 3, delayMs = 200) {\r\n        const results = [];\r\n\r\n        for (let i = 0; i < tasks.length; i += batchSize) {\r\n            const batch = tasks.slice(i, i + batchSize);\r\n            const batchStart = Date.now();\r\n            const batchResults = await Promise.all(batch.map(fn => fn()));\r\n            results.push(...batchResults);\r\n\r\n            const batchDuration = Date.now() - batchStart;\r\n            const Log = getLog();\r\n            Log.info(`[GeoLeaf.GeoJSON] Lot ${Math.floor(i / batchSize) + 1}/${Math.ceil(tasks.length / batchSize)} charg√© en ${batchDuration} ms`);\r\n        }\r\n\r\n        return results;\r\n    };\r\n\r\n    /**\r\n     * Pr√©pare les configurations de TOUTES les couches pour le LayerManager.\r\n     * Utilise les configs d√©j√† charg√©es par ProfileV3Loader et y ajoute les layerManagerId.\r\n     *\r\n     * @param {Object} profile - Profil actif enrichi par ProfileV3Loader\r\n     * @returns {Promise<Array>} - Promise r√©solvant en array des infos de couches\r\n     */\r\n    GeoLeaf._GeoJSONLoader.loadAllLayersConfigsForLayerManager = async function(profile) {\r\n        const Log = getLog();\r\n\r\n        if (!profile || !profile.layers || !Array.isArray(profile.layers)) {\r\n            Log.warn(\"[GeoLeaf.GeoJSON] loadAllLayersConfigsForLayerManager: Pas de couches dans le profil\");\r\n            return [];\r\n        }\r\n\r\n        Log.info(`[GeoLeaf.GeoJSON] Pr√©paration de ${profile.layers.length} configurations de couches pour LayerManager...`);\r\n\r\n        // Les configs sont d√©j√† charg√©es par ProfileV3Loader, il suffit d'enrichir avec layerManagerId\r\n        const allConfigs = profile.layers.map(layer => {\r\n            let styles = null;\r\n            let labels = null;\r\n            if (layer.config && layer.config.styles) {\r\n                styles = layer.config.styles;\r\n            } else if (layer.styles) {\r\n                styles = layer.styles;\r\n            }\r\n            if (layer.config && layer.config.labels) {\r\n                labels = layer.config.labels;\r\n            } else if (layer.labels) {\r\n                labels = layer.labels;\r\n            }\r\n            return {\r\n                id: layer.id,\r\n                label: layer.label,\r\n                layerManagerId: layer.layerManagerId || \"geojson-default\",\r\n                configFile: layer.configFile,\r\n                zIndex: (layer.config && layer.config.zIndex) || 0,\r\n                themes: (layer.config && layer.config.themes) || null,\r\n                styles: styles,\r\n                labels: labels\r\n            };\r\n        });\r\n\r\n        Log.info(`[GeoLeaf.GeoJSON] ${allConfigs.length} configurations pr√™tes pour LayerManager`);\r\n\r\n        // Stocker les configs pour utilisation par LayerManager\r\n        GeoLeaf._allLayerConfigs = allConfigs;\r\n\r\n        return allConfigs;\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf GeoJSON Module - Aggregator\r\n * Module principal qui d√©l√®gue aux sous-modules sp√©cialis√©s\r\n *\r\n * Architecture Phase 3.5:\r\n * - geojson/shared.js        : √âtat partag√©, constantes, STYLE_OPERATORS\r\n * - geojson/style-resolver.js: √âvaluation styleRules, buildLeafletOptions\r\n * - geojson/layer-manager.js : Gestion couches (show/hide/toggle/remove)\r\n * - geojson/loader.js        : Chargement (loadUrl, loadFromActiveProfile)\r\n * - geojson/popup-tooltip.js : Popups et tooltips unifi√©s\r\n * - geojson/clustering.js    : Strat√©gies de clustering\r\n *\r\n * @module geoleaf.geojson\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log || console;\r\n\r\n    // ========================================\r\n    //   GETTERS LAZY POUR SOUS-MODULES\r\n    // ========================================\r\n\r\n    const getShared = () => GeoLeaf._GeoJSONShared;\r\n    const getState = () => GeoLeaf._GeoJSONShared && GeoLeaf._GeoJSONShared.state;\r\n    const getStyleResolver = () => GeoLeaf._GeoJSONStyleResolver;\r\n    const getLayerManager = () => GeoLeaf._GeoJSONLayerManager;\r\n    const getLoader = () => GeoLeaf._GeoJSONLoader;\r\n    const getPopupTooltip = () => GeoLeaf._GeoJSONPopupTooltip;\r\n    const getClustering = () => GeoLeaf._GeoJSONClustering;\r\n\r\n    // ========================================\r\n    //   MODULE GEOJSON (AGR√âGATEUR)\r\n    // ========================================\r\n\r\n    const GeoJSONModule = {\r\n        /**\r\n         * Getters pour acc√®s direct √† l'√©tat (compatibilit√©)\r\n         */\r\n        get _map() { return getState() ? getState().map : null; },\r\n        get _layerGroup() { return getState() ? getState().layerGroup : null; },\r\n        get _geoJsonLayer() { return getState() ? getState().geoJsonLayer : null; },\r\n        get _layers() { return getState() ? getState().layers : new Map(); },\r\n        get _featureCache() { return getState() ? getState().featureCache : new Map(); },\r\n        get _options() { return getState() ? getState().options : {}; },\r\n\r\n        /**\r\n         * Valide les options pass√©es √† init()\r\n         * @param {Object} options\r\n         * @private\r\n         */\r\n        _validateOptions(options) {\r\n            if (options.map && typeof options.map.addLayer !== 'function') {\r\n                Log.warn(\"[GeoLeaf.GeoJSON] options.map ne semble pas √™tre une carte Leaflet valide.\");\r\n            }\r\n\r\n            if (options.defaultStyle && typeof options.defaultStyle !== 'object') {\r\n                Log.warn(\"[GeoLeaf.GeoJSON] options.defaultStyle doit √™tre un objet.\");\r\n                delete options.defaultStyle;\r\n            }\r\n\r\n            if (options.onEachFeature && typeof options.onEachFeature !== 'function') {\r\n                Log.warn(\"[GeoLeaf.GeoJSON] options.onEachFeature doit √™tre une fonction.\");\r\n                delete options.onEachFeature;\r\n            }\r\n\r\n            if (options.pointToLayer && typeof options.pointToLayer !== 'function') {\r\n                Log.warn(\"[GeoLeaf.GeoJSON] options.pointToLayer doit √™tre une fonction.\");\r\n                delete options.pointToLayer;\r\n            }\r\n\r\n            if (options.maxZoomOnFit !== undefined &&\r\n                (typeof options.maxZoomOnFit !== 'number' || options.maxZoomOnFit < 1 || options.maxZoomOnFit > 20)) {\r\n                Log.warn(\"[GeoLeaf.GeoJSON] options.maxZoomOnFit doit √™tre un nombre entre 1 et 20.\");\r\n                options.maxZoomOnFit = GeoLeaf.CONSTANTS ? GeoLeaf.CONSTANTS.GEOJSON_MAX_ZOOM_ON_FIT : 18;\r\n            }\r\n\r\n            return options;\r\n        },\r\n\r\n        /**\r\n         * Initialise le module GeoJSON.\r\n         *\r\n         * @param {Object} options\r\n         * @param {L.Map} [options.map] - Carte Leaflet. Si absent, tentative via GeoLeaf.Core.getMap().\r\n         * @param {Object} [options.defaultStyle]\r\n         * @param {Object} [options.defaultPointStyle]\r\n         * @param {Function} [options.onEachFeature]\r\n         * @param {Function} [options.pointToLayer]\r\n         * @param {boolean} [options.fitBoundsOnLoad]\r\n         * @param {number} [options.maxZoomOnFit]\r\n         * @returns {L.GeoJSON|null} - La couche GeoJSON ou null si √©chec.\r\n         */\r\n        init(options = {}) {\r\n            const state = getState();\r\n            if (!state) {\r\n                Log.error(\"[GeoLeaf.GeoJSON] Module shared.js non charg√©.\");\r\n                return null;\r\n            }\r\n\r\n            // Validation\r\n            options = this._validateOptions(options);\r\n\r\n            if (typeof global.L === \"undefined\" || !global.L || typeof global.L.geoJSON !== \"function\") {\r\n                Log.error(\"[GeoLeaf.GeoJSON] Leaflet (L) est requis mais introuvable.\");\r\n                return null;\r\n            }\r\n\r\n            // Utiliser l'helper partag√©\r\n            const map = GeoLeaf.Utils ? GeoLeaf.Utils.ensureMap(options.map) : (options.map || null);\r\n\r\n            if (!map) {\r\n                Log.error(\r\n                    \"[GeoLeaf.GeoJSON] Aucune carte Leaflet disponible. Passe une instance de carte dans init({ map }).\"\r\n                );\r\n                return null;\r\n            }\r\n\r\n            state.map = map;\r\n\r\n            // Fusionner les options\r\n            state.options = GeoLeaf.Utils && GeoLeaf.Utils.mergeOptions\r\n                ? GeoLeaf.Utils.mergeOptions(state.options, options)\r\n                : Object.assign({}, state.options, options);\r\n\r\n            // Cr√©er les panes pour contr√¥ler le z-index des couches\r\n            const PaneConfig = getShared().PANE_CONFIG;\r\n            const PaneHelpers = getShared().PaneHelpers;\r\n\r\n            // Basemap: z-index 200 (toujours en dessous)\r\n            const basemapPane = state.map.createPane(PaneConfig.BASEMAP_NAME);\r\n            basemapPane.style.zIndex = PaneConfig.BASEMAP_ZINDEX;\r\n\r\n            // Couches GeoJSON/WMS: z-index 400-499 (0-99 dans config)\r\n            for (let i = PaneConfig.MIN_LAYER_ZINDEX; i <= PaneConfig.MAX_LAYER_ZINDEX; i++) {\r\n                const pane = state.map.createPane(PaneHelpers.getPaneName(i));\r\n                pane.style.zIndex = PaneConfig.LAYER_BASE_ZINDEX + i;\r\n            }\r\n\r\n            Log.info(`[GeoLeaf.GeoJSON] Panes cr√©√©s : ${PaneConfig.BASEMAP_NAME} (z:${PaneConfig.BASEMAP_ZINDEX}), ${PaneConfig.LAYER_PREFIX}0 √† ${PaneConfig.LAYER_PREFIX}${PaneConfig.MAX_LAYER_ZINDEX} (z:${PaneConfig.LAYER_BASE_ZINDEX}-${PaneConfig.LAYER_BASE_ZINDEX + PaneConfig.MAX_LAYER_ZINDEX})`);\r\n\r\n            // Cr√©er un groupe pour encapsuler TOUTES les couches GeoJSON\r\n            state.layerGroup = global.L.featureGroup().addTo(state.map);\r\n\r\n            // Initialiser la Map des couches\r\n            state.layers = new Map();\r\n\r\n            // Ajouter un √©couteur pour g√©rer les seuils de zoom\r\n            const LayerManager = getLayerManager();\r\n            if (LayerManager) {\r\n                state.map.on('zoomend', () => {\r\n                    LayerManager.updateLayerVisibilityByZoom();\r\n                });\r\n            }\r\n\r\n            // LEGACY: Cr√©er la couche GeoJSON vide (pour compatibilit√©)\r\n            const StyleResolver = getStyleResolver();\r\n            const leafletOptions = StyleResolver\r\n                ? StyleResolver.buildLeafletOptions(state.options)\r\n                : {};\r\n\r\n            state.geoJsonLayer = global.L.geoJSON(null, leafletOptions);\r\n            state.geoJsonLayer.addTo(state.layerGroup);\r\n\r\n            Log.info(\"[GeoLeaf.GeoJSON] Module initialis√© en mode multi-couches\");\r\n\r\n            return state.geoJsonLayer;\r\n        },\r\n\r\n        /**\r\n         * Retourne la couche GeoJSON principale (LEGACY).\r\n         * @returns {L.GeoJSON|null}\r\n         */\r\n        getLayer() {\r\n            const state = getState();\r\n            return state ? state.geoJsonLayer : null;\r\n        },\r\n\r\n        // ========================================\r\n        //   D√âL√âGATION VERS LAYER MANAGER\r\n        // ========================================\r\n\r\n        getLayerById(layerId) {\r\n            const LayerManager = getLayerManager();\r\n            return LayerManager ? LayerManager.getLayerById(layerId) : null;\r\n        },\r\n\r\n        getLayerData(layerId) {\r\n            const LayerManager = getLayerManager();\r\n            return LayerManager ? LayerManager.getLayerData(layerId) : null;\r\n        },\r\n\r\n        getAllLayers() {\r\n            const LayerManager = getLayerManager();\r\n            return LayerManager ? LayerManager.getAllLayers() : [];\r\n        },\r\n\r\n        showLayer(layerId) {\r\n            const LayerManager = getLayerManager();\r\n            if (LayerManager) LayerManager.showLayer(layerId);\r\n        },\r\n\r\n        hideLayer(layerId) {\r\n            const LayerManager = getLayerManager();\r\n            if (LayerManager) LayerManager.hideLayer(layerId);\r\n        },\r\n\r\n        toggleLayer(layerId) {\r\n            const LayerManager = getLayerManager();\r\n            if (LayerManager) LayerManager.toggleLayer(layerId);\r\n        },\r\n\r\n        removeLayer(layerId) {\r\n            const LayerManager = getLayerManager();\r\n            if (LayerManager) LayerManager.removeLayer(layerId);\r\n        },\r\n\r\n        updateLayerZIndex(layerId, newZIndex) {\r\n            const LayerManager = getLayerManager();\r\n            return LayerManager ? LayerManager.updateLayerZIndex(layerId, newZIndex) : false;\r\n        },\r\n\r\n        setLayerStyle(layerId, styleConfig) {\r\n            const LayerManager = getLayerManager();\r\n            return LayerManager ? LayerManager.setLayerStyle(layerId, styleConfig) : false;\r\n        },\r\n\r\n        // ========================================\r\n        //   D√âL√âGATION VERS LOADER\r\n        // ========================================\r\n\r\n        loadUrl(url, options = {}) {\r\n            const Loader = getLoader();\r\n            return Loader ? Loader.loadUrl(url, options) : Promise.resolve(null);\r\n        },\r\n\r\n        addData(geojsonData, options = {}) {\r\n            const Loader = getLoader();\r\n            if (Loader) Loader.addData(geojsonData, options);\r\n        },\r\n\r\n        loadFromActiveProfile(options = {}) {\r\n            const Loader = getLoader();\r\n            return Loader ? Loader.loadFromActiveProfile(options) : Promise.resolve([]);\r\n        },\r\n\r\n        // ========================================\r\n        //   FILTRAGE DES FEATURES\r\n        // ========================================\r\n\r\n        /**\r\n         * Filtre les features de toutes les couches GeoJSON.\r\n         * Montre uniquement les features qui passent le pr√©dicat.\r\n         *\r\n         * @param {Function} filterFn - Fonction (feature, layerId) => boolean\r\n         * @param {Object} [options] - Options suppl√©mentaires\r\n         * @returns {Object} - { filtered: number, total: number, visible: number }\r\n         */\r\n        filterFeatures(filterFn, options = {}) {\r\n            const state = getState();\r\n            if (typeof filterFn !== 'function') {\r\n                Log.warn(\"[GeoLeaf.GeoJSON] filterFeatures: filterFn doit √™tre une fonction\");\r\n                return { filtered: 0, total: 0, visible: 0 };\r\n            }\r\n\r\n            const stats = { filtered: 0, total: 0, visible: 0 };\r\n\r\n            // D√©terminer les couches √† filtrer\r\n            let layerIds = [];\r\n            if (options.layerIds) {\r\n                layerIds = Array.isArray(options.layerIds) ? options.layerIds : [options.layerIds];\r\n            } else {\r\n                layerIds = Array.from(state.layers.keys());\r\n            }\r\n\r\n            // Filtrer par type de g√©om√©trie si sp√©cifi√© (avec aliases)\r\n            if (options.geometryType) {\r\n                const geoType = options.geometryType.toLowerCase();\r\n                const typeAliases = {\r\n                    'poi': 'point',\r\n                    'route': 'line',\r\n                    'linestring': 'line',\r\n                    'area': 'polygon'\r\n                };\r\n                const normalizedType = typeAliases[geoType] || geoType;\r\n\r\n                layerIds = layerIds.filter(id => {\r\n                    const data = state.layers.get(id);\r\n                    if (!data) return false;\r\n                    const layerGeoType = (data.geometryType || '').toLowerCase();\r\n                    const normalizedLayerType = typeAliases[layerGeoType] || layerGeoType;\r\n                    return normalizedLayerType === normalizedType;\r\n                });\r\n            }\r\n\r\n            layerIds.forEach(layerId => {\r\n                const layerData = state.layers.get(layerId);\r\n                if (!layerData || !layerData.layer) return;\r\n\r\n                // Si search.enabled === false, la couche n'est pas concern√©e par le filtrage\r\n                const bypassFilter = layerData.config?.search?.enabled === false;\r\n\r\n                // Initialiser le Set des layers filtr√©es si pas encore fait\r\n                if (!layerData._filteredOutLayers) {\r\n                    layerData._filteredOutLayers = new Set();\r\n                }\r\n\r\n                const toShow = [];\r\n                const toHide = [];\r\n\r\n                // It√©rer sur chaque feature\r\n                layerData.layer.eachLayer(leafletLayer => {\r\n                    if (!leafletLayer.feature) return;\r\n\r\n                    stats.total++;\r\n\r\n                    const shouldShow = bypassFilter || filterFn(leafletLayer.feature, layerId);\r\n\r\n                    if (shouldShow) {\r\n                        toShow.push(leafletLayer);\r\n                        stats.visible++;\r\n                    } else {\r\n                        toHide.push(leafletLayer);\r\n                        stats.filtered++;\r\n                    }\r\n                });\r\n\r\n                // Appliquer les changements de visibilit√©\r\n                const clusterGroup = layerData.clusterGroup;\r\n\r\n                toHide.forEach(leafletLayer => {\r\n                    leafletLayer._geoleafFiltered = true;\r\n\r\n                    if (clusterGroup) {\r\n                        if (!layerData._filteredOutLayers.has(leafletLayer)) {\r\n                            clusterGroup.removeLayer(leafletLayer);\r\n                            layerData._filteredOutLayers.add(leafletLayer);\r\n                        }\r\n                    } else {\r\n                        if (leafletLayer.getElement) {\r\n                            const layerElement = leafletLayer.getElement();\r\n                            if (layerElement) layerElement.style.display = 'none';\r\n                        } else if (leafletLayer.setStyle) {\r\n                            if (leafletLayer.options._originalOpacity === undefined) {\r\n                                leafletLayer.options._originalOpacity = leafletLayer.options.opacity;\r\n                                leafletLayer.options._originalFillOpacity = leafletLayer.options.fillOpacity;\r\n                            }\r\n                            leafletLayer.setStyle({ opacity: 0, fillOpacity: 0 });\r\n                        }\r\n                    }\r\n                });\r\n\r\n                toShow.forEach(leafletLayer => {\r\n                    leafletLayer._geoleafFiltered = false;\r\n\r\n                    if (clusterGroup) {\r\n                        if (layerData._filteredOutLayers.has(leafletLayer)) {\r\n                            clusterGroup.addLayer(leafletLayer);\r\n                            layerData._filteredOutLayers.delete(leafletLayer);\r\n                        }\r\n                    } else {\r\n                        if (leafletLayer.getElement) {\r\n                            const layerElement = leafletLayer.getElement();\r\n                            if (layerElement) layerElement.style.display = '';\r\n                        } else if (leafletLayer.setStyle) {\r\n                            leafletLayer.setStyle({\r\n                                opacity: leafletLayer.options._originalOpacity !== undefined\r\n                                    ? leafletLayer.options._originalOpacity : 1,\r\n                                fillOpacity: leafletLayer.options._originalFillOpacity !== undefined\r\n                                    ? leafletLayer.options._originalFillOpacity : 0.4\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n\r\n            Log.debug(`[GeoLeaf.GeoJSON] filterFeatures: ${stats.visible}/${stats.total} features visibles`);\r\n            return stats;\r\n        },\r\n\r\n        /**\r\n         * R√©initialise le filtre sur les features (montre tout).\r\n         *\r\n         * @param {Object} [options] - M√™mes options que filterFeatures\r\n         */\r\n        clearFeatureFilter(options = {}) {\r\n            return this.filterFeatures(() => true, options);\r\n        },\r\n\r\n        /**\r\n         * Retourne toutes les features charg√©es.\r\n         * @param {Object} [options]\r\n         * @returns {Array<Object>} features GeoJSON enrichies de { _layerId }\r\n         */\r\n        getFeatures(options = {}) {\r\n            const state = getState();\r\n            if (!state) return [];\r\n\r\n            const geometrySet = Array.isArray(options.geometryTypes)\r\n                ? new Set(options.geometryTypes.map(t => t.toLowerCase()))\r\n                : null;\r\n            const layerSet = Array.isArray(options.layerIds) ? new Set(options.layerIds) : null;\r\n\r\n            const result = [];\r\n            state.featureCache.forEach((entry, layerId) => {\r\n                if (layerSet && !layerSet.has(layerId)) return;\r\n                const geoType = (entry.geometryType || \"\").toLowerCase();\r\n                if (geometrySet && !geometrySet.has(geoType)) return;\r\n\r\n                (entry.features || []).forEach((f) => {\r\n                    if (f && typeof f === \"object\") {\r\n                        const clone = Object.assign({}, f, { _layerId: layerId });\r\n                        result.push(clone);\r\n                    }\r\n                });\r\n            });\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Supprime toutes les entit√©s GeoJSON de la couche legacy.\r\n         */\r\n        clear() {\r\n            const state = getState();\r\n            if (state && state.geoJsonLayer) {\r\n                state.geoJsonLayer.clearLayers();\r\n            }\r\n        },\r\n\r\n        // ========================================\r\n        //   M√âTHODES INTERNES EXPOS√âES\r\n        // ========================================\r\n\r\n        _updateLayerVisibilityByZoom() {\r\n            const LayerManager = getLayerManager();\r\n            if (LayerManager) LayerManager.updateLayerVisibilityByZoom();\r\n        },\r\n\r\n        _registerWithLayerManager() {\r\n            const LayerManager = getLayerManager();\r\n            if (LayerManager) LayerManager.registerWithLayerManager();\r\n        },\r\n\r\n        _convertFeatureToPOI(feature, def) {\r\n            const PopupTooltip = getPopupTooltip();\r\n            return PopupTooltip ? PopupTooltip.convertFeatureToPOI(feature, def) : null;\r\n        },\r\n\r\n        _getClusteringStrategy(def, geojsonData) {\r\n            const Clustering = getClustering();\r\n            return Clustering\r\n                ? Clustering.getClusteringStrategy(def, geojsonData)\r\n                : { shouldCluster: false, useSharedCluster: false };\r\n        },\r\n\r\n        _getSharedPOICluster() {\r\n            const Clustering = getClustering();\r\n            return Clustering ? Clustering.getSharedPOICluster() : null;\r\n        },\r\n\r\n        _getPoiConfig() {\r\n            const Clustering = getClustering();\r\n            return Clustering ? Clustering.getPoiConfig() : {};\r\n        },\r\n\r\n        _detectLayerType(layer) {\r\n            const LayerManager = getLayerManager();\r\n            return LayerManager ? LayerManager.detectLayerType(layer) : \"mixed\";\r\n        },\r\n\r\n        _buildLeafletOptions(options) {\r\n            const StyleResolver = getStyleResolver();\r\n            return StyleResolver ? StyleResolver.buildLeafletOptions(options) : {};\r\n        }\r\n    };\r\n\r\n    // Exposer _StyleRules pour compatibilit√© avec le module Themes\r\n    // (d√©j√† fait dans style-resolver.js, mais on s'assure que c'est accessible)\r\n    if (!GeoLeaf._StyleRules && getStyleResolver()) {\r\n        GeoLeaf._StyleRules = {\r\n            evaluate: getStyleResolver().evaluateStyleRules,\r\n            operators: getShared() ? getShared().STYLE_OPERATORS : {},\r\n            getNestedValue: getStyleResolver().getNestedValue\r\n        };\r\n    }\r\n\r\n    // Expose le module dans l'espace de nom GeoLeaf\r\n    GeoLeaf.GeoJSON = GeoJSONModule;\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf Route Style Resolver Module\r\n * R√©solution des styles d'itin√©raires (couleurs, endpoints)\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    GeoLeaf._RouteStyleResolver = GeoLeaf._RouteStyleResolver || {};\r\n\r\n    const Log = GeoLeaf.Log || console;\r\n\r\n    /**\r\n     * D√©termine la couleur d'un itin√©raire selon la priorit√© :\r\n     *  1. colorRoute de la sous-cat√©gorie (si d√©finie)\r\n     *  2. colorRoute de la cat√©gorie (si d√©finie)\r\n     *  3. couleur par d√©faut de routeConfig.default.color\r\n     *\r\n     * @param {Object} route - L'itin√©raire\r\n     * @param {Object} profile - Le profil actif\r\n     * @param {Object} routeConfigDefault - La config par d√©faut (defaultSettings.routeConfig.default)\r\n     * @returns {string|null} La couleur √† utiliser ou null\r\n     */\r\n    GeoLeaf._RouteStyleResolver.getRouteColor = function (route, profile, routeConfigDefault) {\r\n        if (!route || !route.attributes) {\r\n            return routeConfigDefault?.color || null;\r\n        }\r\n\r\n        const attrs = route.attributes;\r\n        const categoryId = attrs.categoryId;\r\n        const subCategoryId = attrs.subCategoryId;\r\n\r\n        // R√©cup√©rer la taxonomie du profil\r\n        const taxonomy = profile?.taxonomy?.categories || {};\r\n\r\n        // 1. V√©rifier colorRoute de la sous-cat√©gorie\r\n        if (categoryId && subCategoryId) {\r\n            const category = taxonomy[categoryId];\r\n            if (category && category.subcategories) {\r\n                const subCategory = category.subcategories[subCategoryId];\r\n                if (subCategory && subCategory.colorRoute) {\r\n                    return subCategory.colorRoute;\r\n                }\r\n            }\r\n        }\r\n\r\n        // 2. V√©rifier colorRoute de la cat√©gorie\r\n        if (categoryId) {\r\n            const category = taxonomy[categoryId];\r\n            if (category && category.colorRoute) {\r\n                return category.colorRoute;\r\n            }\r\n        }\r\n\r\n        // 3. Couleur par d√©faut\r\n        return routeConfigDefault?.color || null;\r\n    };\r\n\r\n    /**\r\n     * Calcule le style final d'un itin√©raire en combinant :\r\n     *  - le style par d√©faut du module,\r\n     *  - la config par d√©faut du profil (defaultSettings.routeConfig.default),\r\n     *  - la couleur bas√©e sur la taxonomie (colorRoute),\r\n     *  - les surcharges au niveau de l'itin√©raire (properties.*).\r\n     *\r\n     * @param {Object} route - L'itin√©raire\r\n     * @param {Object} activeProfile - Le profil actif\r\n     * @param {Object} routeConfigDefault - Config par d√©faut du profil\r\n     * @param {Object} defaultStyle - Style par d√©faut du module\r\n     * @returns {Object} Style final r√©solu\r\n     */\r\n    GeoLeaf._RouteStyleResolver.resolveRouteStyle = function (route, activeProfile, routeConfigDefault, defaultStyle) {\r\n        const finalStyle = Object.assign({}, defaultStyle || {});\r\n\r\n        // 1) Appliquer le style par d√©faut du profil (routeConfig.default)\r\n        if (routeConfigDefault && typeof routeConfigDefault === \"object\") {\r\n            Object.assign(finalStyle, routeConfigDefault);\r\n        }\r\n\r\n        // 2) Couleur bas√©e sur la taxonomie (subcategory > category > default)\r\n        const taxonomyColor = GeoLeaf._RouteStyleResolver.getRouteColor(route, activeProfile, routeConfigDefault);\r\n        if (taxonomyColor) {\r\n            finalStyle.color = taxonomyColor;\r\n        }\r\n\r\n        // 3) Surcharges au niveau de la route (properties.*)\r\n        if (route.properties && typeof route.properties === \"object\") {\r\n            const p = route.properties;\r\n\r\n            if (typeof p.color === \"string\" && p.color.trim() !== \"\") {\r\n                finalStyle.color = p.color.trim();\r\n            }\r\n            if (typeof p.weight === \"number\") {\r\n                finalStyle.weight = p.weight;\r\n            }\r\n            if (typeof p.opacity === \"number\") {\r\n                finalStyle.opacity = p.opacity;\r\n            }\r\n            if (typeof p.dashArray === \"string\" && p.dashArray.trim() !== \"\") {\r\n                finalStyle.dashArray = p.dashArray.trim();\r\n            }\r\n        }\r\n\r\n        return finalStyle;\r\n    };\r\n\r\n    /**\r\n     * Calcule la configuration d'affichage des points d√©part / arriv√©e\r\n     * en combinant :\r\n     *  - les options par d√©faut du module (_options),\r\n     *  - les endpoints d√©finis dans le profil actif (defaultSettings.routeConfig.endpoints),\r\n     *  - les surcharges √©ventuelles au niveau de l'itin√©raire\r\n     *    (properties.showStart, properties.showEnd, startStyle, endStyle).\r\n     *\r\n     * @param {Object} route - L'itin√©raire\r\n     * @param {Object} profileEndpoints - Config endpoints du profil\r\n     * @param {Object} moduleOptions - Options du module Route\r\n     * @returns {Object} Configuration des endpoints {showStart, showEnd, startStyle, endStyle}\r\n     */\r\n    GeoLeaf._RouteStyleResolver.resolveEndpointConfig = function (route, profileEndpoints, moduleOptions) {\r\n        const opt = moduleOptions || {};\r\n\r\n        const baseStartStyle =\r\n            opt.startWaypointStyle || opt.waypointStyle || {\r\n                radius: 6,\r\n                color: \"#ffffff\",\r\n                fillColor: \"#2b7cff\",\r\n                fillOpacity: 1,\r\n                weight: 2\r\n            };\r\n\r\n        const baseEndStyle =\r\n            opt.endWaypointStyle || opt.waypointStyle || {\r\n                radius: 6,\r\n                color: \"#ffffff\",\r\n                fillColor: \"#ff7b32\",\r\n                fillOpacity: 1,\r\n                weight: 2\r\n            };\r\n\r\n        const cfg = {\r\n            showStart: typeof opt.showStart === \"boolean\" ? opt.showStart : true,\r\n            showEnd: typeof opt.showEnd === \"boolean\" ? opt.showEnd : true,\r\n            startStyle: Object.assign({}, baseStartStyle),\r\n            endStyle: Object.assign({}, baseEndStyle)\r\n        };\r\n\r\n        // 1) Profil actif (defaultSettings.routeConfig.endpoints)\r\n        if (profileEndpoints && typeof profileEndpoints === \"object\") {\r\n            if (typeof profileEndpoints.showStart === \"boolean\") {\r\n                cfg.showStart = profileEndpoints.showStart;\r\n            }\r\n            if (typeof profileEndpoints.showEnd === \"boolean\") {\r\n                cfg.showEnd = profileEndpoints.showEnd;\r\n            }\r\n            if (\r\n                profileEndpoints.start &&\r\n                typeof profileEndpoints.start === \"object\"\r\n            ) {\r\n                Object.assign(cfg.startStyle, profileEndpoints.start);\r\n            }\r\n            if (profileEndpoints.end && typeof profileEndpoints.end === \"object\") {\r\n                Object.assign(cfg.endStyle, profileEndpoints.end);\r\n            }\r\n        }\r\n\r\n        // 2) Surcharges au niveau de l'itin√©raire\r\n        if (route && route.properties && typeof route.properties === \"object\") {\r\n            const p = route.properties;\r\n\r\n            if (typeof p.showStart === \"boolean\") {\r\n                cfg.showStart = p.showStart;\r\n            }\r\n            if (typeof p.showEnd === \"boolean\") {\r\n                cfg.showEnd = p.showEnd;\r\n            }\r\n            if (p.startStyle && typeof p.startStyle === \"object\") {\r\n                Object.assign(cfg.startStyle, p.startStyle);\r\n            }\r\n            if (p.endStyle && typeof p.endStyle === \"object\") {\r\n                Object.assign(cfg.endStyle, p.endStyle);\r\n            }\r\n        }\r\n\r\n        return cfg;\r\n    };\r\n\r\n    Log.info(\"[GeoLeaf._RouteStyleResolver] Module Style Resolver charg√©\");\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf Route Popup Builder Module\r\n * Construction des popups/tooltips et panneau lat√©ral pour les itin√©raires.\r\n * D√©l√®gue le rendu au module _ContentBuilder centralis√©.\r\n *\r\n * @module route/popup-builder\r\n * @version 2.0.0\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    GeoLeaf._RoutePopupBuilder = GeoLeaf._RoutePopupBuilder || {};\r\n\r\n    const Log = GeoLeaf.Log || console;\r\n\r\n    // ========================================\r\n    //   UTILITAIRES\r\n    // ========================================\r\n\r\n    /**\r\n     * R√©cup√®re le ContentBuilder\r\n     * @returns {Object|null}\r\n     */\r\n    function getContentBuilder() {\r\n        return GeoLeaf._ContentBuilder || null;\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re le Normalizer\r\n     * @returns {Object|null}\r\n     */\r\n    function getNormalizer() {\r\n        return GeoLeaf._Normalizer || null;\r\n    }\r\n\r\n    /**\r\n     * √âchappe le HTML\r\n     * @param {string} str - Cha√Æne √† √©chapper\r\n     * @returns {string}\r\n     */\r\n    function escapeHtml(str) {\r\n        if (GeoLeaf.Security && typeof GeoLeaf.Security.escapeHtml === 'function') {\r\n            return GeoLeaf.Security.escapeHtml(str);\r\n        }\r\n        if (str == null) return '';\r\n        const div = document.createElement('div');\r\n        div.textContent = String(str);\r\n        return div.innerHTML;\r\n    }\r\n\r\n    /**\r\n     * Convertit une route en POI normalis√©\r\n     * @param {Object} route - Donn√©es de la route\r\n     * @returns {Object} POI normalis√©\r\n     */\r\n    function convertRouteToPOI(route) {\r\n        const Normalizer = getNormalizer();\r\n        if (Normalizer && typeof Normalizer.normalizeFromRoute === 'function') {\r\n            return Normalizer.normalizeFromRoute(route);\r\n        }\r\n\r\n        // Fallback: conversion manuelle\r\n        const attrs = route.attributes || {};\r\n        return {\r\n            id: route.id,\r\n            sourceType: 'route',\r\n            geometryType: 'LineString',\r\n            title: route.label || route.name || 'Itin√©raire',\r\n            description: attrs.description || route.description || '',\r\n            lat: null,\r\n            lng: null,\r\n            categoryId: attrs.categoryId || null,\r\n            subCategoryId: attrs.subCategoryId || null,\r\n            attributes: {\r\n                ...attrs,\r\n                label: route.label || route.name,\r\n                photo: attrs.photo,\r\n                distance_km: attrs.distance_km,\r\n                duration_min: attrs.duration_min,\r\n                difficulty: attrs.difficulty,\r\n                tags: attrs.tags\r\n            },\r\n            rawData: route\r\n        };\r\n    }\r\n\r\n    // ========================================\r\n    //   CONFIGURATION\r\n    // ========================================\r\n\r\n    /**\r\n     * R√©cup√®re la configuration de popup pour les routes\r\n     * @returns {Array|null}\r\n     */\r\n    function getRoutePopupConfig() {\r\n        const Config = GeoLeaf.Config;\r\n        if (Config && typeof Config.getActiveProfile === 'function') {\r\n            const profile = Config.getActiveProfile();\r\n            if (profile?.panels?.route?.popup?.detailPopup) {\r\n                return profile.panels.route.popup.detailPopup;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re la configuration du layout pour le side panel des routes\r\n     * @returns {Array|null}\r\n     */\r\n    function getRouteLayoutConfig() {\r\n        const Config = GeoLeaf.Config;\r\n        if (Config && typeof Config.getActiveProfile === 'function') {\r\n            const profile = Config.getActiveProfile();\r\n            if (profile?.panels?.route?.layout) {\r\n                return profile.panels.route.layout;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    // ========================================\r\n    //   TOOLTIP\r\n    // ========================================\r\n\r\n    /**\r\n     * Ajoute un tooltip √† une polyline d'itin√©raire\r\n     * @param {L.Polyline} polyline - Polyline Leaflet\r\n     * @param {Object} route - Donn√©es de l'itin√©raire\r\n     */\r\n    GeoLeaf._RoutePopupBuilder.addRouteTooltip = function (polyline, route) {\r\n        const label = route.label || route.name || 'Itin√©raire';\r\n\r\n        polyline.bindTooltip(escapeHtml(label), {\r\n            sticky: true,\r\n            className: 'gl-route-tooltip'\r\n        });\r\n    };\r\n\r\n    // ========================================\r\n    //   POPUP\r\n    // ========================================\r\n\r\n    /**\r\n     * Ajoute un popup √† une polyline d'itin√©raire\r\n     * @param {L.Polyline} polyline - Polyline Leaflet\r\n     * @param {Object} route - Donn√©es de l'itin√©raire\r\n     * @param {Object} routeModule - R√©f√©rence au module GeoLeaf.Route\r\n     */\r\n    GeoLeaf._RoutePopupBuilder.addRoutePopup = function (polyline, route, routeModule) {\r\n        const popupContent = GeoLeaf._RoutePopupBuilder.buildRoutePopupContent(route);\r\n        polyline.bindPopup(popupContent, { maxWidth: 300 });\r\n\r\n        // Attacher le handler pour le bouton \"Voir plus\"\r\n        polyline.on('popupopen', () => {\r\n            Log.info && Log.info('[Route Popup] Popup opened for route:', route.id);\r\n            setTimeout(() => {\r\n                const selector = '.gl-poi-popup__link[data-route-id=\"' + route.id + '\"]';\r\n                const linkEl = document.querySelector(selector);\r\n                if (linkEl) {\r\n                    linkEl.addEventListener('click', (e) => {\r\n                        e.preventDefault();\r\n                        GeoLeaf._RoutePopupBuilder.openRouteSidePanel(route);\r\n                    });\r\n                }\r\n            }, 50);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Construit le contenu HTML d'un popup pour une route\r\n     * @param {Object} route - Donn√©es de l'itin√©raire\r\n     * @returns {string} Contenu HTML\r\n     */\r\n    GeoLeaf._RoutePopupBuilder.buildRoutePopupContent = function (route) {\r\n        const ContentBuilder = getContentBuilder();\r\n        const config = getRoutePopupConfig();\r\n        const routeAsPoi = convertRouteToPOI(route);\r\n\r\n        // Utiliser ContentBuilder si disponible et configur√©\r\n        if (ContentBuilder && typeof ContentBuilder.buildPopupHTML === 'function' && config) {\r\n            return ContentBuilder.buildPopupHTML(routeAsPoi, config, {\r\n                resolveCategoryDisplay: null\r\n            });\r\n        }\r\n\r\n        // Fallback: construction manuelle du popup\r\n        return buildFallbackRoutePopup(route);\r\n    };\r\n\r\n    /**\r\n     * Construit un popup de route par d√©faut (fallback)\r\n     * @param {Object} route - Donn√©es de l'itin√©raire\r\n     * @returns {string} HTML du popup\r\n     */\r\n    function buildFallbackRoutePopup(route) {\r\n        const attrs = route.attributes || {};\r\n        const label = escapeHtml(route.label || route.name || 'Itin√©raire');\r\n        const description = escapeHtml(attrs.description || route.description || '');\r\n        const photo = attrs.photo || route.photo || null;\r\n        const routeId = escapeHtml(String(route.id || ''));\r\n\r\n        // R√©solution des ic√¥nes depuis la taxonomie\r\n        const categoryId = attrs.categoryId || null;\r\n        const subCategoryId = attrs.subCategoryId || null;\r\n\r\n        const activeProfile = (GeoLeaf.Config && typeof GeoLeaf.Config.getActiveProfile === 'function')\r\n            ? (GeoLeaf.Config.getActiveProfile() || {})\r\n            : {};\r\n\r\n        const categories = activeProfile?.taxonomy?.categories || {};\r\n        const catData = categoryId ? categories[categoryId] : null;\r\n        const subCatData = (catData && subCategoryId) ? catData.subcategories?.[subCategoryId] : null;\r\n\r\n        const iconId = subCatData?.icon || catData?.icon || activeProfile?.icons?.defaultIcon || 'activity-generic';\r\n        const colorFill = subCatData?.colorFill || catData?.colorFill || '#666666';\r\n        const colorStroke = subCatData?.colorStroke || catData?.colorStroke || '#222222';\r\n\r\n        // Construction de l'ic√¥ne\r\n        let iconHtml = '';\r\n        if (iconId) {\r\n            const iconPrefix = activeProfile?.icons?.symbolPrefix || 'gl-poi-cat-';\r\n            const iconIdNormalized = String(iconId).trim().toLowerCase().replace(/\\s+/g, '-');\r\n            const symbolId = iconPrefix + iconIdNormalized;\r\n\r\n            iconHtml = '<svg class=\"gl-poi-popup__icon\" aria-hidden=\"true\" focusable=\"false\" viewBox=\"0 0 24 24\">' +\r\n                '<circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"' + colorFill + '\" stroke=\"' + colorStroke + '\" stroke-width=\"1.5\"/>' +\r\n                '<svg x=\"4\" y=\"4\" width=\"16\" height=\"16\"><use href=\"#' + symbolId + '\" style=\"color: #ffffff\"/></svg>' +\r\n                '</svg>';\r\n        }\r\n\r\n        // M√©tadonn√©es (distance, dur√©e, difficult√©)\r\n        let metaText = '';\r\n        const metaItems = [];\r\n        if (attrs.distance_km) {\r\n            metaItems.push('üìè ' + attrs.distance_km + ' km');\r\n        }\r\n        if (attrs.duration_min) {\r\n            metaItems.push('‚è±Ô∏è ' + attrs.duration_min + ' min');\r\n        }\r\n        if (attrs.difficulty) {\r\n            const diffLabels = { easy: 'Facile', medium: 'Moyen', hard: 'Difficile' };\r\n            metaItems.push('‚ö° ' + (diffLabels[attrs.difficulty] || attrs.difficulty));\r\n        }\r\n        if (metaItems.length > 0) {\r\n            metaText = '<p class=\"gl-poi-popup__meta-text\">' + metaItems.join(' ‚Ä¢ ') + '</p>';\r\n        }\r\n\r\n        // Tags\r\n        const tagBadges = [];\r\n        if (Array.isArray(attrs.tags)) {\r\n            attrs.tags.forEach(tag => {\r\n                if (tag && typeof tag === 'string') {\r\n                    tagBadges.push('<span class=\"gl-poi-badge gl-poi-badge--tag\">' + escapeHtml(tag) + '</span>');\r\n                }\r\n            });\r\n        }\r\n\r\n        // Construction du popup\r\n        return '<div class=\"gl-poi-popup\">' +\r\n            (photo ? '<div class=\"gl-poi-popup__photo\"><img src=\"' + photo + '\" alt=\"' + label + '\" /></div>' : '') +\r\n            '<div class=\"gl-poi-popup__body\">' +\r\n                '<div class=\"gl-poi-popup__title-wrapper\">' +\r\n                    '<h3 class=\"gl-poi-popup__title\">' + iconHtml + '<span class=\"gl-poi-popup__title-text\">' + label + '</span></h3>' +\r\n                '</div>' +\r\n                (description ? '<p class=\"gl-poi-popup__desc\">' + description + '</p>' : '') +\r\n                metaText +\r\n                (tagBadges.length ? '<div class=\"gl-poi-popup__badges\">' + tagBadges.join('') + '</div>' : '') +\r\n                '<a class=\"gl-poi-popup__link\" href=\"#\" data-route-id=\"' + routeId + '\">Voir plus >>></a>' +\r\n            '</div>' +\r\n        '</div>';\r\n    }\r\n\r\n    // ========================================\r\n    //   SIDE PANEL\r\n    // ========================================\r\n\r\n    /**\r\n     * Ouvre le panneau lat√©ral avec les d√©tails d'un itin√©raire\r\n     * @param {Object} route - Donn√©es de l'itin√©raire\r\n     */\r\n    GeoLeaf._RoutePopupBuilder.openRouteSidePanel = function (route) {\r\n        // V√©rifier que le module POI est disponible\r\n        if (!GeoLeaf.POI || typeof GeoLeaf.POI.openSidePanelWithLayout !== 'function') {\r\n            Log.warn && Log.warn('[Route Popup] Cannot open side panel: POI.openSidePanelWithLayout not available');\r\n            return;\r\n        }\r\n\r\n        const attrs = route.attributes || {};\r\n        const layout = getRouteLayoutConfig();\r\n\r\n        // Construire les m√©tadonn√©es\r\n        const metadata = [];\r\n        if (attrs.distance_km) {\r\n            metadata.push('üìè Distance : ' + attrs.distance_km + ' km');\r\n        }\r\n        if (attrs.duration_min) {\r\n            metadata.push('‚è±Ô∏è Dur√©e : ' + attrs.duration_min + ' minutes');\r\n        }\r\n        if (attrs.difficulty) {\r\n            const diffLabels = { easy: 'Facile', medium: 'Moyen', hard: 'Difficile' };\r\n            metadata.push('‚ö° Difficult√© : ' + (diffLabels[attrs.difficulty] || attrs.difficulty));\r\n        }\r\n\r\n        // Transformer la route en structure POI pour le rendu\r\n        const routeAsPoi = {\r\n            id: route.id,\r\n            label: route.label || route.name,\r\n            title: route.label || route.name,\r\n            name: route.label || route.name,\r\n            description: attrs.description || route.description,\r\n            attributes: {\r\n                ...attrs,\r\n                metadata: metadata.length > 0 ? metadata : null,\r\n                photo: attrs.photo,\r\n                mainImage: attrs.photo,\r\n                description: attrs.description,\r\n                shortDescription: attrs.description,\r\n                description_long: attrs.description_long,\r\n                longDescription: attrs.description_long,\r\n                categoryId: attrs.categoryId,\r\n                subCategoryId: attrs.subCategoryId,\r\n                difficulty: attrs.difficulty,\r\n                distance_km: attrs.distance_km,\r\n                duration_min: attrs.duration_min,\r\n                tags: attrs.tags,\r\n                link: attrs.link\r\n            }\r\n        };\r\n\r\n        // Ouvrir le panneau lat√©ral\r\n        GeoLeaf.POI.openSidePanelWithLayout(routeAsPoi, layout);\r\n    };\r\n\r\n    Log.info && Log.info(\"[GeoLeaf._RoutePopupBuilder] Module Popup Builder charg√© (v2.0.0)\");\r\n\r\n})(typeof window !== 'undefined' ? window : global);\r\n","/**\r\n * GeoLeaf Route Loaders Module\r\n * Chargement d'itin√©raires depuis diff√©rentes sources (GPX, GeoJSON, Config)\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    GeoLeaf._RouteLoaders = GeoLeaf._RouteLoaders || {};\r\n\r\n    const Log = GeoLeaf.Log || console;\r\n\r\n    /**\r\n     * Charger un fichier GPX depuis une URL\r\n     * @param {string} url - URL du fichier GPX\r\n     * @param {Function} applyRouteCallback - Callback pour appliquer les coordonn√©es\r\n     * @returns {Promise}\r\n     */\r\n    GeoLeaf._RouteLoaders.loadGPX = async function (url, applyRouteCallback) {\r\n        if (!url) {\r\n            Log.warn(\"[GeoLeaf.Route] URL GPX manquante.\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const res = await fetch(url);\r\n            const xmlText = await res.text();\r\n            const gpx = new DOMParser().parseFromString(xmlText, \"application/xml\");\r\n\r\n            const coords = Array.from(gpx.getElementsByTagName(\"trkpt\")).map(\r\n                (pt) => [\r\n                    parseFloat(pt.getAttribute(\"lat\") || \"0\"),\r\n                    parseFloat(pt.getAttribute(\"lon\") || \"0\")\r\n                ]\r\n            );\r\n\r\n            if (typeof applyRouteCallback === \"function\") {\r\n                applyRouteCallback(coords);\r\n            }\r\n        } catch (err) {\r\n            Log.error(\"[GeoLeaf.Route] Erreur GPX :\", err);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Charger un itin√©raire GeoJSON (LineString)\r\n     * @param {Object} geojson - Objet GeoJSON\r\n     * @param {Function} applyRouteCallback - Callback pour appliquer les coordonn√©es\r\n     */\r\n    GeoLeaf._RouteLoaders.loadGeoJSON = function (geojson, applyRouteCallback) {\r\n        if (!geojson || !geojson.type) {\r\n            Log.error(\"[GeoLeaf.Route] GeoJSON invalide.\");\r\n            return;\r\n        }\r\n\r\n        let coords = [];\r\n\r\n        if (geojson.type === \"Feature\" && geojson.geometry.type === \"LineString\") {\r\n            coords = geojson.geometry.coordinates.map((c) => [c[1], c[0]]);\r\n        } else if (geojson.type === \"LineString\") {\r\n            coords = geojson.coordinates.map((c) => [c[1], c[0]]);\r\n        } else {\r\n            Log.warn(\"[GeoLeaf.Route] Format GeoJSON non g√©r√©.\");\r\n        }\r\n\r\n        if (typeof applyRouteCallback === \"function\") {\r\n            applyRouteCallback(coords);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Extraire un tableau de [lat, lng] √† partir d'un item de cfg.routes.\r\n     * @param {Object} route - Route data\r\n     * @returns {number[][]} Coordinates array\r\n     */\r\n    GeoLeaf._RouteLoaders.extractCoordsFromRouteItem = function (route) {\r\n        // Cas 1 : tableau direct de [lat, lng]\r\n        if (Array.isArray(route.geometry) && route.geometry.length > 0) {\r\n            if (\r\n                Array.isArray(route.geometry[0]) &&\r\n                typeof route.geometry[0][0] === \"number\" &&\r\n                typeof route.geometry[0][1] === \"number\"\r\n            ) {\r\n                return route.geometry.map((pair) => [pair[0], pair[1]]);\r\n            }\r\n\r\n            // Cas 2 : GeoJSON-like dans un tableau\r\n            if (\r\n                route.geometry[0] &&\r\n                typeof route.geometry[0] === \"object\" &&\r\n                route.geometry[0].type === \"LineString\" &&\r\n                Array.isArray(route.geometry[0].coordinates)\r\n            ) {\r\n                return route.geometry[0].coordinates.map((c) => [c[1], c[0]]);\r\n            }\r\n        }\r\n\r\n        // Cas 3 : objet GeoJSON LineString\r\n        if (\r\n            route.geometry &&\r\n            typeof route.geometry === \"object\" &&\r\n            route.geometry.type === \"LineString\" &&\r\n            Array.isArray(route.geometry.coordinates) &&\r\n            route.geometry.coordinates.length > 0\r\n        ) {\r\n            return route.geometry.coordinates.map((c) => [c[1], c[0]]);\r\n        }\r\n\r\n        // Cas 4 : objet GeoJSON MultiLineString - fusionner tous les segments\r\n        if (\r\n            route.geometry &&\r\n            typeof route.geometry === \"object\" &&\r\n            route.geometry.type === \"MultiLineString\" &&\r\n            Array.isArray(route.geometry.coordinates) &&\r\n            route.geometry.coordinates.length > 0\r\n        ) {\r\n            // Prendre le premier segment (lin√©aire le plus long) ou fusionner tous\r\n            const allCoords = route.geometry.coordinates.reduce((acc, segment) => {\r\n                if (Array.isArray(segment) && segment.length > 0) {\r\n                    return acc.concat(segment.map((c) => [c[1], c[0]]));\r\n                }\r\n                return acc;\r\n            }, []);\r\n\r\n            if (allCoords.length > 0) {\r\n                return allCoords;\r\n            }\r\n        }\r\n\r\n        // Aucune g√©om√©trie valide trouv√©e - DEBUG au lieu de WARN\r\n        // car il peut y avoir des features sans coordonn√©es valides\r\n        return [];\r\n    };\r\n\r\n    Log.info(\"[GeoLeaf._RouteLoaders] Module Loaders charg√©\");\r\n\r\n})(window);\r\n","/**\n * GeoLeaf Route Layer Manager Module\n * Gestion des layers Leaflet pour les itin√©raires\n */\n(function (global) {\n    \"use strict\";\n\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\n    GeoLeaf._RouteLayerManager = GeoLeaf._RouteLayerManager || {};\n\n    const Log = GeoLeaf.Log || console;\n\n    /**\n     * Appliquer un itin√©raire complet (remplacement)\n     * @param {Object} context - Context object with map, layerGroup, routeLayer, options\n     * @param {number[][]} coords - Coordinates array\n     * @param {Function} clearCallback - Callback to clear existing routes\n     * @param {Function} fireEventsCallback - Callback to fire route loaded events\n     */\n    GeoLeaf._RouteLayerManager.applyRoute = function (context, coords, clearCallback, fireEventsCallback) {\n        if (!Array.isArray(coords)) {\n            coords = [];\n        }\n\n        if (typeof clearCallback === \"function\") {\n            clearCallback();\n        }\n\n        if (!context.routeLayer && context.layerGroup && context.map) {\n            // Applique le param√®tre interactiveShapes de la config\n            const interactiveShapes = GeoLeaf.Config.get('ui.interactiveShapes', false);\n            const lineStyle = Object.assign({}, context.options.lineStyle, { interactive: interactiveShapes });\n            context.routeLayer = global.L.polyline([], lineStyle).addTo(\n                context.layerGroup\n            );\n        }\n\n        if (context.routeLayer) {\n            context.routeLayer.setLatLngs(coords);\n        }\n\n        if (context.options.fitBoundsOnLoad && coords.length > 1 && context.map) {\n            const bounds = context.routeLayer.getBounds();\n            const fitOpt = {};\n            if (context.options.maxZoomOnFit) {\n                fitOpt.maxZoom = context.options.maxZoomOnFit;\n            }\n            context.map.fitBounds(bounds, fitOpt);\n        }\n\n        if (typeof fireEventsCallback === \"function\") {\n            fireEventsCallback(coords);\n        }\n    };\n\n    /**\n     * Ajouter un waypoint manuel\n     * @param {L.LayerGroup} layerGroup - Layer group\n     * @param {number[]} latlng - Coordinates [lat, lng]\n     * @param {Object} waypointStyle - Waypoint style\n     */\n    GeoLeaf._RouteLayerManager.addWaypoint = function (layerGroup, latlng, waypointStyle) {\n        if (!layerGroup) return;\n        const interactiveShapes = GeoLeaf.Config.get('ui.interactiveShapes', false);\n        const style = Object.assign({}, waypointStyle, { interactive: interactiveShapes });\n        global.L.circleMarker(latlng, style).addTo(layerGroup);\n    };\n\n    /**\n     * Ajouter un segment manuel\n     * @param {L.Polyline} routeLayer - Route polyline\n     * @param {number[][]} coords - Coordinates to add\n     */\n    GeoLeaf._RouteLayerManager.addSegment = function (routeLayer, coords) {\n        if (!routeLayer) return;\n        const current = routeLayer.getLatLngs();\n        routeLayer.setLatLngs([...current, ...coords]);\n    };\n\n    /**\n     * √âmet les √©v√©nements \"geoleaf:route:loaded\" (Leaflet + DOM)\n     * @param {L.Map} map - Leaflet map\n     * @param {L.Polyline} routeLayer - Route polyline\n     * @param {number[][]} coords - Coordinates\n     */\n    GeoLeaf._RouteLayerManager.fireRouteLoadedEvents = function (map, routeLayer, coords) {\n        // √âv√©nement Leaflet sur la carte\n        try {\n            if (map && typeof map.fire === \"function\") {\n                map.fire(\"geoleaf:route:loaded\", {\n                    coords,\n                    layer: routeLayer,\n                    source: \"geoleaf.route\"\n                });\n            }\n        } catch (e) {\n            Log.warn(\n                \"[GeoLeaf.Route] Impossible d'√©mettre l'√©v√©nement Leaflet geoleaf:route:loaded.\",\n                e\n            );\n        }\n\n        // CustomEvent DOM\n        if (typeof document !== \"undefined\" && typeof document.dispatchEvent === \"function\") {\n            const detail = {\n                coords: Array.isArray(coords) ? coords.slice() : [],\n                map: map,\n                layer: routeLayer,\n                source: \"geoleaf.route\"\n            };\n\n            try {\n                if (typeof CustomEvent === \"function\") {\n                    const event = new CustomEvent(\"geoleaf:route:loaded\", { detail });\n                    document.dispatchEvent(event);\n                } else {\n                    const legacyEvent = document.createEvent(\"CustomEvent\");\n                    legacyEvent.initCustomEvent(\n                        \"geoleaf:route:loaded\",\n                        true,\n                        true,\n                        detail\n                    );\n                    document.dispatchEvent(legacyEvent);\n                }\n            } catch (err) {\n                Log.warn(\n                    \"[GeoLeaf.Route] Impossible d'√©mettre le CustomEvent geoleaf:route:loaded.\",\n                    err\n                );\n            }\n        }\n    };\n\n    Log.info(\"[GeoLeaf._RouteLayerManager] Module Layer Manager charg√©\");\n\n})(window);\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Namespace global GeoLeaf\r\n     */\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    /**\r\n     * Logger unifi√© (d√©fini par geoleaf.log.js / logger-shim)\r\n     */\r\n    const Log = GeoLeaf.Log || console;\r\n\r\n    /**\r\n     * Module GeoLeaf.Route\r\n     * - Charge et affiche des itin√©raires (GPX, GeoJSON, profils GeoLeaf)\r\n     * - G√®re une couche d√©di√©e (polyline + points √©ventuels)\r\n     * - Offre une API de visibilit√© pour la L√©gende (getLayer)\r\n     * - Prend en compte les styles et les points d√©part/arriv√©e d√©finis\r\n     *   dans le profil actif (profile.json).\r\n     */\r\n    const RouteModule = {\r\n        _map: null,\r\n        _layerGroup: null,\r\n        _routeLayer: null,\r\n\r\n        _initialized: false,\r\n        _visible: true,\r\n\r\n        /**\r\n         * Options par d√©faut\r\n         */\r\n        _options: {\r\n            lineStyle: {\r\n                color: \"#1E88E5\",\r\n                weight: 4,\r\n                opacity: 0.9,\r\n                interactive: false\r\n            },\r\n            waypointStyle: {\r\n                radius: 5,\r\n                color: \"#0D47A1\",\r\n                fillColor: \"#42A5F5\",\r\n                fillOpacity: 0.9,\r\n                weight: 2\r\n            },\r\n            // Affichage des points de d√©part / arriv√©e\r\n            showStart: true,\r\n            showEnd: true,\r\n            startWaypointStyle: null, // si null => waypointStyle\r\n            endWaypointStyle: null,   // si null => waypointStyle\r\n\r\n            fitBoundsOnLoad: true,\r\n            maxZoomOnFit: 14\r\n        },\r\n\r\n        /**\r\n         * Valide les options pass√©es √† init()\r\n         * @param {Object} options\r\n         * @private\r\n         */\r\n        _validateOptions(options) {\r\n            if (options.map && typeof options.map.addLayer !== \"function\") {\r\n                Log.warn(\"[GeoLeaf.Route] options.map ne semble pas √™tre une carte Leaflet valide.\");\r\n            }\r\n\r\n            if (options.lineStyle && typeof options.lineStyle !== \"object\") {\r\n                Log.warn(\"[GeoLeaf.Route] options.lineStyle doit √™tre un objet.\");\r\n                delete options.lineStyle;\r\n            }\r\n\r\n            if (options.waypointStyle && typeof options.waypointStyle !== \"object\") {\r\n                Log.warn(\"[GeoLeaf.Route] options.waypointStyle doit √™tre un objet.\");\r\n                delete options.waypointStyle;\r\n            }\r\n\r\n            if (\r\n                options.maxZoomOnFit !== undefined &&\r\n                (typeof options.maxZoomOnFit !== \"number\" ||\r\n                    options.maxZoomOnFit < 1 ||\r\n                    options.maxZoomOnFit > 20)\r\n            ) {\r\n                Log.warn(\"[GeoLeaf.Route] options.maxZoomOnFit doit √™tre entre 1 et 20.\");\r\n                options.maxZoomOnFit = 14;\r\n            }\r\n\r\n            return options;\r\n        },\r\n\r\n        /**\r\n         * Retourne le layerGroup contenant les itin√©raires\r\n         * (utilis√© par la L√©gende pour afficher/masquer la couche)\r\n         * @returns {L.LayerGroup|null}\r\n         */\r\n        getLayer() {\r\n            return this._layerGroup || null;\r\n        },\r\n\r\n        /**\r\n         * Initialisation du module Route\r\n         * @param {Object} options\r\n         * @param {L.Map} [options.map] - Carte Leaflet\r\n         * @returns {L.LayerGroup|null}\r\n         */\r\n        init(options = {}) {\r\n            options = this._validateOptions(options);\r\n\r\n            if (typeof global.L === \"undefined\") {\r\n                Log.error(\"[GeoLeaf.Route] Leaflet introuvable.\");\r\n                return null;\r\n            }\r\n\r\n            // Utilise un helper commun si disponible\r\n            let map = options.map || null;\r\n            if (!map && GeoLeaf.Core && typeof GeoLeaf.Core.getMap === \"function\") {\r\n                map = GeoLeaf.Core.getMap();\r\n            }\r\n            if (GeoLeaf.Utils && typeof GeoLeaf.Utils.ensureMap === \"function\") {\r\n                map = GeoLeaf.Utils.ensureMap(map);\r\n            }\r\n\r\n            if (!map) {\r\n                Log.error(\"[GeoLeaf.Route] Aucune carte disponible pour init().\");\r\n                return null;\r\n            }\r\n\r\n            this._map = map;\r\n\r\n            // Fusion des options\r\n            if (GeoLeaf.Utils && typeof GeoLeaf.Utils.mergeOptions === \"function\") {\r\n                this._options = GeoLeaf.Utils.mergeOptions(this._options, options);\r\n            } else {\r\n                this._options = Object.assign({}, this._options, options);\r\n            }\r\n\r\n            // Applique le param√®tre interactiveShapes de la config\r\n            const interactiveShapes = GeoLeaf.Config.get('ui.interactiveShapes', false);\r\n            if (this._options.lineStyle) {\r\n                this._options.lineStyle.interactive = interactiveShapes;\r\n            }\r\n\r\n            this._layerGroup = global.L.layerGroup().addTo(this._map);\r\n            this._routeLayer = global.L.polyline([], this._options.lineStyle).addTo(\r\n                this._layerGroup\r\n            );\r\n\r\n            this._initialized = true;\r\n            this._visible = true;\r\n\r\n            return this._layerGroup;\r\n        },\r\n\r\n        /**\r\n         * Indique si le module est initialis√©.\r\n         * @returns {boolean}\r\n         */\r\n        isInitialized() {\r\n            return this._initialized === true && !!this._map && !!this._layerGroup;\r\n        },\r\n\r\n        /**\r\n         * Indique si la couche d'itin√©raires est actuellement visible.\r\n         * @returns {boolean}\r\n         */\r\n        isVisible() {\r\n            return this._visible === true;\r\n        },\r\n\r\n        /**\r\n         * Affiche la couche d'itin√©raires.\r\n         */\r\n        show() {\r\n            if (!this._map || !this._layerGroup) return;\r\n            if (!this._map.hasLayer(this._layerGroup)) {\r\n                this._layerGroup.addTo(this._map);\r\n            }\r\n            this._visible = true;\r\n        },\r\n\r\n        /**\r\n         * Masque la couche d'itin√©raires.\r\n         */\r\n        hide() {\r\n            if (!this._map || !this._layerGroup) return;\r\n            if (this._map.hasLayer(this._layerGroup)) {\r\n                this._map.removeLayer(this._layerGroup);\r\n            }\r\n            this._visible = false;\r\n        },\r\n\r\n        /**\r\n         * Bascule la visibilit√© (utile √©ventuellement en dehors de la L√©gende).\r\n         */\r\n        toggleVisibility() {\r\n            if (!this.isInitialized()) {\r\n                Log.warn(\"[GeoLeaf.Route] toggleVisibility() appel√© sans init().\");\r\n                return;\r\n            }\r\n            if (this.isVisible()) {\r\n                this.hide();\r\n            } else {\r\n                this.show();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Vider tous les itin√©raires de la couche\r\n         */\r\n        clear() {\r\n            if (this._layerGroup) {\r\n                this._layerGroup.clearLayers();\r\n            }\r\n            if (this._map && this._layerGroup) {\r\n                this._routeLayer = global.L.polyline([], this._options.lineStyle).addTo(\r\n                    this._layerGroup\r\n                );\r\n            } else {\r\n                this._routeLayer = null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Charger un fichier GPX (via fetch)\r\n         * @param {string} url\r\n         * @returns {Promise<void>}\r\n         */\r\n        loadGPX(url) {\r\n            if (!url) {\r\n                Log.warn(\"[GeoLeaf.Route] URL GPX manquante.\");\r\n                return Promise.resolve();\r\n            }\r\n\r\n            // Sprint 3.3: Use unified FetchHelper with timeout for GPX loading\r\n            const FetchHelper = GeoLeaf.Utils?.FetchHelper;\r\n\r\n            if (FetchHelper) {\r\n                return FetchHelper.fetch(url, {\r\n                    timeout: 15000, // GPX files can be larger, allow more time\r\n                    retries: 2,\r\n                    parseResponse: false // We need raw text\r\n                })\r\n                .then((response) => response.text())\r\n                .then((xmlText) =>\r\n                    new DOMParser().parseFromString(xmlText, \"application/xml\")\r\n                )\r\n                .then((gpx) => {\r\n                    const coords = Array.from(gpx.getElementsByTagName(\"trkpt\")).map(\r\n                        (pt) => [\r\n                            parseFloat(pt.getAttribute(\"lat\") || \"0\"),\r\n                            parseFloat(pt.getAttribute(\"lon\") || \"0\")\r\n                        ]\r\n                    );\r\n                    this._applyRoute(coords);\r\n                })\r\n                .catch((err) => Log.error(\"[GeoLeaf.Route] Erreur GPX :\", err));\r\n            }\r\n\r\n            // Fallback to raw fetch\r\n            return fetch(url)\r\n                .then((res) => res.text())\r\n                .then((xmlText) =>\r\n                    new DOMParser().parseFromString(xmlText, \"application/xml\")\r\n                )\r\n                .then((gpx) => {\r\n                    const coords = Array.from(gpx.getElementsByTagName(\"trkpt\")).map(\r\n                        (pt) => [\r\n                            parseFloat(pt.getAttribute(\"lat\") || \"0\"),\r\n                            parseFloat(pt.getAttribute(\"lon\") || \"0\")\r\n                        ]\r\n                    );\r\n                    this._applyRoute(coords);\r\n                })\r\n                .catch((err) => Log.error(\"[GeoLeaf.Route] Erreur GPX :\", err));\r\n        },\r\n\r\n        /**\r\n         * Charger un itin√©raire GeoJSON (LineString)\r\n         * @param {Object} geojson\r\n         */\r\n        loadGeoJSON(geojson) {\r\n            if (!GeoLeaf._RouteLoaders || typeof GeoLeaf._RouteLoaders.loadGeoJSON !== \"function\") {\r\n                Log.error(\"[GeoLeaf.Route.loadGeoJSON] GeoLeaf._RouteLoaders.loadGeoJSON() non disponible.\");\r\n                return;\r\n            }\r\n            GeoLeaf._RouteLoaders.loadGeoJSON(geojson, this._applyRoute.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Charge un tableau d‚Äôitin√©raires d√©j√† normalis√©s depuis cfg.routes\r\n         * (profil GeoLeaf) et les dessine sur la carte.\r\n         *\r\n         * Format attendu pour chaque item :\r\n         * {\r\n         *   id: \"route-id\",\r\n         *   label: \"Nom\",\r\n         *   type: \"walking\" | \"trekking\" | ... (optionnel)\r\n         *   geometry: [ [lat, lng], ... ]  // OU GeoJSON LineString\r\n         *   properties: {\r\n         *     type?: \"walking\" | \"trekking\" | ...,\r\n         *     color?: \"#hex\",\r\n         *     weight?: number,\r\n         *     opacity?: number,\r\n         *     dashArray?: string,\r\n         *     showStart?: boolean,\r\n         *     showEnd?: boolean,\r\n         *     startStyle?: {...},\r\n         *     endStyle?: {...},\r\n         *     ...\r\n         *   }\r\n         * }\r\n         *\r\n         * Les styles et endpoints par d√©faut peuvent √™tre d√©finis\r\n         * dans le profil actif (profile.json) :\r\n         *\r\n         * \"defaultSettings\": {\r\n         *   \"routeConfig\": {\r\n         *     \"default\": { \"color\": \"#ff6600\", \"weight\": 4, \"opacity\": 0.9 },\r\n         *     \"endpoints\": {\r\n         *       \"showStart\": true,\r\n         *       \"showEnd\": true,\r\n         *       \"start\": { \"radius\": 6, \"color\": \"#ffffff\", \"fillColor\": \"#2b7cff\" },\r\n         *       \"end\":   { \"radius\": 6, \"color\": \"#ffffff\", \"fillColor\": \"#ff7b32\" }\r\n         *     }\r\n         *   }\r\n         * }\r\n         *\r\n         * La couleur des routes est d√©termin√©e par priorit√© :\r\n         * 1. colorRoute de la sous-cat√©gorie (taxonomy.categories[cat].subcategories[subcat].colorRoute)\r\n         * 2. colorRoute de la cat√©gorie (taxonomy.categories[cat].colorRoute)\r\n         * 3. defaultSettings.routeConfig.default.color\r\n         *\r\n         * @param {Array} routes\r\n         */\r\n        loadFromConfig(routes) {\r\n            if (!this.isInitialized()) {\r\n                Log.warn(\r\n                    \"[GeoLeaf.Route] loadFromConfig() appel√© alors que le module n'est pas initialis√©.\"\r\n                );\r\n                return;\r\n            }\r\n\r\n            if (!Array.isArray(routes) || routes.length === 0) {\r\n                this.clear();\r\n                Log.info(\"[GeoLeaf.Route] Aucun itin√©raire dans cfg.routes ; couche vid√©e.\");\r\n                return;\r\n            }\r\n\r\n            this.clear();\r\n\r\n            const allCoords = [];\r\n            const defaultStyle = this._options.lineStyle || {};\r\n\r\n            // R√©cup√©rer config + endpoints d√©finis dans le profil actif\r\n            let activeProfile = null;\r\n            let routeConfigDefault = null;\r\n            let profileEndpoints = null;\r\n\r\n            try {\r\n                if (\r\n                    GeoLeaf.Config &&\r\n                    typeof GeoLeaf.Config.getActiveProfile === \"function\"\r\n                ) {\r\n                    activeProfile = GeoLeaf.Config.getActiveProfile();\r\n                    if (activeProfile && activeProfile.defaultSettings && activeProfile.defaultSettings.routeConfig) {\r\n                        if (\r\n                            activeProfile.defaultSettings.routeConfig.default &&\r\n                            typeof activeProfile.defaultSettings.routeConfig.default === \"object\" &&\r\n                            !Array.isArray(activeProfile.defaultSettings.routeConfig.default)\r\n                        ) {\r\n                            routeConfigDefault = activeProfile.defaultSettings.routeConfig.default;\r\n                        }\r\n                        if (\r\n                            activeProfile.defaultSettings.routeConfig.endpoints &&\r\n                            typeof activeProfile.defaultSettings.routeConfig.endpoints === \"object\" &&\r\n                            !Array.isArray(activeProfile.defaultSettings.routeConfig.endpoints)\r\n                        ) {\r\n                            profileEndpoints = activeProfile.defaultSettings.routeConfig.endpoints;\r\n                        }\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                Log.warn(\r\n                    \"[GeoLeaf.Route] Impossible de lire la config/endpoints depuis le profil actif.\",\r\n                    e\r\n                );\r\n            }\r\n\r\n            routes.forEach((route) => {\r\n                if (!route || typeof route !== \"object\") {\r\n                    return;\r\n                }\r\n\r\n                const coords = this._extractCoordsFromRouteItem(route);\r\n                if (!coords || coords.length === 0) {\r\n                    return;\r\n                }\r\n\r\n                // Style de la polyline\r\n                const routeStyle = this._resolveRouteStyle(\r\n                    route,\r\n                    activeProfile,\r\n                    routeConfigDefault,\r\n                    defaultStyle\r\n                );\r\n\r\n                // Applique le param√®tre interactiveShapes\r\n                const interactiveShapes = GeoLeaf.Config.get('ui.interactiveShapes', false);\r\n                routeStyle.interactive = interactiveShapes;\r\n\r\n                const polyline = global.L.polyline(coords, routeStyle).addTo(\r\n                    this._layerGroup\r\n                );\r\n\r\n                // Attach route data to polyline for popup/tooltip access\r\n                polyline._geoleafRouteData = route;\r\n\r\n                // Add tooltip with route label\r\n                this._addRouteTooltip(polyline, route);\r\n\r\n                // Add popup with route details\r\n                this._addRoutePopup(polyline, route);\r\n\r\n                // Premi√®re polyline = \"routeLayer\" principal\r\n                if (!this._routeLayer) {\r\n                    this._routeLayer = polyline;\r\n                }\r\n\r\n                allCoords.push(...coords);\r\n\r\n                // Points de d√©part / arriv√©e\r\n                const endpointCfg = this._resolveEndpointConfig(\r\n                    route,\r\n                    profileEndpoints,\r\n                    this._options\r\n                );\r\n\r\n                if (coords.length > 0) {\r\n                    const startLatLng = coords[0];\r\n                    const endLatLng = coords[coords.length - 1];\r\n\r\n                    if (endpointCfg.showStart) {\r\n                        const startStyle = Object.assign({}, endpointCfg.startStyle, { interactive: interactiveShapes });\r\n                        global.L.circleMarker(startLatLng, startStyle).addTo(\r\n                            this._layerGroup\r\n                        );\r\n                    }\r\n\r\n                    if (\r\n                        endpointCfg.showEnd &&\r\n                        endLatLng &&\r\n                        (endLatLng[0] !== startLatLng[0] ||\r\n                            endLatLng[1] !== startLatLng[1])\r\n                    ) {\r\n                        const endStyle = Object.assign({}, endpointCfg.endStyle, { interactive: interactiveShapes });\r\n                        global.L.circleMarker(endLatLng, endStyle).addTo(\r\n                            this._layerGroup\r\n                        );\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (allCoords.length === 0) {\r\n                Log.warn(\r\n                    \"[GeoLeaf.Route] loadFromConfig() n'a trouv√© aucun itin√©raire valide dans cfg.routes.\"\r\n                );\r\n                return;\r\n            }\r\n\r\n            // Ajuster l'emprise globale si option activ√©e\r\n            if (this._options.fitBoundsOnLoad) {\r\n                try {\r\n                    const bounds = this._layerGroup.getBounds();\r\n                    const fitOpt = {};\r\n                    if (this._options.maxZoomOnFit) {\r\n                        fitOpt.maxZoom = this._options.maxZoomOnFit;\r\n                    }\r\n                    this._map.fitBounds(bounds, fitOpt);\r\n                } catch (e) {\r\n                    Log.warn(\r\n                        \"[GeoLeaf.Route] Erreur lors du fitBounds sur les itin√©raires :\",\r\n                        e\r\n                    );\r\n                }\r\n            }\r\n\r\n            // √âv√©nements \"route loaded\" (Leaflet + DOM)\r\n            this._fireRouteLoadedEvents(allCoords);\r\n        },\r\n\r\n        /**\r\n         * Filtrer la visibilit√© des routes d√©j√† charg√©es sans les recharger.\r\n         * Pr√©serve les styles originaux des routes.\r\n         * @param {Array<Object>} filteredRoutes - Liste des routes √† afficher (apr√®s filtrage)\r\n         * @public\r\n         */\r\n        filterVisibility: function (filteredRoutes) {\r\n            if (!this._initialized) {\r\n                Log.warn(\"[GeoLeaf.Route] Module non initialis√© - filterVisibility ignor√©.\");\r\n                return;\r\n            }\r\n\r\n            if (!Array.isArray(filteredRoutes)) {\r\n                Log.warn(\"[GeoLeaf.Route] filterVisibility : filteredRoutes doit √™tre un tableau.\");\r\n                return;\r\n            }\r\n\r\n            // Cr√©er un Set des IDs des routes √† afficher pour une recherche rapide\r\n            const visibleRouteIds = new Set(filteredRoutes.map(r => r.id));\r\n\r\n            // Parcourir toutes les couches actuellement affich√©es\r\n            this._layerGroup.eachLayer(function (layer) {\r\n                // V√©rifier si cette couche a un ID de route\r\n                const routeId = layer.options && layer.options.routeId;\r\n\r\n                if (routeId !== undefined) {\r\n                    // Afficher ou masquer selon si l'ID est dans la liste filtr√©e\r\n                    if (visibleRouteIds.has(routeId)) {\r\n                        if (!this._map.hasLayer(layer)) {\r\n                            this._map.addLayer(layer);\r\n                        }\r\n                    } else {\r\n                        if (this._map.hasLayer(layer)) {\r\n                            this._map.removeLayer(layer);\r\n                        }\r\n                    }\r\n                }\r\n            }.bind(this));\r\n\r\n            Log.info(\"[GeoLeaf.Route] Visibilit√© filtr√©e : \" + filteredRoutes.length + \" routes visibles.\");\r\n        },\r\n\r\n        /**\r\n         * Extraire un tableau de [lat, lng] √† partir d'un item de cfg.routes.\r\n         * @param {Object} route\r\n         * @returns {number[][]}\r\n         * @private\r\n         */\r\n        _extractCoordsFromRouteItem(route) {\r\n            if (!GeoLeaf._RouteLoaders || typeof GeoLeaf._RouteLoaders.extractCoordsFromRouteItem !== \"function\") {\r\n                Log.error(\"[GeoLeaf.Route._extractCoordsFromRouteItem] GeoLeaf._RouteLoaders.extractCoordsFromRouteItem() non disponible.\");\r\n                return [];\r\n            }\r\n            return GeoLeaf._RouteLoaders.extractCoordsFromRouteItem(route);\r\n        },\r\n\r\n        /**\r\n         * D√©termine la couleur d'un itin√©raire selon la priorit√© :\r\n         *  1. colorRoute de la sous-cat√©gorie (si d√©finie)\r\n         *  2. colorRoute de la cat√©gorie (si d√©finie)\r\n         *  3. couleur par d√©faut de routeConfig.default.color\r\n         *\r\n         * @param {Object} route - L'itin√©raire\r\n         * @param {Object} profile - Le profil actif\r\n         * @param {Object} routeConfigDefault - La config par d√©faut (defaultSettings.routeConfig.default)\r\n         * @returns {string|null} La couleur √† utiliser ou null\r\n         * @private\r\n         */\r\n        _getRouteColor(route, profile, routeConfigDefault) {\r\n            if (!GeoLeaf._RouteStyleResolver || typeof GeoLeaf._RouteStyleResolver.getRouteColor !== \"function\") {\r\n                Log.error(\"[GeoLeaf.Route._getRouteColor] GeoLeaf._RouteStyleResolver.getRouteColor() non disponible.\");\r\n                return routeConfigDefault?.color || null;\r\n            }\r\n            return GeoLeaf._RouteStyleResolver.getRouteColor(route, profile, routeConfigDefault);\r\n        },\r\n\r\n        /**\r\n         * Calcule le style final d'un itin√©raire en combinant :\r\n         *  - le style par d√©faut du module,\r\n         *  - la config par d√©faut du profil (defaultSettings.routeConfig.default),\r\n         *  - la couleur bas√©e sur la taxonomie (colorRoute),\r\n         *  - les surcharges au niveau de l'itin√©raire (properties.*).\r\n         *\r\n         * @private\r\n         */\r\n        _resolveRouteStyle(route, activeProfile, routeConfigDefault, defaultStyle) {\r\n            if (!GeoLeaf._RouteStyleResolver || typeof GeoLeaf._RouteStyleResolver.resolveRouteStyle !== \"function\") {\r\n                Log.error(\"[GeoLeaf.Route._resolveRouteStyle] GeoLeaf._RouteStyleResolver.resolveRouteStyle() non disponible.\");\r\n                return Object.assign({}, defaultStyle || {});\r\n            }\r\n            return GeoLeaf._RouteStyleResolver.resolveRouteStyle(route, activeProfile, routeConfigDefault, defaultStyle);\r\n        },\r\n\r\n        /**\r\n         * Calcule la configuration d'affichage des points d√©part / arriv√©e\r\n         * en combinant :\r\n         *  - les options par d√©faut du module (_options),\r\n         *  - les endpoints d√©finis dans le profil actif (defaultSettings.routeConfig.endpoints),\r\n         *  - les surcharges √©ventuelles au niveau de l'itin√©raire\r\n         *    (properties.showStart, properties.showEnd, startStyle, endStyle).\r\n         *\r\n         * @private\r\n         */\r\n        _resolveEndpointConfig(route, profileEndpoints, moduleOptions) {\r\n            if (!GeoLeaf._RouteStyleResolver || typeof GeoLeaf._RouteStyleResolver.resolveEndpointConfig !== \"function\") {\r\n                Log.error(\"[GeoLeaf.Route._resolveEndpointConfig] GeoLeaf._RouteStyleResolver.resolveEndpointConfig() non disponible.\");\r\n                return {\r\n                    showStart: true,\r\n                    showEnd: true,\r\n                    startStyle: { radius: 6, color: \"#ffffff\", fillColor: \"#2b7cff\", fillOpacity: 1, weight: 2 },\r\n                    endStyle: { radius: 6, color: \"#ffffff\", fillColor: \"#ff7b32\", fillOpacity: 1, weight: 2 }\r\n                };\r\n            }\r\n            return GeoLeaf._RouteStyleResolver.resolveEndpointConfig(route, profileEndpoints, moduleOptions);\r\n        },\r\n\r\n        /**\r\n         * Ajouter un waypoint manuel\r\n         * @param {number[]} latlng\r\n         */\r\n        addWaypoint(latlng) {\r\n            if (!GeoLeaf._RouteLayerManager || typeof GeoLeaf._RouteLayerManager.addWaypoint !== \"function\") {\r\n                Log.error(\"[GeoLeaf.Route.addWaypoint] GeoLeaf._RouteLayerManager.addWaypoint() non disponible.\");\r\n                return;\r\n            }\r\n            GeoLeaf._RouteLayerManager.addWaypoint(this._layerGroup, latlng, this._options.waypointStyle);\r\n        },\r\n\r\n        /**\r\n         * Ajouter un segment manuel\r\n         * @param {number[][]} coords\r\n         */\r\n        addSegment(coords) {\r\n            if (!this._routeLayer) return;\r\n            const current = this._routeLayer.getLatLngs();\r\n            this._routeLayer.setLatLngs([...current, ...coords]);\r\n        },\r\n\r\n        /**\r\n         * Appliquer un itin√©raire complet (remplacement)\r\n         * @param {number[][]} coords\r\n         * @private\r\n         */\r\n        _applyRoute(coords) {\r\n            if (!GeoLeaf._RouteLayerManager || typeof GeoLeaf._RouteLayerManager.applyRoute !== \"function\") {\r\n                Log.error(\"[GeoLeaf.Route._applyRoute] GeoLeaf._RouteLayerManager.applyRoute() non disponible.\");\r\n                return;\r\n            }\r\n            const context = {\r\n                map: this._map,\r\n                layerGroup: this._layerGroup,\r\n                routeLayer: this._routeLayer,\r\n                options: this._options\r\n            };\r\n            GeoLeaf._RouteLayerManager.applyRoute(context, coords, this.clear.bind(this), this._fireRouteLoadedEvents.bind(this));\r\n            this._routeLayer = context.routeLayer;\r\n        },\r\n\r\n        /**\r\n         * Add tooltip to route polyline\r\n         * @param {L.Polyline} polyline\r\n         * @param {Object} route\r\n         * @private\r\n         */\r\n        _addRouteTooltip(polyline, route) {\r\n            if (!GeoLeaf._RoutePopupBuilder || typeof GeoLeaf._RoutePopupBuilder.addRouteTooltip !== \"function\") {\r\n                Log.error(\"[GeoLeaf.Route._addRouteTooltip] GeoLeaf._RoutePopupBuilder.addRouteTooltip() non disponible.\");\r\n                return;\r\n            }\r\n            GeoLeaf._RoutePopupBuilder.addRouteTooltip(polyline, route);\r\n        },\r\n\r\n        /**\r\n         * Add popup to route polyline with \"Voir plus\" button\r\n         * @param {L.Polyline} polyline\r\n         * @param {Object} route\r\n         * @private\r\n         */\r\n        _addRoutePopup(polyline, route) {\r\n            if (!GeoLeaf._RoutePopupBuilder || typeof GeoLeaf._RoutePopupBuilder.addRoutePopup !== \"function\") {\r\n                Log.error(\"[GeoLeaf.Route._addRoutePopup] GeoLeaf._RoutePopupBuilder.addRoutePopup() non disponible.\");\r\n                return;\r\n            }\r\n            GeoLeaf._RoutePopupBuilder.addRoutePopup(polyline, route, this);\r\n        },\r\n\r\n        /**\r\n         * Build popup content for route (same structure as POI popup)\r\n         * @param {Object} route\r\n         * @returns {string} HTML content\r\n         * @private\r\n         */\r\n        _buildRoutePopupContent(route) {\r\n            if (!GeoLeaf._RoutePopupBuilder || typeof GeoLeaf._RoutePopupBuilder.buildRoutePopupContent !== \"function\") {\r\n                Log.error(\"[GeoLeaf.Route._buildRoutePopupContent] GeoLeaf._RoutePopupBuilder.buildRoutePopupContent() non disponible.\");\r\n                return \"<div>Route popup non disponible</div>\";\r\n            }\r\n            return GeoLeaf._RoutePopupBuilder.buildRoutePopupContent(route);\r\n        },        /**\r\n         * Open side panel with route details\r\n         * @param {Object} route\r\n         * @private\r\n         */\r\n        _openRouteSidePanel(route) {\r\n            if (!GeoLeaf._RoutePopupBuilder || typeof GeoLeaf._RoutePopupBuilder.openRouteSidePanel !== \"function\") {\r\n                Log.error(\"[GeoLeaf.Route._openRouteSidePanel] GeoLeaf._RoutePopupBuilder.openRouteSidePanel() non disponible.\");\r\n                return;\r\n            }\r\n            GeoLeaf._RoutePopupBuilder.openRouteSidePanel(route);\r\n        },\r\n\r\n        /**\r\n         * √âmet les √©v√©nements \"geoleaf:route:loaded\" (Leaflet + DOM)\r\n         * @param {number[][]} coords\r\n         * @private\r\n         */\r\n        _fireRouteLoadedEvents(coords) {\r\n            // √âv√©nement Leaflet sur la carte\r\n            try {\r\n                if (this._map && typeof this._map.fire === \"function\") {\r\n                    this._map.fire(\"geoleaf:route:loaded\", {\r\n                        coords,\r\n                        layer: this._routeLayer,\r\n                        source: \"geoleaf.route\"\r\n                    });\r\n                }\r\n            } catch (e) {\r\n                Log.warn(\r\n                    \"[GeoLeaf.Route] Impossible d'√©mettre l'√©v√©nement Leaflet geoleaf:route:loaded.\",\r\n                    e\r\n                );\r\n            }\r\n\r\n            // CustomEvent DOM\r\n            if (typeof document !== \"undefined\" && typeof document.dispatchEvent === \"function\") {\r\n                const detail = {\r\n                    coords: Array.isArray(coords) ? coords.slice() : [],\r\n                    map: this._map,\r\n                    layer: this._routeLayer,\r\n                    source: \"geoleaf.route\"\r\n                };\r\n\r\n                try {\r\n                    if (typeof CustomEvent === \"function\") {\r\n                        const event = new CustomEvent(\"geoleaf:route:loaded\", { detail });\r\n                        document.dispatchEvent(event);\r\n                    } else {\r\n                        const legacyEvent = document.createEvent(\"CustomEvent\");\r\n                        legacyEvent.initCustomEvent(\r\n                            \"geoleaf:route:loaded\",\r\n                            true,\r\n                            true,\r\n                            detail\r\n                        );\r\n                        document.dispatchEvent(legacyEvent);\r\n                    }\r\n                } catch (err) {\r\n                    Log.warn(\r\n                        \"[GeoLeaf.Route] Impossible d'√©mettre le CustomEvent geoleaf:route:loaded.\",\r\n                        err\r\n                    );\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    GeoLeaf.Route = RouteModule;\r\n})(window);\r\n","/**\r\n * Module partag√© pour LayerManager\r\n * √âtat et utilitaires communs entre les sous-modules\r\n *\r\n * D√âPENDANCES:\r\n * - GeoLeaf.Log (optionnel)\r\n *\r\n * EXPOSE:\r\n * - GeoLeaf._LayerManagerShared\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * √âtat partag√© pour LayerManager (priv√© interne)\r\n     * @private\r\n     */\r\n    const _LayerManagerShared = {\r\n        /**\r\n         * R√©f√©rence √† la carte Leaflet\r\n         * @type {L.Map|null}\r\n         */\r\n        map: null,\r\n\r\n        /**\r\n         * R√©f√©rence au contr√¥le Leaflet\r\n         * @type {L.Control|null}\r\n         */\r\n        control: null,\r\n\r\n        /**\r\n         * Options internes du module\r\n         * @type {Object}\r\n         */\r\n        options: {\r\n            position: \"bottomright\",\r\n            title: \"L√©gende\",\r\n            collapsible: true,\r\n            collapsed: false,\r\n            sections: []\r\n        }\r\n    };\r\n\r\n    // Exposer dans l'espace de noms interne\r\n    GeoLeaf._LayerManagerShared = _LayerManagerShared;\r\n\r\n})(window);\r\n","/**\r\n * Module Renderer pour LayerManager\r\n * Logique de rendu des sections et items de la l√©gende\r\n *\r\n * D√âPENDANCES:\r\n * - Leaflet (L.DomUtil, L.DomEvent)\r\n * - GeoLeaf.Log (optionnel)\r\n * - GeoLeaf._LayerManagerBasemapSelector (pour section basemap)\r\n * - GeoLeaf._LayerManagerThemeSelector (pour th√®mes)\r\n * - GeoLeaf.Themes (pour getAvailableThemes)\r\n * - GeoLeaf.GeoJSON (pour setTheme)\r\n *\r\n * EXPOSE:\r\n * - GeoLeaf._LayerManagerRenderer\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module Renderer pour LayerManager\r\n     * @namespace _LayerManagerRenderer\r\n     * @private\r\n     */\r\n    const _LayerManagerRenderer = {\r\n        /**\r\n         * Rend les sections de la l√©gende\r\n         * @param {HTMLElement} bodyEl - √âl√©ment body de la l√©gende\r\n         * @param {Array} sections - Liste des sections √† rendre\r\n         */\r\n        renderSections(bodyEl, sections) {\r\n            if (!bodyEl) {\r\n                return;\r\n            }\r\n\r\n            // Clear content sans innerHTML\r\n            if (GeoLeaf._UIComponents && typeof GeoLeaf._UIComponents.clearElement === 'function') {\r\n                GeoLeaf._UIComponents.clearElement(bodyEl);\r\n            } else {\r\n                while (bodyEl.firstChild) {\r\n                    bodyEl.removeChild(bodyEl.firstChild);\r\n                }\r\n            }\r\n\r\n            if (!Array.isArray(sections) || sections.length === 0) {\r\n                if (GeoLeaf._UIComponents && typeof GeoLeaf._UIComponents.createEmptyMessage === 'function') {\r\n                    GeoLeaf._UIComponents.createEmptyMessage(bodyEl, \"Aucune couche √† afficher.\", \"gl-layer-manager__empty\");\r\n                } else {\r\n                    const emptyEl = global.L.DomUtil.create(\"div\", \"gl-layer-manager__empty\", bodyEl);\r\n                    emptyEl.textContent = \"Aucune couche √† afficher.\";\r\n                }\r\n                return;\r\n            }\r\n\r\n            // Filtrer les sections legacy \"poi\" et \"route\" (obsol√®tes)\r\n            const filteredSections = sections.filter(s => s.id !== \"poi\" && s.id !== \"route\");\r\n\r\n            filteredSections.forEach((section) => {\r\n                const isCollapsible = typeof section.collapsedByDefault === 'boolean';\r\n                const isCollapsed = section.collapsedByDefault === true;\r\n\r\n                const sectionEl = global.L.DomUtil.create(\r\n                    \"div\",\r\n                    isCollapsible ? \"gl-layer-manager__section gl-layer-manager__section--accordion\" : \"gl-layer-manager__section\",\r\n                    bodyEl\r\n                );\r\n\r\n                if (isCollapsed) {\r\n                    sectionEl.classList.add(\"gl-layer-manager__section--collapsed\");\r\n                }\r\n\r\n                if (section.label) {\r\n                    if (isCollapsible) {\r\n                        // En-t√™te cliquable pour accord√©on\r\n                        const accordionHeader = global.L.DomUtil.create(\r\n                            \"div\",\r\n                            \"gl-layer-manager__accordion-header\",\r\n                            sectionEl\r\n                        );\r\n\r\n                        const sectionTitle = global.L.DomUtil.create(\r\n                            \"div\",\r\n                            \"gl-layer-manager__section-title\",\r\n                            accordionHeader\r\n                        );\r\n                        sectionTitle.textContent = section.label;\r\n\r\n                        const accordionArrow = global.L.DomUtil.create(\r\n                            \"span\",\r\n                            \"gl-layer-manager__accordion-arrow\",\r\n                            accordionHeader\r\n                        );\r\n                        accordionArrow.textContent = \"‚ñ∂\";\r\n\r\n                        // Gestionnaire de clic pour l'accord√©on\r\n                        global.L.DomEvent.on(accordionHeader, \"click\", function(ev) {\r\n                            global.L.DomEvent.stopPropagation(ev);\r\n                            global.L.DomEvent.preventDefault(ev);\r\n\r\n                            const wasCollapsed = sectionEl.classList.contains(\"gl-layer-manager__section--collapsed\");\r\n                            sectionEl.classList.toggle(\"gl-layer-manager__section--collapsed\");\r\n\r\n                            // Mettre √† jour la fl√®che avec animation\r\n                            accordionArrow.textContent = wasCollapsed ? \"‚ñº\" : \"‚ñ∂\";\r\n\r\n                            // Mettre √† jour l'√©tat dans la section\r\n                            section._isExpanded = wasCollapsed;\r\n\r\n                            if (Log) Log.debug(\"[LayerManager] Accord√©on\", section.id, wasCollapsed ? \"ouvert\" : \"ferm√©\");\r\n                        });\r\n                    } else {\r\n                        // Titre simple pour section non-accord√©on\r\n                        const sectionTitle = global.L.DomUtil.create(\r\n                            \"div\",\r\n                            \"gl-layer-manager__section-title\",\r\n                            sectionEl\r\n                        );\r\n                        sectionTitle.textContent = section.label;\r\n                    }\r\n                }\r\n\r\n                // Si pas d'items, garder la section visible avec son titre seulement\r\n                if (!Array.isArray(section.items) || section.items.length === 0) {\r\n                    return;\r\n                }\r\n\r\n                // Cr√©er le corps de la section (accord√©on ou simple)\r\n                const sectionBody = isCollapsible ?\r\n                    global.L.DomUtil.create(\"div\", \"gl-layer-manager__accordion-body\", sectionEl) :\r\n                    sectionEl;\r\n\r\n                // Section basemap : d√©l√©guer au BasemapSelector\r\n                if (section.id === \"basemap\") {\r\n                    if (GeoLeaf._LayerManagerBasemapSelector) {\r\n                        GeoLeaf._LayerManagerBasemapSelector.render(section, sectionBody);\r\n                    }\r\n                } else {\r\n                    // Autres sections : rendre les items\r\n                    this._renderItems(section, sectionBody);\r\n                }\r\n            });\r\n\r\n            // Synchroniser imm√©diatement les boutons de labels apr√®s re-render\r\n            if (GeoLeaf._LabelButtonManager && GeoLeaf._GeoJSONLayerManager) {\r\n                const allLayers = GeoLeaf._GeoJSONLayerManager._layers || new Map();\r\n                allLayers.forEach((layerData, layerId) => {\r\n                    if (layerData.currentStyle) {\r\n                        GeoLeaf._LabelButtonManager.syncImmediate(layerId);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Synchronise l'√©tat des toggles existants sans re-g√©n√©rer le DOM\r\n         * Utilis√© apr√®s l'application d'un th√®me pour mettre √† jour les toggles\r\n         * @public\r\n         */\r\n        syncToggles() {\r\n            // Trouver tous les items de couche dans le DOM\r\n            const layerItems = document.querySelectorAll('[data-layer-id]');\r\n\r\n            if (Log) Log.debug(`[LayerManager Renderer] Synchronisation de ${layerItems.length} toggles`);\r\n\r\n            layerItems.forEach(itemEl => {\r\n                const layerId = itemEl.getAttribute('data-layer-id');\r\n                if (!layerId) return;\r\n\r\n                // R√©cup√©rer les infos de visibilit√© pour le log\r\n                const layerData = global.GeoLeaf?.GeoJSON?.getLayerById(layerId);\r\n                const isVisible = this._checkLayerVisibility(layerId);\r\n\r\n                if (Log) Log.debug(`[LayerManager Renderer] Couche ${layerId}:`, {\r\n                    isVisible,\r\n                    hasLayerData: !!layerData,\r\n                    hasVisibility: !!(layerData && layerData._visibility),\r\n                    currentValue: layerData?._visibility?.current,\r\n                    onMap: layerData?.layer ? global.GeoLeaf._GeoJSONShared?.state?.map?.hasLayer(layerData.layer) : false\r\n                });\r\n\r\n                // Mettre √† jour la classe gl-layer--hidden\r\n                if (isVisible) {\r\n                    itemEl.classList.remove('gl-layer--hidden');\r\n                } else {\r\n                    itemEl.classList.add('gl-layer--hidden');\r\n                }\r\n\r\n                // Trouver et mettre √† jour le toggle button\r\n                const toggleBtn = itemEl.querySelector('.gl-layer-manager__item-toggle');\r\n                if (toggleBtn) {\r\n                    toggleBtn.setAttribute('aria-pressed', isVisible ? 'true' : 'false');\r\n\r\n                    // Harmoniser avec createToggleButton: suffixe \"--on\"\r\n                    const onClass = 'gl-layer-manager__item-toggle--on';\r\n                    if (isVisible) {\r\n                        toggleBtn.classList.add(onClass);\r\n                    } else {\r\n                        toggleBtn.classList.remove(onClass);\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (Log) Log.debug(\"[LayerManager Renderer] √âtats des toggles synchronis√©s\");\r\n        },\r\n\r\n        /**\r\n         * Rend les items d'une section\r\n         * @private\r\n         */\r\n        _renderItems(section, sectionEl) {\r\n            const listEl = global.L.DomUtil.create(\r\n                \"div\",\r\n                \"gl-layer-manager__items\",\r\n                sectionEl\r\n            );\r\n\r\n            section.items.forEach((item) => {\r\n                const itemEl = global.L.DomUtil.create(\r\n                    \"div\",\r\n                    \"gl-layer-manager__item\",\r\n                    listEl\r\n                );\r\n\r\n                // Ajouter l'attribut data-layer-id pour faciliter la recherche DOM\r\n                if (item.id) {\r\n                    itemEl.setAttribute(\"data-layer-id\", item.id);\r\n\r\n                    // Ajouter la classe gl-layer--hidden si la couche n'est pas visible au chargement\r\n                    const isVisible = this._checkLayerVisibility(item.id);\r\n                    if (!isVisible) {\r\n                        itemEl.classList.add(\"gl-layer--hidden\");\r\n                    }\r\n                }\r\n\r\n                // Conteneur de la ligne principale (toujours cr√©√© pour le layout en colonne)\r\n                const mainRow = global.L.DomUtil.create(\"div\", \"gl-layer-manager__item-row\", itemEl);\r\n\r\n                // Libell√©\r\n                const labelEl = global.L.DomUtil.create(\r\n                    \"span\",\r\n                    \"gl-layer-manager__label\",\r\n                    mainRow\r\n                );\r\n                labelEl.textContent = item.label || \"\";\r\n\r\n                // Toggle d'affichage pour les couches toggleable\r\n                if (item.toggleable && item.id) {\r\n                    this._renderToggleControls(item, mainRow, itemEl);\r\n                } else if (item.id) {\r\n                    // M√™me pour les couches non-toggleable, cr√©er le bouton label\r\n                    const controlsContainer = global.L.DomUtil.create(\r\n                        \"div\",\r\n                        \"gl-layer-manager__item-controls\",\r\n                        mainRow\r\n                    );\r\n\r\n                    // Cr√©er le bouton de label\r\n                    if (global.GeoLeaf && global.GeoLeaf._LabelButtonManager) {\r\n                        global.GeoLeaf._LabelButtonManager.createButton(item.id, controlsContainer);\r\n                        global.GeoLeaf._LabelButtonManager.syncImmediate(item.id);\r\n                    }\r\n                } else {\r\n                    // Valeur/info compl√©mentaire pour items sans ID\r\n                    if (typeof item.value !== \"undefined\") {\r\n                        const valueEl = global.L.DomUtil.create(\r\n                            \"span\",\r\n                            \"gl-layer-manager__value\",\r\n                            itemEl\r\n                        );\r\n                        valueEl.textContent = String(item.value);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Rend les contr√¥les toggle pour un item\r\n         * @private\r\n         */\r\n        _renderToggleControls(item, mainRow, itemEl) {\r\n            // Conteneur des contr√¥les (toggle + fl√®che th√®me)\r\n            const controlsContainer = global.L.DomUtil.create(\r\n                \"div\",\r\n                \"gl-layer-manager__item-controls\",\r\n                mainRow\r\n            );\r\n\r\n            // Cr√©er le bouton de label via le gestionnaire centralis√©\r\n            if (global.GeoLeaf && global.GeoLeaf._LabelButtonManager) {\r\n                global.GeoLeaf._LabelButtonManager.createButton(item.id, controlsContainer);\r\n                global.GeoLeaf._LabelButtonManager.syncImmediate(item.id);\r\n            }\r\n\r\n            // V√©rifier l'√©tat initial\r\n            const isActive = this._checkLayerVisibility(item.id);\r\n\r\n            const toggleBtn = GeoLeaf._UIComponents && typeof GeoLeaf._UIComponents.createToggleButton === 'function'\r\n                ? GeoLeaf._UIComponents.createToggleButton(controlsContainer, {\r\n                    isActive: isActive,\r\n                    className: \"gl-layer-manager__item-toggle\",\r\n                    title: \"Afficher / masquer la couche\"\r\n                })\r\n                : this._createToggleFallback(controlsContainer, isActive);\r\n\r\n            // Attacher le gestionnaire de toggle\r\n            this._attachToggleHandler(toggleBtn, item.id);\r\n\r\n            // S√©lecteur de styles si disponible\r\n            if (item.styles && GeoLeaf._LayerManagerStyleSelector) {\r\n                const styleElement = GeoLeaf._LayerManagerStyleSelector.renderDOM(item);\r\n                if (styleElement) {\r\n                    itemEl.appendChild(styleElement);\r\n                    GeoLeaf._LayerManagerStyleSelector.bindEvents(styleElement, item);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * V√©rifie si une couche est visible\r\n         * @private\r\n         */\r\n        _checkLayerVisibility(layerId) {\r\n            try {\r\n                if (layerId && global.GeoLeaf && global.GeoLeaf.GeoJSON && typeof global.GeoLeaf.GeoJSON.getLayerById === \"function\") {\r\n                    const layerData = global.GeoLeaf.GeoJSON.getLayerById(layerId);\r\n\r\n                    // IMPORTANT: Utiliser logicalState (√©tat du bouton ON/OFF) au lieu de current (√©tat physique sur carte)\r\n                    // Le bouton doit refl√©ter l'intention de l'utilisateur/th√®me, pas les contraintes de zoom\r\n                    const logicalState = layerData && layerData._visibility && typeof layerData._visibility.logicalState === 'boolean'\r\n                        ? layerData._visibility.logicalState\r\n                        : (layerData && layerData.visible === true);\r\n\r\n                    const result = logicalState;\r\n\r\n                    if (Log) {\r\n                        Log.debug(`[LayerManager Renderer] _checkLayerVisibility(${layerId}): logicalState=${logicalState}`);\r\n                    }\r\n\r\n                    return result;\r\n                }\r\n            } catch (e) {\r\n                if (Log) Log.error(\"[LayerManager Renderer] Erreur dans _checkLayerVisibility:\", e);\r\n            }\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Attache le gestionnaire de toggle pour une couche\r\n         * @private\r\n         */\r\n        _attachToggleHandler(toggleBtn, itemId) {\r\n            // GUARD: V√©rifier si un gestionnaire est d√©j√† attach√©\r\n            if (toggleBtn._toggleHandlerAttached) {\r\n                return;\r\n            }\r\n\r\n            // Marquer comme attach√© AVANT de cr√©er le gestionnaire\r\n            toggleBtn._toggleHandlerAttached = true;\r\n\r\n            const self = this;\r\n\r\n            const onToggle = function (ev) {\r\n                // EMP√äCHER LES MULTIPLES CLICS EN PREMIER\r\n                if (toggleBtn._isToggling) {\r\n                    if (Log) Log.warn(\"[LayerManager] ‚è∏Ô∏è Toggle D√âJ√Ä en cours, BLOQU√â:\", itemId);\r\n                    if (global.L && global.L.DomEvent) {\r\n                        global.L.DomEvent.stopPropagation(ev);\r\n                        global.L.DomEvent.preventDefault(ev);\r\n                    }\r\n                    return; // SORTIR IMM√âDIATEMENT\r\n                }\r\n\r\n                // Marquer comme en cours IMM√âDIATEMENT\r\n                toggleBtn._isToggling = true;\r\n\r\n                // Arr√™ter la propagation\r\n                if (global.L && global.L.DomEvent) {\r\n                    global.L.DomEvent.stopPropagation(ev);\r\n                    global.L.DomEvent.preventDefault(ev);\r\n                }\r\n\r\n                // R√©initialiser apr√®s 100ms (juste pour emp√™cher les double-clics rapides)\r\n                setTimeout(() => {\r\n                    toggleBtn._isToggling = false;\r\n                }, 100);\r\n\r\n                try {\r\n                    if (itemId && global.GeoLeaf && global.GeoLeaf.GeoJSON) {\r\n                        const layerData = global.GeoLeaf.GeoJSON.getLayerById(itemId);\r\n\r\n                        // Si la couche n'est pas encore charg√©e, la charger √† la demande\r\n                        if (!layerData) {\r\n                            if (Log) Log.info(\"[LayerManager] ‚è≥ Couche non charg√©e, chargement √† la demande:\", itemId);\r\n\r\n                            // Indicateur visuel de chargement\r\n                            toggleBtn.classList.add(\"gl-layer-manager__item-toggle--loading\");\r\n                            toggleBtn.disabled = true;\r\n\r\n                            const ThemeApplier = global.GeoLeaf._ThemeApplier;\r\n                            if (ThemeApplier && typeof ThemeApplier._loadLayerFromProfile === \"function\") {\r\n                                ThemeApplier._loadLayerFromProfile(itemId).then(function (loadedLayer) {\r\n                                    // Retirer l'indicateur de chargement\r\n                                    toggleBtn.classList.remove(\"gl-layer-manager__item-toggle--loading\");\r\n                                    toggleBtn.disabled = false;\r\n\r\n                                    if (loadedLayer) {\r\n                                        if (Log) Log.info(\"[LayerManager] ‚úÖ Couche charg√©e avec succ√®s:\", itemId);\r\n\r\n                                        // Afficher la couche via le gestionnaire standard\r\n                                        global.GeoLeaf.GeoJSON.showLayer(itemId);\r\n\r\n                                        // Mettre √† jour l'UI du toggle\r\n                                        toggleBtn.setAttribute(\"aria-pressed\", \"true\");\r\n                                        toggleBtn.classList.add(\"gl-layer-manager__item-toggle--on\");\r\n\r\n                                        const layerItem = document.querySelector('[data-layer-id=\"' + itemId + '\"]');\r\n                                        if (layerItem) {\r\n                                            layerItem.classList.remove(\"gl-layer--hidden\");\r\n                                        }\r\n\r\n                                        // R√©activer le bouton label si applicable\r\n                                        let labelBtn = null;\r\n                                        if (layerItem) {\r\n                                            labelBtn = layerItem.querySelector('.gl-layer-manager__label-toggle');\r\n                                        }\r\n                                        if (!labelBtn && toggleBtn.parentElement) {\r\n                                            labelBtn = toggleBtn.parentElement.querySelector('.gl-layer-manager__label-toggle');\r\n                                        }\r\n                                        if (labelBtn) {\r\n                                            const ld = global.GeoLeaf?.GeoJSON?.getLayerById?.(itemId);\r\n                                            const labelEnabled = ld?.currentStyle?.label?.enabled === true;\r\n                                            if (labelEnabled) {\r\n                                                labelBtn.disabled = false;\r\n                                                labelBtn.classList.remove(\"gl-layer-manager__label-toggle--disabled\");\r\n                                            }\r\n                                        }\r\n                                    } else {\r\n                                        if (Log) Log.warn(\"[LayerManager] ‚ùå √âchec du chargement de la couche:\", itemId);\r\n                                    }\r\n                                }).catch(function (err) {\r\n                                    toggleBtn.classList.remove(\"gl-layer-manager__item-toggle--loading\");\r\n                                    toggleBtn.disabled = false;\r\n                                    if (Log) Log.error(\"[LayerManager] Erreur lors du chargement de la couche:\", itemId, err);\r\n                                });\r\n                            } else {\r\n                                toggleBtn.classList.remove(\"gl-layer-manager__item-toggle--loading\");\r\n                                toggleBtn.disabled = false;\r\n                                if (Log) Log.warn(\"[LayerManager] ThemeApplier non disponible pour charger:\", itemId);\r\n                            }\r\n                            return;\r\n                        }\r\n\r\n                        const isCurrentlyVisible = self._checkLayerVisibility(itemId);\r\n\r\n                        // Trouver le layerItem pour ajouter/retirer la classe CSS\r\n                        const layerItem = document.querySelector(`[data-layer-id=\"${itemId}\"]`);\r\n\r\n                        if (isCurrentlyVisible) {\r\n                            // Masquer la couche\r\n                            global.GeoLeaf.GeoJSON.hideLayer(itemId);\r\n                            toggleBtn.setAttribute(\"aria-pressed\", \"false\");\r\n                            toggleBtn.classList.remove(\"gl-layer-manager__item-toggle--on\");\r\n\r\n                            // Ajouter la classe gl-layer--hidden\r\n                            if (layerItem) {\r\n                                layerItem.classList.add(\"gl-layer--hidden\");\r\n                            }\r\n\r\n                            // D√©sactiver imm√©diatement le bouton label (couche cach√©e)\r\n                            // Chercher dans tout le layerItem, pas juste les enfants directs\r\n                            let labelBtn = null;\r\n                            if (layerItem) {\r\n                                labelBtn = layerItem.querySelector('.gl-layer-manager__label-toggle');\r\n                            }\r\n                            // Fallback: chercher via le sibling du toggle button (m√™me container)\r\n                            if (!labelBtn && toggleBtn.parentElement) {\r\n                                labelBtn = toggleBtn.parentElement.querySelector('.gl-layer-manager__label-toggle');\r\n                            }\r\n                            if (labelBtn) {\r\n                                labelBtn.disabled = true;\r\n                                labelBtn.classList.add(\"gl-layer-manager__label-toggle--disabled\");\r\n                                labelBtn.classList.remove(\"gl-layer-manager__label-toggle--on\");\r\n                                labelBtn.setAttribute(\"aria-pressed\", \"false\");\r\n                            } else {\r\n                                if (Log) Log.warn(\"[LayerManager] Bouton label NON TROUV√â pour d√©sactivation:\", itemId);\r\n                            }\r\n                        } else {\r\n                            // Afficher la couche\r\n                            global.GeoLeaf.GeoJSON.showLayer(itemId);\r\n                            toggleBtn.setAttribute(\"aria-pressed\", \"true\");\r\n                            toggleBtn.classList.add(\"gl-layer-manager__item-toggle--on\");\r\n\r\n                            // Retirer la classe gl-layer--hidden\r\n                            if (layerItem) {\r\n                                layerItem.classList.remove(\"gl-layer--hidden\");\r\n                            }\r\n\r\n                            // R√©activer le bouton label\r\n                            let labelBtn = null;\r\n                            if (layerItem) {\r\n                                labelBtn = layerItem.querySelector('.gl-layer-manager__label-toggle');\r\n                            }\r\n                            if (!labelBtn && toggleBtn.parentElement) {\r\n                                labelBtn = toggleBtn.parentElement.querySelector('.gl-layer-manager__label-toggle');\r\n                            }\r\n                            if (labelBtn) {\r\n                                // V√©rifier si label.enabled dans le style avant de r√©activer\r\n                                const ld = global.GeoLeaf?.GeoJSON?.getLayerById?.(itemId);\r\n                                const labelEnabled = ld?.currentStyle?.label?.enabled === true;\r\n                                if (labelEnabled) {\r\n                                    labelBtn.disabled = false;\r\n                                    labelBtn.classList.remove(\"gl-layer-manager__label-toggle--disabled\");\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                } catch (err) {\r\n                    if (Log) Log.warn(\"Erreur toggle l√©gende :\", err);\r\n                }\r\n            };\r\n\r\n            // TEMPORAIREMENT: utiliser uniquement L.DomEvent pour d√©boguer\r\n            if (global.L && global.L.DomEvent) {\r\n                global.L.DomEvent.on(toggleBtn, \"click\", onToggle);\r\n                global.L.DomEvent.disableClickPropagation(toggleBtn);\r\n            } else {\r\n                toggleBtn.addEventListener(\"click\", onToggle);\r\n            }\r\n\r\n            // Ancienne version avec _UIComponents (d√©sactiv√© pour debug)\r\n            // if (GeoLeaf._UIComponents && typeof GeoLeaf._UIComponents.attachEventHandler === 'function') {\r\n            //     GeoLeaf._UIComponents.attachEventHandler(toggleBtn, \"click\", onToggle);\r\n            // } else if (global.L && global.L.DomEvent) {\r\n            //     global.L.DomEvent.on(toggleBtn, \"click\", onToggle);\r\n            // } else {\r\n            //     toggleBtn.addEventListener(\"click\", onToggle);\r\n            // }\r\n        },\r\n\r\n        /**\r\n         * Fallback pour cr√©er un toggle button si _UIComponents non disponible\r\n         * @private\r\n         */\r\n        _createToggleFallback(container, isActive) {\r\n            const toggleBtn = global.L.DomUtil.create(\"button\", \"gl-layer-manager__item-toggle\", container);\r\n            toggleBtn.type = \"button\";\r\n            toggleBtn.setAttribute(\"aria-pressed\", isActive ? \"true\" : \"false\");\r\n            toggleBtn.title = \"Afficher / masquer la couche\";\r\n            if (isActive) {\r\n                toggleBtn.classList.add(\"gl-layer-manager__item-toggle--on\");\r\n            }\r\n            return toggleBtn;\r\n        },\r\n\r\n        /**\r\n         * Cr√©e le bouton de labels pour une couche (appel√© lors de l'application d'un style)\r\n         * @param {string} layerId - ID de la couche\r\n         */\r\n    };\r\n\r\n    // Exposer dans l'espace de noms interne\r\n    GeoLeaf._LayerManagerRenderer = _LayerManagerRenderer;\r\n\r\n})(window);\r\n","/**\r\n * Module LayerManager - Cache Section\r\n *\r\n * Ajoute une section de gestion du cache offline dans le gestionnaire de couches.\r\n * Permet de t√©l√©charger/effacer le cache du profil actif.\r\n *\r\n * @module GeoLeaf.LayerManager.CacheSection\r\n * @version 3.0.0\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module de section cache pour la l√©gende\r\n     */\r\n    const CacheSection = {\r\n        /**\r\n         * G√©n√®re la section HTML du cache\r\n         *\r\n         * @returns {Object} Section configuration\r\n         */\r\n        generateSection() {\r\n            return {\r\n                id: \"offline-cache\",\r\n                label: \"üì• Cache Hors Ligne\",\r\n                order: 98,\r\n                collapsedByDefault: false,\r\n                customContent: this._generateContent(),\r\n                init: () => this._attachEventListeners()\r\n            };\r\n        },\r\n\r\n        /**\r\n         * G√©n√®re le contenu HTML\r\n         * @private\r\n         */\r\n        _generateContent() {\r\n            return `\r\n                <div class=\"gl-cache-section\">\r\n                    <div class=\"gl-cache-status\">\r\n                        <div class=\"gl-cache-status__header\">\r\n                            <span class=\"gl-cache-status__icon\">üíæ</span>\r\n                            <span class=\"gl-cache-status__label\">Statut</span>\r\n                        </div>\r\n                        <div class=\"gl-cache-status__info\">\r\n                            <div class=\"gl-cache-status__row\">\r\n                                <span class=\"gl-cache-status__key\">Profil:</span>\r\n                                <span class=\"gl-cache-status__value\" id=\"gl-cache-profile\">-</span>\r\n                            </div>\r\n                            <div class=\"gl-cache-status__row\">\r\n                                <span class=\"gl-cache-status__key\">√âtat:</span>\r\n                                <span class=\"gl-cache-status__value\" id=\"gl-cache-state\">Non t√©l√©charg√©</span>\r\n                            </div>\r\n                            <div class=\"gl-cache-status__row\">\r\n                                <span class=\"gl-cache-status__key\">Taille:</span>\r\n                                <span class=\"gl-cache-status__value\" id=\"gl-cache-size\">0 MB</span>\r\n                            </div>\r\n                            <div class=\"gl-cache-status__row\">\r\n                                <span class=\"gl-cache-status__key\">Quota:</span>\r\n                                <span class=\"gl-cache-status__value\" id=\"gl-cache-quota\">0 MB disponible</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"gl-cache-actions\">\r\n                        <button\r\n                            id=\"gl-cache-download\"\r\n                            class=\"gl-btn gl-btn--primary gl-cache-btn\"\r\n                            title=\"T√©l√©charger le profil pour usage offline\">\r\n                            <span class=\"gl-btn__icon\">‚¨áÔ∏è</span>\r\n                            <span class=\"gl-btn__text\">T√©l√©charger profil</span>\r\n                        </button>\r\n\r\n                        <button\r\n                            id=\"gl-cache-clear\"\r\n                            class=\"gl-btn gl-btn--secondary gl-cache-btn\"\r\n                            title=\"Effacer le cache du profil\"\r\n                            disabled>\r\n                            <span class=\"gl-btn__icon\">üóëÔ∏è</span>\r\n                            <span class=\"gl-btn__text\">Vider cache</span>\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div class=\"gl-cache-progress\" id=\"gl-cache-progress\" style=\"display: none;\">\r\n                        <div class=\"gl-cache-progress__bar\">\r\n                            <div class=\"gl-cache-progress__fill\" id=\"gl-cache-progress-fill\"></div>\r\n                        </div>\r\n                        <div class=\"gl-cache-progress__text\" id=\"gl-cache-progress-text\">\r\n                            T√©l√©chargement en cours...\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            `;\r\n        },\r\n\r\n        /**\r\n         * Attache les event listeners\r\n         * @private\r\n         */\r\n        _attachEventListeners() {\r\n            const downloadBtn = document.getElementById(\"gl-cache-download\");\r\n            const clearBtn = document.getElementById(\"gl-cache-clear\");\r\n\r\n            if (downloadBtn) {\r\n                downloadBtn.addEventListener(\"click\", () => this._handleDownload());\r\n            }\r\n\r\n            if (clearBtn) {\r\n                clearBtn.addEventListener(\"click\", () => this._handleClear());\r\n            }\r\n\r\n            // Mettre √† jour le statut initial\r\n            this._updateStatus();\r\n\r\n            // √âcouter les √©v√©nements de cache\r\n            document.addEventListener(\"geoleaf:cache:completed\", () => this._updateStatus());\r\n            document.addEventListener(\"geoleaf:cache:cleared\", () => this._updateStatus());\r\n            document.addEventListener(\"geoleaf:profile:loaded\", () => this._updateStatus());\r\n        },\r\n\r\n        /**\r\n         * Met √† jour l'affichage du statut\r\n         * @private\r\n         */\r\n        async _updateStatus() {\r\n            if (!GeoLeaf.Storage || !GeoLeaf.Storage.isAvailable()) {\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const profileId = GeoLeaf.Config.get(\"data.activeProfile\", \"\");\r\n                const status = await GeoLeaf.Storage.CacheManager.getCacheStatus(profileId);\r\n                const quota = await GeoLeaf.Storage.CacheManager.getStorageQuota();\r\n\r\n                // Mettre √† jour les √©l√©ments DOM\r\n                const profileEl = document.getElementById(\"gl-cache-profile\");\r\n                const stateEl = document.getElementById(\"gl-cache-state\");\r\n                const sizeEl = document.getElementById(\"gl-cache-size\");\r\n                const quotaEl = document.getElementById(\"gl-cache-quota\");\r\n                const clearBtn = document.getElementById(\"gl-cache-clear\");\r\n\r\n                if (profileEl) profileEl.textContent = profileId || \"-\";\r\n\r\n                if (status && status.resourcesCount > 0) {\r\n                    if (stateEl) {\r\n                        stateEl.textContent = \"‚úÖ T√©l√©charg√©\";\r\n                        stateEl.style.color = \"#22c55e\";\r\n                    }\r\n                    if (sizeEl) {\r\n                        sizeEl.textContent = `${(status.totalSize / 1024 / 1024).toFixed(2)} MB`;\r\n                    }\r\n                    if (clearBtn) clearBtn.disabled = false;\r\n                } else {\r\n                    if (stateEl) {\r\n                        stateEl.textContent = \"‚ùå Non t√©l√©charg√©\";\r\n                        stateEl.style.color = \"#ef4444\";\r\n                    }\r\n                    if (sizeEl) sizeEl.textContent = \"0 MB\";\r\n                    if (clearBtn) clearBtn.disabled = true;\r\n                }\r\n\r\n                if (quotaEl) {\r\n                    quotaEl.textContent = `${(quota.available / 1024 / 1024).toFixed(2)} MB disponible`;\r\n                }\r\n\r\n            } catch (error) {\r\n                Log.error(`[CacheSection] Failed to update status: ${error.message}`);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * G√®re le t√©l√©chargement du profil\r\n         * @private\r\n         */\r\n        async _handleDownload() {\r\n            if (!GeoLeaf.Storage || !GeoLeaf.Storage.isAvailable()) {\r\n                if (GeoLeaf.UI && GeoLeaf.UI.Notifications) {\r\n                    GeoLeaf.UI.Notifications.error(\r\n                        \"Stockage offline non disponible\",\r\n                        5000\r\n                    );\r\n                }\r\n                return;\r\n            }\r\n\r\n            const profileId = GeoLeaf.Config.get(\"data.activeProfile\", \"\");\r\n            if (!profileId) {\r\n                if (GeoLeaf.UI && GeoLeaf.UI.Notifications) {\r\n                    GeoLeaf.UI.Notifications.error(\r\n                        \"Aucun profil actif\",\r\n                        3000\r\n                    );\r\n                }\r\n                return;\r\n            }\r\n\r\n            const downloadBtn = document.getElementById(\"gl-cache-download\");\r\n            const progressEl = document.getElementById(\"gl-cache-progress\");\r\n            const progressText = document.getElementById(\"gl-cache-progress-text\");\r\n\r\n            try {\r\n                // D√©sactiver le bouton\r\n                if (downloadBtn) {\r\n                    downloadBtn.disabled = true;\r\n                    downloadBtn.querySelector(\".gl-btn__text\").textContent = \"T√©l√©chargement...\";\r\n                }\r\n\r\n                // Afficher la barre de progression\r\n                if (progressEl) progressEl.style.display = \"block\";\r\n                if (progressText) progressText.textContent = \"Pr√©paration...\";\r\n\r\n                Log.info(`[CacheSection] Starting download for profile: ${profileId}`);\r\n\r\n                // T√©l√©charger le profil\r\n                const result = await GeoLeaf.Storage.downloadProfileForOffline(profileId);\r\n\r\n                if (progressText) {\r\n                    progressText.textContent = `‚úÖ ${result.resourcesCount} ressources t√©l√©charg√©es`;\r\n                }\r\n\r\n                // Notification de succ√®s\r\n                if (GeoLeaf.UI && GeoLeaf.UI.Notifications) {\r\n                    GeoLeaf.UI.Notifications.success(\r\n                        `Profil t√©l√©charg√© : ${(result.totalSize / 1024 / 1024).toFixed(2)} MB`,\r\n                        4000\r\n                    );\r\n                }\r\n\r\n                // Masquer la progression apr√®s 2s\r\n                setTimeout(() => {\r\n                    if (progressEl) progressEl.style.display = \"none\";\r\n                }, 2000);\r\n\r\n                await this._updateStatus();\r\n\r\n            } catch (error) {\r\n                Log.error(`[CacheSection] Download failed: ${error.message}`);\r\n\r\n                if (progressText) progressText.textContent = `‚ùå Erreur: ${error.message}`;\r\n\r\n                if (GeoLeaf.UI && GeoLeaf.UI.Notifications) {\r\n                    GeoLeaf.UI.Notifications.error(\r\n                        `Erreur t√©l√©chargement: ${error.message}`,\r\n                        5000\r\n                    );\r\n                }\r\n\r\n                setTimeout(() => {\r\n                    if (progressEl) progressEl.style.display = \"none\";\r\n                }, 3000);\r\n\r\n            } finally {\r\n                // R√©activer le bouton\r\n                if (downloadBtn) {\r\n                    downloadBtn.disabled = false;\r\n                    downloadBtn.querySelector(\".gl-btn__text\").textContent = \"T√©l√©charger profil\";\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * G√®re l'effacement du cache\r\n         * @private\r\n         */\r\n        async _handleClear() {\r\n            if (!GeoLeaf.Storage || !GeoLeaf.Storage.isAvailable()) {\r\n                return;\r\n            }\r\n\r\n            const profileId = GeoLeaf.Config.get(\"data.activeProfile\", \"\");\r\n            if (!profileId) {\r\n                return;\r\n            }\r\n\r\n            // Confirmation\r\n            if (!confirm(`Voulez-vous vraiment effacer le cache du profil \"${profileId}\" ?`)) {\r\n                return;\r\n            }\r\n\r\n            const clearBtn = document.getElementById(\"gl-cache-clear\");\r\n\r\n            try {\r\n                if (clearBtn) {\r\n                    clearBtn.disabled = true;\r\n                    clearBtn.querySelector(\".gl-btn__text\").textContent = \"Effacement...\";\r\n                }\r\n\r\n                Log.info(`[CacheSection] Clearing cache for profile: ${profileId}`);\r\n\r\n                const deleted = await GeoLeaf.Storage.CacheManager.clearCache(profileId);\r\n\r\n                if (GeoLeaf.UI && GeoLeaf.UI.Notifications) {\r\n                    GeoLeaf.UI.Notifications.success(\r\n                        `Cache effac√© : ${deleted} ressources supprim√©es`,\r\n                        3000\r\n                    );\r\n                }\r\n\r\n                await this._updateStatus();\r\n\r\n            } catch (error) {\r\n                Log.error(`[CacheSection] Clear failed: ${error.message}`);\r\n\r\n                if (GeoLeaf.UI && GeoLeaf.UI.Notifications) {\r\n                    GeoLeaf.UI.Notifications.error(\r\n                        `Erreur effacement: ${error.message}`,\r\n                        5000\r\n                    );\r\n                }\r\n            } finally {\r\n                if (clearBtn) {\r\n                    clearBtn.querySelector(\".gl-btn__text\").textContent = \"Vider cache\";\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    // Exposer le module\r\n    GeoLeaf._LayerManagerCacheSection = CacheSection;\r\n\r\n})(window);\r\n","/**\r\n * Module Basemap Selector pour LayerManager\r\n * Gestion du s√©lecteur de fonds de carte\r\n *\r\n * D√âPENDANCES:\r\n * - Leaflet (L.DomUtil, L.DomEvent)\r\n * - GeoLeaf.Log (optionnel)\r\n * - GeoLeaf.Baselayers (optionnel, pour getActiveId et setBaseLayer)\r\n *\r\n * EXPOSE:\r\n * - GeoLeaf._LayerManagerBasemapSelector\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module Basemap Selector\r\n     * @namespace _LayerManagerBasemapSelector\r\n     * @private\r\n     */\r\n    const _LayerManagerBasemapSelector = {\r\n        /**\r\n         * Rend le s√©lecteur de basemap\r\n         * @param {Object} section - Section basemap avec items\r\n         * @param {HTMLElement} sectionEl - √âl√©ment DOM de la section\r\n         */\r\n        render(section, sectionEl) {\r\n            // Validation des param√®tres\r\n            if (!section || !sectionEl) {\r\n                return;\r\n            }\r\n\r\n            const container = global.L.DomUtil.create(\r\n                \"div\",\r\n                \"gl-layer-manager__items gl-layer-manager__basemap-select\",\r\n                sectionEl\r\n            );\r\n\r\n            const select = global.L.DomUtil.create(\"select\", \"gl-layer-manager__basemap-select__select\", container);\r\n\r\n            // Remplir les options\r\n            if (Array.isArray(section.items)) {\r\n                section.items.forEach(function (item) {\r\n                    if (!item || !item.id) return;\r\n                    const opt = document.createElement(\"option\");\r\n                    opt.value = item.id;\r\n                    opt.textContent = item.label || item.id;\r\n                    select.appendChild(opt);\r\n                });\r\n            }\r\n\r\n            // Valeur initiale -> ID actif des basemaps\r\n            try {\r\n                const activeId = global.GeoLeaf && global.GeoLeaf.Baselayers && typeof global.GeoLeaf.Baselayers.getActiveId === \"function\"\r\n                    ? global.GeoLeaf.Baselayers.getActiveId()\r\n                    : null;\r\n                if (activeId) {\r\n                    select.value = activeId;\r\n                }\r\n            } catch (e) {\r\n                // ignore\r\n            }\r\n\r\n            // Changement par l'utilisateur\r\n            this._attachChangeHandler(select);\r\n\r\n            // √âcouter les changements externes\r\n            this._attachExternalListener(select);\r\n        },\r\n\r\n        /**\r\n         * Attache le gestionnaire de changement au select\r\n         * @private\r\n         */\r\n        _attachChangeHandler(select) {\r\n            const handler = function (ev) {\r\n                if (global.L && global.L.DomEvent) {\r\n                    global.L.DomEvent.stopPropagation(ev);\r\n                }\r\n                try {\r\n                    const val = select.value;\r\n                    if (global.GeoLeaf && global.GeoLeaf.Baselayers && typeof global.GeoLeaf.Baselayers.setBaseLayer === \"function\") {\r\n                        global.GeoLeaf.Baselayers.setBaseLayer(val);\r\n                    }\r\n                } catch (err) {\r\n                    if (Log) Log.warn(\"Erreur lors du changement de basemap depuis la l√©gende:\", err);\r\n                }\r\n            };\r\n\r\n            if (global.L && global.L.DomEvent) {\r\n                global.L.DomEvent.on(select, \"change\", handler);\r\n            } else {\r\n                select.addEventListener(\"change\", handler);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * √âcoute les √©v√©nements de changement de basemap externe\r\n         * @private\r\n         */\r\n        _attachExternalListener(select) {\r\n            if (typeof document !== \"undefined\") {\r\n                document.addEventListener(\"geoleaf:basemap-changed\", function (e) {\r\n                    try {\r\n                        if (e && e.detail && e.detail.id) {\r\n                            select.value = e.detail.id;\r\n                        }\r\n                    } catch (err) {\r\n                        // ignore\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    // Exposer dans l'espace de noms interne\r\n    GeoLeaf._LayerManagerBasemapSelector = _LayerManagerBasemapSelector;\r\n\r\n})(window);\r\n","/**\r\n * @module _LayerManagerStyleSelector\r\n * @description S√©lecteur de styles pour le gestionnaire de couches.\r\n * Permet de changer dynamiquement le style appliqu√© √† une couche.\r\n * Utilise le nouveau style-loader pour charger et valider les styles.\r\n * @version 3.1.0\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    /**\r\n     * √âtat interne du s√©lecteur de styles\r\n     * @private\r\n     */\r\n    const state = {\r\n        currentStyles: new Map() // layerId -> styleId\r\n    };\r\n\r\n    /**\r\n     * Module s√©lecteur de styles pour le gestionnaire de couches\r\n     * @namespace\r\n     */\r\n    GeoLeaf._LayerManagerStyleSelector = {\r\n        /**\r\n         * R√©cup√®re le style actuel d'une couche\r\n         * @param {string} layerId - Identifiant de la couche\r\n         * @returns {string|null} Identifiant du style actuel\r\n         */\r\n        getCurrentStyle: function (layerId) {\r\n            return state.currentStyles.get(layerId) || null;\r\n        },\r\n\r\n        /**\r\n         * D√©finit le style actuel d'une couche\r\n         * @param {string} layerId - Identifiant de la couche\r\n         * @param {string} styleId - Identifiant du style\r\n         */\r\n        setCurrentStyle: function (layerId, styleId) {\r\n            state.currentStyles.set(layerId, styleId);\r\n        },\r\n\r\n        /**\r\n         * G√©n√®re le HTML du s√©lecteur de styles\r\n         * @param {Object} item - Configuration de l'item de couche\r\n         * @param {string} item.id - Identifiant de la couche\r\n         * @param {Object} item.styles - Configuration des styles disponibles\r\n         * @param {Array} item.styles.available - Tableau des styles disponibles\r\n         * @param {string} item.styles.default - Style par d√©faut\r\n         * @returns {string} HTML du s√©lecteur\r\n         * @deprecated Utiliser renderDOM() √† la place\r\n         */\r\n        render: function (item) {\r\n            if (!item.styles || !Array.isArray(item.styles.available) || item.styles.available.length <= 1) {\r\n                return \"\";\r\n            }\r\n\r\n            const currentStyle = this.getCurrentStyle(item.id) || item.styles.default || item.styles.available[0].id;\r\n            const selectId = \"style-selector-\" + item.id;\r\n\r\n            let html = '<div class=\"gl-layer-manager__style-selector\">';\r\n            html += '<select id=\"' + selectId + '\" class=\"gl-layer-manager__style-select\" data-layer-id=\"' + item.id + '\">';\r\n\r\n            item.styles.available.forEach(function (style) {\r\n                const selected = style.id === currentStyle ? ' selected' : '';\r\n                html += '<option value=\"' + style.id + '\"' + selected + '>' + style.label + '</option>';\r\n            });\r\n\r\n            html += '</select>';\r\n            html += '</div>';\r\n\r\n            return html;\r\n        },\r\n\r\n        /**\r\n         * G√©n√®re l'√©l√©ment DOM du s√©lecteur de styles\r\n         * @param {Object} item - Configuration de l'item de couche\r\n         * @param {string} item.id - Identifiant de la couche\r\n         * @param {Object} item.styles - Configuration des styles disponibles\r\n         * @param {Array} item.styles.available - Tableau des styles disponibles\r\n         * @param {string} item.styles.default - Style par d√©faut\r\n         * @returns {HTMLElement|null} √âl√©ment DOM du s√©lecteur ou null\r\n         */\r\n        renderDOM: function (item) {\r\n\t\t\tconst Log = global.GeoLeaf && global.GeoLeaf.Log;\r\n\r\n\t\t\t// ...log supprim√© ([StyleSelector] renderDOM)...\r\n\r\n            if (!item.styles || !Array.isArray(item.styles.available) || item.styles.available.length <= 1) {\r\n                // ...log supprim√© ([StyleSelector] Pas de s√©lecteur n√©cessaire)...\r\n                return null;\r\n            }\r\n\r\n            const currentStyle = this.getCurrentStyle(item.id) || item.styles.default || item.styles.available[0].id;\r\n            const selectId = \"style-selector-\" + item.id;\r\n\r\n            // Cr√©er le conteneur\r\n            const container = document.createElement(\"div\");\r\n            container.className = \"gl-layer-manager__style-selector\";\r\n\r\n            // Cr√©er le select\r\n            const select = document.createElement(\"select\");\r\n            select.id = selectId;\r\n            select.className = \"gl-layer-manager__style-select\";\r\n            select.setAttribute(\"data-layer-id\", item.id);\r\n\r\n            // Ajouter les options\r\n            item.styles.available.forEach(function (style) {\r\n                const option = document.createElement(\"option\");\r\n                option.value = style.id;\r\n                option.textContent = style.label;\r\n                if (style.id === currentStyle) {\r\n                    option.selected = true;\r\n                }\r\n                select.appendChild(option);\r\n            });\r\n\r\n            container.appendChild(select);\r\n            return container;\r\n        },\r\n\r\n        /**\r\n         * Initialise les √©v√©nements du s√©lecteur de styles\r\n         * @param {HTMLElement} container - Conteneur des contr√¥les\r\n         * @param {Object} item - Configuration de l'item de couche\r\n         */\r\n        bindEvents: function (container, item) {\r\n            if (!item.styles || !Array.isArray(item.styles.available) || item.styles.available.length <= 1) {\r\n                return;\r\n            }\r\n\r\n            const selectId = \"style-selector-\" + item.id;\r\n            const select = container.querySelector(\"#\" + selectId);\r\n\r\n            if (!select) {\r\n                return;\r\n            }\r\n\r\n            const self = this;\r\n\r\n            select.addEventListener(\"change\", function () {\r\n                const styleId = this.value;\r\n                const layerId = this.getAttribute(\"data-layer-id\");\r\n\r\n                // Enregistrer le style actuel\r\n                self.setCurrentStyle(layerId, styleId);\r\n\r\n                // Appliquer le style √† la couche\r\n                self.applyStyle(layerId, styleId);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Applique un style √† une couche\r\n         * Utilise le style-loader pour charger, valider et appliquer le style\r\n         * @param {string} layerId - Identifiant de la couche\r\n         * @param {string} styleId - Identifiant du style\r\n         */\r\n        applyStyle: async function (layerId, styleId) {\r\n\t\t\tconst Log = global.GeoLeaf.Log;\r\n\r\n\t\t\tif (!global.GeoLeaf._GeoJSONLayerManager) {\r\n\t\t\t\t// ...log supprim√© ([StyleSelector] Module GeoJSON non disponible)...\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// R√©cup√©rer les donn√©es de la couche\r\n\t\t\tconst layerManager = global.GeoLeaf._GeoJSONLayerManager;\r\n\t\t\tconst layerData = layerManager.getLayerData(layerId);\r\n\r\n\t\t\tif (!layerData) {\r\n\t\t\t\t// ...log supprim√© ([StyleSelector] Couche non trouv√©e)...\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!layerData.config.styles || !Array.isArray(layerData.config.styles.available)) {\r\n\t\t\t\t// ...log supprim√© ([StyleSelector] Aucun style disponible pour la couche)...\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Trouver la configuration du style\r\n\t\t\tconst styleConfig = layerData.config.styles.available.find(function (s) {\r\n\t\t\t\treturn s.id === styleId;\r\n\t\t\t});\r\n\r\n\t\t\tif (!styleConfig) {\r\n\t\t\t\t// ...log supprim√© ([StyleSelector] Style non trouv√©)...\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// ...log supprim√© ([StyleSelector] Application du style)...\r\n\r\n            try {\r\n                // V√©rifier que le style-loader est disponible\r\n                const StyleLoader = global.GeoLeaf._StyleLoader;\r\n                if (!StyleLoader) {\r\n                    // ...log supprim√© ([StyleSelector] GeoLeaf._StyleLoader non disponible)...\r\n                    // Fallback vers ancien syst√®me si n√©cessaire\r\n                    this._applyStyleLegacy(layerId, styleId, layerData, styleConfig);\r\n                    return;\r\n                }\r\n\r\n                // R√©cup√©rer les m√©tadonn√©es n√©cessaires\r\n                const profileId = layerData.config._profileId;\r\n                const layerDirectory = layerData.config._layerDirectory;\r\n\r\n                if (!profileId || !layerDirectory) {\r\n                    // ...log supprim√© ([StyleSelector] M√©tadonn√©es manquantes)...\r\n                    return;\r\n                }\r\n\r\n                // Charger et valider le style avec le style-loader\r\n                // ...log supprim√© ([StyleSelector] Chargement du style via style-loader)...\r\n\r\n                const result = await StyleLoader.loadAndValidateStyle(\r\n                    profileId,\r\n                    layerId,\r\n                    styleId,\r\n                    styleConfig.file,\r\n                    layerDirectory\r\n                );\r\n\r\n                // ...log supprim√© ([StyleSelector] Style charg√© et valid√©)...\r\n\r\n                // Stocker le style actuel dans layerData pour que les labels puissent y acc√©der\r\n                layerData.currentStyle = result.styleData;\r\n                layerData.currentStyleMetadata = result.metadata;\r\n\r\n                // Appliquer le style via le GeoJSONLayerManager\r\n                if (typeof layerManager.setLayerStyle === \"function\") {\r\n                    layerManager.setLayerStyle(layerId, result.styleData);\r\n                    // ...log supprim√© ([StyleSelector] Style appliqu√© avec succ√®s)...\r\n                } else {\r\n                    // ...log supprim√© ([StyleSelector] Fonction setLayerStyle non disponible)...\r\n                }\r\n\r\n                // R√©initialiser les labels selon le nouveau style et visibleByDefault\r\n                if (global.GeoLeaf.Labels && typeof global.GeoLeaf.Labels.initializeLayerLabels === 'function') {\r\n                    global.GeoLeaf.Labels.initializeLayerLabels(layerId);\r\n                }\r\n\r\n                // Mettre √† jour l'√©tat du bouton des labels selon le nouveau style\r\n                // Utiliser syncImmediate car currentStyle vient d'√™tre mis √† jour\r\n                if (global.GeoLeaf._LabelButtonManager) {\r\n                    // ...log supprim√© ([StyleSelector] Synchronisation du bouton label)...\r\n                    global.GeoLeaf._LabelButtonManager.syncImmediate(layerId);\r\n                }\r\n\r\n                // Charger la l√©gende correspondante\r\n                if (global.GeoLeaf.Legend && typeof global.GeoLeaf.Legend.loadLayerLegend === \"function\") {\r\n                    global.GeoLeaf.Legend.loadLayerLegend(layerData.config.id, styleId, layerData.config);\r\n                }\r\n\r\n            } catch (error) {\r\n                // ...log supprim√© ([StyleSelector] Erreur lors du chargement/application du style)...\r\n                // ...log supprim√© ([StyleSelector] Stack trace)...\r\n            }\r\n        },\r\n\r\n        /**\r\n         * M√©thode legacy de chargement de style (fallback)\r\n         * @private\r\n         * @deprecated Utiliser applyStyle() avec style-loader √† la place\r\n         */\r\n        _applyStyleLegacy: function (layerId, styleId, layerData, styleConfig) {\r\n            const Log = global.GeoLeaf.Log;\r\n            const layerManager = global.GeoLeaf._GeoJSONLayerManager;\r\n\r\n            // ...log supprim√© ([StyleSelector] Utilisation de la m√©thode legacy)...\r\n\r\n            const profileId = layerData.config._profileId;\r\n            const layerDirectory = layerData.config._layerDirectory;\r\n\r\n            if (!profileId || !layerDirectory) {\r\n                // ...log supprim√© ([StyleSelector] M√©tadonn√©es manquantes)...\r\n                return;\r\n            }\r\n\r\n            const Config = global.GeoLeaf.Config;\r\n            const dataCfg = Config && Config.get ? Config.get('data') : null;\r\n            const profilesBasePath = (dataCfg && dataCfg.profilesBasePath) || \"profiles\";\r\n\r\n            const styleDirectory = layerData.config.styles.directory || \"styles\";\r\n            const stylePath = profilesBasePath + \"/\" + profileId + \"/\" + layerDirectory + \"/\" + styleDirectory + \"/\" + styleConfig.file;\r\n\r\n            // ...log supprim√© ([StyleSelector] Chargement du fichier de style (legacy))...\r\n\r\n            fetch(stylePath)\r\n                .then(function (response) {\r\n                    if (!response.ok) {\r\n                        throw new Error(\"Erreur HTTP \" + response.status);\r\n                    }\r\n                    return response.json();\r\n                })\r\n                .then(function (styleData) {\r\n                    if (typeof layerManager.setLayerStyle === \"function\") {\r\n                        layerManager.setLayerStyle(layerId, styleData);\r\n                        // ...log supprim√© ([StyleSelector] Style appliqu√© avec succ√®s (legacy))...\r\n                    }\r\n\r\n                    if (global.GeoLeaf.Legend && typeof global.GeoLeaf.Legend.loadLayerLegend === \"function\") {\r\n                        global.GeoLeaf.Legend.loadLayerLegend(layerData.config.id, styleId, layerData.config);\r\n                    }\r\n                })\r\n                .catch(function (error) {\r\n                    // ...log supprim√© ([StyleSelector] Erreur lors du chargement du style (legacy))...\r\n                });\r\n        }\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * Module Control pour LayerManager\r\n * D√©finition du contr√¥le Leaflet personnalis√©\r\n *\r\n * D√âPENDANCES:\r\n * - Leaflet (L.Control, L.DomUtil, L.DomEvent, L.setOptions)\r\n * - GeoLeaf.Log (optionnel)\r\n * - GeoLeaf._LayerManagerRenderer (pour renderSections)\r\n *\r\n * EXPOSE:\r\n * - GeoLeaf._LayerManagerControl\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Cr√©e un contr√¥le Leaflet pour le gestionnaire de couches\r\n     * @param {Object} options - Options du contr√¥le\r\n     * @returns {L.Control} - Instance du contr√¥le Leaflet\r\n     */\r\n    function createLayerManagerControl(options) {\r\n        if (!global.L || !global.L.Control) {\r\n            if (Log) Log.error(\"[LayerManager] Leaflet L.Control non disponible\");\r\n            return null;\r\n        }\r\n\r\n        const LayerManagerControl = global.L.Control.extend({\r\n            options: {\r\n                position: options.position || \"bottomright\"\r\n            },\r\n\r\n            initialize: function (controlOptions) {\r\n                global.L.setOptions(this, controlOptions || {});\r\n                this._glOptions = controlOptions._glOptions;\r\n            },\r\n\r\n            onAdd: function (mapInstance) {\r\n                this._map = mapInstance;\r\n                this._container = global.L.DomUtil.create(\"div\", \"gl-layer-manager\");\r\n\r\n                // Emp√™cher les interactions carte\r\n                if (global.L.DomEvent) {\r\n                    global.L.DomEvent.disableClickPropagation(this._container);\r\n                    global.L.DomEvent.disableScrollPropagation(this._container);\r\n                }\r\n\r\n                this._buildStructure();\r\n                return this._container;\r\n            },\r\n\r\n            onRemove: function () {\r\n                this._map = null;\r\n                this._container = null;\r\n            },\r\n\r\n            /**\r\n             * Construit la structure DOM de la l√©gende\r\n             * @private\r\n             */\r\n            _buildStructure: function () {\r\n                const opts = this._glOptions;\r\n\r\n                // Conteneur principal (flex container)\r\n                const mainWrapper = global.L.DomUtil.create(\"div\", \"gl-layer-manager__main-wrapper\", this._container);\r\n\r\n                // Wrapper du header (reste fixe)\r\n                const headerWrapper = global.L.DomUtil.create(\"div\", \"gl-layer-manager__header-wrapper\", mainWrapper);\r\n\r\n                // En-t√™te : titre + bouton collapse\r\n                const header = global.L.DomUtil.create(\"div\", \"gl-layer-manager__header\", headerWrapper);\r\n\r\n                const titleEl = global.L.DomUtil.create(\r\n                    \"div\",\r\n                    \"gl-layer-manager__title\",\r\n                    header\r\n                );\r\n                titleEl.textContent = opts.title || \"L√©gende\";\r\n\r\n                let toggleEl = null;\r\n                if (opts.collapsible) {\r\n                    toggleEl = global.L.DomUtil.create(\r\n                        \"button\",\r\n                        \"gl-layer-manager__toggle\",\r\n                        header\r\n                    );\r\n                    toggleEl.type = \"button\";\r\n                    toggleEl.setAttribute(\"aria-label\", \"Basculer la l√©gende\");\r\n                    toggleEl.textContent = \"‚ü±\";\r\n\r\n                    const self = this;\r\n                    global.L.DomEvent.on(toggleEl, \"click\", function (ev) {\r\n                        global.L.DomEvent.stopPropagation(ev);\r\n                        self._toggleCollapsed();\r\n                    });\r\n                }\r\n\r\n                // Wrapper du body avec scrollbar\r\n                const bodyWrapper = global.L.DomUtil.create(\"div\", \"gl-layer-manager__body-wrapper\", mainWrapper);\r\n\r\n                // Corps de la l√©gende\r\n                this._bodyEl = global.L.DomUtil.create(\r\n                    \"div\",\r\n                    \"gl-layer-manager__body\",\r\n                    bodyWrapper\r\n                );\r\n\r\n                // Appliquer l'√©tat collapsed initial (depuis options ou collapsedByDefault)\r\n                const initialCollapsed = opts.collapsed || opts.collapsedByDefault || false;\r\n                if (initialCollapsed) {\r\n                    this._container.classList.add(\"gl-layer-manager--collapsed\");\r\n                    opts.collapsed = true; // Synchroniser l'√©tat\r\n                }\r\n\r\n                // Rendu des sections via le renderer\r\n                this._renderSections(opts.sections || []);\r\n            },\r\n\r\n            /**\r\n             * Rend les sections (d√©l√®gue au renderer)\r\n             * @private\r\n             */\r\n            _renderSections: function (sections) {\r\n                if (GeoLeaf._LayerManagerRenderer) {\r\n                    GeoLeaf._LayerManagerRenderer.renderSections(this._bodyEl, sections);\r\n                } else {\r\n                    if (Log) Log.error(\"[LayerManager] _LayerManagerRenderer non disponible\");\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Mise √† jour des sections\r\n             * @param {Array} sections - Nouvelles sections\r\n             */\r\n            updateSections: function (sections) {\r\n                this._glOptions.sections = Array.isArray(sections) ? sections : [];\r\n                this._renderSections(this._glOptions.sections);\r\n            },\r\n\r\n            /**\r\n             * Rafra√Æchit l'affichage pour mettre √† jour l'√©tat des boutons toggle\r\n             * Utilis√© notamment apr√®s l'application d'un th√®me\r\n             * @public\r\n             */\r\n            refresh: function () {\r\n                // Synchroniser uniquement les toggles au lieu de re-g√©n√©rer tout le DOM\r\n                if (GeoLeaf._LayerManagerRenderer && typeof GeoLeaf._LayerManagerRenderer.syncToggles === 'function') {\r\n                    GeoLeaf._LayerManagerRenderer.syncToggles();\r\n                } else if (this._glOptions && this._glOptions.sections) {\r\n                    // Fallback: re-g√©n√©rer les sections si syncToggles n'est pas disponible\r\n                    this._renderSections(this._glOptions.sections);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Bascule l'√©tat collapsed\r\n             * @private\r\n             */\r\n            _toggleCollapsed: function () {\r\n                const isCollapsed = this._container.classList.toggle(\"gl-layer-manager--collapsed\");\r\n                this._glOptions.collapsed = isCollapsed;\r\n            }\r\n        });\r\n\r\n        return new LayerManagerControl({\r\n            position: options.position,\r\n            _glOptions: options\r\n        });\r\n    }\r\n\r\n    // Exposer dans l'espace de noms interne\r\n    GeoLeaf._LayerManagerControl = {\r\n        create: createLayerManagerControl\r\n    };\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Namespace global GeoLeaf\r\n     */\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    /**\r\n     * Logger unifi√©\r\n     */\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module GeoLeaf.LayerManager (REFACTORIS√â v3.0)\r\n     *\r\n     * ARCHITECTURE MODULAIRE :\r\n     * - layer-manager/shared.js : √âtat partag√©\r\n     * - layer-manager/control.js : Contr√¥le Leaflet (L.Control)\r\n     * - layer-manager/renderer.js : Rendu des sections et items\r\n     * - layer-manager/basemap-selector.js : S√©lecteur de fonds de carte\r\n     * - layer-manager/theme-selector.js : S√©lecteur de th√®mes\r\n     * - geoleaf.layer-manager.js (ce fichier) : Agr√©gateur/fa√ßade publique\r\n     *\r\n     * D√âPENDANCES REQUISES (charg√©es avant ce module) :\r\n     * - layer-manager/shared.js ‚Üí GeoLeaf._LayerManagerShared\r\n     * - layer-manager/renderer.js ‚Üí GeoLeaf._LayerManagerRenderer\r\n     * - layer-manager/basemap-selector.js ‚Üí GeoLeaf._LayerManagerBasemapSelector\r\n     * - layer-manager/theme-selector.js ‚Üí GeoLeaf._LayerManagerThemeSelector\r\n     * - layer-manager/control.js ‚Üí GeoLeaf._LayerManagerControl\r\n     *\r\n     * R√¥le :\r\n     * - Cr√©er un contr√¥le Leaflet de gestionnaire de couches pour GeoLeaf\r\n     * - Afficher des sections structur√©es (basemaps, couches, cat√©gories)\r\n     * - G√©rer un mode repliable (collapsible)\r\n     * - Pr√©paration pour l'int√©gration avec le module Legend (Phase 6)\r\n     */\r\n    const LayerManagerModule = {\r\n        /**\r\n         * R√©f√©rence √† la carte Leaflet\r\n         * @type {L.Map|null}\r\n         * @private\r\n         */\r\n        _map: null,\r\n\r\n        /**\r\n         * R√©f√©rence au contr√¥le Leaflet de l√©gende\r\n         * @type {L.Control|null}\r\n         * @private\r\n         */\r\n        _control: null,\r\n\r\n        /**\r\n         * Timeout pour le debounce du refresh\r\n         * @type {number|null}\r\n         * @private\r\n         */\r\n        _refreshTimeout: null,\r\n\r\n        /**\r\n         * Options internes du module\r\n         * @type {Object}\r\n         * @private\r\n         */\r\n        _options: {\r\n            position: \"bottomright\",\r\n            title: \"Gestionnaire de couches\",\r\n            collapsible: true,\r\n            collapsed: false,\r\n            sections: []\r\n        },\r\n\r\n        /**\r\n         * Initialisation du module LayerManager\r\n         *\r\n         * @param {Object} options\r\n         * @param {L.Map} [options.map] - Carte Leaflet (si absent, tentative via GeoLeaf.Core.getMap())\r\n         * @param {string} [options.position]\r\n         * @param {string} [options.title]\r\n         * @param {boolean} [options.collapsible]\r\n         * @param {boolean} [options.collapsed]\r\n         * @param {Array} [options.sections]\r\n         * @returns {L.Control|null} - Le contr√¥le LayerManager ou null\r\n         */\r\n        init(options = {}) {\r\n            if (typeof global.L === \"undefined\" || !global.L || !global.L.Control) {\r\n                if (Log) Log.error(\"[GeoLeaf.LayerManager] Leaflet (L.Control) est requis mais introuvable.\");\r\n                return null;\r\n            }\r\n\r\n            let map = options.map || null;\r\n\r\n            // Tentative de r√©cup√©ration via GeoLeaf.Core\r\n            if (!map && GeoLeaf.Core && typeof GeoLeaf.Core.getMap === \"function\") {\r\n                map = GeoLeaf.Core.getMap();\r\n            }\r\n\r\n            if (!map) {\r\n                if (Log) Log.error(\"[GeoLeaf.LayerManager] Aucune carte Leaflet disponible. Passe une instance dans init({ map }).\");\r\n                return null;\r\n            }\r\n\r\n            this._map = map;\r\n            if (Log) Log.info(\"[GeoLeaf.LayerManager] init: map assigned\");\r\n\r\n            this._options = this._mergeOptions(this._options, options);\r\n\r\n            // Charger les sections depuis layerManagerConfig si disponibles\r\n            this._loadConfigSections();\r\n\r\n            // Remplir automatiquement la section basemap\r\n            this._autoPopulateBasemap();\r\n\r\n            // Autoremplissage minimal si aucune section\r\n            this._autoPopulateSections();\r\n\r\n            // Cr√©er le contr√¥le Leaflet via le sous-module\r\n            if (!GeoLeaf._LayerManagerControl) {\r\n                if (Log) Log.error(\"[GeoLeaf.LayerManager] Module _LayerManagerControl non charg√©\");\r\n                return null;\r\n            }\r\n\r\n            this._control = GeoLeaf._LayerManagerControl.create(this._options);\r\n\r\n            if (!this._control) {\r\n                if (Log) Log.error(\"[GeoLeaf.LayerManager] √âchec cr√©ation contr√¥le\");\r\n                return null;\r\n            }\r\n\r\n            this._control.addTo(this._map);\r\n\r\n            if (Log) Log.info(\"[GeoLeaf.LayerManager] Contr√¥le cr√©√© et ajout√© √† la carte\");\r\n            return this._control;\r\n        },\r\n\r\n        /**\r\n         * Charge les sections depuis la configuration\r\n         * @private\r\n         */\r\n        _loadConfigSections() {\r\n            if (GeoLeaf.Config && typeof GeoLeaf.Config.get === \"function\") {\r\n                const layerManagerConfig = GeoLeaf.Config.get('layerManagerConfig');\r\n                if (GeoLeaf.Log) GeoLeaf.Log.debug(\"[LayerManager] Configuration charg√©e:\", {\r\n                    title: layerManagerConfig?.title,\r\n                    collapsed: layerManagerConfig?.collapsedByDefault,\r\n                    sectionsCount: layerManagerConfig?.sections?.length || 0\r\n                });\r\n                if (layerManagerConfig) {\r\n                    if (layerManagerConfig.title) {\r\n                        this._options.title = layerManagerConfig.title;\r\n                    }\r\n\r\n                    // Param√®tre global collapsed/collapsedByDefault\r\n                    if (typeof layerManagerConfig.collapsedByDefault === 'boolean') {\r\n                        this._options.collapsed = layerManagerConfig.collapsedByDefault;\r\n                    }\r\n\r\n                    if (Array.isArray(layerManagerConfig.sections) && layerManagerConfig.sections.length > 0) {\r\n                        const configSections = layerManagerConfig.sections\r\n                            .slice()\r\n                            .sort((a, b) => (a.order || 0) - (b.order || 0))\r\n                            .map(s => ({\r\n                                id: s.id,\r\n                                label: s.label,\r\n                                order: s.order,\r\n                                collapsedByDefault: s.collapsedByDefault,\r\n                                items: []\r\n                            }));\r\n\r\n                        if (!Array.isArray(this._options.sections)) {\r\n                            this._options.sections = [];\r\n                        }\r\n\r\n                        configSections.forEach(configSection => {\r\n                            const existingSection = this._options.sections.find(s => s.id === configSection.id);\r\n                            if (!existingSection) {\r\n                                this._options.sections.push(configSection);\r\n                            } else if (configSection.label && !existingSection.label) {\r\n                                existingSection.label = configSection.label;\r\n                            }\r\n                        });\r\n\r\n                        this._options.sections.sort((a, b) => (a.order || 0) - (b.order || 0));\r\n\r\n                        if (Log) Log.info(\"[GeoLeaf.LayerManager] Sections fusionn√©es avec layerManagerConfig\");\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Remplit automatiquement la section basemap\r\n         * @private\r\n         */\r\n        _autoPopulateBasemap() {\r\n            if (!Array.isArray(this._options.sections)) return;\r\n\r\n            const basemapSection = this._options.sections.find(s => s.id === \"basemap\");\r\n            if (basemapSection && (!basemapSection.items || basemapSection.items.length === 0)) {\r\n                try {\r\n                    let basemapDefs = null;\r\n                    if (global.GeoLeaf && global.GeoLeaf.Baselayers && typeof global.GeoLeaf.Baselayers.getBaseLayers === \"function\") {\r\n                        basemapDefs = global.GeoLeaf.Baselayers.getBaseLayers() || {};\r\n                    } else if (GeoLeaf.Config && typeof GeoLeaf.Config.get === \"function\") {\r\n                        basemapDefs = GeoLeaf.Config.get('basemaps') || {};\r\n                    }\r\n\r\n                    if (basemapDefs && Object.keys(basemapDefs).length > 0) {\r\n                        basemapSection.items = Object.keys(basemapDefs).map(k => {\r\n                            const d = basemapDefs[k] || {};\r\n                            return { id: d.id || k, label: d.label || k };\r\n                        });\r\n                        if (Log) Log.info(\"[GeoLeaf.LayerManager] Section basemap remplie automatiquement\");\r\n                    }\r\n                } catch (e) {\r\n                    if (Log) Log.warn(\"[GeoLeaf.LayerManager] Erreur lors du remplissage automatique des basemaps:\", e);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Autoremplissage minimal des sections\r\n         * @private\r\n         */\r\n        _autoPopulateSections() {\r\n            if (Array.isArray(this._options.sections) && this._options.sections.length > 0) return;\r\n\r\n            const autoSections = [];\r\n            try {\r\n                if (global.GeoLeaf && global.GeoLeaf.Baselayers && typeof global.GeoLeaf.Baselayers.getBaseLayers === \"function\") {\r\n                    const defs = global.GeoLeaf.Baselayers.getBaseLayers() || {};\r\n                    const baseItems = Object.keys(defs).map(k => {\r\n                        const d = defs[k] || {};\r\n                        return { id: k, label: d.label || k };\r\n                    });\r\n                    if (baseItems.length) {\r\n                        autoSections.push({ id: \"basemap\", label: \"Fond de carte\", items: baseItems });\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                // ignore\r\n            }\r\n\r\n            if (autoSections.length) {\r\n                this._options.sections = autoSections;\r\n                if (Log) Log.info(\"[GeoLeaf.LayerManager] auto-populated sections from Baselayers\");\r\n            } else {\r\n                if (Log) Log.warn(\"[GeoLeaf.LayerManager] Aucune section fournie et autoremplissage impossible.\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Enregistre une couche GeoJSON dans la l√©gende\r\n         * @param {string} layerId - ID de la couche\r\n         * @param {Object} options - Options de la couche\r\n         */\r\n        _registerGeoJsonLayer(layerId, options = {}) {\r\n            // ...log supprim√© ([LayerManager] _registerGeoJsonLayer appel√© pour)...\r\n\r\n            if (!this._options.sections) {\r\n                this._options.sections = [];\r\n            }\r\n\r\n            // Utiliser layerManagerId ou legendSection (r√©trocompatibilit√©)\r\n            const sectionId = options.layerManagerId || options.legendSection || \"geojson-default\";\r\n            let section = this._options.sections.find(s => s.id === sectionId);\r\n\r\n            if (!section) {\r\n                section = {\r\n                    id: sectionId,\r\n                    label: options.legendSectionLabel || \"Couches GeoJSON\",\r\n                    order: 10,\r\n                    items: []\r\n                };\r\n                this._options.sections.push(section);\r\n                this._options.sections.sort((a, b) => (a.order || 0) - (b.order || 0));\r\n            }\r\n\r\n            const existingItem = section.items.find(item => item.id === layerId);\r\n            if (!existingItem) {\r\n                section.items.push({\r\n                    id: layerId,\r\n                    label: options.label || layerId,\r\n                    toggleable: true,\r\n                    themes: options.themes || null,\r\n                    styles: options.styles || null,\r\n                    labels: options.labels || null\r\n                });\r\n\r\n                this._updateContent();\r\n                if (Log) Log.debug(`[LayerManager] Couche \"${layerId}\" enregistr√©e dans section \"${sectionId}\"`);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * D√©senregistre une couche GeoJSON de la l√©gende\r\n         * @param {string} layerId - ID de la couche\r\n         */\r\n        _unregisterGeoJsonLayer(layerId) {\r\n            if (!Array.isArray(this._options.sections)) return;\r\n\r\n            this._options.sections.forEach(section => {\r\n                if (Array.isArray(section.items)) {\r\n                    section.items = section.items.filter(item => item.id !== layerId);\r\n                }\r\n            });\r\n\r\n            this._options.sections = this._options.sections.filter(\r\n                section => section.id === \"basemap\" || (Array.isArray(section.items) && section.items.length > 0)\r\n            );\r\n\r\n            this._updateContent();\r\n            if (Log) Log.debug(`[LayerManager] Couche \"${layerId}\" d√©senregistr√©e`);\r\n        },\r\n\r\n        /**\r\n         * Met √† jour les sections de la l√©gende\r\n         * @param {Array} sections - Nouvelles sections\r\n         */\r\n        updateSections(sections) {\r\n            if (!Array.isArray(sections)) {\r\n                if (Log) Log.warn(\"[GeoLeaf.LayerManager] updateSections: sections doit √™tre un tableau\");\r\n                return;\r\n            }\r\n            this._options.sections = sections;\r\n            this._updateContent();\r\n        },\r\n\r\n        /**\r\n         * Ajoute ou met √† jour une section dans la l√©gende\r\n         * @param {Object} section - Section √† ajouter {id, label, order, items}\r\n         */\r\n        addSection(section) {\r\n            if (!section || !section.id) {\r\n                if (Log) Log.warn(\"[GeoLeaf.LayerManager] addSection: section invalide (id manquant)\");\r\n                return;\r\n            }\r\n\r\n            if (!Array.isArray(this._options.sections)) {\r\n                this._options.sections = [];\r\n            }\r\n\r\n            // Chercher une section existante avec le m√™me id\r\n            const existingIndex = this._options.sections.findIndex(s => s.id === section.id);\r\n\r\n            if (existingIndex !== -1) {\r\n                // Fusionner avec la section existante\r\n                const existing = this._options.sections[existingIndex];\r\n\r\n                // Fusionner les items\r\n                if (Array.isArray(section.items)) {\r\n                    if (!Array.isArray(existing.items)) {\r\n                        existing.items = [];\r\n                    }\r\n\r\n                    section.items.forEach(newItem => {\r\n                        const existingItemIndex = existing.items.findIndex(i => i.id === newItem.id);\r\n                        if (existingItemIndex !== -1) {\r\n                            // Mettre √† jour l'item existant\r\n                            existing.items[existingItemIndex] = Object.assign({}, existing.items[existingItemIndex], newItem);\r\n                        } else {\r\n                            // Ajouter le nouvel item\r\n                            existing.items.push(newItem);\r\n                        }\r\n                    });\r\n\r\n                    // Trier les items par order\r\n                    existing.items.sort((a, b) => (a.order || 0) - (b.order || 0));\r\n                }\r\n\r\n                // Mettre √† jour les autres propri√©t√©s si fournies\r\n                if (section.label) existing.label = section.label;\r\n                if (section.order !== undefined) existing.order = section.order;\r\n                if (section.collapsedByDefault !== undefined) existing.collapsedByDefault = section.collapsedByDefault;\r\n            } else {\r\n                // Ajouter la nouvelle section\r\n                this._options.sections.push({\r\n                    id: section.id,\r\n                    label: section.label || section.id,\r\n                    order: section.order || 99,\r\n                    collapsedByDefault: section.collapsedByDefault || false,\r\n                    items: section.items || []\r\n                });\r\n\r\n                // Trier les sections par order\r\n                this._options.sections.sort((a, b) => (a.order || 0) - (b.order || 0));\r\n            }\r\n\r\n            this._updateContent();\r\n            if (Log) Log.debug(`[LayerManager] Section \"${section.id}\" ajout√©e/mise √† jour`);\r\n        },\r\n\r\n        /**\r\n         * Bascule l'√©tat repli√©/d√©pli√© de la l√©gende\r\n         */\r\n        toggleCollapse() {\r\n            this._options.collapsed = !this._options.collapsed;\r\n            if (!this._control) return;\r\n            if (this._options.collapsed) {\r\n                this._control._container.classList.add(\"gl-layer-manager--collapsed\");\r\n            } else {\r\n                this._control._container.classList.remove(\"gl-layer-manager--collapsed\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Indique si la l√©gende est repli√©e\r\n         * @returns {boolean}\r\n         */\r\n        isCollapsed() {\r\n            return !!this._options.collapsed;\r\n        },\r\n\r\n        /**\r\n         * Force le re-rendu du contenu\r\n         * @private\r\n         */\r\n        _updateContent() {\r\n            if (!this._control || typeof this._control.updateSections !== \"function\") {\r\n                return;\r\n            }\r\n            this._control.updateSections(this._options.sections || []);\r\n        },\r\n\r\n        /**\r\n         * Rafra√Æchit l'affichage du LayerManager\r\n         * Utilis√© notamment apr√®s l'application d'un th√®me pour mettre √† jour l'√©tat des boutons toggle\r\n         * Version debounced pour grouper les appels multiples (ex: plusieurs couches changent de visibilit√© au zoom)\r\n         * @public\r\n         * @param {boolean} [immediate=false] - Si true, force le refresh imm√©diat sans debounce\r\n         */\r\n        refresh(immediate = false) {\r\n            if (!this._control || typeof this._control.refresh !== \"function\") {\r\n                if (Log) Log.warn(\"[LayerManager] refresh(): contr√¥le non disponible ou m√©thode refresh manquante\");\r\n                return;\r\n            }\r\n\r\n            // Si refresh imm√©diat demand√©, annuler le debounce et ex√©cuter\r\n            if (immediate) {\r\n                if (this._refreshTimeout) {\r\n                    clearTimeout(this._refreshTimeout);\r\n                    this._refreshTimeout = null;\r\n                }\r\n                this._control.refresh();\r\n                if (Log) Log.debug(\"[LayerManager] Affichage rafra√Æchi (imm√©diat)\");\r\n                return;\r\n            }\r\n\r\n            // Debounce: annuler le timeout pr√©c√©dent et programmer un nouveau refresh\r\n            if (this._refreshTimeout) {\r\n                clearTimeout(this._refreshTimeout);\r\n            }\r\n\r\n            this._refreshTimeout = setTimeout(() => {\r\n                this._refreshTimeout = null;\r\n                this._control.refresh();\r\n                if (Log) Log.debug(\"[LayerManager] Affichage rafra√Æchi (debounced)\");\r\n            }, 250);\r\n        },\r\n\r\n        /**\r\n         * Fusion d'options (shallow + fusion l√©g√®re pour sous-objets)\r\n         * @param {Object} base\r\n         * @param {Object} override\r\n         * @returns {Object}\r\n         * @private\r\n         */\r\n        _mergeOptions(base, override) {\r\n            const result = Object.assign({}, base || {});\r\n            if (!override) return result;\r\n\r\n            Object.keys(override).forEach((key) => {\r\n                const value = override[key];\r\n\r\n                if (\r\n                    value &&\r\n                    typeof value === \"object\" &&\r\n                    !Array.isArray(value) &&\r\n                    base &&\r\n                    typeof base[key] === \"object\" &&\r\n                    !Array.isArray(base[key])\r\n                ) {\r\n                    result[key] = Object.assign({}, base[key], value);\r\n                } else {\r\n                    result[key] = value;\r\n                }\r\n            });\r\n\r\n            return result;\r\n        }\r\n    };\r\n\r\n    // Exposer le module dans l'espace de nom GeoLeaf\r\n    GeoLeaf.LayerManager = LayerManagerModule;\r\n})(window);\r\n","/**\r\n * Module Legend Generator\r\n * G√©n√®re automatiquement les l√©gendes depuis les fichiers de style\r\n *\r\n * D√âPENDANCES:\r\n * - GeoLeaf.Log (optionnel)\r\n *\r\n * EXPOSE:\r\n * - GeoLeaf._LegendGenerator\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * R√©cup√®re l'ic√¥ne depuis taxonomy pour une r√®gle donn√©e\r\n     * @param {Object} rule - R√®gle de style avec condition when\r\n     * @param {Object} taxonomyData - Donn√©es de taxonomy\r\n     * @param {string} symbolPrefix - Pr√©fixe des symboles (ex: \"tourism-poi-cat-\")\r\n     * @returns {string|null} - ID de l'ic√¥ne sprite ou null\r\n     * @private\r\n     */\r\n    function getIconFromTaxonomy(rule, taxonomyData, symbolPrefix) {\r\n        if (!rule.when || !taxonomyData || !taxonomyData.categories) {\r\n            if (Log) Log.debug(\"[LegendGenerator] Donn√©es insuffisantes pour r√©cup√©rer ic√¥ne:\", {\r\n                hasRule: !!rule.when,\r\n                hasTaxonomy: !!taxonomyData,\r\n                hasCategories: !!(taxonomyData && taxonomyData.categories)\r\n            });\r\n            return null;\r\n        }\r\n\r\n        const field = rule.when.field;\r\n        const value = rule.when.value;\r\n        const categories = taxonomyData.categories;\r\n\r\n        if (Log) Log.debug(`[LegendGenerator] Recherche ic√¥ne pour ${field}=${value}`);\r\n\r\n        // D√©terminer le type de recherche\r\n        const isSubCategory = field === \"properties.subCategoryId\" || field === \"attributes.subCategoryId\";\r\n        const isCategoryId = field === \"properties.categoryId\" || field === \"attributes.categoryId\";\r\n\r\n        // Recherche dans subCategoryId\r\n        if (isSubCategory) {\r\n            for (const categoryKey in categories) {\r\n                const subcategories = categories[categoryKey].subcategories;\r\n                if (subcategories && subcategories[value] && subcategories[value].icon) {\r\n                    const iconId = symbolPrefix + subcategories[value].icon;\r\n                    if (Log) Log.debug(`[LegendGenerator] Ic√¥ne trouv√©e (subcat): ${iconId}`);\r\n                    return iconId;\r\n                }\r\n            }\r\n        }\r\n\r\n        // Recherche dans categoryId\r\n        if (isCategoryId && categories[value] && categories[value].icon) {\r\n            const iconId = symbolPrefix + categories[value].icon;\r\n            if (Log) Log.debug(`[LegendGenerator] Ic√¥ne trouv√©e (cat): ${iconId}`);\r\n            return iconId;\r\n        }\r\n\r\n        if (Log) Log.warn(`[LegendGenerator] Aucune ic√¥ne trouv√©e pour ${field}=${value}`);\r\n        return null;\r\n    }\r\n\r\n    // Fonction utilitaire pour d√©terminer si les ic√¥nes doivent √™tre affich√©es\r\n    // Copie exactement la logique de markers.js resolveCategoryDisplay()\r\n    function shouldUseIcons() {\r\n        try {\r\n            // R√©cup√©rer l'√©tat partag√© (comme dans markers.js)\r\n            const shared = (GeoLeaf && GeoLeaf._POIShared) ? GeoLeaf._POIShared : null;\r\n            const poiConfig = shared ? shared.state.poiConfig : {};\r\n            const showIconsOnMap = (poiConfig.showIconsOnMap !== false);\r\n\r\n            if (showIconsOnMap) {\r\n                // V√©rifier la config d'ic√¥nes (comme dans markers.js)\r\n                const iconsConfig = (GeoLeaf.Config && typeof GeoLeaf.Config.getIconsConfig === \"function\")\r\n                    ? GeoLeaf.Config.getIconsConfig()\r\n                    : null;\r\n\r\n                if (iconsConfig && iconsConfig.showOnMap !== false) {\r\n                    return true;\r\n                }\r\n            }\r\n        } catch (e) {\r\n            // Ignorer les erreurs silencieusement\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * G√©n√®re les donn√©es de l√©gende depuis un fichier de style\r\n     * @param {Object} styleData - Donn√©es du style (JSON pars√©)\r\n     * @param {string} geometryType - Type de g√©om√©trie (point, line, polygon)\r\n     * @param {Object} taxonomyData - Donn√©es de taxonomy (pour les ic√¥nes POI)\r\n     * @returns {Object} - Donn√©es de l√©gende format√©es\r\n     */\r\n    function generateLegendFromStyle(styleData, geometryType, taxonomyData) {\r\n        if (!styleData) {\r\n            if (Log) Log.warn(\"[LegendGenerator] Style data manquant\");\r\n            return null;\r\n        }\r\n\r\n        const legendData = {\r\n            version: \"3.0\",\r\n            id: styleData.id,\r\n            title: styleData.label || \"Sans titre\",\r\n            description: styleData.description || \"\",\r\n            sections: []\r\n        };\r\n\r\n        const items = [];\r\n        const symbolPrefix = taxonomyData?.icons?.symbolPrefix || \"tourism-poi-cat-\";\r\n\r\n        // Cas 1 : Style avec styleRules\r\n        if (Array.isArray(styleData.styleRules) && styleData.styleRules.length > 0) {\r\n            styleData.styleRules.forEach(rule => {\r\n                if (!rule.legend) {\r\n                    if (Log) Log.warn(\"[LegendGenerator] R√®gle sans propri√©t√© legend:\", rule);\r\n                    return;\r\n                }\r\n\r\n                const item = generateLegendItem(\r\n                    rule.style,\r\n                    rule.legend,\r\n                    geometryType,\r\n                    styleData.style, // style de base\r\n                    rule,\r\n                    taxonomyData,\r\n                    symbolPrefix\r\n                );\r\n\r\n                if (item) {\r\n                    items.push(item);\r\n                }\r\n            });\r\n\r\n            // Trier par order\r\n            items.sort((a, b) => (a.order || 999) - (b.order || 999));\r\n\r\n        // Cas 2 : Style simple sans r√®gles ou avec styleRules vide\r\n        }\r\n\r\n        // Si pas d'items g√©n√©r√©s √† partir des styleRules (ou pas de styleRules)\r\n        // essayer d'utiliser la l√©gende au niveau racine\r\n        if (items.length === 0 && styleData.style && styleData.legend) {\r\n            const item = generateLegendItem(\r\n                styleData.style,\r\n                styleData.legend,\r\n                geometryType,\r\n                null,\r\n                null,\r\n                taxonomyData,\r\n                symbolPrefix\r\n            );\r\n\r\n            if (item) {\r\n                items.push(item);\r\n            }\r\n        }\r\n\r\n        // Cr√©er une section par d√©faut avec tous les items\r\n        if (items.length > 0) {\r\n            legendData.sections.push({\r\n                title: \"\",\r\n                items: items\r\n            });\r\n        }\r\n\r\n        return legendData;\r\n    }\r\n\r\n    /**\r\n     * G√©n√®re un item de l√©gende selon le type de g√©om√©trie\r\n     * @param {Object} style - Style de l'entit√©\r\n     * @param {Object} legend - Propri√©t√©s legend (label, order, description)\r\n     * @param {string} geometryType - Type de g√©om√©trie\r\n     * @param {Object} baseStyle - Style de base (pour h√©ritage)\r\n     * @param {Object} rule - R√®gle compl√®te (pour extraction ic√¥ne)\r\n     * @param {Object} taxonomyData - Donn√©es taxonomy\r\n     * @param {string} symbolPrefix - Pr√©fixe symboles\r\n     * @param {boolean} showIconsOnMap - Si true, g√©n√®re les ic√¥nes\r\n     * @returns {Object|null} - Item de l√©gende\r\n     * @private\r\n     */\r\n    function generateLegendItem(style, legend, geometryType, baseStyle, rule, taxonomyData, symbolPrefix) {\r\n        if (!style || !legend) {\r\n            return null;\r\n        }\r\n\r\n        // Fusionner avec le style de base si pr√©sent\r\n        const mergedStyle = baseStyle ? Object.assign({}, baseStyle, style) : style;\r\n\r\n        const item = {\r\n            label: legend.label || \"Sans label\",\r\n            order: legend.order || 999\r\n        };\r\n\r\n        if (legend.description) {\r\n            item.description = legend.description;\r\n        }\r\n\r\n        // G√©n√©ration du symbole selon le type de g√©om√©trie\r\n        switch (geometryType) {\r\n            case \"point\":\r\n                item.symbol = generatePointSymbol(mergedStyle, rule, taxonomyData, symbolPrefix);\r\n                break;\r\n\r\n            case \"line\":\r\n                item.symbol = generateLineSymbol(mergedStyle);\r\n                break;\r\n\r\n            case \"polygon\":\r\n                item.symbol = generatePolygonSymbol(mergedStyle);\r\n                break;\r\n\r\n            default:\r\n                if (Log) Log.warn(\"[LegendGenerator] Type de g√©om√©trie non reconnu:\", geometryType);\r\n                item.symbol = generatePointSymbol(mergedStyle, rule, taxonomyData, symbolPrefix);\r\n        }\r\n\r\n        return item;\r\n    }\r\n\r\n    /**\r\n     * Ajoute les propri√©t√©s communes d'opacit√© √† un symbole\r\n     * @param {Object} symbol - Objet symbole\r\n     * @param {Object} style - Style source\r\n     * @param {Array<string>} opacityProps - Propri√©t√©s d'opacit√© √† copier\r\n     * @private\r\n     */\r\n    function applyOpacityProperties(symbol, style, opacityProps) {\r\n        opacityProps.forEach(prop => {\r\n            if (style[prop] !== undefined) {\r\n                symbol[prop] = style[prop];\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * R√©sout les ic√¥nes d'une r√®gle selon la configuration showIconsOnMap\r\n     * @param {Object} rule - R√®gle de style\r\n     * @returns {Object} - {useIcon: boolean, iconId: string|null}\r\n     * @private\r\n     */\r\n    function resolveRuleIcons(rule) {\r\n        // Utiliser la m√™me logique que markers.js\r\n        if (!shouldUseIcons()) {\r\n            return { useIcon: false, iconId: null };\r\n        }\r\n        // R√©cup√©rer la configuration des cat√©gories\r\n        const categoriesConfig = (GeoLeaf.Config && typeof GeoLeaf.Config.getCategories === \"function\")\r\n            ? GeoLeaf.Config.getCategories()\r\n            : {};\r\n\r\n        if (!categoriesConfig || Object.keys(categoriesConfig).length === 0) {\r\n            return { useIcon: false, iconId: null };\r\n        }\r\n\r\n        // Mappage de fclass vers categoryId/subCategoryId pour les ic√¥nes\r\n        // Permet de r√©soudre les ic√¥nes pour les r√®gles qui utilisent fclass au lieu de categoryId\r\n        const fclassMappings = {\r\n            // Cultures\r\n            'archaeological': { categoryId: 'CULTURES', subCategoryId: 'SITE ARCHEOLOGIQUE' },\r\n            'museum': { categoryId: 'CULTURES', subCategoryId: 'MUSEE' },\r\n            // H√©bergements\r\n            'camp_site': { categoryId: 'HEBERGEMENT', subCategoryId: 'CAMPING' },\r\n            'hotel': { categoryId: 'HEBERGEMENT', subCategoryId: 'HOTEL' }\r\n        };\r\n\r\n        // Extraire categoryId et subCategoryId depuis la r√®gle\r\n        let categoryId = null;\r\n        let subCategoryId = null;\r\n\r\n        // Format v3 : rule.when avec field/value\r\n        if (rule.when && rule.when.field && rule.when.value !== undefined) {\r\n            // NOUVEAU: Cas sp√©cial pour fclass (r√©soudre via mapping)\r\n            if (rule.when.field === 'properties.fclass' || rule.when.field === 'fclass') {\r\n                const mapping = fclassMappings[rule.when.value];\r\n                if (mapping) {\r\n                    categoryId = mapping.categoryId;\r\n                    subCategoryId = mapping.subCategoryId;\r\n                }\r\n            } else if (rule.when.field === 'properties.categoryId' || rule.when.field === 'categoryId') {\r\n                categoryId = rule.when.value;\r\n            } else if (rule.when.field === 'properties.subCategoryId' || rule.when.field === 'subCategoryId') {\r\n                subCategoryId = rule.when.value;\r\n            } else if (rule.when.field === 'properties.category' || rule.when.field === 'category') {\r\n                categoryId = rule.when.value;\r\n            } else if (rule.when.field === 'properties.subCategory' || rule.when.field === 'subCategory') {\r\n                subCategoryId = rule.when.value;\r\n            }\r\n        }\r\n        // Format legacy : rule.condition\r\n        else if (rule.condition) {\r\n            if (typeof rule.condition.categoryId !== 'undefined') {\r\n                categoryId = rule.condition.categoryId;\r\n            }\r\n            if (typeof rule.condition.subCategoryId !== 'undefined') {\r\n                subCategoryId = rule.condition.subCategoryId;\r\n            }\r\n            if (typeof rule.condition.category !== 'undefined') {\r\n                categoryId = rule.condition.category;\r\n            }\r\n            if (typeof rule.condition.subCategory !== 'undefined') {\r\n                subCategoryId = rule.condition.subCategory;\r\n            }\r\n        }\r\n\r\n        // Pour les subCategoryId, il faut deviner la categoryId depuis la taxonomie\r\n        if (subCategoryId && !categoryId) {\r\n            // Chercher dans quelle cat√©gorie se trouve cette sous-cat√©gorie\r\n            Object.keys(categoriesConfig).forEach(catKey => {\r\n                const cat = categoriesConfig[catKey];\r\n                if (cat.subcategories && cat.subcategories[subCategoryId]) {\r\n                    categoryId = catKey;\r\n                }\r\n            });\r\n        }\r\n\r\n        if (!categoryId && !subCategoryId) {\r\n            return { useIcon: false, iconId: null };\r\n        }\r\n\r\n        // R√©solution de l'ic√¥ne depuis la taxonomie\r\n        let iconId = null;\r\n        if (subCategoryId && categoriesConfig[categoryId]?.subcategories) {\r\n            const subCat = categoriesConfig[categoryId].subcategories[subCategoryId];\r\n            const cat = categoriesConfig[categoryId];\r\n\r\n            if (subCat) {\r\n                iconId = subCat.icon || subCat.iconId || cat.icon || cat.iconId || null;\r\n            } else {\r\n                iconId = cat.icon || cat.iconId || null;\r\n            }\r\n        } else if (categoriesConfig[categoryId]) {\r\n            const cat = categoriesConfig[categoryId];\r\n            iconId = cat.icon || cat.iconId || null;\r\n        }\r\n\r\n        return {\r\n            useIcon: iconId !== null,\r\n            iconId: iconId\r\n        };\r\n    }\r\n\r\n    /**\r\n     * G√©n√®re un symbole pour les points (POI)\r\n     * @param {Object} style - Style du point\r\n     * @param {Object} rule - R√®gle compl√®te (pour extraction ic√¥ne)\r\n     * @param {Object} taxonomyData - Donn√©es taxonomy\r\n     * @param {string} symbolPrefix - Pr√©fixe symboles\r\n     * @param {boolean} showIconsOnMap - Si true, g√©n√®re les ic√¥nes\r\n     * @returns {Object} - Configuration du symbole\r\n     * @private\r\n     */\r\n    function generatePointSymbol(style, rule, taxonomyData, symbolPrefix) {\r\n        const fill = style.fill || {};\r\n        const stroke = style.stroke || {};\r\n\r\n        const resolvedRadius = style.radius || style.size || (style.sizePx ? style.sizePx / 2 : undefined);\r\n\r\n        // Taille par d√©faut plus grande pour que les ic√¥nes soient visibles dans la l√©gende\r\n        // Utiliser 24px pour les ic√¥nes, 16px pour les cercles simples\r\n        const defaultRadius = 24;\r\n\r\n        const symbol = {\r\n            type: \"circle\",\r\n            radius: resolvedRadius || defaultRadius,\r\n            fillColor: style.fillColor || style.color || fill.color || \"#3388ff\",\r\n            fillOpacity: style.fillOpacity !== undefined ? style.fillOpacity : (fill.opacity !== undefined ? fill.opacity : 1),\r\n            color: style.color || stroke.color || \"#ffffff\",\r\n            weight: style.weight || stroke.widthPx || 2,\r\n            opacity: style.opacity !== undefined ? style.opacity : (stroke.opacity !== undefined ? stroke.opacity : 1)\r\n        };\r\n\r\n        // Priorit√© 1 : V√©rifier si l'ic√¥ne est directement dans le style (showIconsOnMap)\r\n        if (style.useIcon && style.iconId) {\r\n            symbol.icon = style.iconId;\r\n            symbol.iconColor = \"#ffffff\"; // Couleur par d√©faut pour ic√¥nes\r\n            if (Log) Log.debug(`[LegendGenerator] Ic√¥ne trouv√©e dans le style: ${style.iconId}`);\r\n        }\r\n        // Priorit√© 2 : R√©soudre l'ic√¥ne depuis la configuration showIconsOnMap\r\n        else if (rule && shouldUseIcons()) {\r\n            const iconResolution = resolveRuleIcons(rule);\r\n\r\n            if (iconResolution.useIcon && iconResolution.iconId) {\r\n                // Ajouter le pr√©fixe sprite si n√©cessaire\r\n                const fullIconId = iconResolution.iconId.startsWith('#') ?\r\n                    iconResolution.iconId :\r\n                    (symbolPrefix ? symbolPrefix + iconResolution.iconId : '#sprite-' + iconResolution.iconId);\r\n\r\n                symbol.icon = fullIconId;\r\n                symbol.iconColor = \"#ffffff\";\r\n                if (Log) Log.debug(`[LegendGenerator] Ic√¥ne r√©solue depuis la config: ${fullIconId}`);\r\n            }\r\n        }\r\n        // Priorit√© 3 : Tenter de r√©cup√©rer l'ic√¥ne depuis taxonomy (m√©thode legacy)\r\n        if (!symbol.icon && rule && taxonomyData && shouldUseIcons()) {\r\n            const icon = getIconFromTaxonomy(rule, taxonomyData, symbolPrefix);\r\n            if (icon) {\r\n                symbol.icon = icon;\r\n                symbol.iconColor = \"#ffffff\"; // Couleur par d√©faut pour ic√¥nes\r\n                if (Log) Log.debug(\"[LegendGenerator] Ic√¥ne taxonomy ajout√©e:\", icon);\r\n            }\r\n        }\r\n\r\n        return symbol;\r\n    }\r\n\r\n    /**\r\n     * G√©n√®re un symbole pour les lignes\r\n     * @param {Object} style - Style de la ligne\r\n     * @returns {Object} - Configuration du symbole\r\n     * @private\r\n     */\r\n    function generateLineSymbol(style) {\r\n        const stroke = style.stroke || {};\r\n        const casing = style.casing || {};\r\n\r\n        // Strat√©gie : afficher le casing comme contour/bordure du stroke\r\n        // Si casing existe, utiliser la couleur du casing comme contour\r\n        // et le stroke comme couleur principale\r\n        const symbol = {\r\n            type: \"line\",\r\n            color: stroke.color || style.color || \"#3388ff\",\r\n            width: stroke.widthPx || style.weight || 3,\r\n            style: \"solid\" // Par d√©faut\r\n        };\r\n\r\n        // Si casing est activ√©, ajouter une bordure/outline fine\r\n        // Limiter l'√©paisseur pour la l√©gende (r√©duit d'un facteur)\r\n        if (casing.enabled && casing.color) {\r\n            symbol.outlineColor = casing.color;\r\n            // Utiliser une fraction de la largeur du casing pour la l√©gende\r\n            symbol.outlineWidth = Math.max(0.5, (casing.widthPx || 1) * 0.4);\r\n            symbol.outlineOpacity = casing.opacity || 1;\r\n        }\r\n\r\n        // Appliquer l'opacit√©\r\n        if (stroke.opacity !== undefined) {\r\n            symbol.opacity = stroke.opacity;\r\n        }\r\n\r\n        // Support pour dashArray - passer la valeur compl√®te\r\n        const dashArray = style.dashArray || stroke.dashArray;\r\n        if (dashArray) {\r\n            symbol.dashArray = dashArray;\r\n            // Garder le style pour la r√©trocompatibilit√©\r\n            if (dashArray === \"5, 5\" || dashArray === \"10, 10\") {\r\n                symbol.style = \"dashed\";\r\n            } else if (dashArray === \"1, 3\" || dashArray === \"2, 4\") {\r\n                symbol.style = \"dotted\";\r\n            }\r\n        }\r\n\r\n        return symbol;\r\n    }\r\n\r\n    /**\r\n     * G√©n√®re un symbole pour les polygones\r\n     * @param {Object} style - Style du polygone\r\n     * @returns {Object} - Configuration du symbole\r\n     * @private\r\n     */\r\n    function generatePolygonSymbol(style) {\r\n        const fill = style.fill || {};\r\n        const stroke = style.stroke || {};\r\n\r\n        const symbol = {\r\n            type: \"polygon\",\r\n            fillColor: style.fillColor || style.color || fill.color || \"#3388ff\",\r\n            color: style.color || stroke.color || \"#333\",\r\n            weight: style.weight || stroke.widthPx || 1\r\n        };\r\n\r\n        // Appliquer l'opacit√© du fill (pas du stroke qui √©crase)\r\n        applyOpacityProperties(symbol, style, ['fillOpacity']);\r\n        // Si pas de fillOpacity, prendre l'opacity directement du fill\r\n        if (fill.opacity !== undefined) {\r\n            symbol.opacity = fill.opacity;\r\n        }\r\n        // Puis v√©rifier style.opacity en dernier (peut √™tre au niveau racine)\r\n        if (style.opacity !== undefined) {\r\n            symbol.opacity = style.opacity;\r\n        }\r\n\r\n        // Support pour dashArray sur le contour\r\n        const dashArray = style.dashArray || stroke.dashArray;\r\n        if (dashArray) {\r\n            symbol.dashArray = dashArray;\r\n        }\r\n\r\n        // Support pour patterns de hachures\r\n        if (style.fillPattern) {\r\n            symbol.fillPattern = style.fillPattern;\r\n        }\r\n\r\n        // Support pour les hachures (format moderne)\r\n        if (style.hatch) {\r\n            symbol.hatch = style.hatch;\r\n        }\r\n\r\n        return symbol;\r\n    }\r\n\r\n    // Exposer le module\r\n    GeoLeaf._LegendGenerator = {\r\n        generateLegendFromStyle: generateLegendFromStyle,\r\n        generateLegendItem: generateLegendItem\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * Module Legend Renderer\r\n * Rendu des symboles de l√©gende cartographique\r\n *\r\n * D√âPENDANCES:\r\n * - Leaflet (L.DomUtil)\r\n * - GeoLeaf.Log (optionnel)\r\n *\r\n * EXPOSE:\r\n * - GeoLeaf._LegendRenderer\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Rendu d'une section de l√©gende\r\n     * @param {HTMLElement} container - Conteneur parent\r\n     * @param {Object} section - Section de l√©gende\r\n     */\r\n    function renderSection(container, section) {\r\n        const sectionEl = global.L.DomUtil.create(\"div\", \"gl-legend__section\", container);\r\n\r\n        // Titre de section\r\n        if (section.title) {\r\n            const titleEl = global.L.DomUtil.create(\"h3\", \"gl-legend__section-title\", sectionEl);\r\n            titleEl.textContent = section.title;\r\n        }\r\n\r\n        // Items\r\n        const itemsContainer = global.L.DomUtil.create(\"div\", \"gl-legend__items\", sectionEl);\r\n        if (Array.isArray(section.items)) {\r\n            section.items.forEach(item => renderItem(itemsContainer, item));\r\n        }\r\n\r\n        return sectionEl;\r\n    }\r\n\r\n    /**\r\n     * Rendu d'un item de l√©gende\r\n     * @param {HTMLElement} container - Conteneur parent\r\n     * @param {Object} item - Item de l√©gende\r\n     */\r\n    function renderItem(container, item) {\r\n        const itemEl = global.L.DomUtil.create(\"div\", \"gl-legend__item\", container);\r\n\r\n        // Symbole\r\n        const symbolEl = global.L.DomUtil.create(\"div\", \"gl-legend__symbol\", itemEl);\r\n        renderSymbol(symbolEl, item);\r\n\r\n        // Texte\r\n        const textContainer = global.L.DomUtil.create(\"div\", \"gl-legend__text\", itemEl);\r\n\r\n        const labelEl = global.L.DomUtil.create(\"span\", \"gl-legend__label\", textContainer);\r\n        labelEl.textContent = item.label || \"\";\r\n\r\n        if (item.description) {\r\n            const descEl = global.L.DomUtil.create(\"span\", \"gl-legend__description\", textContainer);\r\n            descEl.textContent = item.description;\r\n        }\r\n\r\n        return itemEl;\r\n    }\r\n\r\n    /**\r\n     * Rendu d'un symbole selon son type\r\n     * @param {HTMLElement} container - Conteneur du symbole\r\n     * @param {Object} item - Configuration du symbole\r\n     */\r\n    function renderSymbol(container, item) {\r\n        // D√©l√©guer au module commun\r\n        if (GeoLeaf._UIComponents && typeof GeoLeaf._UIComponents.renderSymbol === 'function') {\r\n            GeoLeaf._UIComponents.renderSymbol(container, item);\r\n        } else {\r\n            // Fallback si module non charg√©\r\n            if (Log) Log.error(\"[LegendRenderer] Module _UIComponents non disponible\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Rendu d'un symbole cercle simple\r\n     */\r\n    /**\r\n     * Rendu d'un symbole cercle simple\r\n     * @deprecated Utiliser GeoLeaf._UIComponents.renderCircleSymbol()\r\n     */\r\n    function renderCircleSymbol(container, item) {\r\n        if (GeoLeaf._UIComponents) {\r\n            GeoLeaf._UIComponents.renderCircleSymbol(container, item);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Rendu d'un symbole ligne\r\n     * @deprecated Utiliser GeoLeaf._UIComponents.renderLineSymbol()\r\n     */\r\n    function renderLineSymbol(container, item) {\r\n        if (GeoLeaf._UIComponents) {\r\n            GeoLeaf._UIComponents.renderLineSymbol(container, item);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Rendu d'un symbole polygone/remplissage\r\n     * @deprecated Utiliser GeoLeaf._UIComponents.renderPolygonSymbol()\r\n     */\r\n    function renderPolygonSymbol(container, item) {\r\n        if (GeoLeaf._UIComponents) {\r\n            GeoLeaf._UIComponents.renderPolygonSymbol(container, item);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Rendu d'un symbole √©toile (rating)\r\n     * @deprecated Utiliser GeoLeaf._UIComponents.renderStarSymbol()\r\n     */\r\n    function renderStarSymbol(container, item) {\r\n        if (GeoLeaf._UIComponents) {\r\n            GeoLeaf._UIComponents.renderStarSymbol(container, item);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Rendu du footer\r\n     * @param {HTMLElement} container - Conteneur parent\r\n     * @param {Object} footer - Configuration du footer\r\n     */\r\n    function renderFooter(container, footer) {\r\n        if (!footer || !footer.text) return;\r\n\r\n        const footerEl = global.L.DomUtil.create(\"div\", \"gl-legend__footer\", container);\r\n        footerEl.textContent = footer.text;\r\n\r\n        if (footer.style === \"italic\") {\r\n            footerEl.style.fontStyle = \"italic\";\r\n        }\r\n    }\r\n\r\n    // Exposer dans l'espace de noms interne\r\n    GeoLeaf._LegendRenderer = {\r\n        renderSection: renderSection,\r\n        renderItem: renderItem,\r\n        renderSymbol: renderSymbol,\r\n        renderFooter: renderFooter,\r\n        renderAccordion: renderAccordion\r\n    };\r\n\r\n    /**\r\n     * Rendu d'un accord√©on pour une couche\r\n     * @param {HTMLElement} container - Conteneur parent\r\n     * @param {Object} accordionData - Configuration de l'accord√©on\r\n     * @param {string} accordionData.layerId - ID de la couche\r\n     * @param {string} accordionData.label - Titre de l'accord√©on\r\n     * @param {boolean} accordionData.collapsed - √âtat initial\r\n     * @param {boolean} accordionData.visible - Couche visible ou non (pour grisage)\r\n     * @param {Array} accordionData.sections - Sections de l√©gende\r\n     */\r\n    function renderAccordion(container, accordionData) {\r\n        // Utiliser le module commun pour cr√©er l'accord√©on\r\n        if (!GeoLeaf._UIComponents) {\r\n            if (Log) Log.error(\"[LegendRenderer] Module _UIComponents non disponible\");\r\n            return;\r\n        }\r\n\r\n        const { bodyEl } = GeoLeaf._UIComponents.createAccordion(container, {\r\n            layerId: accordionData.layerId,\r\n            label: accordionData.label,\r\n            collapsed: accordionData.collapsed !== false,\r\n            visible: accordionData.visible,\r\n            onToggle: (layerId, expanded) => {\r\n                // Notifier le module Legend du changement\r\n                if (global.GeoLeaf && global.GeoLeaf.Legend && typeof global.GeoLeaf.Legend.toggleAccordion === \"function\") {\r\n                    global.GeoLeaf.Legend.toggleAccordion(layerId);\r\n                }\r\n            }\r\n        });\r\n\r\n        // Rendre les sections √† l'int√©rieur du body\r\n        if (Array.isArray(accordionData.sections)) {\r\n            accordionData.sections.forEach(section => {\r\n                renderSection(bodyEl, section);\r\n            });\r\n        }\r\n    }\r\n\r\n})(window);\r\n","/**\r\n * Module Legend Control\r\n * Contr√¥le Leaflet pour afficher une l√©gende cartographique\r\n *\r\n * D√âPENDANCES:\r\n * - Leaflet (L.Control, L.DomUtil, L.DomEvent)\r\n * - GeoLeaf.Log (optionnel)\r\n * - GeoLeaf._LegendRenderer\r\n *\r\n * EXPOSE:\r\n * - GeoLeaf._LegendControl\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * S'assure que le sprite SVG des ic√¥nes est charg√© avec v√©rification robuste\r\n     * @private\r\n     * @param {Function} [callback] - Fonction √† appeler une fois le sprite charg√©\r\n     */\r\n    async function ensureSpriteLoaded(callback) {\r\n        if (GeoLeaf._POIMarkers && typeof GeoLeaf._POIMarkers.ensureProfileSpriteInjectedSync === \"function\") {\r\n            // √âviter les logs r√©p√©titifs - log seulement la premi√®re fois\r\n            if (!ensureSpriteLoaded._alreadyLogged) {\r\n                if (Log) Log.debug(\"[Legend] Chargement du sprite SVG pour les ic√¥nes...\");\r\n                ensureSpriteLoaded._alreadyLogged = true;\r\n            }\r\n\r\n            // Attendre que le sprite soit charg√© de mani√®re asynchrone\r\n            await GeoLeaf._POIMarkers.ensureProfileSpriteInjectedSync();\r\n\r\n            // V√©rification avec retry pour s'assurer que le sprite est charg√©\r\n            let attempts = 0;\r\n            const maxAttempts = 20; // 2 secondes max\r\n            const checkInterval = 100;\r\n\r\n            function checkSprite() {\r\n                const spriteEl = document.querySelector('svg[data-geoleaf-sprite=\"profile\"]');\r\n                attempts++;\r\n\r\n                if (spriteEl) {\r\n                    // Log seulement la premi√®re d√©tection r√©ussie\r\n                    if (!ensureSpriteLoaded._spriteDetected) {\r\n                        if (Log) Log.info(\"[Legend] Sprite SVG d√©tect√© et pr√™t pour utilisation\");\r\n                        ensureSpriteLoaded._spriteDetected = true;\r\n                    }\r\n                    if (typeof callback === 'function') {\r\n                        callback(true);\r\n                    }\r\n                } else if (attempts < maxAttempts) {\r\n                    setTimeout(checkSprite, checkInterval);\r\n                } else {\r\n                    if (Log) Log.warn(\"[Legend] Sprite SVG non trouv√© apr√®s\", maxAttempts * checkInterval, \"ms\");\r\n                    if (typeof callback === 'function') {\r\n                        callback(false);\r\n                    }\r\n                }\r\n            }\r\n\r\n            checkSprite();\r\n        } else {\r\n            if (Log) Log.debug(\"[Legend] GeoLeaf._POIMarkers.ensureProfileSpriteInjectedSync non disponible\");\r\n            if (typeof callback === 'function') {\r\n                callback(false);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un contr√¥le Leaflet pour la l√©gende cartographique\r\n     * @param {Object} options - Options du contr√¥le\r\n     * @returns {L.Control} - Instance du contr√¥le Leaflet\r\n     */\r\n    function createLegendControl(options) {\r\n        if (!global.L || !global.L.Control) {\r\n            if (Log) Log.error(\"[Legend] Leaflet L.Control non disponible\");\r\n            return null;\r\n        }\r\n\r\n        const LegendControl = global.L.Control.extend({\r\n            options: {\r\n                position: options.position || \"bottomleft\"\r\n            },\r\n\r\n            initialize: function (controlOptions) {\r\n                global.L.setOptions(this, controlOptions || {});\r\n                this._glOptions = controlOptions._glOptions;\r\n            },\r\n\r\n            onAdd: function (mapInstance) {\r\n                this._map = mapInstance;\r\n                this._container = global.L.DomUtil.create(\"div\", \"gl-map-legend\");\r\n\r\n                // Emp√™cher les interactions carte\r\n                if (global.L.DomEvent) {\r\n                    global.L.DomEvent.disableClickPropagation(this._container);\r\n                    global.L.DomEvent.disableScrollPropagation(this._container);\r\n                }\r\n\r\n                this._buildStructure();\r\n                return this._container;\r\n            },\r\n\r\n            onRemove: function () {\r\n                this._map = null;\r\n                this._container = null;\r\n            },\r\n\r\n            /**\r\n             * Construit la structure DOM de la l√©gende\r\n             * @private\r\n             */\r\n            _buildStructure: function () {\r\n                const opts = this._glOptions;\r\n\r\n                // Wrapper principal\r\n                const wrapper = global.L.DomUtil.create(\"div\", \"gl-map-legend__wrapper\", this._container);\r\n\r\n                // En-t√™te : titre + bouton collapse\r\n                if (opts.title) {\r\n                    const header = global.L.DomUtil.create(\"div\", \"gl-map-legend__header\", wrapper);\r\n\r\n                    const titleEl = global.L.DomUtil.create(\"h2\", \"gl-map-legend__title\", header);\r\n                    titleEl.textContent = opts.title;\r\n\r\n                    if (opts.collapsible) {\r\n                        const toggleEl = global.L.DomUtil.create(\"button\", \"gl-map-legend__toggle\", header);\r\n                        toggleEl.type = \"button\";\r\n                        toggleEl.setAttribute(\"aria-label\", \"Basculer la l√©gende\");\r\n                        toggleEl.textContent = \"‚ü±\";\r\n\r\n                        const self = this;\r\n                        global.L.DomEvent.on(toggleEl, \"click\", function (ev) {\r\n                            global.L.DomEvent.stopPropagation(ev);\r\n                            self._toggleCollapsed();\r\n                        });\r\n                    }\r\n                }\r\n\r\n                // Corps de la l√©gende\r\n                this._bodyEl = global.L.DomUtil.create(\"div\", \"gl-map-legend__body\", wrapper);\r\n\r\n                // Appliquer l'√©tat collapsed initial\r\n                if (opts.collapsed) {\r\n                    this._container.classList.add(\"gl-map-legend--collapsed\");\r\n                }\r\n\r\n                // Rendu des sections via le renderer\r\n                this._renderContent();\r\n            },\r\n\r\n            /**\r\n             * Rend le contenu de la l√©gende\r\n             * @private\r\n             */\r\n            _renderContent: function () {\r\n                if (!this._bodyEl) return;\r\n\r\n                // Vider le contenu existant\r\n                if (GeoLeaf._UIComponents && typeof GeoLeaf._UIComponents.clearElement === 'function') {\r\n                    GeoLeaf._UIComponents.clearElement(this._bodyEl);\r\n                } else {\r\n                    GeoLeaf.DOMSecurity.clearElementFast(this._bodyEl);\r\n                }\r\n\r\n                const opts = this._glOptions;\r\n                const renderer = GeoLeaf._LegendRenderer;\r\n\r\n                if (!renderer) {\r\n                    if (Log) Log.error(\"[Legend] _LegendRenderer non disponible\");\r\n                    return;\r\n                }\r\n\r\n                // S'assurer que le sprite SVG est charg√© pour les ic√¥nes\r\n                ensureSpriteLoaded();\r\n\r\n                // Rendu des sections (ancien mode pour compatibilit√©)\r\n                if (Array.isArray(opts.sections)) {\r\n                    opts.sections.forEach(section => {\r\n                        renderer.renderSection(this._bodyEl, section);\r\n                    });\r\n                }\r\n\r\n                // Rendu du footer\r\n                if (opts.footer) {\r\n                    renderer.renderFooter(this._bodyEl, opts.footer);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Mise √† jour du contenu multi-couches avec accord√©ons\r\n             * @param {Array} legendsArray - Tableau d'accord√©ons √† afficher\r\n             */\r\n            updateMultiLayerContent: function (legendsArray) {\r\n                if (!this._bodyEl) return;\r\n\r\n                // Vider le contenu existant\r\n                if (GeoLeaf._UIComponents && typeof GeoLeaf._UIComponents.clearElement === 'function') {\r\n                    GeoLeaf._UIComponents.clearElement(this._bodyEl);\r\n                } else {\r\n                    GeoLeaf.DOMSecurity.clearElementFast(this._bodyEl);\r\n                }\r\n\r\n                const renderer = GeoLeaf._LegendRenderer;\r\n\r\n                if (!renderer || typeof renderer.renderAccordion !== \"function\") {\r\n                    if (Log) Log.error(\"[Legend] Renderer.renderAccordion non disponible\");\r\n                    return;\r\n                }\r\n\r\n                // S'assurer que le sprite SVG est charg√© avant le rendu\r\n                const self = this;\r\n                ensureSpriteLoaded(function(spriteLoaded) {\r\n                    if (Log) Log.debug(\"[Legend] Sprite charg√©:\", spriteLoaded, \"- Rendu des accord√©ons\");\r\n\r\n                    // Rendre chaque accord√©on (m√™me si le sprite n'est pas charg√© pour √©viter une interface vide)\r\n                    if (Array.isArray(legendsArray)) {\r\n                        legendsArray.forEach(accordionData => {\r\n                            renderer.renderAccordion(self._bodyEl, accordionData);\r\n                        });\r\n                    }\r\n\r\n                    // Si le sprite n'√©tait pas charg√©, r√©essayer dans 1 seconde\r\n                    if (!spriteLoaded) {\r\n                        setTimeout(function() {\r\n                            const spriteEl = document.querySelector('svg[data-geoleaf-sprite=\"profile\"]');\r\n                            if (spriteEl && Log) {\r\n                                Log.info(\"[Legend] Sprite charg√© tardivement - Re-rendu des accord√©ons\");\r\n                                self.updateMultiLayerContent(legendsArray);\r\n                            }\r\n                        }, 1000);\r\n                    }\r\n                });\r\n            },\r\n\r\n            /**\r\n             * Mise √† jour du contenu de la l√©gende (ancien mode)\r\n             * @param {Object} legendData - Nouvelles donn√©es de l√©gende\r\n             */\r\n            updateContent: function (legendData) {\r\n                if (legendData.title) this._glOptions.title = legendData.title;\r\n                if (legendData.sections) this._glOptions.sections = legendData.sections;\r\n                if (legendData.footer) this._glOptions.footer = legendData.footer;\r\n\r\n                this._renderContent();\r\n            },\r\n\r\n            /**\r\n             * Bascule l'√©tat collapsed\r\n             * @private\r\n             */\r\n            _toggleCollapsed: function () {\r\n                const isCollapsed = this._container.classList.toggle(\"gl-map-legend--collapsed\");\r\n                this._glOptions.collapsed = isCollapsed;\r\n            },\r\n\r\n            /**\r\n             * Montre la l√©gende\r\n             * @public\r\n             */\r\n            show: function () {\r\n                if (this._container) {\r\n                    this._container.style.display = \"block\";\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Cache la l√©gende\r\n             * @public\r\n             */\r\n            hide: function () {\r\n                if (this._container) {\r\n                    this._container.style.display = \"none\";\r\n                }\r\n            }\r\n        });\r\n\r\n        return new LegendControl({\r\n            position: options.position,\r\n            _glOptions: options\r\n        });\r\n    }\r\n\r\n    // Exposer dans l'espace de noms interne\r\n    GeoLeaf._LegendControl = {\r\n        create: createLegendControl\r\n    };\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * Module principal GeoLeaf.Legend\r\n * Gestionnaire de l√©gende cartographique multi-couches avec accord√©ons\r\n * G√©n√®re automatiquement les l√©gendes depuis les styles\r\n *\r\n * D√âPENDANCES:\r\n * - Leaflet (map instance)\r\n * - GeoLeaf.Log (optionnel)\r\n * - GeoLeaf._LegendControl\r\n * - GeoLeaf._LegendRenderer\r\n * - GeoLeaf._LegendGenerator (nouveau)\r\n * - GeoLeaf.Config (pour chargement configuration)\r\n *\r\n * EXPOSE:\r\n * - GeoLeaf.Legend\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    const Log = GeoLeaf.Log;\r\n\r\n    let _map = null;\r\n    let _control = null;\r\n    let _options = {};\r\n    let _profileConfig = null;\r\n    let _taxonomyData = null;\r\n\r\n    // Timers and UI helpers\r\n    let _rebuildTimer = null;\r\n    const REBUILD_DEBOUNCE_MS = 150;\r\n    let _loadingOverlayEl = null;\r\n    let _loadingOverlayTimer = null;\r\n    const LOADING_OVERLAY_TIMEOUT_MS = 12000;\r\n\r\n    // Map<layerId, {label, styleId, legendData, visible, order, geometryType}>\r\n    const _allLayers = new Map();\r\n\r\n    function _normalizeGeometryType(rawGeometry) {\r\n        const value = (rawGeometry || \"\").toLowerCase();\r\n        if (value === \"polyline\" || value === \"line\") return \"line\";\r\n        if (value === \"polygon\") return \"polygon\";\r\n        return \"point\";\r\n    }\r\n\r\n    function _scheduleRebuild() {\r\n        if (_rebuildTimer) {\r\n            clearTimeout(_rebuildTimer);\r\n        }\r\n        _rebuildTimer = setTimeout(() => {\r\n            _rebuildTimer = null;\r\n            LegendModule._rebuildDisplay();\r\n        }, REBUILD_DEBOUNCE_MS);\r\n    }\r\n\r\n    function _ensureSpinnerStyles() {\r\n        if (document.getElementById(\"gl-legend-spinner-style\")) return;\r\n        const styleEl = document.createElement(\"style\");\r\n        styleEl.id = \"gl-legend-spinner-style\";\r\n        styleEl.textContent = \"@keyframes gl-legend-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }\";\r\n        document.head.appendChild(styleEl);\r\n    }\r\n\r\n    function _clearOverlayTimeout() {\r\n        if (_loadingOverlayTimer) {\r\n            clearTimeout(_loadingOverlayTimer);\r\n            _loadingOverlayTimer = null;\r\n        }\r\n    }\r\n\r\n    function _showLoadingOverlay() {\r\n        if (!_control || !_control._container) return;\r\n\r\n        _ensureSpinnerStyles();\r\n        _clearOverlayTimeout();\r\n\r\n        const container = _control._container;\r\n        if (!container.style.position) {\r\n            container.style.position = \"relative\";\r\n        }\r\n\r\n        if (!_loadingOverlayEl) {\r\n            const overlay = document.createElement(\"div\");\r\n            overlay.className = \"gl-map-legend__loading-overlay\";\r\n            overlay.style.position = \"absolute\";\r\n            overlay.style.inset = \"0\";\r\n            overlay.style.background = \"rgba(255,255,255,0.6)\";\r\n            overlay.style.display = \"flex\";\r\n            overlay.style.alignItems = \"center\";\r\n            overlay.style.justifyContent = \"center\";\r\n            overlay.style.pointerEvents = \"auto\";\r\n            overlay.style.zIndex = \"2\";\r\n            overlay.setAttribute(\"aria-hidden\", \"false\");\r\n\r\n            const spinner = document.createElement(\"div\");\r\n            spinner.className = \"gl-map-legend__spinner\";\r\n            spinner.style.width = \"34px\";\r\n            spinner.style.height = \"34px\";\r\n            spinner.style.border = \"3px solid rgba(0,0,0,0.12)\";\r\n            spinner.style.borderTop = \"3px solid rgba(0,0,0,0.55)\";\r\n            spinner.style.borderRadius = \"50%\";\r\n            spinner.style.animation = \"gl-legend-spin 1s linear infinite\";\r\n\r\n            overlay.appendChild(spinner);\r\n            _loadingOverlayEl = overlay;\r\n        }\r\n\r\n        if (!_loadingOverlayEl.parentElement) {\r\n            container.appendChild(_loadingOverlayEl);\r\n        }\r\n\r\n        container.setAttribute(\"aria-busy\", \"true\");\r\n        container.setAttribute(\"aria-live\", \"polite\");\r\n\r\n        _loadingOverlayTimer = setTimeout(() => {\r\n            _loadingOverlayTimer = null;\r\n            _hideLoadingOverlay();\r\n        }, LOADING_OVERLAY_TIMEOUT_MS);\r\n    }\r\n\r\n    function _hideLoadingOverlay() {\r\n        _clearOverlayTimeout();\r\n        if (_loadingOverlayEl && _loadingOverlayEl.parentElement) {\r\n            _loadingOverlayEl.parentElement.removeChild(_loadingOverlayEl);\r\n        }\r\n        if (_control && _control._container) {\r\n            _control._container.removeAttribute(\"aria-busy\");\r\n            _control._container.removeAttribute(\"aria-live\");\r\n        }\r\n    }\r\n\r\n    const LegendModule = {\r\n        /**\r\n         * Initialise le module Legend\r\n         * @param {L.Map} mapInstance - Instance de la carte Leaflet\r\n         * @param {Object} options - Options du module\r\n         * @param {string} [options.position=\"bottomleft\"] - Position du contr√¥le\r\n         * @param {boolean} [options.collapsible=true] - L√©gende repliable\r\n         * @param {boolean} [options.collapsed=false] - √âtat repli√© initial\r\n         */\r\n        init: function (mapInstance, options) {\r\n            if (!mapInstance) {\r\n                if (Log) Log.error(\"[Legend] Carte Leaflet requise pour initialiser Legend\");\r\n                return false;\r\n            }\r\n\r\n            _map = mapInstance;\r\n\r\n            // Charger la configuration depuis le profil\r\n            if (GeoLeaf.Config && typeof GeoLeaf.Config.get === \"function\") {\r\n                const legendConfig = GeoLeaf.Config.get(\"legendConfig\");\r\n\r\n                _options = Object.assign({\r\n                    position: (legendConfig && legendConfig.position) || \"bottomleft\",\r\n                    collapsible: true,\r\n                    collapsed: (legendConfig && legendConfig.collapsedByDefault) || false,\r\n                    title: (legendConfig && legendConfig.title) || \"L√©gende\"\r\n                }, options || {});\r\n\r\n                // R√©cup√©rer le profil actif complet\r\n                if (typeof GeoLeaf.Config.getActiveProfile === \"function\") {\r\n                    _profileConfig = GeoLeaf.Config.getActiveProfile();\r\n                } else {\r\n                    // Fallback : essayer de r√©cup√©rer depuis getAll\r\n                    const allConfig = GeoLeaf.Config.getAll();\r\n                    _profileConfig = {\r\n                        id: allConfig.id || GeoLeaf.Config.get('id'),\r\n                        layers: allConfig.layers || GeoLeaf.Config.get('layers') || []\r\n                    };\r\n                }\r\n            } else {\r\n                _options = Object.assign({\r\n                    position: \"bottomleft\",\r\n                    collapsible: true,\r\n                    collapsed: false,\r\n                    title: \"L√©gende\"\r\n                }, options || {});\r\n            }\r\n\r\n            // Charger la taxonomy pour les ic√¥nes\r\n            this._loadTaxonomy();\r\n\r\n            // Initialiser toutes les couches du profil\r\n            this._initializeAllLayers();\r\n\r\n            if (Log) Log.info(\"[Legend] Module Legend initialis√© avec g√©n√©ration automatique depuis styles\");\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Charge la taxonomy pour la correspondance cat√©gories ‚Üí ic√¥nes\r\n         * @private\r\n         */\r\n        _loadTaxonomy: function () {\r\n            if (!_profileConfig) return;\r\n\r\n            const Config = GeoLeaf.Config;\r\n            const dataCfg = Config && Config.get ? Config.get('data') : null;\r\n            const profilesBasePath = (dataCfg && dataCfg.profilesBasePath) || \"profiles\";\r\n            const profileId = _profileConfig.id;\r\n\r\n            if (!profileId) {\r\n                if (Log) Log.warn(\"[Legend] Impossible de charger taxonomy sans profileId\");\r\n                return;\r\n            }\r\n\r\n            const taxonomyPath = `${profilesBasePath}/${profileId}/taxonomy.json`;\r\n\r\n            fetch(taxonomyPath)\r\n                .then(response => {\r\n                    if (!response.ok) throw new Error(`HTTP ${response.status}`);\r\n                    return response.json();\r\n                })\r\n                .then(data => {\r\n                    _taxonomyData = data;\r\n                    if (Log) Log.debug(\"[Legend] Taxonomy charg√©e\");\r\n                })\r\n                .catch(err => {\r\n                    if (Log) Log.warn(`[Legend] Erreur chargement taxonomy: ${err.message}`);\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Initialise toutes les couches d√©finies dans le profil\r\n         * @private\r\n         */\r\n        _initializeAllLayers: function () {\r\n            if (!_profileConfig || !Array.isArray(_profileConfig.layers)) {\r\n                if (Log) Log.warn(\"[Legend] Aucune couche d√©finie dans le profil\");\r\n                return;\r\n            }\r\n\r\n            _profileConfig.layers.forEach((layerDef, index) => {\r\n                _allLayers.set(layerDef.id, {\r\n                    label: layerDef.id, // Sera mis √† jour lors du chargement du config\r\n                    styleId: null,\r\n                    legendData: null,\r\n                    visible: false,\r\n                    order: index + 1,\r\n                    geometryType: null,\r\n                    configFile: layerDef.configFile\r\n                });\r\n            });\r\n\r\n            if (Log) Log.debug(`[Legend] ${_allLayers.size} couche(s) initialis√©e(s)`);\r\n        },\r\n\r\n        /**\r\n         * Charge et g√©n√®re la l√©gende pour une couche\r\n         * @param {string} layerId - ID de la couche\r\n         * @param {string} styleId - ID du style √† appliquer\r\n         * @param {Object} layerConfig - Configuration de la couche\r\n         */\r\n        loadLayerLegend: function (layerId, styleId, layerConfig) {\r\n            if (!_map) {\r\n                if (Log) Log.warn(\"[Legend] Module non initialis√©\");\r\n                return;\r\n            }\r\n\r\n            const layerInfo = _allLayers.get(layerId);\r\n            if (!layerInfo) {\r\n                if (Log) Log.warn(`[Legend] Couche ${layerId} non trouv√©e dans le profil`);\r\n                return;\r\n            }\r\n\r\n            // S'assurer que le sprite SVG est disponible d√®s le d√©but\r\n            if (GeoLeaf._POIMarkers && typeof GeoLeaf._POIMarkers.ensureProfileSpriteInjectedSync === \"function\") {\r\n                GeoLeaf._POIMarkers.ensureProfileSpriteInjectedSync();\r\n                if (Log) Log.debug(`[Legend] Sprite SVG demand√© pour couche ${layerId}`);\r\n            }\r\n\r\n            // Mettre √† jour les informations de la couche\r\n            layerInfo.label = layerConfig.label || layerId;\r\n            layerInfo.geometryType = _normalizeGeometryType(layerConfig.geometryType || layerConfig.geometry || layerInfo.geometryType || \"point\");\r\n            layerInfo.styleId = styleId;\r\n\r\n            // Charger le fichier de style\r\n            const Config = GeoLeaf.Config;\r\n            const dataCfg = Config && Config.get ? Config.get('data') : null;\r\n            const profilesBasePath = (dataCfg && dataCfg.profilesBasePath) || \"profiles\";\r\n            const profileId = layerConfig._profileId || _profileConfig.id;\r\n            const layerDir = layerConfig._layerDirectory;\r\n\r\n            if (!layerConfig.styles || !layerConfig.styles.directory) {\r\n                if (Log) Log.warn(`[Legend] Configuration styles manquante pour ${layerId}`);\r\n                return;\r\n            }\r\n\r\n            const stylesDir = layerConfig.styles.directory;\r\n            const styleFile = layerConfig.styles.available?.find(s => s.id === styleId)?.file\r\n                            || layerConfig.styles.default;\r\n\r\n            const stylePath = `${profilesBasePath}/${profileId}/${layerDir}/${stylesDir}/${styleFile}`;\r\n\r\n            if (Log) Log.debug(`[Legend] Chargement style: ${stylePath}`);\r\n\r\n            fetch(stylePath)\r\n                .then(response => {\r\n                    if (!response.ok) throw new Error(`HTTP ${response.status}`);\r\n                    return response.json();\r\n                })\r\n                .then(styleData => {\r\n                    // G√©n√©rer la l√©gende depuis le style\r\n                    if (!GeoLeaf._LegendGenerator) {\r\n                        if (Log) Log.error(\"[Legend] LegendGenerator non disponible\");\r\n                        return;\r\n                    }\r\n\r\n                    // Temporairement stocker la config de couche pour le g√©n√©rateur (comme dans markers.js)\r\n                    const originalPOIShared = GeoLeaf._POIShared;\r\n                    if (layerConfig.showIconsOnMap !== undefined) {\r\n                        // Cr√©er un √©tat temporaire pour cette couche\r\n                        GeoLeaf._POIShared = {\r\n                            state: {\r\n                                poiConfig: {\r\n                                    showIconsOnMap: layerConfig.showIconsOnMap\r\n                                }\r\n                            }\r\n                        };\r\n                    }\r\n\r\n                    const legendData = GeoLeaf._LegendGenerator.generateLegendFromStyle(\r\n                        styleData,\r\n                        layerInfo.geometryType,\r\n                        _taxonomyData\r\n                    );\r\n\r\n                    // Restaurer l'√©tat POI original\r\n                    if (layerConfig.showIconsOnMap !== undefined) {\r\n                        GeoLeaf._POIShared = originalPOIShared;\r\n                    }\r\n\r\n                    if (legendData) {\r\n                        layerInfo.legendData = legendData;\r\n                        _allLayers.set(layerId, layerInfo);\r\n                        if (Log) Log.debug(`[Legend] L√©gende g√©n√©r√©e pour ${layerId}`);\r\n\r\n                        // Reconstruire l'affichage\r\n                        _scheduleRebuild();\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    if (Log) Log.warn(`[Legend] Erreur chargement style: ${err.message}`);\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Met √† jour la visibilit√© d'une couche dans la l√©gende\r\n         * @param {string} layerId - ID de la couche\r\n         * @param {boolean} visible - Visible ou non\r\n         */\r\n        setLayerVisibility: function (layerId, visible) {\r\n            const layerInfo = _allLayers.get(layerId);\r\n            if (layerInfo) {\r\n                layerInfo.visible = visible;\r\n                _allLayers.set(layerId, layerInfo);\r\n                _scheduleRebuild();\r\n                if (Log) Log.debug(`[Legend] Visibilit√© de ${layerId}: ${visible}`);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reconstruit l'affichage de toutes les l√©gendes\r\n         * @private\r\n         */\r\n        _rebuildDisplay: function () {\r\n            if (!_map) return;\r\n\r\n            // Si aucune couche, supprimer le contr√¥le\r\n            if (_allLayers.size === 0) {\r\n                if (_control && _map) {\r\n                    _map.removeControl(_control);\r\n                    _control = null;\r\n                }\r\n                return;\r\n            }\r\n\r\n            // Cr√©er le contr√¥le si n√©cessaire\r\n            if (!_control) {\r\n                _control = GeoLeaf._LegendControl.create(_options);\r\n                if (_control) {\r\n                    _map.addControl(_control);\r\n                }\r\n            }\r\n\r\n            // Pr√©parer les donn√©es pour le rendu (afficher toutes les couches)\r\n            if (_control && typeof _control.updateMultiLayerContent === \"function\") {\r\n                const visibilityManager = GeoLeaf._LayerVisibilityManager;\r\n                const legendsArray = [];\r\n\r\n                _allLayers.forEach((data, layerId) => {\r\n                    if (!data.legendData) return;\r\n\r\n                    const visState = visibilityManager && typeof visibilityManager.getVisibilityState === \"function\"\r\n                        ? visibilityManager.getVisibilityState(layerId)\r\n                        : null;\r\n\r\n                    const isVisible = visState ? visState.current : data.visible;\r\n                    if (!isVisible) return;\r\n\r\n                    legendsArray.push({\r\n                        layerId: layerId,\r\n                        label: data.label,\r\n                        collapsed: true,\r\n                        order: data.order,\r\n                        visible: true,\r\n                        sections: data.legendData.sections || []\r\n                    });\r\n                });\r\n\r\n                // Trier par ordre\r\n                legendsArray.sort((a, b) => a.order - b.order);\r\n\r\n                _control.updateMultiLayerContent(legendsArray);\r\n\r\n                // Si nous avons des ic√¥nes mais pas de sprite, programmer un retry\r\n                const hasIcons = legendsArray.some(legend =>\r\n                    legend.sections.some(section =>\r\n                        section.items && section.items.some(item => item.icon)\r\n                    )\r\n                );\r\n\r\n                if (hasIcons) {\r\n                    const sprite = document.querySelector('svg[data-geoleaf-sprite=\"profile\"]');\r\n                    if (!sprite) {\r\n                        if (Log) Log.info(\"[Legend] Ic√¥nes d√©tect√©es mais sprite manquant - programmation retry\");\r\n                        // Programmer un nouveau rendu dans 2 secondes\r\n                        setTimeout(() => {\r\n                            const spriteCheck = document.querySelector('svg[data-geoleaf-sprite=\"profile\"]');\r\n                            if (spriteCheck && Log) {\r\n                                Log.info(\"[Legend] Sprite disponible - nouveau rendu de la l√©gende\");\r\n                                this._rebuildDisplay();\r\n                            }\r\n                        }, 2000);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Bascule l'√©tat d'un accord√©on\r\n         * @param {string} layerId - ID de la couche\r\n         */\r\n        toggleAccordion: function (layerId) {\r\n            // G√©r√© visuellement par le renderer\r\n        },\r\n\r\n        /**\r\n         * R√©cup√®re toutes les couches\r\n         * @returns {Map}\r\n         */\r\n        getAllLayers: function () {\r\n            return _allLayers;\r\n        },\r\n\r\n        // ===== Anciennes m√©thodes pour compatibilit√© =====\r\n\r\n        /**\r\n         * @deprecated Utiliser loadLayerLegend √† la place\r\n         */\r\n        addLayerLegend: function (layerId, styleId, legendData) {\r\n            if (Log) Log.warn(\"[Legend] addLayerLegend() est d√©pr√©ci√© avec donn√©es JSON, utiliser loadLayerLegend avec style\");\r\n            // Ajouter quand m√™me pour compatibilit√©\r\n            const layerInfo = _allLayers.get(layerId);\r\n            if (layerInfo) {\r\n                layerInfo.legendData = legendData;\r\n                layerInfo.styleId = styleId;\r\n                _allLayers.set(layerId, layerInfo);\r\n                this._rebuildDisplay();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @deprecated Utiliser setLayerVisibility √† la place\r\n         */\r\n        removeLayerLegend: function (layerId) {\r\n            if (Log) Log.warn(\"[Legend] removeLayerLegend() est d√©pr√©ci√©, utiliser setLayerVisibility(id, false)\");\r\n            this.setLayerVisibility(layerId, false);\r\n        },\r\n\r\n        /**\r\n         * @deprecated Utiliser loadLayerLegend √† la place\r\n         */\r\n        updateLayerLegend: function (layerId, styleId, legendData) {\r\n            if (Log) Log.warn(\"[Legend] updateLayerLegend() avec JSON est d√©pr√©ci√©, utiliser loadLayerLegend\");\r\n            this.addLayerLegend(layerId, styleId, legendData);\r\n        },\r\n\r\n        /**\r\n         * @deprecated\r\n         */\r\n        loadLegend: function (legendFilePath) {\r\n            if (Log) Log.warn(\"[Legend] loadLegend() est d√©pr√©ci√©\");\r\n            return Promise.resolve(false);\r\n        },\r\n\r\n        /**\r\n         * @deprecated\r\n         */\r\n        showLegend: function (legendData) {\r\n            if (Log) Log.warn(\"[Legend] showLegend() est d√©pr√©ci√©\");\r\n        },\r\n\r\n        /**\r\n         * Cache la l√©gende\r\n         */\r\n        hideLegend: function () {\r\n            if (_control) {\r\n                _control.hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Supprime toutes les l√©gendes\r\n         */\r\n        removeLegend: function () {\r\n            _allLayers.forEach((layerInfo, layerId) => {\r\n                layerInfo.legendData = null;\r\n                layerInfo.visible = false;\r\n            });\r\n\r\n            if (_control && _map) {\r\n                _map.removeControl(_control);\r\n                _control = null;\r\n                if (Log) Log.debug(\"[Legend] Toutes les l√©gendes supprim√©es\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * V√©rifie si des l√©gendes sont affich√©es\r\n         * @returns {boolean}\r\n         */\r\n        isLegendVisible: function () {\r\n            return _control !== null && _allLayers.size > 0;\r\n        },\r\n\r\n        showLoadingOverlay: function () {\r\n            _showLoadingOverlay();\r\n        },\r\n\r\n        hideLoadingOverlay: function () {\r\n            _hideLoadingOverlay();\r\n        }\r\n    };\r\n\r\n    // Exposer le module public\r\n    GeoLeaf.Legend = LegendModule;\r\n\r\n})(window);\r\n","/**\r\n * Module Label Renderer pour GeoLeaf\r\n * Cr√©e et g√®re les tooltips permanents Leaflet pour les √©tiquettes\r\n *\r\n * D√âPENDANCES:\r\n * - Leaflet (L.Tooltip, L.LatLng)\r\n * - GeoLeaf.Log (optionnel)\r\n *\r\n * EXPOSE:\r\n * - GeoLeaf._LabelRenderer\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module Label Renderer\r\n     * @namespace _LabelRenderer\r\n     * @private\r\n     */\r\n    const _LabelRenderer = {\r\n        /**\r\n         * Cr√©e les tooltips permanents pour toutes les features d'une couche\r\n         * @param {string} layerId - ID de la couche\r\n         * @param {L.LayerGroup} leafletLayer - Couche Leaflet (LayerGroup ou FeatureGroup)\r\n         * @param {Object} labelConfig - Configuration des labels\r\n         * @param {Object} style - Style des labels (extrait de currentStyle.label)\r\n         * @param {Map} tooltipsMap - Map pour stocker les tooltips cr√©√©s\r\n         */\r\n        createTooltipsForLayer(layerId, leafletLayer, labelConfig, style, tooltipsMap) {\r\n            if (!leafletLayer || !labelConfig || !labelConfig.labelId) {\r\n                if (Log) Log.warn(\"[LabelRenderer] Param√®tres invalides pour createTooltipsForLayer\", {\r\n                    layerId,\r\n                    hasLeafletLayer: !!leafletLayer,\r\n                    hasLabelConfig: !!labelConfig,\r\n                    labelId: labelConfig?.labelId,\r\n                    labelConfigKeys: labelConfig ? Object.keys(labelConfig) : null\r\n                });\r\n                return;\r\n            }\r\n\r\n            const labelField = labelConfig.labelId;\r\n\r\n            if (Log) Log.debug(`[LabelRenderer] Cr√©ation tooltips pour ${layerId}, champ: ${labelField}`);\r\n\r\n            // Parcourir toutes les features de la couche\r\n            let featureCount = 0;\r\n\r\n            leafletLayer.eachLayer((featureLayer) => {\r\n                featureCount++;\r\n                try {\r\n                    this._createTooltipForFeature(\r\n                        featureLayer,\r\n                        labelField,\r\n                        style,\r\n                        tooltipsMap\r\n                    );\r\n                } catch (err) {\r\n                    if (Log) Log.warn(\"[LabelRenderer] Erreur cr√©ation tooltip:\", err);\r\n                }\r\n            });\r\n\r\n            if (Log) Log.debug(`[LabelRenderer] ${tooltipsMap.size} tooltips cr√©√©s pour ${layerId} (${featureCount} features parcourues)`);\r\n        },\r\n\r\n        /**\r\n         * Cr√©e un marker texte (label) pour une feature\r\n         * @private\r\n         * @param {L.Layer} featureLayer - Layer Leaflet de la feature\r\n         * @param {string} labelField - Nom du champ √† afficher\r\n         * @param {Object} style - Style du label\r\n         * @param {Map} tooltipsMap - Map pour stocker le marker\r\n         */\r\n        _createTooltipForFeature(featureLayer, labelField, style, tooltipsMap) {\r\n            // R√©cup√©rer les donn√©es GeoJSON de la feature\r\n            const feature = featureLayer.feature;\r\n            if (!feature || !feature.properties) {\r\n                if (Log) Log.debug(\"[LabelRenderer] Feature ou properties manquant\");\r\n                return;\r\n            }\r\n\r\n            // Extraire la valeur du champ label\r\n            const labelValue = this._extractFieldValue(feature.properties, labelField);\r\n            if (!labelValue) {\r\n                return;\r\n            }\r\n\r\n            // R√©cup√©rer la position (centre de la g√©om√©trie)\r\n            let position = null;\r\n\r\n            if (typeof featureLayer.getLatLng === \"function\") {\r\n                // Pour les points\r\n                position = featureLayer.getLatLng();\r\n            } else if (typeof featureLayer.getBounds === \"function\") {\r\n                // Pour les polygones (Polygon, MultiPolygon) - centre du bounding box\r\n                // IMPORTANT: V√©rifier getBounds AVANT getLatLngs car les polygones ont les deux!\r\n                const bounds = featureLayer.getBounds();\r\n                if (bounds && typeof bounds.getCenter === \"function\") {\r\n                    position = bounds.getCenter();\r\n                    if (Log) Log.info(\"[LabelRenderer] Position polygone calcul√©e:\", {\r\n                        labelValue,\r\n                        position: position,\r\n                        positionType: typeof position,\r\n                        hasLat: 'lat' in position,\r\n                        hasLng: 'lng' in position,\r\n                        latType: typeof position.lat,\r\n                        lngType: typeof position.lng,\r\n                        positionKeys: Object.keys(position)\r\n                    });\r\n                } else {\r\n                    if (Log) Log.warn(\"[LabelRenderer] getBounds ne retourne pas getCenter pour:\", labelValue);\r\n                }\r\n            } else if (typeof featureLayer.getLatLngs === \"function\") {\r\n                // Pour les lignes - prendre le point du milieu de la ligne\r\n                const latlngs = featureLayer.getLatLngs();\r\n                if (latlngs && latlngs.length > 0) {\r\n                    // Si c'est un MultiLineString ou une ligne complexe\r\n                    const flatLatlngs = Array.isArray(latlngs[0]) ? latlngs[0] : latlngs;\r\n                    if (flatLatlngs && flatLatlngs.length > 0) {\r\n                        const middleIndex = Math.floor(flatLatlngs.length / 2);\r\n                        position = flatLatlngs[middleIndex];\r\n                    }\r\n                }\r\n            }\r\n\r\n            // V√©rifier que position est valide\r\n            // Note: Leaflet LatLng peut avoir lat/lng comme propri√©t√©s OU comme m√©thodes\r\n            if (!position) {\r\n                if (Log) Log.debug(\"[LabelRenderer] Position null pour feature, skipping label. Label:\", labelValue);\r\n                return;\r\n            }\r\n\r\n            const lat = typeof position.lat === 'function' ? position.lat() : position.lat;\r\n            const lng = typeof position.lng === 'function' ? position.lng() : position.lng;\r\n\r\n            if (!lat || !lng || isNaN(lat) || isNaN(lng)) {\r\n                return;\r\n            }\r\n\r\n            // Cr√©er un divIcon avec le texte du label\r\n            const htmlContent = this._formatLabelContent(labelValue, style);\r\n\r\n            const labelIcon = global.L.divIcon({\r\n                html: htmlContent,\r\n                className: this._buildClassName(style),\r\n                iconSize: null, // Auto-size\r\n                iconAnchor: [0, 0] // Position relative au point\r\n            });\r\n\r\n            // Cr√©er un marker avec cet ic√¥ne texte\r\n            const labelMarker = global.L.marker([lat, lng], {\r\n                icon: labelIcon,\r\n                interactive: false, // Ne pas intercepter les clics\r\n                keyboard: false\r\n            });\r\n\r\n            // Ajouter au map\r\n            const map = GeoLeaf.Core && GeoLeaf.Core.getMap ? GeoLeaf.Core.getMap() : null;\r\n            if (map) {\r\n                labelMarker.addTo(map);\r\n\r\n                // Stocker dans la map\r\n                const featureId = feature.id || feature.properties.id || `feature_${Date.now()}_${Math.random()}`;\r\n                tooltipsMap.set(featureId, labelMarker);\r\n            } else {\r\n                if (Log) Log.warn(\"[LabelRenderer] Carte non disponible pour\", labelValue);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Extrait la valeur d'un champ depuis les propri√©t√©s\r\n         * Supporte la notation point√©e (ex: \"attributes.name\")\r\n         * @private\r\n         */\r\n        _extractFieldValue(properties, fieldPath) {\r\n            if (!properties || !fieldPath) return null;\r\n\r\n            // Si pas de point, acc√®s direct\r\n            if (!fieldPath.includes(\".\")) {\r\n                return properties[fieldPath];\r\n            }\r\n\r\n            // Notation point√©e\r\n            const parts = fieldPath.split(\".\");\r\n            let value = properties;\r\n\r\n            for (const part of parts) {\r\n                if (value && typeof value === \"object\" && part in value) {\r\n                    value = value[part];\r\n                } else {\r\n                    return null;\r\n                }\r\n            }\r\n\r\n            return value;\r\n        },\r\n\r\n        /**\r\n         * Parse l'offset depuis le style\r\n         * @private\r\n         */\r\n        _parseOffset(offset) {\r\n            if (!offset) return [0, 0];\r\n\r\n            if (Array.isArray(offset) && offset.length === 2) {\r\n                return [\r\n                    typeof offset[0] === \"number\" ? offset[0] : 0,\r\n                    typeof offset[1] === \"number\" ? offset[1] : 0\r\n                ];\r\n            }\r\n\r\n            return [0, 0];\r\n        },\r\n\r\n        /**\r\n         * Construit le nom de classe CSS pour le tooltip\r\n         * @private\r\n         */\r\n        _buildClassName(style) {\r\n            const classes = [\"gl-label\"];\r\n\r\n            if (style) {\r\n                if (style.className) {\r\n                    classes.push(style.className);\r\n                }\r\n\r\n                // Ajouter des classes bas√©es sur les propri√©t√©s de style\r\n                if (style.variant) {\r\n                    classes.push(`gl-label--${style.variant}`);\r\n                }\r\n            }\r\n\r\n            return classes.join(\" \");\r\n        },\r\n\r\n        /**\r\n         * Formate le contenu du label\r\n         * @private\r\n         */\r\n        _formatLabelContent(value, style) {\r\n            if (!value) return \"\";\r\n\r\n            let content = String(value);\r\n\r\n            // Appliquer un pr√©fixe/suffixe si d√©fini\r\n            if (style) {\r\n                if (style.prefix) {\r\n                    content = style.prefix + content;\r\n                }\r\n                if (style.suffix) {\r\n                    content = content + style.suffix;\r\n                }\r\n            }\r\n\r\n            // Cr√©er le HTML du label\r\n            const div = global.document.createElement(\"div\");\r\n            div.className = \"gl-label__content\";\r\n            div.textContent = content;\r\n\r\n            // Appliquer les styles inline si d√©finis\r\n            if (style) {\r\n                this._applyInlineStyles(div, style);\r\n            }\r\n\r\n            // Retourner le HTML string, pas l'√©l√©ment DOM\r\n            return div.outerHTML;\r\n        },\r\n\r\n        /**\r\n         * Applique les styles inline au contenu du label\r\n         * @private\r\n         */\r\n        _applyInlineStyles(element, style) {\r\n            if (!element || !style) return;\r\n\r\n            // Appliquer les styles de police et couleur avec setProperty + important pour forcer la priorit√© sur le CSS\r\n            if (style.font) {\r\n                if (style.font.family) {\r\n                    // Ajouter un fallback pour assurer la lisibilit√© si la police demand√©e n'est pas disponible\r\n                    const fontFamily = `\"${style.font.family}\", -apple-system, BlinkMacSystemFont, \"Segoe UI\", Arial, sans-serif`;\r\n                    element.style.setProperty('font-family', fontFamily, 'important');\r\n                }\r\n                if (style.font.sizePt) {\r\n                    element.style.setProperty('font-size', `${style.font.sizePt}pt`, 'important');\r\n                }\r\n                if (style.font.bold) {\r\n                    element.style.setProperty('font-weight', 'bold', 'important');\r\n                } else if (style.font.weight) {\r\n                    // Pour am√©liorer la lisibilit√©, forcer un poids minimum de 500 si < 400\r\n                    const weight = style.font.weight < 400 ? 500 : style.font.weight;\r\n                    element.style.setProperty('font-weight', weight, 'important');\r\n                }\r\n                if (style.font.italic) {\r\n                    element.style.setProperty('font-style', 'italic', 'important');\r\n                }\r\n            }\r\n\r\n            // Appliquer la couleur du texte avec !important\r\n            if (style.color) {\r\n                element.style.setProperty('color', style.color, 'important');\r\n            }\r\n\r\n            // Appliquer l'opacit√© du texte\r\n            if (style.opacity !== undefined) {\r\n                element.style.setProperty('opacity', style.opacity, 'important');\r\n            }\r\n\r\n            // Appliquer le buffer (text-shadow pour contour) avec !important\r\n            if (style.buffer && style.buffer.enabled) {\r\n                const bufferColor = style.buffer.color || '#ffffff';\r\n                const bufferOpacity = style.buffer.opacity !== undefined ? style.buffer.opacity : 1;\r\n                const bufferSize = style.buffer.sizePx || 2;\r\n\r\n                // Convertir la couleur hex + opacit√© en rgba\r\n                const rgba = this._hexToRgba(bufferColor, bufferOpacity);\r\n\r\n                // Cr√©er un text-shadow multi-couches pour un contour plus net et visible\r\n                const shadowParts = [];\r\n\r\n                // Couche 1: Contour net avec de nombreux angles pour une couverture compl√®te\r\n                for (let angle = 0; angle < 360; angle += 30) {\r\n                    const rad = angle * Math.PI / 180;\r\n                    const x = Math.cos(rad) * bufferSize;\r\n                    const y = Math.sin(rad) * bufferSize;\r\n                    shadowParts.push(`${x.toFixed(2)}px ${y.toFixed(2)}px 0 ${rgba}`);\r\n                }\r\n\r\n                // Couche 2: Contour interm√©diaire pour plus de densit√© (meilleure couverture)\r\n                for (let angle = 15; angle < 360; angle += 30) {\r\n                    const rad = angle * Math.PI / 180;\r\n                    const x = Math.cos(rad) * bufferSize * 0.7;\r\n                    const y = Math.sin(rad) * bufferSize * 0.7;\r\n                    shadowParts.push(`${x.toFixed(2)}px ${y.toFixed(2)}px 0 ${rgba}`);\r\n                }\r\n\r\n                // Couche 3: Effet glow plus prononc√© pour renforcer le contraste\r\n                shadowParts.push(`0 0 ${bufferSize * 0.8}px ${rgba}`);\r\n                shadowParts.push(`0 0 ${bufferSize * 1.5}px ${rgba}`);\r\n\r\n                element.style.setProperty('text-shadow', shadowParts.join(', '), 'important');\r\n            }\r\n\r\n            // Appliquer textTransform\r\n            if (style.textTransform) {\r\n                element.style.setProperty('text-transform', style.textTransform, 'important');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Convertit une couleur hex en rgba\r\n         * @private\r\n         */\r\n        _hexToRgba(hex, opacity) {\r\n            if (!hex) return `rgba(0, 0, 0, ${opacity})`;\r\n\r\n            // Enlever le # si pr√©sent\r\n            hex = hex.replace('#', '');\r\n\r\n            // G√©rer les formats courts (#RGB) et longs (#RRGGBB)\r\n            if (hex.length === 3) {\r\n                hex = hex.split('').map(c => c + c).join('');\r\n            }\r\n\r\n            const r = parseInt(hex.substring(0, 2), 16);\r\n            const g = parseInt(hex.substring(2, 4), 16);\r\n            const b = parseInt(hex.substring(4, 6), 16);\r\n\r\n            return `rgba(${r}, ${g}, ${b}, ${opacity})`;\r\n        }\r\n    };\r\n\r\n    // Exposer dans l'espace de noms interne\r\n    GeoLeaf._LabelRenderer = _LabelRenderer;\r\n\r\n})(window);\r\n","/**\r\n * Gestionnaire centralis√© pour le bouton de label dans le Layer Manager\r\n *\r\n * RESPONSABILIT√âS:\r\n * - Cr√©er le bouton de label lors du premier render d'une couche\r\n * - Synchroniser l'√©tat du bouton (activ√©/d√©sactiv√©, actif/inactif)\r\n * - Source unique de v√©rit√© pour la logique de d√©cision\r\n *\r\n * LOGIQUE SIMPLIFI√âE:\r\n * - Le bouton est TOUJOURS visible pour toutes les couches\r\n * - Si couche visible ET label.enabled: true ‚Üí bouton cliquable\r\n * - Sinon ‚Üí bouton d√©sactiv√© (gris√©)\r\n * - √âtat actif/inactif selon si les labels sont actuellement affich√©s\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Gestionnaire de boutons de label\r\n     */\r\n    const LabelButtonManager = {\r\n        /**\r\n         * Cr√©e le bouton de label pour une couche\r\n         * Appel√© uniquement lors du premier render du layer manager\r\n         * @param {string} layerId - ID de la couche\r\n         * @param {HTMLElement} controlsContainer - Conteneur des contr√¥les\r\n         * @returns {HTMLElement|null} Le bouton cr√©√© ou null si √©chec\r\n         */\r\n        createButton(layerId, controlsContainer) {\r\n            if (!layerId || !controlsContainer) {\r\n                if (Log) Log.warn(\"[LabelButtonManager] createButton: param√®tres manquants\", {layerId, hasContainer: !!controlsContainer});\r\n                return null;\r\n            }\r\n\r\n            // V√©rifier si le bouton existe d√©j√†\r\n            const existingButton = controlsContainer.querySelector('.gl-layer-manager__label-toggle');\r\n            if (existingButton) {\r\n                if (Log) Log.debug(\"[LabelButtonManager] Bouton d√©j√† existant pour:\", layerId);\r\n                return existingButton;\r\n            }\r\n\r\n            if (Log) Log.debug(\"[LabelButtonManager] Cr√©ation du bouton pour:\", layerId);\r\n\r\n            // Cr√©er le bouton (toujours visible, sera activ√©/d√©sactiv√© selon label.enabled)\r\n            const labelToggle = global.L.DomUtil.create(\"button\", \"gl-layer-manager__label-toggle\");\r\n            labelToggle.type = \"button\";\r\n            labelToggle.setAttribute(\"aria-label\", \"Afficher/masquer les √©tiquettes\");\r\n            // D√©sactiv√© par d√©faut jusqu'√† la synchronisation\r\n            labelToggle.disabled = true;\r\n            labelToggle.classList.add(\"gl-layer-manager__label-toggle--disabled\");\r\n\r\n            const iconSpan = document.createElement(\"span\");\r\n            iconSpan.className = \"gl-layer-manager__label-toggle-icon\";\r\n            iconSpan.textContent = \"üè∑Ô∏è\";\r\n            labelToggle.appendChild(iconSpan);\r\n            labelToggle.title = \"Afficher/masquer les √©tiquettes\";\r\n\r\n            // Gestionnaire de clic\r\n            const onLabelToggle = function (ev) {\r\n                if (global.L && global.L.DomEvent) global.L.DomEvent.stopPropagation(ev);\r\n                ev.preventDefault();\r\n\r\n                if (labelToggle.disabled) return;\r\n\r\n                try {\r\n                    // V√©rifier que le style actuel autorise les labels\r\n                    const layerData = global.GeoLeaf?.GeoJSON?.getLayerById?.(layerId);\r\n                    const labelEnabled = layerData?.currentStyle?.label?.enabled === true;\r\n\r\n                    if (!labelEnabled) {\r\n                        if (Log) Log.warn(\"[LabelButtonManager] Impossible d'afficher les labels: le style actuel a label.enabled=false\");\r\n                        return;\r\n                    }\r\n\r\n                    // Toggle les labels\r\n                    if (global.GeoLeaf?.Labels?.toggleLabels) {\r\n                        const newState = global.GeoLeaf.Labels.toggleLabels(layerId);\r\n\r\n                        // Mettre √† jour l'√©tat visuel du bouton IMM√âDIATEMENT\r\n                        if (newState) {\r\n                            labelToggle.classList.add(\"gl-layer-manager__label-toggle--on\");\r\n                            labelToggle.setAttribute(\"aria-pressed\", \"true\");\r\n                        } else {\r\n                            labelToggle.classList.remove(\"gl-layer-manager__label-toggle--on\");\r\n                            labelToggle.setAttribute(\"aria-pressed\", \"false\");\r\n                        }\r\n                    }\r\n                } catch (err) {\r\n                    if (Log) Log.warn(\"[LabelButtonManager] Erreur lors du toggle des labels:\", err);\r\n                }\r\n            };\r\n\r\n            // Attacher le gestionnaire\r\n            if (GeoLeaf._UIComponents && typeof GeoLeaf._UIComponents.attachEventHandler === 'function') {\r\n                GeoLeaf._UIComponents.attachEventHandler(labelToggle, \"click\", onLabelToggle);\r\n            } else if (global.L && global.L.DomEvent) {\r\n                global.L.DomEvent.on(labelToggle, \"click\", onLabelToggle);\r\n                global.L.DomEvent.disableClickPropagation(labelToggle);\r\n            } else {\r\n                labelToggle.addEventListener(\"click\", onLabelToggle);\r\n            }\r\n\r\n            // Ins√©rer le bouton avant le toggle de visibilit√©\r\n            const visibilityToggle = controlsContainer.querySelector('.gl-layer-manager__item-toggle');\r\n            if (visibilityToggle) {\r\n                controlsContainer.insertBefore(labelToggle, visibilityToggle);\r\n            } else {\r\n                controlsContainer.appendChild(labelToggle);\r\n            }\r\n\r\n            if (Log) Log.debug(\"[LabelButtonManager] Bouton cr√©√© avec succ√®s:\", layerId);\r\n\r\n            return labelToggle;\r\n        },\r\n\r\n        /**\r\n         * Synchronise l'√©tat du bouton de label\r\n         * UNIQUE POINT D'ENTR√âE pour mettre √† jour le bouton\r\n         * @param {string} layerId - ID de la couche\r\n         */\r\n        sync(layerId) {\r\n            if (!layerId) return;\r\n\r\n            // D√©bounce pour √©viter les mises √† jour trop fr√©quentes\r\n            if (this._syncTimeouts && this._syncTimeouts.has(layerId)) {\r\n                clearTimeout(this._syncTimeouts.get(layerId));\r\n            }\r\n\r\n            if (!this._syncTimeouts) {\r\n                this._syncTimeouts = new Map();\r\n            }\r\n\r\n            const timeout = setTimeout(() => {\r\n                this._syncTimeouts.delete(layerId);\r\n                this._doSync(layerId);\r\n            }, 300);\r\n\r\n            this._syncTimeouts.set(layerId, timeout);\r\n        },\r\n\r\n        /**\r\n         * Ex√©cute la synchronisation imm√©diate (m√©thode interne)\r\n         * @private\r\n         */\r\n        _doSync(layerId) {\r\n            if (!layerId) return;\r\n\r\n            // Trouver le bouton - chercher directement dans tout le document\r\n            // car le Layer Manager peut recr√©er des √©l√©ments\r\n            let button = document.querySelector(`[data-layer-id=\"${layerId}\"] .gl-layer-manager__label-toggle`);\r\n\r\n            if (!button) {\r\n                // Fallback: chercher le layerItem et cr√©er le bouton si n√©cessaire\r\n                const layerItem = document.querySelector(`[data-layer-id=\"${layerId}\"]`);\r\n                if (!layerItem) {\r\n                    if (Log) Log.debug(\"[LabelButtonManager] LayerItem non trouv√© (pas encore rendu):\", layerId);\r\n                    return;\r\n                }\r\n\r\n                const controlsContainer = layerItem.querySelector('.gl-layer-manager__item-controls');\r\n                if (controlsContainer) {\r\n                    // V√©rifier si le bouton existe d√©j√† dans controls\r\n                    button = controlsContainer.querySelector('.gl-layer-manager__label-toggle');\r\n                    if (!button) {\r\n                        if (Log) Log.debug(\"[LabelButtonManager] Bouton manquant dans controls, cr√©ation √† la vol√©e pour:\", layerId);\r\n                        button = this.createButton(layerId, controlsContainer);\r\n                    }\r\n                } else {\r\n                    if (Log) Log.debug(\"[LabelButtonManager] Bouton et controlsContainer non trouv√©s pour:\", layerId);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (!button) {\r\n                if (Log) Log.debug(\"[LabelButtonManager] Bouton non trouv√© apr√®s toutes tentatives:\", layerId);\r\n                return;\r\n            }\r\n\r\n            // Collecter l'√©tat actuel\r\n            const state = this._getState(layerId);\r\n\r\n            // Appliquer la logique de d√©cision\r\n            this._applyState(button, state);\r\n        },\r\n\r\n        /**\r\n         * Collecte l'√©tat actuel de tous les composants\r\n         * @private\r\n         */\r\n        _getState(layerId) {\r\n            const layerData = global.GeoLeaf?.GeoJSON?.getLayerById?.(layerId);\r\n\r\n            const state = {\r\n                layerId: layerId,\r\n                layerExists: !!layerData,\r\n                layerVisible: layerData?._visibility?.current === true,\r\n                labelEnabled: layerData?.currentStyle?.label?.enabled === true,\r\n                areLabelsActive: global.GeoLeaf?.Labels?.areLabelsEnabled?.(layerId) || false\r\n            };\r\n\r\n            return state;\r\n        },\r\n\r\n        /**\r\n         * Applique l'√©tat au bouton selon la logique simplifi√©e\r\n         * R√àGLES:\r\n         * - Bouton TOUJOURS visible\r\n         * - Si label.enabled: true ET couche visible ‚Üí bouton activ√©\r\n         * - Sinon ‚Üí bouton d√©sactiv√© (gris√©)\r\n         * - √âtat actif/inactif selon si les labels sont affich√©s\r\n         * @private\r\n         */\r\n        _applyState(button, state) {\r\n            // Bouton cliquable uniquement si la couche est visible et que le style autorise les labels\r\n            const canUseLabels = state.labelEnabled && state.layerVisible;\r\n\r\n            if (canUseLabels) {\r\n                // Activer le bouton\r\n                button.disabled = false;\r\n                button.classList.remove(\"gl-layer-manager__label-toggle--disabled\");\r\n\r\n                // Appliquer l'√©tat actif/inactif\r\n                const shouldAppearOn = state.areLabelsActive && state.layerVisible;\r\n\r\n                if (shouldAppearOn) {\r\n                    button.classList.add(\"gl-layer-manager__label-toggle--on\");\r\n                    button.setAttribute(\"aria-pressed\", \"true\");\r\n                } else {\r\n                    button.classList.remove(\"gl-layer-manager__label-toggle--on\");\r\n                    button.setAttribute(\"aria-pressed\", \"false\");\r\n                }\r\n            } else {\r\n                // D√©sactiver le bouton\r\n                button.disabled = true;\r\n                button.classList.add(\"gl-layer-manager__label-toggle--disabled\");\r\n                button.classList.remove(\"gl-layer-manager__label-toggle--on\");\r\n                button.setAttribute(\"aria-pressed\", \"false\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Synchronise imm√©diatement sans debouncing\r\n         * Utilis√© pour les cas o√π une r√©ponse imm√©diate est n√©cessaire\r\n         * @param {string} layerId - ID de la couche\r\n         */\r\n        syncImmediate(layerId) {\r\n            if (!layerId) return;\r\n\r\n            // Annuler tout debounce en cours\r\n            if (this._syncTimeouts && this._syncTimeouts.has(layerId)) {\r\n                clearTimeout(this._syncTimeouts.get(layerId));\r\n                this._syncTimeouts.delete(layerId);\r\n            }\r\n\r\n            // Ex√©cuter imm√©diatement\r\n            this._doSync(layerId);\r\n        }\r\n    };\r\n\r\n    // Exposer dans l'espace de noms interne\r\n    GeoLeaf._LabelButtonManager = LabelButtonManager;\r\n\r\n    if (Log) Log.debug(\"[LabelButtonManager] Module initialis√©\");\r\n\r\n})(window);\r\n","/**\r\n * Module Labels pour GeoLeaf\r\n * Gestion des √©tiquettes flottantes sur les entit√©s\r\n *\r\n * D√âPENDANCES:\r\n * - Leaflet (L.Tooltip, L.DomUtil)\r\n * - GeoLeaf.Log (optionnel)\r\n * - GeoLeaf.GeoJSON (pour acc√©der aux layers)\r\n * - labels/label-renderer.js (pour le rendu des tooltips)\r\n * - loaders/style-loader.js (pour extraire les labels depuis les styles)\r\n *\r\n * EXPOSE:\r\n * - GeoLeaf.Labels\r\n *\r\n * MIGRATION V3:\r\n * - Les labels sont maintenant int√©gr√©s dans les fichiers style.json\r\n * - Plus de fichiers styleLabel.json s√©par√©s\r\n * - Les labels sont extraits depuis layerData.currentStyle.label\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    const Log = GeoLeaf.Log;\r\n    const ScaleUtils = GeoLeaf.Utils && GeoLeaf.Utils.ScaleUtils;\r\n\r\n    /**\r\n     * √âtat interne du module Labels\r\n     * @private\r\n     */\r\n    const _state = {\r\n        // Map: layerId -> { enabled, config, tooltips }\r\n        layers: new Map(),\r\n        // Flag pour savoir si l'√©couteur de zoom est attach√©\r\n        zoomListenerAttached: false\r\n    };\r\n\r\n    /**\r\n     * Module Labels\r\n     * @namespace Labels\r\n     */\r\n    const Labels = {\r\n        /**\r\n         * Initialise le syst√®me de labels\r\n         * @param {Object} options - Options d'initialisation\r\n         */\r\n        init(options = {}) {\r\n            if (Log) Log.debug(\"[Labels] Initialisation du module Labels\");\r\n\r\n            // √âcouter les √©v√©nements de chargement de couches\r\n            this._attachLayerEvents();\r\n\r\n            if (Log) Log.debug(\"[Labels] Module Labels initialis√©\");\r\n        },\r\n\r\n        /**\r\n         * Initialise les labels pour une couche au chargement\r\n         * Charge les labels UNIQUEMENT si:\r\n         * - Le style contient label.enabled === true\r\n         * - label.visibleByDefault === true\r\n         * - La couche est visible\r\n         *\r\n         * POINT D'ENTR√âE UNIQUE pour l'initialisation au chargement\r\n         * @param {string} layerId - ID de la couche\r\n         */\r\n        initializeLayerLabels(layerId) {\r\n            if (!layerId) return;\r\n\r\n            const layerData = this._getLayerData(layerId);\r\n            if (!layerData) return;\r\n\r\n            // D'ABORD masquer les labels existants pour r√©initialiser lors du changement de style\r\n            this._hideLabelsForLayer(layerId);\r\n\r\n            // R√©initialiser l'√©tat interne des labels pour cette couche\r\n            _state.layers.delete(layerId);\r\n\r\n            // V√©rifier si le style a des labels activ√©s\r\n            if (layerData.currentStyle?.label?.enabled !== true) {\r\n                if (Log) Log.debug(\"[Labels.initialize] Style sans labels ou labels d√©sactiv√©s pour\", layerId);\r\n                return;\r\n            }\r\n\r\n            // V√©rifier visibleByDefault\r\n            const visibleByDefault = layerData.currentStyle.label.visibleByDefault === true;\r\n\r\n            if (!visibleByDefault) {\r\n                if (Log) Log.debug(\"[Labels.initialize] Labels d√©sactiv√©s par d√©faut pour\", layerId);\r\n                // Toujours initialiser la config, mais sans les afficher\r\n                return this.enableLabels(layerId, {}, false);\r\n            }\r\n\r\n            // Afficher les labels uniquement si couche visible ET visibleByDefault = true\r\n            const isLayerVisible = layerData._visibility?.current === true;\r\n            if (!isLayerVisible) {\r\n                if (Log) Log.debug(\"[Labels.initialize] Labels configur√©s mais couche invisible pour\", layerId);\r\n                // Initialiser la config sans afficher\r\n                return this.enableLabels(layerId, {}, false);\r\n            }\r\n\r\n            if (Log) Log.debug(\"[Labels.initialize] Initialisation labels visibles pour\", layerId);\r\n            return this.enableLabels(layerId, {}, true);\r\n        },\r\n\r\n        /**\r\n         * Active les labels pour une couche\r\n         * Les labels sont extraits depuis le style actuel de la couche (layerData.currentStyle.label)\r\n         * @param {string} layerId - ID de la couche\r\n         * @param {Object} labelConfig - Configuration des labels depuis layer.json (legacy, peut √™tre vide)\r\n         * @param {boolean} showImmediately - Si true, affiche les labels imm√©diatement (visibleByDefault)\r\n         * @returns {Promise<void>}\r\n         */\r\n        async enableLabels(layerId, labelConfig = {}, showImmediately = true) {\r\n            if (!layerId) {\r\n                if (Log) Log.warn(\"[Labels] enableLabels: layerId manquant\");\r\n                return;\r\n            }\r\n\r\n            // V√âRIFICATION: D√©tecter les r√©f√©rences obsol√®tes √† styleFile\r\n            if (labelConfig && labelConfig.styleFile) {\r\n                const errorMessage =\r\n                    `‚ùå CONFIGURATION OBSOL√àTE D√âTECT√âE\\n` +\r\n                    `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n` +\r\n                    `La couche \"${layerId}\" utilise une r√©f√©rence obsol√®te √† un fichier\\n` +\r\n                    `de labels s√©par√© via \"labelConfig.styleFile\".\\n\\n` +\r\n                    `GeoLeaf ne supporte plus les fichiers de labels s√©par√©s (styleLabel.json).\\n` +\r\n                    `Les labels doivent √™tre int√©gr√©s dans les fichiers de style.\\n\\n` +\r\n                    `Valeur d√©tect√©e: ${labelConfig.styleFile}\\n` +\r\n                    `Couche: ${layerId}\\n\\n` +\r\n                    `Action requise:\\n` +\r\n                    `1. Supprimez la propri√©t√© \"labels.styleFile\" de la configuration\\n` +\r\n                    `2. Les labels sont maintenant extraits depuis layerData.currentStyle.label\\n` +\r\n                    `3. Consultez docs/STYLE_FORMAT_SPEC.md pour la syntaxe\\n` +\r\n                    `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê`;\r\n\r\n                console.error(errorMessage);\r\n                throw new Error(`Configuration obsol√®te: labels.styleFile d√©tect√© dans la couche ${layerId}`);\r\n            }\r\n\r\n            if (Log) Log.debug(\"[Labels] Pr√©paration labels pour\", layerId, \"showImmediately:\", showImmediately);\r\n\r\n            try {\r\n                // R√©cup√©rer le style actuel de la couche pour extraire les labels int√©gr√©s\r\n                const layerData = this._getLayerData(layerId);\r\n                let labelStyleConfig = null;\r\n\r\n                if (layerData && layerData.currentStyle && layerData.currentStyle.label) {\r\n                    // Labels int√©gr√©s dans le style\r\n                    const integratedLabel = layerData.currentStyle.label;\r\n\r\n                    if (integratedLabel.enabled === true) {\r\n                        labelStyleConfig = integratedLabel;\r\n\r\n                        // IMPORTANT: Copier aussi labelScale depuis le style\r\n                        if (layerData.currentStyle.labelScale) {\r\n                            labelStyleConfig.labelScale = layerData.currentStyle.labelScale;\r\n                        }\r\n\r\n                        if (Log) {\r\n                            Log.debug(\"[Labels] Labels int√©gr√©s d√©tect√©s pour\", layerId);\r\n                            Log.debug(\"[Labels] labelScale:\", labelStyleConfig.labelScale);\r\n                        }\r\n                    } else {\r\n                        if (Log) Log.debug(\"[Labels] Labels int√©gr√©s d√©sactiv√©s (enabled=false) pour\", layerId);\r\n                        return;\r\n                    }\r\n                } else {\r\n                    // Pas de labels int√©gr√©s dans le style - v√©rifier config legacy\r\n                    if (labelConfig && labelConfig.enabled && labelConfig.labelId) {\r\n                        // Utiliser la config legacy du fichier de config de la couche\r\n                        labelStyleConfig = {\r\n                            enabled: true,\r\n                            field: labelConfig.labelId,\r\n                            font: labelConfig.font || {\r\n                                family: \"Arial\",\r\n                                sizePt: 10,\r\n                                weight: 50,\r\n                                bold: false,\r\n                                italic: false\r\n                            },\r\n                            color: labelConfig.color || \"#000000\",\r\n                            opacity: labelConfig.opacity || 1.0,\r\n                            buffer: labelConfig.buffer || { enabled: false },\r\n                            background: labelConfig.background || { enabled: false },\r\n                            offset: labelConfig.offset || { distancePx: 0 }\r\n                        };\r\n                        if (Log) Log.debug(\"[Labels] Utilisation config legacy pour\", layerId);\r\n                    } else {\r\n                        // Pas de labels du tout\r\n                        if (Log) Log.debug(\"[Labels] Aucun label configur√© pour\", layerId);\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                // Stocker la configuration (enabled d√©termine si on affiche)\r\n                // showImmediately est d√©termin√© par visibleByDefault du style en priorit√©\r\n                const effectiveShowImmediately = labelStyleConfig.visibleByDefault !== undefined\r\n                    ? labelStyleConfig.visibleByDefault\r\n                    : showImmediately;\r\n\r\n                _state.layers.set(layerId, {\r\n                    enabled: effectiveShowImmediately, // true si visibleByDefault, false sinon\r\n                    config: labelConfig, // Configuration legacy (minZoom, maxZoom, etc.)\r\n                    labelStyle: labelStyleConfig, // Configuration de style extraite du style\r\n                    tooltips: new Map() // Map: featureId -> L.Marker\r\n                });\r\n\r\n                // V√©rifier si la couche est visible avant de cr√©er les labels\r\n                let shouldShowLabels = effectiveShowImmediately;\r\n\r\n                // V√©rifier l'√©tat de visibilit√© de la couche dans GeoJSON\r\n                if (layerData) {\r\n                    // Utiliser _visibility.current pour v√©rifier l'√©tat r√©el\r\n                    const isLayerVisible = layerData._visibility && layerData._visibility.current === true;\r\n                    shouldShowLabels = effectiveShowImmediately && isLayerVisible;\r\n\r\n                    if (effectiveShowImmediately && !isLayerVisible) {\r\n                        if (Log) Log.debug(\"[Labels] Labels configur√©s pour affichage mais couche invisible:\", layerId);\r\n                    }\r\n                }\r\n\r\n                // Cr√©er les markers seulement si la couche est visible ET showImmediately\r\n                if (shouldShowLabels) {\r\n                    await this._createLabelsForLayer(layerId);\r\n                }\r\n\r\n                // Attacher l'√©couteur de zoom si ce n'est pas d√©j√† fait\r\n                this._ensureZoomListener();\r\n\r\n                if (Log) Log.debug(\"[Labels] Config labels pr√©par√©e pour\", layerId, \"visible:\", showImmediately);\r\n            } catch (err) {\r\n                if (Log) Log.error(\"[Labels] Erreur pr√©paration labels:\", err);\r\n                console.error(\"[Labels] Stack trace:\", err.stack);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * D√©sactive les labels pour une couche\r\n         * @param {string} layerId - ID de la couche\r\n         */\r\n        disableLabels(layerId) {\r\n            if (!layerId) return;\r\n\r\n            const layerState = _state.layers.get(layerId);\r\n            if (!layerState) return;\r\n\r\n            if (Log) Log.debug(\"[Labels] D√©sactivation des labels pour\", layerId);\r\n\r\n            // Supprimer tous les tooltips\r\n            if (layerState.tooltips) {\r\n                layerState.tooltips.forEach(tooltip => {\r\n                    try {\r\n                        if (tooltip && tooltip.remove) {\r\n                            tooltip.remove();\r\n                        }\r\n                    } catch (e) {\r\n                        // Ignore\r\n                    }\r\n                });\r\n                layerState.tooltips.clear();\r\n            }\r\n\r\n            // Marquer comme d√©sactiv√©\r\n            layerState.enabled = false;\r\n\r\n            if (Log) Log.debug(\"[Labels] Labels d√©sactiv√©s pour\", layerId);\r\n        },\r\n\r\n        /**\r\n         * Cache temporairement les labels d'une couche sans changer l'√©tat enabled\r\n         * Utilis√© quand la couche est d√©sactiv√©e mais qu'on veut garder la config\r\n         * @param {string} layerId - ID de la couche\r\n         * @private\r\n         */\r\n        _hideLabelsForLayer(layerId) {\r\n            if (!layerId) return;\r\n\r\n            const layerState = _state.layers.get(layerId);\r\n            if (!layerState) return;\r\n\r\n            if (Log) Log.debug(\"[Labels] Masquage temporaire des labels pour\", layerId);\r\n\r\n            // Supprimer tous les markers de la map\r\n            if (layerState.tooltips) {\r\n                layerState.tooltips.forEach(tooltip => {\r\n                    try {\r\n                        if (tooltip && tooltip.remove) {\r\n                            tooltip.remove();\r\n                        }\r\n                    } catch (e) {\r\n                        // Ignore\r\n                    }\r\n                });\r\n                layerState.tooltips.clear();\r\n            }\r\n\r\n            // NE PAS changer layerState.enabled - on garde la config\r\n            if (Log) Log.debug(\"[Labels] Labels masqu√©s (enabled reste:\", layerState.enabled, \")\");\r\n        },\r\n\r\n        /**\r\n         * Bascule l'affichage des labels pour une couche\r\n         * @param {string} layerId - ID de la couche\r\n         * @returns {boolean} Nouvel √©tat (true = activ√©)\r\n         */\r\n        toggleLabels(layerId) {\r\n            if (!layerId) return false;\r\n\r\n            const layerState = _state.layers.get(layerId);\r\n            if (!layerState) return false;\r\n\r\n            // V√âRIFICATION CRITIQUE: Le style actuel doit autoriser les labels\r\n            const layerData = this._getLayerData(layerId);\r\n            const currentLabelEnabled = layerData?.currentStyle?.label?.enabled === true;\r\n\r\n            if (!currentLabelEnabled) {\r\n                return false;\r\n            }\r\n\r\n            if (layerState.enabled) {\r\n                // D√©sactiver : masquer sans perdre la config\r\n                this._hideLabelsForLayer(layerId);\r\n                layerState.enabled = false;\r\n                return false;\r\n            } else {\r\n                // Activer : changer l'√©tat et rafra√Æchir (refreshLabels v√©rifiera la visibilit√©)\r\n                layerState.enabled = true;\r\n                this.refreshLabels(layerId);\r\n                return true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * V√©rifie si la config labels existe pour une couche\r\n         * @param {string} layerId - ID de la couche\r\n         * @returns {boolean}\r\n         */\r\n        hasLabelConfig(layerId) {\r\n            return _state.layers.has(layerId);\r\n        },\r\n\r\n        /**\r\n         * V√©rifie si les labels sont actifs pour une couche\r\n         * @param {string} layerId - ID de la couche\r\n         * @returns {boolean}\r\n         */\r\n        areLabelsEnabled(layerId) {\r\n            const layerState = _state.layers.get(layerId);\r\n            return layerState ? layerState.enabled : false;\r\n        },\r\n\r\n        /**\r\n         * Rafra√Æchit les labels d'une couche (apr√®s zoom, filtre, etc.)\r\n         * @param {string} layerId - ID de la couche\r\n         */\r\n        refreshLabels(layerId) {\r\n            if (!layerId) return;\r\n\r\n            const layerState = _state.layers.get(layerId);\r\n            if (!layerState || !layerState.enabled) return;\r\n\r\n            // V√©rifier si la couche est visible avant de cr√©er les labels\r\n            // Priorit√©: visibilit√© de couche prime sur les param√®tres d'√©chelle\r\n            const layerData = this._getLayerData(layerId);\r\n            if (!layerData || !layerData._visibility || !layerData._visibility.current) {\r\n                if (Log) Log.debug(\"[Labels] Couche invisible, skip refresh pour\", layerId);\r\n                return;\r\n            }\r\n\r\n            if (Log) Log.debug(\"[Labels] Rafra√Æchissement des labels pour\", layerId);\r\n\r\n            // Supprimer les anciens tooltips\r\n            if (layerState.tooltips) {\r\n                layerState.tooltips.forEach(tooltip => {\r\n                    try {\r\n                        if (tooltip && tooltip.remove) tooltip.remove();\r\n                    } catch (e) {\r\n                        // Ignore\r\n                    }\r\n                });\r\n                layerState.tooltips.clear();\r\n            }\r\n\r\n            // Recr√©er les tooltips\r\n            this._createLabelsForLayer(layerId);\r\n        },\r\n\r\n        /**\r\n         * Cr√©e les tooltips permanents pour toutes les features d'une couche\r\n         * @private\r\n         * @param {string} layerId - ID de la couche\r\n         * @returns {Promise<void>}\r\n         */\r\n        async _createLabelsForLayer(layerId) {\r\n            const layerState = _state.layers.get(layerId);\r\n            if (!layerState || !layerState.enabled) {\r\n                if (Log) Log.debug(\"[Labels] _createLabelsForLayer: layerState non trouv√© ou d√©sactiv√© pour\", layerId);\r\n                return;\r\n            }\r\n\r\n            // PRIORIT√â: V√©rifier la visibilit√© de la couche AVANT les calculs d'√©chelle\r\n            const layerData = this._getLayerData(layerId);\r\n            if (!layerData || !layerData._visibility || !layerData._visibility.current) {\r\n                if (Log) Log.debug(\"[Labels] Couche invisible, abandon cr√©ation labels pour\", layerId);\r\n                return;\r\n            }\r\n\r\n            if (!layerData.layer) {\r\n                if (Log) Log.warn(\"[Labels] Couche GeoJSON non trouv√©e:\", layerId);\r\n                return;\r\n            }\r\n\r\n            const { config, labelStyle } = layerState;\r\n\r\n            if (Log) Log.debug(\"[Labels] Cr√©ation labels pour\", layerId, \"labelStyle:\", labelStyle);\r\n\r\n            // V√©rifier l'√©chelle actuelle si labelScale est d√©fini\r\n            const map = GeoLeaf.Core && GeoLeaf.Core.getMap ? GeoLeaf.Core.getMap() : null;\r\n\r\n            if (map && labelStyle.labelScale) {\r\n                const { minScale, maxScale } = labelStyle.labelScale;\r\n\r\n                if (minScale !== null || maxScale !== null) {\r\n                    // Calculer l'√©chelle actuelle de la carte\r\n                    const currentScale = this._calculateMapScale(map);\r\n\r\n                    if (Log) Log.debug(\"[Labels] V√©rification √©chelle:\", {\r\n                        currentScale,\r\n                        minScale,\r\n                        maxScale,\r\n                        visible: this._isScaleInRange(currentScale, minScale, maxScale)\r\n                    });\r\n\r\n                    if (!this._isScaleInRange(currentScale, minScale, maxScale)) {\r\n                        if (Log) Log.debug(\"[Labels] √âchelle hors limites pour\", layerId, `(√©chelle: 1:${currentScale})`);\r\n                        return;\r\n                    }\r\n                }\r\n            } else if (map && config.minZoom !== undefined && config.maxZoom !== undefined) {\r\n                // Fallback sur minZoom/maxZoom legacy\r\n                const currentZoom = map.getZoom();\r\n                if (currentZoom < config.minZoom || currentZoom > config.maxZoom) {\r\n                    if (Log) Log.debug(\"[Labels] Zoom hors limites pour\", layerId);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // Cr√©er les tooltips via le renderer\r\n            if (GeoLeaf._LabelRenderer) {\r\n                // Adapter le format nouveau (field) vers ancien (labelId) pour le renderer\r\n                const rendererConfig = {\r\n                    labelId: labelStyle.field || config.labelId,\r\n                    minZoom: config.minZoom,\r\n                    maxZoom: config.maxZoom\r\n                };\r\n\r\n                if (Log) Log.debug(\"[Labels] Appel renderer avec:\", {\r\n                    layerId,\r\n                    labelId: rendererConfig.labelId,\r\n                    hasLayer: !!layerData.layer,\r\n                    hasStyle: !!labelStyle\r\n                });\r\n\r\n                GeoLeaf._LabelRenderer.createTooltipsForLayer(\r\n                    layerId,\r\n                    layerData.layer,\r\n                    rendererConfig,\r\n                    labelStyle, // Passe le style de label extrait du style actuel\r\n                    layerState.tooltips\r\n                );\r\n\r\n                if (Log) Log.debug(\"[Labels] Renderer termin√©, tooltips cr√©√©s:\", layerState.tooltips.size);\r\n            } else {\r\n                if (Log) Log.error(\"[Labels] GeoLeaf._LabelRenderer non disponible!\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * R√©cup√®re les donn√©es de la couche depuis GeoLeaf.GeoJSON\r\n         * @private\r\n         * @param {string} layerId - ID de la couche\r\n         * @returns {Object|null} Layer data ou null si non trouv√©\r\n         */\r\n        _getLayerData(layerId) {\r\n            if (!GeoLeaf.GeoJSON || typeof GeoLeaf.GeoJSON.getLayerById !== \"function\") {\r\n                if (Log) Log.warn(\"[Labels] GeoLeaf.GeoJSON non disponible\");\r\n                return null;\r\n            }\r\n\r\n            return GeoLeaf.GeoJSON.getLayerById(layerId);\r\n        },\r\n\r\n        /**\r\n         * S'assure que l'√©couteur de zoom est attach√©\r\n         * @private\r\n         */\r\n        _ensureZoomListener() {\r\n            if (_state.zoomListenerAttached) return;\r\n\r\n            const map = GeoLeaf.Core && GeoLeaf.Core.getMap ? GeoLeaf.Core.getMap() : null;\r\n            if (map) {\r\n                map.on('zoomend', () => {\r\n                    const zoom = map.getZoom();\r\n                    if (Log) Log.debug(\"[Labels] Zoom chang√©:\", zoom);\r\n                    this._handleZoomChange({ zoom: zoom });\r\n                });\r\n                _state.zoomListenerAttached = true;\r\n                if (Log) Log.debug(\"[Labels] √âcouteur zoom attach√© √† la carte\");\r\n            } else {\r\n                if (Log) Log.warn(\"[Labels] Carte non disponible pour attacher l'√©couteur de zoom\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Attache les √©couteurs d'√©v√©nements pour les couches\r\n         * @private\r\n         */\r\n        _attachLayerEvents() {\r\n            // Les √©couteurs de zoom sont maintenant attach√©s dans _ensureZoomListener()\r\n\r\n            // √âcouter les √©v√©nements personnalis√©s (si disponibles)\r\n            if (typeof global.addEventListener === \"function\") {\r\n                // √âcouter les √©v√©nements de chargement de couches\r\n                global.addEventListener(\"geoleaf:layer-loaded\", (evt) => {\r\n                    if (evt.detail && evt.detail.layerId) {\r\n                        this._handleLayerLoaded(evt.detail.layerId);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * G√®re le changement de zoom/√©chelle\r\n         * @private\r\n         */\r\n        _handleZoomChange(detail) {\r\n            if (!detail) return;\r\n\r\n            const map = GeoLeaf.Core && GeoLeaf.Core.getMap ? GeoLeaf.Core.getMap() : null;\r\n            if (!map) return;\r\n\r\n            // Calculer l'√©chelle actuelle\r\n            const currentScale = this._calculateMapScale(map);\r\n\r\n            // Parcourir toutes les couches avec labels\r\n            _state.layers.forEach((layerState, layerId) => {\r\n                if (!layerState.enabled) return;\r\n\r\n                // PRIORIT√â: V√©rifier visibilit√© couche AVANT calculs d'√©chelle (performance)\r\n                const layerData = this._getLayerData(layerId);\r\n                if (!layerData || !layerData._visibility || !layerData._visibility.current) {\r\n                    // Couche invisible - masquer labels imm√©diatement, ignorer √©chelle\r\n                    const isShowing = layerState.tooltips && layerState.tooltips.size > 0;\r\n                    if (isShowing) {\r\n                        layerState.tooltips.forEach(tooltip => {\r\n                            if (tooltip && tooltip.remove) tooltip.remove();\r\n                        });\r\n                        layerState.tooltips.clear();\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                // Couche visible: v√©rifier les contraintes d'√©chelle\r\n                const { labelStyle, config } = layerState;\r\n                let shouldShow = true;\r\n\r\n                // V√©rifier avec labelScale si disponible\r\n                if (labelStyle && labelStyle.labelScale) {\r\n                    const { minScale, maxScale } = labelStyle.labelScale;\r\n                    shouldShow = this._isScaleInRange(currentScale, minScale, maxScale);\r\n                } else if (config.minZoom !== undefined && config.maxZoom !== undefined) {\r\n                    // Fallback sur minZoom/maxZoom legacy\r\n                    const zoom = detail.zoom !== undefined ? detail.zoom : map.getZoom();\r\n                    const minZoom = config.minZoom;\r\n                    const maxZoom = config.maxZoom;\r\n                    shouldShow = zoom >= minZoom && zoom <= maxZoom;\r\n                }\r\n\r\n                const isShowing = layerState.tooltips && layerState.tooltips.size > 0;\r\n\r\n                if (shouldShow && !isShowing) {\r\n                    // Afficher les labels\r\n                    this._createLabelsForLayer(layerId);\r\n                } else if (!shouldShow && isShowing) {\r\n                    // Masquer les labels\r\n                    layerState.tooltips.forEach(tooltip => {\r\n                        if (tooltip && tooltip.remove) tooltip.remove();\r\n                    });\r\n                    layerState.tooltips.clear();\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * G√®re le chargement d'une couche\r\n         * @private\r\n         */\r\n        async _handleLayerLoaded(layerId) {\r\n            const layerState = _state.layers.get(layerId);\r\n            if (layerState && layerState.enabled) {\r\n                await this._createLabelsForLayer(layerId);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * R√©cup√®re l'ID du profil actif\r\n         * @private\r\n         */\r\n        _getProfileId() {\r\n            if (GeoLeaf.Config && typeof GeoLeaf.Config.get === \"function\") {\r\n                return GeoLeaf.Config.get(\"id\") || \"default\";\r\n            }\r\n            return \"default\";\r\n        },\r\n\r\n        /**\r\n         * Calcule l'√©chelle actuelle de la carte (1:X format)\r\n         * @private\r\n         * @param {L.Map} map - Instance de la carte Leaflet\r\n         * @returns {number} √âchelle (ex: 5000000 pour 1:5M)\r\n         */\r\n        _calculateMapScale(map) {\r\n            if (ScaleUtils && typeof ScaleUtils.calculateMapScale === \"function\") {\r\n                return ScaleUtils.calculateMapScale(map, { logger: Log });\r\n            }\r\n\r\n            if (!map) return 0;\r\n\r\n            const center = map.getCenter();\r\n            const zoom = map.getZoom();\r\n\r\n            const METERS_PER_PIXEL_AT_ZOOM_0 = 156543.04;\r\n            const metersPerPixel = METERS_PER_PIXEL_AT_ZOOM_0 * Math.cos(center.lat * Math.PI / 180) / Math.pow(2, zoom);\r\n\r\n            const METERS_PER_INCH = 0.0254;\r\n            const DPI = 96;\r\n            const metersPerInch = metersPerPixel * DPI;\r\n\r\n            const scale = Math.round(metersPerInch / METERS_PER_INCH);\r\n\r\n            if (Log) {\r\n                Log.debug(`[Labels] Calcul √©chelle (fallback): zoom=${zoom}, lat=${center.lat.toFixed(2)}, √©chelle=1:${scale.toLocaleString()}`);\r\n            }\r\n\r\n            return scale;\r\n        },\r\n\r\n        /**\r\n         * V√©rifie si une √©chelle est dans la plage min/max\r\n         * @private\r\n         * @param {number} currentScale - √âchelle actuelle (ex: 5000000)\r\n         * @param {number|null} minScale - √âchelle minimale (plus grand nombre = plus d√©zoom√©)\r\n         * @param {number|null} maxScale - √âchelle maximale (plus petit nombre = plus zoom√©)\r\n         * @returns {boolean} True si l'√©chelle est dans la plage\r\n         *\r\n         * Logique:\r\n         * - minScale est l'√©chelle la plus \"large\" (ex: 15000000 = 1:15M, vue d'ensemble)\r\n         * - maxScale est l'√©chelle la plus \"d√©taill√©e\" (ex: 1000 = 1:1k, vue rapproch√©e)\r\n         * - Labels visibles si: maxScale <= currentScale <= minScale\r\n         */\r\n        _isScaleInRange(currentScale, minScale, maxScale) {\r\n            if (ScaleUtils && typeof ScaleUtils.isScaleInRange === \"function\") {\r\n                return ScaleUtils.isScaleInRange(currentScale, minScale, maxScale, Log);\r\n            }\r\n\r\n            if (typeof minScale === \"number\" && currentScale > minScale) {\r\n                if (Log) {\r\n                    Log.debug(`[Labels] Test √©chelle (fallback): ${currentScale} > minScale ${minScale} ‚Üí ‚úó CACH√â (trop d√©zoom√©)`);\r\n                }\r\n                return false;\r\n            }\r\n\r\n            if (typeof maxScale === \"number\" && currentScale < maxScale) {\r\n                if (Log) {\r\n                    Log.debug(`[Labels] Test √©chelle (fallback): ${currentScale} < maxScale ${maxScale} ‚Üí ‚úó CACH√â (trop zoom√©)`);\r\n                }\r\n                return false;\r\n            }\r\n\r\n            if (Log) {\r\n                Log.debug(`[Labels] Test √©chelle (fallback): ${currentScale} dans [${maxScale} - ${minScale}] ‚Üí ‚úì VISIBLE`);\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Nettoie toutes les ressources du module\r\n         */\r\n        destroy() {\r\n            if (Log) Log.debug(\"[Labels] Destruction du module Labels\");\r\n\r\n            _state.layers.forEach((layerState, layerId) => {\r\n                this.disableLabels(layerId);\r\n            });\r\n\r\n            _state.layers.clear();\r\n        }\r\n    };\r\n\r\n    // Exposer le module\r\n    GeoLeaf.Labels = Labels;\r\n\r\n})(window);\r\n","/**\r\n * Module Theme Loader\r\n * Charge et met en cache le fichier themes.json\r\n *\r\n * D√âPENDANCES:\r\n * - GeoLeaf.Log (optionnel)\r\n * - GeoLeaf.Core.getActiveProfile()\r\n *\r\n * EXPOSE:\r\n * - GeoLeaf._ThemeLoader\r\n *\r\n * @module _ThemeLoader\r\n * @private\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Cache pour les configurations de th√®mes\r\n     * @type {Map<string, Object>}\r\n     */\r\n    const _cache = new Map();\r\n\r\n    /**\r\n     * Promises en cours de chargement\r\n     * @type {Map<string, Promise>}\r\n     */\r\n    const _loadingPromises = new Map();\r\n\r\n    /**\r\n     * Module Theme Loader\r\n     * @namespace _ThemeLoader\r\n     * @private\r\n     */\r\n    const _ThemeLoader = {\r\n        /**\r\n         * Charge le fichier themes.json pour un profil\r\n         * @param {string} profileId - ID du profil\r\n         * @returns {Promise<Object>} Configuration des th√®mes\r\n         */\r\n        loadThemesConfig(profileId) {\r\n            if (Log) Log.debug(\"[ThemeLoader] loadThemesConfig appel√© pour:\", profileId);\r\n\r\n            // V√©rifier le cache\r\n            if (_cache.has(profileId)) {\r\n                if (Log) Log.debug(\"[ThemeLoader] Config en cache pour:\", profileId);\r\n                return Promise.resolve(_cache.get(profileId));\r\n            }\r\n\r\n            // V√©rifier si d√©j√† en cours de chargement\r\n            if (_loadingPromises.has(profileId)) {\r\n                if (Log) Log.debug(\"[ThemeLoader] Chargement d√©j√† en cours pour:\", profileId);\r\n                return _loadingPromises.get(profileId);\r\n            }\r\n\r\n            // Construire le chemin du fichier\r\n            // Utiliser un chemin relatif depuis la racine du projet\r\n            // Si on est dans /demo/, on remonte avec ../\r\n            const isInDemo = window.location.pathname.includes('/demo/');\r\n            const basePath = isInDemo ? '../' : '';\r\n            const themesPath = `${basePath}profiles/${profileId}/themes.json`;\r\n\r\n            // Sprint 3.3: Unified fetch using FetchHelper with timeout and retry\r\n            const FetchHelper = GeoLeaf.Utils?.FetchHelper;\r\n            let loadPromise;\r\n\r\n            if (FetchHelper) {\r\n                // Use enhanced FetchHelper with timeout and retry\r\n                loadPromise = FetchHelper.get(themesPath, {\r\n                    timeout: 8000,\r\n                    retries: 1,\r\n                    parseResponse: true\r\n                })\r\n                .then((data) => {\r\n                    if (Log) Log.debug(\"[ThemeLoader] Fichier charg√©:\", themesPath);\r\n\r\n                    // Valider la structure\r\n                    const validated = this._validateConfig(data);\r\n\r\n                    // Mettre en cache\r\n                    _cache.set(profileId, validated);\r\n                    _loadingPromises.delete(profileId);\r\n\r\n                    return validated;\r\n                })\r\n                .catch((err) => {\r\n                    if (Log) Log.warn(\"[ThemeLoader] Erreur chargement themes.json:\", err.message);\r\n                    _loadingPromises.delete(profileId);\r\n                    throw err;\r\n                });\r\n            } else {\r\n                // Fallback to raw fetch if FetchHelper not available\r\n                loadPromise = fetch(themesPath)\r\n                    .then((response) => {\r\n                        if (!response.ok) {\r\n                            throw new Error(`Erreur HTTP ${response.status} lors du chargement de ${themesPath}`);\r\n                        }\r\n                        return response.json();\r\n                    })\r\n                    .then((data) => {\r\n                        if (Log) Log.debug(\"[ThemeLoader] Fichier charg√©:\", themesPath);\r\n\r\n                        // Valider la structure\r\n                        const validated = this._validateConfig(data);\r\n\r\n                        // Mettre en cache\r\n                        _cache.set(profileId, validated);\r\n                        _loadingPromises.delete(profileId);\r\n\r\n                        return validated;\r\n                    })\r\n                    .catch((err) => {\r\n                        if (Log) Log.warn(\"[ThemeLoader] Erreur chargement themes.json:\", err.message);\r\n                        _loadingPromises.delete(profileId);\r\n                        throw err;\r\n                    });\r\n            }\r\n\r\n            // Stocker la promesse en cours\r\n            _loadingPromises.set(profileId, loadPromise);\r\n\r\n            return loadPromise;\r\n        },\r\n\r\n        /**\r\n         * Valide et normalise la configuration des th√®mes\r\n         * @param {Object} config - Configuration brute\r\n         * @returns {Object} Configuration valid√©e\r\n         * @private\r\n         */\r\n        _validateConfig(config) {\r\n            if (!config || typeof config !== 'object') {\r\n                throw new Error(\"Configuration de th√®mes invalide\");\r\n            }\r\n\r\n            // Valeurs par d√©faut pour config\r\n            const validatedConfig = {\r\n                config: {\r\n                    primaryThemes: {\r\n                        enabled: true,\r\n                        position: \"top-map\",\r\n                        ...(config.config?.primaryThemes || {})\r\n                    },\r\n                    secondaryThemes: {\r\n                        enabled: true,\r\n                        placeholder: \"S√©lectionner un th√®me...\",\r\n                        showNavigationButtons: true,\r\n                        position: \"top-layermanager\",\r\n                        ...(config.config?.secondaryThemes || {})\r\n                    }\r\n                },\r\n                themes: [],\r\n                defaultTheme: config.defaultTheme || null\r\n            };\r\n\r\n            // Valider les th√®mes\r\n            if (!Array.isArray(config.themes)) {\r\n                if (Log) Log.warn(\"[ThemeLoader] Aucun th√®me d√©fini dans la configuration\");\r\n                return validatedConfig;\r\n            }\r\n\r\n            // Normaliser chaque th√®me\r\n            validatedConfig.themes = config.themes.map((theme) => {\r\n                if (!theme.id) {\r\n                    if (Log) Log.warn(\"[ThemeLoader] Th√®me sans ID ignor√©\");\r\n                    return null;\r\n                }\r\n\r\n                return {\r\n                    id: theme.id,\r\n                    label: theme.label || theme.id,\r\n                    type: theme.type || \"secondary\", // Par d√©faut: secondary\r\n                    description: theme.description || \"\",\r\n                    icon: theme.icon || \"\",\r\n                    layers: Array.isArray(theme.layers) ? theme.layers : []\r\n                };\r\n            }).filter(Boolean); // Supprimer les th√®mes invalides\r\n\r\n            // V√©rifier qu'il y a au moins un th√®me\r\n            if (validatedConfig.themes.length === 0) {\r\n                throw new Error(\"Aucun th√®me valide trouv√© dans la configuration\");\r\n            }\r\n\r\n            // V√©rifier que le defaultTheme existe\r\n            if (validatedConfig.defaultTheme) {\r\n                const defaultExists = validatedConfig.themes.some(\r\n                    (t) => t.id === validatedConfig.defaultTheme\r\n                );\r\n                if (!defaultExists) {\r\n                    if (Log) Log.warn(\"[ThemeLoader] defaultTheme introuvable, utilisation du premier th√®me\");\r\n                    validatedConfig.defaultTheme = validatedConfig.themes[0].id;\r\n                }\r\n            } else {\r\n                // Pas de defaultTheme d√©fini, utiliser le premier\r\n                validatedConfig.defaultTheme = validatedConfig.themes[0].id;\r\n            }\r\n\r\n            if (Log) Log.debug(\"[ThemeLoader] Configuration valid√©e:\", validatedConfig.themes.length, \"th√®mes\");\r\n\r\n            return validatedConfig;\r\n        },\r\n\r\n        /**\r\n         * Vide le cache (pour tests ou rechargement)\r\n         * @param {string} [profileId] - ID du profil (optionnel, vide tout si non sp√©cifi√©)\r\n         */\r\n        clearCache(profileId) {\r\n            if (profileId) {\r\n                _cache.delete(profileId);\r\n                _loadingPromises.delete(profileId);\r\n                if (Log) Log.debug(\"[ThemeLoader] Cache vid√© pour:\", profileId);\r\n            } else {\r\n                _cache.clear();\r\n                _loadingPromises.clear();\r\n                if (Log) Log.debug(\"[ThemeLoader] Cache complet vid√©\");\r\n            }\r\n        }\r\n    };\r\n\r\n    // Exposer dans l'espace de noms\r\n    GeoLeaf._ThemeLoader = _ThemeLoader;\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf Theme Applier - Core\r\n * Module state, init/cleanup, applyTheme orchestration, getCurrentThemeId\r\n *\r\n * @module themes/theme-applier/core\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n\r\n    /**\r\n     * Module Theme Applier\r\n     * @namespace _ThemeApplier\r\n     * @private\r\n     */\r\n    const _ThemeApplier = {\r\n        /** @type {string|null} Th√®me actuellement actif */\r\n        _currentThemeId: null,\r\n\r\n        /** @type {boolean} Flag pour savoir si c'est le premier chargement */\r\n        _isFirstLoad: true,\r\n\r\n        /**\r\n         * Initialise le ThemeApplier\r\n         * @private\r\n         */\r\n        _init() {\r\n            this._pendingLayerConfigs = new Map();\r\n            this._pendingCheckTimer = null;\r\n        },\r\n\r\n        /**\r\n         * Nettoie les ressources\r\n         * @private\r\n         */\r\n        _cleanup() {\r\n            if (this._pendingCheckTimer) {\r\n                clearTimeout(this._pendingCheckTimer);\r\n                this._pendingCheckTimer = null;\r\n            }\r\n            if (this._pendingLayerConfigs) {\r\n                this._pendingLayerConfigs.clear();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Applique un th√®me\r\n         * @param {Object} theme - Configuration du th√®me\r\n         * @param {Object} [options] - Options d'application\r\n         * @param {boolean} [options.fitBounds] - Force le fitBounds\r\n         * @returns {Promise<void>}\r\n         */\r\n        applyTheme(theme, options = {}) {\r\n            // Initialiser si n√©cessaire\r\n            if (!this._pendingLayerConfigs) {\r\n                this._init();\r\n            }\r\n\r\n            if (GeoLeaf.Legend && typeof GeoLeaf.Legend.showLoadingOverlay === \"function\") {\r\n                GeoLeaf.Legend.showLoadingOverlay();\r\n            }\r\n\r\n            if (!theme || !theme.id) {\r\n                return Promise.reject(new Error(\"Th√®me invalide\"));\r\n            }\r\n\r\n            // V√©rifier les d√©pendances\r\n            if (!GeoLeaf.GeoJSON || !GeoLeaf.LayerManager) {\r\n                return Promise.reject(new Error(\"Modules GeoJSON ou LayerManager non disponibles\"));\r\n            }\r\n\r\n            // Notifier le d√©but du chargement du th√®me\r\n            try {\r\n                document.dispatchEvent(new CustomEvent('geoleaf:theme:applying', {\r\n                    detail: {\r\n                        themeId: theme.id,\r\n                        themeName: theme.name || theme.label || theme.id\r\n                    }\r\n                }));\r\n            } catch (e) { /* silencieux */ }\r\n\r\n            // D√©sactiver toutes les couches d'abord\r\n            this._hideAllLayers();\r\n\r\n            // Appliquer les couches du th√®me avec chargement optimis√© par lots\r\n            const layerConfigs = theme.layers || [];\r\n\r\n            // R√©cup√©rer la configuration de performance depuis le profil\r\n            const profileConfig = GeoLeaf.Config?.Profile?.getActiveProfileConfig();\r\n            const perfConfig = profileConfig?.performance || {};\r\n            const maxLayers = perfConfig.maxConcurrentLayers || 10;\r\n            // fitBounds d√©sactiv√© : le positionnement se fait via map.bounds du profil\r\n            const enableFitBounds = false;\r\n\r\n            // S√©parer les couches visibles et invisibles\r\n            const visibleLayers = layerConfigs.filter(config => config.visible !== false);\r\n            const hiddenLayers = layerConfigs.filter(config => config.visible === false);\r\n\r\n            // Charger d'abord les couches visibles par lots\r\n            const BATCH_SIZE = perfConfig.themeBatchSize || 3;\r\n\r\n            // Helper progression pour l'√©cran de chargement (97‚Üí99)\r\n            const updateProgress = (p) => {\r\n                try {\r\n                    if (typeof window !== 'undefined' && window._glLoadingScreen && typeof window._glLoadingScreen.updateProgress === 'function') {\r\n                        window._glLoadingScreen.updateProgress(p);\r\n                    }\r\n                } catch (e) { /* ignore */ }\r\n            };\r\n\r\n            const loadInBatches = async (layers) => {\r\n                for (let i = 0; i < layers.length; i += BATCH_SIZE) {\r\n                    const batch = layers.slice(i, i + BATCH_SIZE);\r\n                    await Promise.all(batch.map(layerConfig => this._applyLayerConfig(layerConfig)));\r\n\r\n                    if (i === 0) {\r\n                        updateProgress(98);\r\n                    }\r\n                }\r\n            };\r\n\r\n            const self = this;\r\n\r\n            return loadInBatches(visibleLayers)\r\n                .then(() => {\r\n                    updateProgress(98);\r\n                    return Promise.resolve();\r\n                })\r\n                .then(() => {\r\n                    updateProgress(99);\r\n                    self._currentThemeId = theme.id;\r\n\r\n                    // Rafra√Æchir le LayerManager\r\n                    if (GeoLeaf.LayerManager && GeoLeaf.LayerManager.refresh) {\r\n                        GeoLeaf.LayerManager.refresh();\r\n                    }\r\n\r\n                    // Synchroniser l'√©tat de visibilit√© dans la l√©gende\r\n                    self._syncLegendVisibility();\r\n\r\n                    // √âv√©nement de th√®me appliqu√©\r\n                    try {\r\n                        const themeNotificationEvent = new CustomEvent('geoleaf:theme:applied', {\r\n                            detail: {\r\n                                themeId: theme.id,\r\n                                themeName: theme.name || theme.label || theme.id,\r\n                                layerCount: visibleLayers.length,\r\n                                totalLayersInTheme: layerConfigs.length,\r\n                                timestamp: new Date().toISOString()\r\n                            }\r\n                        });\r\n                        document.dispatchEvent(themeNotificationEvent);\r\n                    } catch (e) {\r\n                        // Silencieux\r\n                    }\r\n\r\n                    // FitBounds selon la configuration\r\n                    const shouldFitBounds = options.fitBounds === true ||\r\n                                           (self._isFirstLoad && enableFitBounds);\r\n                    if (shouldFitBounds) {\r\n                        setTimeout(() => {\r\n                            self._fitBoundsOnAllLayers();\r\n                        }, 1000);\r\n                        self._isFirstLoad = false;\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    throw err;\r\n                })\r\n                .finally(() => {\r\n                    if (GeoLeaf.Legend && typeof GeoLeaf.Legend.hideLoadingOverlay === \"function\") {\r\n                        GeoLeaf.Legend.hideLoadingOverlay();\r\n                    }\r\n                });\r\n        },\r\n\r\n        /**\r\n         * R√©cup√®re l'ID du th√®me actuellement actif\r\n         * @returns {string|null}\r\n         */\r\n        getCurrentThemeId() {\r\n            return this._currentThemeId;\r\n        }\r\n    };\r\n\r\n    // Exposer dans l'espace de noms\r\n    GeoLeaf._ThemeApplier = _ThemeApplier;\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf Theme Applier - Visibility\r\n * Gestion de la visibilit√© des couches et application des styles\r\n *\r\n * @module themes/theme-applier/visibility\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    const Log = GeoLeaf.Log;\r\n\r\n    const TA = GeoLeaf._ThemeApplier;\r\n\r\n    /**\r\n     * D√©sactive toutes les couches GeoJSON\r\n     * @private\r\n     */\r\n    TA._hideAllLayers = function () {\r\n        if (!GeoLeaf._GeoJSONShared?.state?.layers) {\r\n            return;\r\n        }\r\n\r\n        const VisibilityManager = GeoLeaf._LayerVisibilityManager;\r\n        if (!VisibilityManager) {\r\n            return;\r\n        }\r\n\r\n        // R√©initialiser tous les overrides utilisateur pour laisser le th√®me prendre le contr√¥le\r\n        VisibilityManager.resetAllUserOverrides();\r\n\r\n        let hiddenCount = 0;\r\n\r\n        // Parcourir toutes les couches enregistr√©es\r\n        GeoLeaf._GeoJSONShared.state.layers.forEach((layerData, layerId) => {\r\n            const changed = VisibilityManager.setVisibility(\r\n                layerId,\r\n                false,\r\n                VisibilityManager.VisibilitySource.THEME\r\n            );\r\n\r\n            if (changed) {\r\n                hiddenCount++;\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Applique la configuration d'une couche (visible/masqu√©e + style)\r\n     * @param {Object} layerConfig - Configuration { id, visible, style }\r\n     * @returns {Promise<void>}\r\n     * @private\r\n     */\r\n    TA._applyLayerConfig = function (layerConfig) {\r\n        if (!layerConfig?.id) {\r\n            return Promise.resolve();\r\n        }\r\n\r\n        const layerId = layerConfig.id;\r\n        const visible = layerConfig.visible !== false;\r\n        const styleId = layerConfig.style ? String(layerConfig.style).trim() : undefined;\r\n\r\n        // R√©cup√©rer la couche depuis le registre\r\n        let layerData = GeoLeaf._GeoJSONShared?.state?.layers?.get(layerId);\r\n\r\n        // Si la couche n'existe pas, essayer de la charger automatiquement\r\n        if (!layerData) {\r\n            return TA._loadLayerFromProfile(layerId).then((loadedLayer) => {\r\n                if (loadedLayer) {\r\n                    return TA._setLayerVisibilityAndStyle(layerId, visible, styleId);\r\n                } else {\r\n                    return TA._scheduleLayerConfig(layerId, visible, styleId);\r\n                }\r\n            });\r\n        }\r\n\r\n        // La couche existe d√©j√†, appliquer directement la visibilit√©\r\n        return TA._setLayerVisibilityAndStyle(layerId, visible, styleId);\r\n    };\r\n\r\n    /**\r\n     * D√©finit la visibilit√© et le style d'une couche\r\n     * @param {string} layerId - ID de la couche\r\n     * @param {boolean} visible - Visibilit√© souhait√©e\r\n     * @param {string} styleId - ID du style √† appliquer\r\n     * @returns {Promise<void>}\r\n     * @private\r\n     */\r\n    TA._setLayerVisibilityAndStyle = function (layerId, visible, styleId) {\r\n        const layerData = GeoLeaf._GeoJSONShared?.state?.layers?.get(layerId);\r\n        if (!layerData) {\r\n            return Promise.resolve();\r\n        }\r\n\r\n        const VisibilityManager = GeoLeaf._LayerVisibilityManager;\r\n        if (!VisibilityManager) {\r\n            return Promise.resolve();\r\n        }\r\n\r\n        if (visible) {\r\n            // Utiliser le gestionnaire centralis√© avec source THEME\r\n            VisibilityManager.setVisibility(\r\n                layerId,\r\n                true,\r\n                VisibilityManager.VisibilitySource.THEME\r\n            );\r\n\r\n            // Appliquer le style si sp√©cifi√©\r\n            if (styleId && GeoLeaf._GeoJSONLayerManager?.setLayerStyle) {\r\n                const availableStyles = layerData.config?.styles?.available || [];\r\n                let effectiveStyleId = styleId;\r\n                let styleExists = availableStyles.some(s => s.id === styleId);\r\n\r\n                // Fallback: si 'default' n'existe pas, essayer 'd√©faut' (et vice-versa)\r\n                if (!styleExists) {\r\n                    const fallbackMap = {\r\n                        'default': 'd√©faut',\r\n                        'd√©faut': 'default'\r\n                    };\r\n                    const fallbackStyleId = fallbackMap[styleId];\r\n                    if (fallbackStyleId) {\r\n                        const fallbackExists = availableStyles.some(s => s.id === fallbackStyleId);\r\n                        if (fallbackExists) {\r\n                            effectiveStyleId = fallbackStyleId;\r\n                            styleExists = true;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (styleExists) {\r\n                    const styleFile = availableStyles.find(s => s.id === effectiveStyleId)?.file;\r\n                    if (styleFile) {\r\n                        let profileId = 'default';\r\n                        if (GeoLeaf.Config && typeof GeoLeaf.Config.getActiveProfile === 'function') {\r\n                            const activeProfile = GeoLeaf.Config.getActiveProfile();\r\n                            profileId = activeProfile?.id || 'default';\r\n                        }\r\n\r\n                        const layerDirectory = layerData._layerDirectory || layerId;\r\n\r\n                        const StyleLoader = GeoLeaf._StyleLoader;\r\n                        if (!StyleLoader) {\r\n                            if (Log) Log.error(`[ThemeApplier] GeoLeaf._StyleLoader non disponible`);\r\n                            return Promise.resolve();\r\n                        }\r\n\r\n                        return StyleLoader.loadAndValidateStyle(\r\n                            profileId,\r\n                            layerId,\r\n                            effectiveStyleId,\r\n                            styleFile,\r\n                            `layers/${layerDirectory}`\r\n                        )\r\n                            .then(result => {\r\n                                const styleConfig = result.styleData;\r\n                                GeoLeaf._GeoJSONLayerManager.setLayerStyle(layerId, styleConfig);\r\n\r\n                                // Stocker currentStyle pour les labels\r\n                                const layerDataForStyle = GeoLeaf._GeoJSONShared?.state?.layers?.get(layerId);\r\n                                if (layerDataForStyle) {\r\n                                    layerDataForStyle.currentStyle = styleConfig;\r\n                                }\r\n\r\n                                // Initialiser les labels si configur√©s\r\n                                if (GeoLeaf.Labels && typeof GeoLeaf.Labels.initializeLayerLabels === 'function') {\r\n                                    GeoLeaf.Labels.initializeLayerLabels(layerId);\r\n                                }\r\n\r\n                                // Mettre √† jour l'√©tat du bouton des labels\r\n                                if (GeoLeaf._LabelButtonManager) {\r\n                                    GeoLeaf._LabelButtonManager.syncImmediate(layerId);\r\n                                }\r\n\r\n                                // Synchroniser l'UI du Layer Manager\r\n                                if (GeoLeaf.LayerManager && typeof GeoLeaf.LayerManager.refresh === 'function') {\r\n                                    GeoLeaf.LayerManager.refresh();\r\n                                }\r\n\r\n                                // Mettre √† jour le style actuel dans le s√©lecteur\r\n                                if (GeoLeaf._LayerManagerStyleSelector) {\r\n                                    GeoLeaf._LayerManagerStyleSelector.setCurrentStyle(layerId, styleId);\r\n                                }\r\n\r\n                                // Rafra√Æchir le s√©lecteur dans l'UI\r\n                                TA._updateStyleSelector(layerId, styleId);\r\n\r\n                                // Charger la l√©gende correspondante\r\n                                TA._loadLegendForStyle(layerId, styleId);\r\n\r\n                                return result;\r\n                            })\r\n                            .catch(err => {\r\n                                // Silencieux ‚Äî erreur d√©j√† logu√©e par StyleLoader\r\n                            });\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            // Masquer la couche avec source THEME\r\n            VisibilityManager.setVisibility(\r\n                layerId,\r\n                false,\r\n                VisibilityManager.VisibilitySource.THEME\r\n            );\r\n\r\n            // D√©sactiver les labels et mettre √† jour le bouton\r\n            if (GeoLeaf.Labels) {\r\n                GeoLeaf.Labels.disableLabels(layerId);\r\n            }\r\n            if (GeoLeaf._LabelButtonManager) {\r\n                GeoLeaf._LabelButtonManager.syncImmediate(layerId);\r\n            }\r\n        }\r\n\r\n        return Promise.resolve();\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf Theme Applier - Deferred\r\n * Chargement diff√©r√© de couches, r√©solution de profil, gestion du cache\r\n *\r\n * @module themes/theme-applier/deferred\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n\r\n    const TA = GeoLeaf._ThemeApplier;\r\n\r\n    /**\r\n     * Programme l'application d'une configuration de couche pour plus tard\r\n     * @param {string} layerId - ID de la couche\r\n     * @param {boolean} visible - Visibilit√© souhait√©e\r\n     * @param {string} styleId - ID du style √† appliquer\r\n     * @returns {Promise<void>}\r\n     * @private\r\n     */\r\n    TA._scheduleLayerConfig = function (layerId, visible, styleId) {\r\n        if (!TA._pendingLayerConfigs) {\r\n            TA._pendingLayerConfigs = new Map();\r\n        }\r\n\r\n        TA._pendingLayerConfigs.set(layerId, { visible, styleId });\r\n\r\n        // Programmer une v√©rification p√©riodique\r\n        TA._schedulePendingCheck();\r\n\r\n        return Promise.resolve();\r\n    };\r\n\r\n    /**\r\n     * Planifie une v√©rification des couches en attente\r\n     * @private\r\n     */\r\n    TA._schedulePendingCheck = function () {\r\n        if (TA._pendingCheckTimer) {\r\n            return; // D√©j√† planifi√©\r\n        }\r\n\r\n        TA._pendingCheckTimer = setTimeout(() => {\r\n            TA._checkPendingLayerConfigs();\r\n            TA._pendingCheckTimer = null;\r\n        }, 1000);\r\n    };\r\n\r\n    /**\r\n     * V√©rifie et applique les configurations de couches en attente\r\n     * @private\r\n     */\r\n    TA._checkPendingLayerConfigs = function () {\r\n        if (!TA._pendingLayerConfigs || TA._pendingLayerConfigs.size === 0) {\r\n            return;\r\n        }\r\n\r\n        const appliedLayers = [];\r\n\r\n        for (const [layerId, config] of TA._pendingLayerConfigs) {\r\n            const layerData = GeoLeaf._GeoJSONShared?.state?.layers?.get(layerId);\r\n            if (layerData) {\r\n                TA._setLayerVisibilityAndStyle(layerId, config.visible, config.styleId);\r\n                appliedLayers.push(layerId);\r\n            }\r\n        }\r\n\r\n        // Supprimer les couches trait√©es\r\n        appliedLayers.forEach(layerId => {\r\n            TA._pendingLayerConfigs.delete(layerId);\r\n        });\r\n\r\n        // S'il reste des couches en attente, programmer une nouvelle v√©rification\r\n        if (TA._pendingLayerConfigs.size > 0) {\r\n            TA._schedulePendingCheck();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Charge une couche depuis le profil actif (avec tol√©rance aux erreurs)\r\n     * @param {string} layerId - ID de la couche √† charger\r\n     * @returns {Promise<Object|null>} - Couche charg√©e ou null si erreur\r\n     * @private\r\n     */\r\n    TA._loadLayerFromProfile = async function (layerId) {\r\n        const Config = GeoLeaf.Config;\r\n        if (!Config || typeof Config.getActiveProfile !== 'function') {\r\n            return null;\r\n        }\r\n\r\n        try {\r\n            const activeProfile = Config.getActiveProfile();\r\n\r\n            if (!activeProfile || typeof activeProfile !== 'object') {\r\n                return null;\r\n            }\r\n\r\n            const profileId = activeProfile.id || null;\r\n\r\n            // Get layers config from profile\r\n            let profileLayersConfig = [];\r\n            if (Array.isArray(activeProfile.geojsonLayers)) {\r\n                profileLayersConfig = activeProfile.geojsonLayers;\r\n            } else if (activeProfile.geojson && Array.isArray(activeProfile.geojson.layers)) {\r\n                profileLayersConfig = activeProfile.geojson.layers;\r\n            } else if (Array.isArray(activeProfile.layers)) {\r\n                profileLayersConfig = activeProfile.layers;\r\n            } else if (Array.isArray(activeProfile.Layers)) {\r\n                profileLayersConfig = activeProfile.Layers;\r\n            }\r\n\r\n            if (!Array.isArray(profileLayersConfig) || profileLayersConfig.length === 0) {\r\n                return null;\r\n            }\r\n\r\n            const layerConfig = profileLayersConfig.find(config => config.id === layerId);\r\n\r\n            if (!layerConfig) {\r\n                return null;\r\n            }\r\n\r\n            const dataUrl = TA._resolveDataFilePath(layerConfig);\r\n\r\n            if (!dataUrl) {\r\n                return null;\r\n            }\r\n\r\n            const layerLabel = layerConfig.label || layerId;\r\n            const baseOptions = {};\r\n\r\n            const loader = GeoLeaf._GeoJSONLoader?._loadSingleLayer;\r\n\r\n            if (!loader) {\r\n                return null;\r\n            }\r\n\r\n            // Tentative cache avant r√©seau\r\n            let cachedData = null;\r\n            if (GeoLeaf.ThemeCache?.get) {\r\n                cachedData = await GeoLeaf.ThemeCache.get(layerId, profileId);\r\n            }\r\n\r\n            // Transmettre TOUTE la configuration de la couche\r\n            const layerDef = {\r\n                ...layerConfig,\r\n                url: dataUrl,\r\n                type: layerConfig.geometryType || layerConfig.type || 'geojson',\r\n                _profileId: profileId,\r\n                _layerDirectory: layerConfig._layerDirectory\r\n            };\r\n\r\n            // Normaliser les champs popup/tooltip/sidepanel\r\n            const normalizedDef = { ...layerDef };\r\n\r\n            if (layerDef.popup && layerDef.popup.fields) {\r\n                normalizedDef.popupFields = layerDef.popup.fields;\r\n            }\r\n\r\n            if (layerDef.tooltip && layerDef.tooltip.fields) {\r\n                normalizedDef.tooltipFields = layerDef.tooltip.fields;\r\n            }\r\n\r\n            if (layerDef.sidepanel && layerDef.sidepanel.detailLayout) {\r\n                normalizedDef.sidepanelFields = layerDef.sidepanel.detailLayout;\r\n            }\r\n\r\n            if (cachedData) {\r\n                normalizedDef._cachedData = cachedData;\r\n            }\r\n\r\n            try {\r\n                const layer = await loader.call(GeoLeaf._GeoJSONLoader, layerId, layerLabel, normalizedDef, baseOptions);\r\n                // Rafra√Æchir le cache pour prolonger la dur√©e de vie\r\n                if (cachedData && GeoLeaf.ThemeCache?.store) {\r\n                    GeoLeaf.ThemeCache.store(layerId, profileId, cachedData);\r\n                }\r\n                return layer;\r\n            } catch (err) {\r\n                return null;\r\n            }\r\n        } catch (error) {\r\n            return null;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * R√©sout le chemin du fichier de donn√©es d'une couche\r\n     * @param {Object} layerConfig - Configuration de la couche\r\n     * @returns {string|null} - URL compl√®te du fichier de donn√©es\r\n     * @private\r\n     */\r\n    TA._resolveDataFilePath = function (layerConfig) {\r\n        if (!layerConfig.dataFile || !layerConfig._layerDirectory) {\r\n            return null;\r\n        }\r\n\r\n        const Config = GeoLeaf.Config;\r\n        if (!Config || !Config.getActiveProfile) {\r\n            return null;\r\n        }\r\n\r\n        const activeProfile = Config.getActiveProfile();\r\n        if (!activeProfile) {\r\n            return null;\r\n        }\r\n\r\n        const profileId = activeProfile.id;\r\n        const profileBasePath = TA._getProfilesBasePath(activeProfile);\r\n\r\n        return `${profileBasePath}/${profileId}/${layerConfig._layerDirectory}/${layerConfig.dataFile}`;\r\n    };\r\n\r\n    /**\r\n     * R√©sout le chemin de base des profils\r\n     * @private\r\n     */\r\n    TA._getProfilesBasePath = function (activeProfile) {\r\n        const Config = GeoLeaf.Config;\r\n        const configured = Config?.get?.(\"data.profilesBasePath\");\r\n\r\n        if (typeof configured === \"string\" && configured.trim().length > 0) {\r\n            return TA._normalizeBasePath(configured);\r\n        }\r\n\r\n        if (activeProfile && typeof activeProfile.profilesBasePath === \"string\") {\r\n            return TA._normalizeBasePath(activeProfile.profilesBasePath);\r\n        }\r\n\r\n        return \"profiles\";\r\n    };\r\n\r\n    /**\r\n     * Normalise un chemin (trim + supprime le / final)\r\n     * @private\r\n     */\r\n    TA._normalizeBasePath = function (path) {\r\n        const trimmed = path.trim();\r\n        return trimmed.endsWith(\"/\") ? trimmed.slice(0, -1) : trimmed;\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf Theme Applier - UI Sync\r\n * Synchronisation de l'UI : s√©lecteur de style, l√©gende, fitBounds\r\n *\r\n * @module themes/theme-applier/ui-sync\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n\r\n    const TA = GeoLeaf._ThemeApplier;\r\n\r\n    /**\r\n     * Met √† jour le s√©lecteur de style dans l'UI\r\n     * @param {string} layerId - Identifiant de la couche\r\n     * @param {string} styleId - Identifiant du style\r\n     * @private\r\n     */\r\n    TA._updateStyleSelector = function (layerId, styleId) {\r\n        const selectId = \"style-selector-\" + layerId;\r\n        const select = document.getElementById(selectId);\r\n\r\n        if (select) {\r\n            select.value = styleId;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Charge la l√©gende correspondant au style appliqu√©\r\n     * @param {string} layerId - ID de la couche\r\n     * @param {string} styleId - ID du style\r\n     * @private\r\n     */\r\n    TA._loadLegendForStyle = function (layerId, styleId) {\r\n        if (!GeoLeaf.Legend || typeof GeoLeaf.Legend.loadLayerLegend !== \"function\") {\r\n            return;\r\n        }\r\n\r\n        // R√©cup√©rer les informations de la couche\r\n        const layersMap = GeoLeaf._GeoJSONShared?.state?.layers;\r\n        const layerInfo = layersMap instanceof Map ? layersMap.get(layerId) : layersMap?.[layerId];\r\n\r\n        if (!layerInfo || !layerInfo.config) {\r\n            return;\r\n        }\r\n\r\n        // Utiliser la nouvelle API qui g√©n√®re la l√©gende depuis le style\r\n        GeoLeaf.Legend.loadLayerLegend(layerId, styleId, layerInfo.config);\r\n    };\r\n\r\n    /**\r\n     * Zoom sur l'emprise de toutes les couches charg√©es\r\n     * @private\r\n     */\r\n    TA._fitBoundsOnAllLayers = function () {\r\n        const map = GeoLeaf.Core?.getMap();\r\n        if (!map) {\r\n            return;\r\n        }\r\n\r\n        // Mettre √† jour la progression (99%)\r\n        if (window._glLoadingScreen && typeof window._glLoadingScreen.updateProgress === 'function') {\r\n            window._glLoadingScreen.updateProgress(99);\r\n        }\r\n\r\n        // Cr√©er un groupe temporaire avec toutes les couches pour calculer les bounds\r\n        const tempGroup = global.L.featureGroup();\r\n        let layerCount = 0;\r\n\r\n        // Ajouter les couches GeoJSON\r\n        if (GeoLeaf._GeoJSONShared?.state?.layers) {\r\n            GeoLeaf._GeoJSONShared.state.layers.forEach((layerData, layerId) => {\r\n                if (layerData.layer) {\r\n                    try {\r\n                        tempGroup.addLayer(layerData.layer);\r\n                        layerCount++;\r\n                    } catch (e) {\r\n                        // Silencieux\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        // Ajouter les POI s'ils existent\r\n        if (GeoLeaf._POIShared?.state?.markerLayer) {\r\n            try {\r\n                tempGroup.addLayer(GeoLeaf._POIShared.state.markerLayer);\r\n                layerCount++;\r\n            } catch (e) {\r\n                // Silencieux\r\n            }\r\n        }\r\n\r\n        // Ajouter les Routes s'elles existent\r\n        if (GeoLeaf.Route?.getLayerGroup) {\r\n            try {\r\n                const routeGroup = GeoLeaf.Route.getLayerGroup();\r\n                if (routeGroup) {\r\n                    tempGroup.addLayer(routeGroup);\r\n                    layerCount++;\r\n                }\r\n            } catch (e) {\r\n                // Silencieux\r\n            }\r\n        }\r\n\r\n        // Zoomer sur l'emprise\r\n        if (layerCount > 0) {\r\n            const bounds = tempGroup.getBounds();\r\n            if (bounds.isValid()) {\r\n                // Afficher la carte AVANT le fitBounds pour √©viter l'√©cran noir\r\n                const mapContainer = document.getElementById('geoleaf-map') ||\r\n                                   document.querySelector('.leaflet-container')?.parentElement;\r\n                if (mapContainer) {\r\n                    mapContainer.style.opacity = '1';\r\n                }\r\n\r\n                map.fitBounds(bounds, { maxZoom: 12, padding: [50, 50], animate: false });\r\n\r\n                // Attendre que les tuiles soient charg√©es avant de fermer le spinner\r\n                setTimeout(() => {\r\n                    try {\r\n                        const event = new CustomEvent('geoleaf:map:ready', { detail: { time: Date.now() } });\r\n                        document.dispatchEvent(event);\r\n                    } catch (e) {\r\n                        // fallback\r\n                    }\r\n                }, 800);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Synchronise l'√©tat de visibilit√© de toutes les couches dans la l√©gende\r\n     * @private\r\n     */\r\n    TA._syncLegendVisibility = function () {\r\n        if (!GeoLeaf.Legend || typeof GeoLeaf.Legend.setLayerVisibility !== \"function\") {\r\n            return;\r\n        }\r\n\r\n        if (!GeoLeaf._GeoJSONShared?.state?.layers) {\r\n            return;\r\n        }\r\n\r\n        const VisibilityManager = GeoLeaf._LayerVisibilityManager;\r\n        if (!VisibilityManager) {\r\n            return;\r\n        }\r\n\r\n        // Parcourir toutes les couches et synchroniser leur √©tat\r\n        GeoLeaf._GeoJSONShared.state.layers.forEach((layerData, layerId) => {\r\n            const visState = VisibilityManager.getVisibilityState(layerId);\r\n            const isVisible = visState ? visState.current : layerData.visible;\r\n            GeoLeaf.Legend.setLayerVisibility(layerId, isVisible);\r\n        });\r\n    };\r\n\r\n})(window);\r\n","/**\r\n * Module Theme Selector\r\n * S√©lecteur de th√®mes global (principaux + secondaires)\r\n *\r\n * D√âPENDANCES:\r\n * - Leaflet (L.DomUtil, L.DomEvent)\r\n * - GeoLeaf.Log (optionnel)\r\n * - GeoLeaf._ThemeLoader\r\n * - GeoLeaf._ThemeApplier\r\n * - GeoLeaf.Core.getActiveProfile()\r\n *\r\n * EXPOSE:\r\n * - GeoLeaf.ThemeSelector\r\n *\r\n * @module ThemeSelector\r\n * @public\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = global.GeoLeaf = global.GeoLeaf || {};\r\n    const Log = GeoLeaf.Log;\r\n\r\n    // Helper pour utiliser createElement unifi√©\r\n    const $create = (tag, props, ...children) => {\r\n        return GeoLeaf.Utils && GeoLeaf.Utils.createElement\r\n            ? GeoLeaf.Utils.createElement(tag, props, ...children)\r\n            : document.createElement(tag);\r\n    };\r\n\r\n    /**\r\n     * √âtat du module\r\n     */\r\n    const _state = {\r\n        initialized: false,\r\n        profileId: null,\r\n        config: null,\r\n        themes: [],\r\n        primaryThemes: [],\r\n        secondaryThemes: [],\r\n        currentTheme: null,\r\n        // R√©f√©rences UI\r\n        primaryContainer: null,\r\n        secondaryContainer: null,\r\n        dropdown: null,\r\n        // Event listener cleanup tracking\r\n        _eventCleanups: []\r\n    };\r\n\r\n    /**\r\n     * Module Theme Selector\r\n     * @namespace ThemeSelector\r\n     * @public\r\n     */\r\n    const ThemeSelector = {\r\n        /**\r\n         * Initialise le s√©lecteur de th√®mes\r\n         * @param {Object} options - Options d'initialisation\r\n         * @param {string} options.profileId - ID du profil\r\n         * @param {HTMLElement} [options.primaryContainer] - Conteneur pour boutons principaux\r\n         * @param {HTMLElement} [options.secondaryContainer] - Conteneur pour dropdown secondaire\r\n         * @returns {Promise<void>}\r\n         */\r\n        init(options) {\r\n            if (!options || !options.profileId) {\r\n                return Promise.reject(new Error(\"profileId requis pour ThemeSelector.init\"));\r\n            }\r\n\r\n            if (Log) Log.debug(\"[ThemeSelector] Initialisation pour profil:\", options.profileId);\r\n\r\n            _state.profileId = options.profileId;\r\n            _state.primaryContainer = options.primaryContainer || null;\r\n            _state.secondaryContainer = options.secondaryContainer || null;\r\n\r\n            // Charger la configuration des th√®mes\r\n            if (!GeoLeaf._ThemeLoader) {\r\n                return Promise.reject(new Error(\"Module _ThemeLoader non disponible\"));\r\n            }\r\n\r\n            return GeoLeaf._ThemeLoader.loadThemesConfig(options.profileId)\r\n                .then((themesConfig) => {\r\n                    _state.config = themesConfig.config;\r\n                    _state.themes = themesConfig.themes;\r\n                    _state.primaryThemes = themesConfig.themes.filter((t) => t.type === \"primary\");\r\n                    _state.secondaryThemes = themesConfig.themes.filter((t) => t.type === \"secondary\");\r\n                    _state.currentTheme = themesConfig.defaultTheme;\r\n\r\n                    if (Log) Log.debug(\"[ThemeSelector] Configuration charg√©e:\", {\r\n                        total: _state.themes.length,\r\n                        primary: _state.primaryThemes.length,\r\n                        secondary: _state.secondaryThemes.length\r\n                    });\r\n\r\n                    // Cr√©er l'UI\r\n                    this._createUI();\r\n\r\n                    // Marquer comme initialis√© AVANT d'appliquer le th√®me\r\n                    _state.initialized = true;\r\n\r\n                    // Appliquer le th√®me par d√©faut\r\n                    return this.setTheme(_state.currentTheme);\r\n                })\r\n                .then(() => {\r\n                    if (Log) Log.debug(\"[ThemeSelector] Initialisation termin√©e\");\r\n                    // √âmettre l'√©v√©nement de fin de chargement des th√®mes\r\n                    const event = new CustomEvent('geoleaf:themes:ready', { detail: { time: Date.now() } });\r\n                    document.dispatchEvent(event);\r\n                })\r\n                .catch((err) => {\r\n                    if (Log) Log.warn(\"[ThemeSelector] Erreur initialisation:\", err.message);\r\n                    // √âmettre l'√©v√©nement m√™me en cas d'erreur\r\n                    const event = new CustomEvent('geoleaf:themes:ready', { detail: { time: Date.now(), error: err.message } });\r\n                    document.dispatchEvent(event);\r\n                    throw err;\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Cr√©e l'interface utilisateur\r\n         * @private\r\n         */\r\n        _createUI() {\r\n            // V√©rifier si le s√©lecteur de th√®mes est activ√© globalement\r\n            const uiConfig = GeoLeaf.Config && GeoLeaf.Config.get ? GeoLeaf.Config.get('ui') : null;\r\n            const showThemeSelector = uiConfig ? (uiConfig.showThemeSelector === true) : false;\r\n\r\n            if (!showThemeSelector) {\r\n                if (Log) Log.debug(\"[ThemeSelector] showThemeSelector est false, UI non cr√©√©e\");\r\n                return;\r\n            }\r\n\r\n            // Cr√©er l'UI des th√®mes principaux\r\n            if (_state.config.primaryThemes.enabled && _state.primaryContainer) {\r\n                this._createPrimaryUI();\r\n            }\r\n\r\n            // Cr√©er l'UI des th√®mes secondaires\r\n            if (_state.config.secondaryThemes.enabled && _state.secondaryContainer) {\r\n                this._createSecondaryUI();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Cr√©e l'UI des th√®mes principaux (boutons)\r\n         * @private\r\n         */\r\n        _createPrimaryUI() {\r\n            if (!_state.primaryContainer) {\r\n                return;\r\n            }\r\n\r\n            // Vider le conteneur\r\n            GeoLeaf.DOMSecurity.clearElementFast(_state.primaryContainer);\r\n\r\n            // Ajouter la classe CSS\r\n            _state.primaryContainer.classList.add(\"gl-theme-selector-primary\");\r\n\r\n            // Cr√©er un bouton pour chaque th√®me principal\r\n            _state.primaryThemes.forEach((theme) => {\r\n                const btn = global.L.DomUtil.create(\"button\", \"gl-theme-btn\", _state.primaryContainer);\r\n                btn.type = \"button\";\r\n                btn.dataset.themeId = theme.id;\r\n                btn.title = theme.description || theme.label;\r\n\r\n                // Contenu du bouton: ic√¥ne + label\r\n                const iconSpan = global.L.DomUtil.create(\"span\", \"gl-theme-btn__icon\", btn);\r\n                iconSpan.textContent = theme.icon || \"üìç\";\r\n\r\n                const labelSpan = global.L.DomUtil.create(\"span\", \"gl-theme-btn__label\", btn);\r\n                labelSpan.textContent = theme.label;\r\n\r\n                // Marquer le th√®me actif\r\n                if (theme.id === _state.currentTheme) {\r\n                    btn.classList.add(\"gl-theme-btn--active\");\r\n                }\r\n\r\n                // Gestionnaire de clic\r\n                this._attachPrimaryButtonHandler(btn, theme);\r\n            });\r\n\r\n            if (Log) Log.debug(\"[ThemeSelector] UI primaire cr√©√©e:\", _state.primaryThemes.length, \"boutons\");\r\n        },\r\n\r\n        /**\r\n         * Attache le gestionnaire de clic sur un bouton de th√®me principal\r\n         * @param {HTMLElement} btn - Bouton\r\n         * @param {Object} theme - Configuration du th√®me\r\n         * @private\r\n         */\r\n        _attachPrimaryButtonHandler(btn, theme) {\r\n            const onClick = (ev) => {\r\n                if (global.L && global.L.DomEvent) {\r\n                    global.L.DomEvent.stopPropagation(ev);\r\n                }\r\n                ev.preventDefault();\r\n\r\n                this.setTheme(theme.id);\r\n            };\r\n\r\n            const events = GeoLeaf.Utils?.events;\r\n            if (global.L && global.L.DomEvent) {\r\n                global.L.DomEvent.on(btn, \"click\", onClick);\r\n                global.L.DomEvent.disableClickPropagation(btn);\r\n                // Store cleanup for L.DomEvent.off\r\n                _state._eventCleanups.push(() => {\r\n                    if (global.L && global.L.DomEvent) {\r\n                        global.L.DomEvent.off(btn, \"click\", onClick);\r\n                    }\r\n                });\r\n            } else if (events) {\r\n                _state._eventCleanups.push(\r\n                    events.on(\r\n                        btn,\r\n                        \"click\",\r\n                        onClick,\r\n                        false,\r\n                        'ThemeSelector.primaryButton'\r\n                    )\r\n                );\r\n            } else {\r\n                btn.addEventListener(\"click\", onClick);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Cr√©e l'UI des th√®mes secondaires (dropdown + boutons prev/next)\r\n         * @private\r\n         */\r\n        _createSecondaryUI() {\r\n            if (!_state.secondaryContainer) {\r\n                if (Log) Log.warn(\"[ThemeSelector] Conteneur secondaire introuvable\");\r\n                return;\r\n            }\r\n\r\n            if (Log) Log.debug(\"[ThemeSelector] Cr√©ation UI secondaire:\", _state.secondaryThemes.length, \"th√®mes\");\r\n            if (Log) Log.debug(\"[ThemeSelector] IDs des th√®mes secondaires:\", _state.secondaryThemes.map(t => t.id));\r\n\r\n            // Vider le conteneur\r\n            GeoLeaf.DOMSecurity.clearElementFast(_state.secondaryContainer);\r\n\r\n            // Ajouter la classe CSS\r\n            _state.secondaryContainer.classList.add(\"gl-theme-selector-secondary\");\r\n\r\n            // Cr√©er le wrapper\r\n            const wrapper = global.L.DomUtil.create(\"div\", \"gl-theme-selector-secondary__wrapper\", _state.secondaryContainer);\r\n\r\n            // Bouton pr√©c√©dent (si activ√©)\r\n            if (_state.config.secondaryThemes.showNavigationButtons) {\r\n                const prevBtn = global.L.DomUtil.create(\"button\", \"gl-theme-nav gl-theme-nav--prev\", wrapper);\r\n                prevBtn.type = \"button\";\r\n                prevBtn.textContent = \"‚óÄ\";\r\n                prevBtn.title = \"Th√®me pr√©c√©dent\";\r\n                this._attachNavButtonHandler(prevBtn, \"prev\");\r\n            }\r\n\r\n            // Dropdown\r\n            const select = global.L.DomUtil.create(\"select\", \"gl-theme-dropdown\", wrapper);\r\n            _state.dropdown = select;\r\n\r\n            // Option placeholder\r\n            const placeholder = $create(\"option\", {\r\n                value: \"\",\r\n                textContent: _state.config.secondaryThemes.placeholder,\r\n                disabled: true\r\n            });\r\n            select.appendChild(placeholder);\r\n\r\n            // Options pour les th√®mes secondaires\r\n            _state.secondaryThemes.forEach((theme) => {\r\n                const opt = $create(\"option\", {\r\n                    value: theme.id,\r\n                    textContent: theme.label\r\n                });\r\n                select.appendChild(opt);\r\n            });\r\n\r\n            // S√©lectionner le th√®me actif si c'est un th√®me secondaire\r\n            const currentIsSecondary = _state.secondaryThemes.some((t) => t.id === _state.currentTheme);\r\n            if (currentIsSecondary) {\r\n                select.value = _state.currentTheme;\r\n            } else {\r\n                select.value = \"\";\r\n            }\r\n\r\n            // Gestionnaire de changement\r\n            this._attachDropdownHandler(select);\r\n\r\n            // Bouton suivant (si activ√©)\r\n            if (_state.config.secondaryThemes.showNavigationButtons) {\r\n                const nextBtn = global.L.DomUtil.create(\"button\", \"gl-theme-nav gl-theme-nav--next\", wrapper);\r\n                nextBtn.type = \"button\";\r\n                nextBtn.textContent = \"‚ñ∂\";\r\n                nextBtn.title = \"Th√®me suivant\";\r\n                this._attachNavButtonHandler(nextBtn, \"next\");\r\n            }\r\n\r\n            if (Log) Log.debug(\"[ThemeSelector] UI secondaire cr√©√©e:\", _state.secondaryThemes.length, \"th√®mes\");\r\n        },\r\n\r\n        /**\r\n         * Attache le gestionnaire de changement sur le dropdown\r\n         * @param {HTMLSelectElement} select - Dropdown\r\n         * @private\r\n         */\r\n        _attachDropdownHandler(select) {\r\n            const onChange = (ev) => {\r\n                if (global.L && global.L.DomEvent) {\r\n                    global.L.DomEvent.stopPropagation(ev);\r\n                }\r\n\r\n                const themeId = select.value;\r\n                if (Log) Log.info(`[ThemeSelector] Dropdown chang√©: ${themeId}`);\r\n\r\n                if (themeId) {\r\n                    this.setTheme(themeId);\r\n                } else {\r\n                    if (Log) Log.warn(\"[ThemeSelector] Dropdown: themeId vide\");\r\n                }\r\n            };\r\n\r\n            const events = GeoLeaf.Utils?.events;\r\n            if (global.L && global.L.DomEvent) {\r\n                global.L.DomEvent.on(select, \"change\", onChange);\r\n                global.L.DomEvent.disableClickPropagation(select);\r\n                // Store cleanup for L.DomEvent.off\r\n                _state._eventCleanups.push(() => {\r\n                    if (global.L && global.L.DomEvent) {\r\n                        global.L.DomEvent.off(select, \"change\", onChange);\r\n                    }\r\n                });\r\n            } else if (events) {\r\n                _state._eventCleanups.push(\r\n                    events.on(\r\n                        select,\r\n                        \"change\",\r\n                        onChange,\r\n                        false,\r\n                        'ThemeSelector.dropdown'\r\n                    )\r\n                );\r\n            } else {\r\n                select.addEventListener(\"change\", onChange);\r\n            }\r\n\r\n            if (Log) Log.debug(\"[ThemeSelector] Gestionnaire dropdown attach√©\");\r\n        },\r\n\r\n        /**\r\n         * Attache le gestionnaire sur un bouton de navigation (prev/next)\r\n         * @param {HTMLElement} btn - Bouton\r\n         * @param {string} direction - \"prev\" | \"next\"\r\n         * @private\r\n         */\r\n        _attachNavButtonHandler(btn, direction) {\r\n            const onClick = (ev) => {\r\n                if (global.L && global.L.DomEvent) {\r\n                    global.L.DomEvent.stopPropagation(ev);\r\n                }\r\n                ev.preventDefault();\r\n\r\n                if (direction === \"next\") {\r\n                    this.nextTheme();\r\n                } else {\r\n                    this.previousTheme();\r\n                }\r\n            };\r\n\r\n            const events = GeoLeaf.Utils?.events;\r\n            if (global.L && global.L.DomEvent) {\r\n                global.L.DomEvent.on(btn, \"click\", onClick);\r\n                global.L.DomEvent.disableClickPropagation(btn);\r\n                // Store cleanup for L.DomEvent.off\r\n                _state._eventCleanups.push(() => {\r\n                    if (global.L && global.L.DomEvent) {\r\n                        global.L.DomEvent.off(btn, \"click\", onClick);\r\n                    }\r\n                });\r\n            } else if (events) {\r\n                _state._eventCleanups.push(\r\n                    events.on(\r\n                        btn,\r\n                        \"click\",\r\n                        onClick,\r\n                        false,\r\n                        'ThemeSelector.navButton'\r\n                    )\r\n                );\r\n            } else {\r\n                btn.addEventListener(\"click\", onClick);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Active un th√®me par son ID\r\n         * @param {string} themeId - ID du th√®me\r\n         * @returns {Promise<void>}\r\n         */\r\n        setTheme(themeId) {\r\n            if (!_state.initialized) {\r\n                return Promise.reject(new Error(\"ThemeSelector non initialis√©\"));\r\n            }\r\n\r\n            const theme = _state.themes.find((t) => t.id === themeId);\r\n            if (!theme) {\r\n                return Promise.reject(new Error(`Th√®me introuvable: ${themeId}`));\r\n            }\r\n\r\n            if (Log) Log.debug(\"[ThemeSelector] setTheme:\", themeId);\r\n\r\n            // Appliquer le th√®me\r\n            if (!GeoLeaf._ThemeApplier) {\r\n                return Promise.reject(new Error(\"Module _ThemeApplier non disponible\"));\r\n            }\r\n\r\n            return GeoLeaf._ThemeApplier.applyTheme(theme)\r\n                .then(() => {\r\n                    _state.currentTheme = themeId;\r\n\r\n                    // Mettre √† jour l'UI\r\n                    this._updateUIState(themeId);\r\n\r\n                    if (Log) Log.debug(\"[ThemeSelector] Th√®me activ√©:\", themeId);\r\n                })\r\n                .catch((err) => {\r\n                    if (Log) Log.warn(\"[ThemeSelector] Erreur activation th√®me:\", err.message);\r\n                    throw err;\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Met √† jour l'√©tat visuel de l'UI apr√®s un changement de th√®me\r\n         * @param {string} themeId - ID du th√®me actif\r\n         * @private\r\n         */\r\n        _updateUIState(themeId) {\r\n            // Mettre √† jour les boutons principaux\r\n            if (_state.primaryContainer) {\r\n                const buttons = _state.primaryContainer.querySelectorAll(\".gl-theme-btn\");\r\n                buttons.forEach((btn) => {\r\n                    if (btn.dataset.themeId === themeId) {\r\n                        btn.classList.add(\"gl-theme-btn--active\");\r\n                    } else {\r\n                        btn.classList.remove(\"gl-theme-btn--active\");\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Mettre √† jour le dropdown\r\n            if (_state.dropdown) {\r\n                const isSecondary = _state.secondaryThemes.some((t) => t.id === themeId);\r\n                if (isSecondary) {\r\n                    _state.dropdown.value = themeId;\r\n                } else {\r\n                    _state.dropdown.value = \"\";\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Active le th√®me secondaire suivant\r\n         */\r\n        nextTheme() {\r\n            if (!_state.initialized || _state.secondaryThemes.length === 0) {\r\n                return;\r\n            }\r\n\r\n            const currentIsSecondary = _state.secondaryThemes.some((t) => t.id === _state.currentTheme);\r\n            let nextIndex = 0;\r\n\r\n            if (currentIsSecondary) {\r\n                const currentIndex = _state.secondaryThemes.findIndex((t) => t.id === _state.currentTheme);\r\n                nextIndex = (currentIndex + 1) % _state.secondaryThemes.length;\r\n            }\r\n\r\n            const nextTheme = _state.secondaryThemes[nextIndex];\r\n            if (nextTheme) {\r\n                this.setTheme(nextTheme.id);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Active le th√®me secondaire pr√©c√©dent\r\n         */\r\n        previousTheme() {\r\n            if (!_state.initialized || _state.secondaryThemes.length === 0) {\r\n                return;\r\n            }\r\n\r\n            const currentIsSecondary = _state.secondaryThemes.some((t) => t.id === _state.currentTheme);\r\n            let prevIndex = _state.secondaryThemes.length - 1;\r\n\r\n            if (currentIsSecondary) {\r\n                const currentIndex = _state.secondaryThemes.findIndex((t) => t.id === _state.currentTheme);\r\n                prevIndex = (currentIndex - 1 + _state.secondaryThemes.length) % _state.secondaryThemes.length;\r\n            }\r\n\r\n            const prevTheme = _state.secondaryThemes[prevIndex];\r\n            if (prevTheme) {\r\n                this.setTheme(prevTheme.id);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * R√©cup√®re le th√®me actuellement actif\r\n         * @returns {string|null}\r\n         */\r\n        getCurrentTheme() {\r\n            return _state.currentTheme;\r\n        },\r\n\r\n        /**\r\n         * R√©cup√®re tous les th√®mes\r\n         * @returns {Array}\r\n         */\r\n        getThemes() {\r\n            return _state.themes;\r\n        },\r\n\r\n        /**\r\n         * R√©cup√®re les th√®mes principaux\r\n         * @returns {Array}\r\n         */\r\n        getPrimaryThemes() {\r\n            return _state.primaryThemes;\r\n        },\r\n\r\n        /**\r\n         * R√©cup√®re les th√®mes secondaires\r\n         * @returns {Array}\r\n         */\r\n        getSecondaryThemes() {\r\n            return _state.secondaryThemes;\r\n        },\r\n\r\n        /**\r\n         * V√©rifie si le module est initialis√©\r\n         * @returns {boolean}\r\n         */\r\n        isInitialized() {\r\n            return _state.initialized;\r\n        },\r\n\r\n        /**\r\n         * Cleanup method for event listeners\r\n         * Call this when destroying the theme selector\r\n         */\r\n        destroy() {\r\n            if (Log) Log.debug(\"[ThemeSelector] Cleaning up event listeners\");\r\n\r\n            if (_state._eventCleanups) {\r\n                _state._eventCleanups.forEach(cleanup => {\r\n                    if (typeof cleanup === 'function') {\r\n                        cleanup();\r\n                    }\r\n                });\r\n                _state._eventCleanups = [];\r\n            }\r\n\r\n            _state.initialized = false;\r\n        }\r\n    };\r\n\r\n    // Exposer dans l'espace de noms\r\n    GeoLeaf.ThemeSelector = ThemeSelector;\r\n\r\n})(window);\r\n","/**\r\n * GeoLeaf Table - Panel Module\r\n * Construction du bottom-sheet drawer pour le tableau\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    GeoLeaf._TablePanel = GeoLeaf._TablePanel || {};\r\n    GeoLeaf._TablePanel._eventCleanups = [];\r\n\r\n    /**\r\n     * Cr√©e le conteneur principal du tableau (bottom-sheet)\r\n     * @param {L.Map} map - Instance de la carte Leaflet\r\n     * @param {Object} config - Configuration du tableau\r\n     * @returns {HTMLElement} Conteneur du tableau\r\n     */\r\n    GeoLeaf._TablePanel.create = function (map, config) {\r\n        // V√©rifier si le conteneur existe d√©j√†\r\n        let container = document.querySelector(\".gl-table-panel\");\r\n        if (container) {\r\n            Log.debug(\"[TablePanel] Conteneur existant r√©utilis√©\");\r\n            return container;\r\n        }\r\n\r\n        // Cr√©er le conteneur principal\r\n        container = document.createElement(\"div\");\r\n        container.className = \"gl-table-panel\";\r\n        container.style.height = config.defaultHeight || \"40%\";\r\n\r\n        // Ajouter la barre de redimensionnement si resizable\r\n        if (config.resizable) {\r\n            const resizeHandle = createResizeHandle(container, config);\r\n            container.appendChild(resizeHandle);\r\n        }\r\n\r\n        // Cr√©er la barre d'outils (header)\r\n        const toolbar = createToolbar(map, config);\r\n        container.appendChild(toolbar);\r\n\r\n        // Cr√©er le wrapper du tableau avec scroll\r\n        const tableWrapper = document.createElement(\"div\");\r\n        tableWrapper.className = \"gl-table-panel__wrapper\";\r\n        container.appendChild(tableWrapper);\r\n\r\n        // Cr√©er le tableau vide (sera rempli par le renderer)\r\n        const table = document.createElement(\"table\");\r\n        table.className = \"gl-table-panel__table\";\r\n        tableWrapper.appendChild(table);\r\n\r\n        // Ajouter au body\r\n        document.body.appendChild(container);\r\n\r\n        // Cr√©er le bouton flottant pour afficher le tableau (quand masqu√©)\r\n        createFloatingShowButton();\r\n\r\n        Log.info(\"[TablePanel] Panneau cr√©√© avec succ√®s\");\r\n        return container;\r\n    };\r\n\r\n    /**\r\n     * Cr√©e la barre de redimensionnement\r\n     * @param {HTMLElement} container - Conteneur du tableau\r\n     * @param {Object} config - Configuration\r\n     * @returns {HTMLElement}\r\n     * @private\r\n     */\r\n    function createResizeHandle(container, config) {\r\n        const handle = document.createElement(\"div\");\r\n        handle.className = \"gl-table-panel__resize-handle\";\r\n        const resizeBar = document.createElement(\"div\");\r\n        resizeBar.className = \"gl-table-panel__resize-bar\";\r\n        handle.appendChild(resizeBar);\r\n\r\n        let isResizing = false;\r\n        let startY = 0;\r\n        let startHeight = 0;\r\n\r\n        const events = GeoLeaf.Utils?.events;\r\n\r\n        const mouseDownHandler = (e) => {\r\n            isResizing = true;\r\n            startY = e.clientY;\r\n            startHeight = container.offsetHeight;\r\n            document.body.style.cursor = \"ns-resize\";\r\n            document.body.style.userSelect = \"none\";\r\n            e.preventDefault();\r\n        };\r\n\r\n        const mouseMoveHandler = (e) => {\r\n            if (!isResizing) return;\r\n            const delta = startY - e.clientY;\r\n            let newHeight = startHeight + delta;\r\n            const viewportHeight = window.innerHeight;\r\n            const minHeightPx = parseHeight(config.minHeight || \"20%\", viewportHeight);\r\n            const maxHeightPx = parseHeight(config.maxHeight || \"80%\", viewportHeight);\r\n            newHeight = Math.max(minHeightPx, Math.min(maxHeightPx, newHeight));\r\n            container.style.height = newHeight + \"px\";\r\n        };\r\n\r\n        const mouseUpHandler = () => {\r\n            if (isResizing) {\r\n                isResizing = false;\r\n                document.body.style.cursor = \"\";\r\n                document.body.style.userSelect = \"\";\r\n            }\r\n        };\r\n\r\n        if (events) {\r\n            GeoLeaf._TablePanel._eventCleanups.push(\r\n                events.on(handle, \"mousedown\", mouseDownHandler, false, 'TablePanel.resizeMouseDown')\r\n            );\r\n            GeoLeaf._TablePanel._eventCleanups.push(\r\n                events.on(document, \"mousemove\", mouseMoveHandler, false, 'TablePanel.resizeMouseMove')\r\n            );\r\n            GeoLeaf._TablePanel._eventCleanups.push(\r\n                events.on(document, \"mouseup\", mouseUpHandler, false, 'TablePanel.resizeMouseUp')\r\n            );\r\n        } else {\r\n            handle.addEventListener(\"mousedown\", mouseDownHandler);\r\n            document.addEventListener(\"mousemove\", mouseMoveHandler);\r\n            document.addEventListener(\"mouseup\", mouseUpHandler);\r\n        }\r\n\r\n        return handle;\r\n    }\r\n\r\n    /**\r\n     * Parse une valeur de hauteur (%, px, vh) en pixels\r\n     * @param {string} value - Valeur √† parser (\"40%\", \"300px\", \"50vh\")\r\n     * @param {number} referenceHeight - Hauteur de r√©f√©rence pour les %\r\n     * @returns {number} Hauteur en pixels\r\n     * @private\r\n     */\r\n    function parseHeight(value, referenceHeight) {\r\n        if (typeof value === \"number\") return value;\r\n        if (typeof value !== \"string\") return 300;\r\n\r\n        if (value.endsWith(\"%\")) {\r\n            const percent = parseFloat(value);\r\n            return (referenceHeight * percent) / 100;\r\n        } else if (value.endsWith(\"px\")) {\r\n            return parseFloat(value);\r\n        } else if (value.endsWith(\"vh\")) {\r\n            const vh = parseFloat(value);\r\n            return (window.innerHeight * vh) / 100;\r\n        }\r\n        return 300; // D√©faut\r\n    }\r\n\r\n    /**\r\n     * Cr√©e la barre d'outils du tableau\r\n     * @param {L.Map} map - Instance de la carte\r\n     * @param {Object} config - Configuration\r\n     * @returns {HTMLElement}\r\n     * @private\r\n     */\r\n    function createToolbar(map, config) {\r\n        const toolbar = document.createElement(\"div\");\r\n        toolbar.className = \"gl-table-panel__toolbar\";\r\n\r\n        // S√©lecteur de couche\r\n        const layerSelect = createLayerSelector();\r\n        toolbar.appendChild(layerSelect);\r\n\r\n        // Champ de recherche\r\n        const searchInput = createSearchInput();\r\n        toolbar.appendChild(searchInput);\r\n\r\n        // Bouton Zoom sur la s√©lection\r\n        const zoomButton = createButton(\"Zoom sur s√©lection\", \"zoom\", () => {\r\n            if (GeoLeaf.Table && typeof GeoLeaf.Table.zoomToSelection === \"function\") {\r\n                GeoLeaf.Table.zoomToSelection();\r\n            }\r\n        });\r\n        zoomButton.disabled = true;\r\n        zoomButton.setAttribute(\"data-table-btn\", \"zoom\");\r\n        toolbar.appendChild(zoomButton);\r\n\r\n        // Bouton Surbrillance\r\n        const highlightButton = createButton(\"Surbrillance\", \"highlight\", () => {\r\n            const isActive = highlightButton.classList.toggle(\"is-active\");\r\n            if (GeoLeaf.Table && typeof GeoLeaf.Table.highlightSelection === \"function\") {\r\n                GeoLeaf.Table.highlightSelection(isActive);\r\n            }\r\n        });\r\n        highlightButton.disabled = true;\r\n        highlightButton.setAttribute(\"data-table-btn\", \"highlight\");\r\n        toolbar.appendChild(highlightButton);\r\n\r\n        // Bouton Export (si activ√©)\r\n        if (config.enableExportButton) {\r\n            const exportButton = createButton(\"Exporter\", \"export\", () => {\r\n                if (GeoLeaf.Table && typeof GeoLeaf.Table.exportSelection === \"function\") {\r\n                    GeoLeaf.Table.exportSelection();\r\n                }\r\n            });\r\n            exportButton.disabled = true;\r\n            exportButton.setAttribute(\"data-table-btn\", \"export\");\r\n            toolbar.appendChild(exportButton);\r\n        }\r\n\r\n        // Spacer pour pousser le bouton toggle √† droite\r\n        const spacer = document.createElement(\"div\");\r\n        spacer.style.flex = \"1\";\r\n        toolbar.appendChild(spacer);\r\n\r\n        // Bouton toggle (masquer/afficher le tableau)\r\n        const toggleBtn = createToggleButton();\r\n        toolbar.appendChild(toggleBtn);\r\n\r\n        return toolbar;\r\n    }\r\n\r\n    /**\r\n     * Cr√©e le s√©lecteur de couche\r\n     * @returns {HTMLElement}\r\n     * @private\r\n     */\r\n    function createLayerSelector() {\r\n        const wrapper = document.createElement(\"div\");\r\n        wrapper.className = \"gl-table-panel__layer-selector\";\r\n\r\n        const select = document.createElement(\"select\");\r\n        select.id = \"geoleaf-table-layer-selector\";\r\n        select.name = \"geoleaf-table-layer-selector\";\r\n        select.className = \"gl-table-panel__select\";\r\n        select.setAttribute(\"data-table-layer-select\", \"\");\r\n\r\n        // Option par d√©faut\r\n        const defaultOption = document.createElement(\"option\");\r\n        defaultOption.value = \"\";\r\n        defaultOption.textContent = \"S√©lectionner une couche...\";\r\n        select.appendChild(defaultOption);\r\n\r\n        // Peupler avec les couches disponibles\r\n        populateLayerSelector(select);\r\n\r\n        // √âv√©nement de changement - avec cleanup tracking\r\n        const changeHandler = (e) => {\r\n            const layerId = e.target.value;\r\n            Log.debug(\"[TablePanel] S√©lecteur chang√©, layerId:\", layerId);\r\n            Log.debug(\"[TablePanel] GeoLeaf.Table existe:\", !!GeoLeaf.Table);\r\n            Log.debug(\"[TablePanel] setLayer existe:\", typeof GeoLeaf.Table?.setLayer);\r\n            if (GeoLeaf.Table && typeof GeoLeaf.Table.setLayer === \"function\") {\r\n                GeoLeaf.Table.setLayer(layerId);\r\n            } else {\r\n                Log.error(\"[TablePanel] GeoLeaf.Table.setLayer non disponible!\");\r\n            }\r\n        };\r\n\r\n        const events = GeoLeaf.Utils?.events;\r\n        if (events) {\r\n            GeoLeaf._TablePanel._eventCleanups.push(\r\n                events.on(select, \"change\", changeHandler, false, 'TablePanel.layerSelect')\r\n            );\r\n        } else {\r\n            select.addEventListener(\"change\", changeHandler);\r\n        }\r\n\r\n        Log.debug(\"[TablePanel] √âv√©nement 'change' attach√© au s√©lecteur\");\r\n\r\n        wrapper.appendChild(select);\r\n        return wrapper;\r\n    }\r\n\r\n    /**\r\n     * Peuple le s√©lecteur avec les couches disponibles\r\n     * @param {HTMLSelectElement} select - √âl√©ment select\r\n     * @private\r\n     */\r\n    function populateLayerSelector(select) {\r\n        Log.debug(\"[TablePanel] populateLayerSelector appel√©\");\r\n\r\n        if (!GeoLeaf.GeoJSON || typeof GeoLeaf.GeoJSON.getAllLayers !== \"function\") {\r\n            Log.warn(\"[TablePanel] Module GeoJSON non disponible\");\r\n            return;\r\n        }\r\n\r\n        const allLayers = GeoLeaf.GeoJSON.getAllLayers();\r\n        Log.debug(\"[TablePanel] getAllLayers retourne:\", allLayers.length, \"couches\");\r\n\r\n        if (allLayers.length === 0) {\r\n            Log.debug(\"[TablePanel] Aucune couche charg√©e, le s√©lecteur sera rafra√Æchi par l'√©v√©nement layers-loaded\");\r\n            return;\r\n        }\r\n\r\n        const VisibilityManager = GeoLeaf._LayerVisibilityManager;\r\n\r\n        // V√©rifier les options existantes pour √©viter les doublons\r\n        const existingValues = new Set();\r\n        for (let i = 1; i < select.options.length; i++) {\r\n            existingValues.add(select.options[i].value);\r\n        }\r\n\r\n        let addedCount = 0;\r\n        allLayers.forEach(layer => {\r\n            const layerData = GeoLeaf.GeoJSON.getLayerData(layer.id);\r\n            Log.debug(\"[TablePanel] V√©rification couche:\", layer.id, \"table enabled:\", layerData?.config?.table?.enabled);\r\n\r\n            if (layerData && layerData.config && layerData.config.table && layerData.config.table.enabled) {\r\n                // V√©rifier que la couche est visible sur la carte\r\n                let isVisible = true;\r\n                if (VisibilityManager && typeof VisibilityManager.getVisibilityState === \"function\") {\r\n                    const visState = VisibilityManager.getVisibilityState(layer.id);\r\n                    isVisible = visState && visState.current === true;\r\n                } else if (layerData._visibility) {\r\n                    isVisible = layerData._visibility.current === true;\r\n                }\r\n\r\n                if (!isVisible) {\r\n                    Log.debug(\"[TablePanel] Couche\", layer.id, \"masqu√©e, ignor√©e dans le s√©lecteur\");\r\n                    return;\r\n                }\r\n\r\n                // N'ajouter que si pas d√©j√† pr√©sent\r\n                if (!existingValues.has(layer.id)) {\r\n                    const option = document.createElement(\"option\");\r\n                    option.value = layer.id;\r\n                    option.textContent = layer.label || layer.id;\r\n                    select.appendChild(option);\r\n                    addedCount++;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (addedCount > 0) {\r\n            Log.info(\"[TablePanel] S√©lecteur de couche peupl√©:\", addedCount, \"couches ajout√©es\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Cr√©e le champ de recherche\r\n     * @returns {HTMLElement}\r\n     * @private\r\n     */\r\n    function createSearchInput() {\r\n        const wrapper = document.createElement(\"div\");\r\n        wrapper.className = \"gl-table-panel__search\";\r\n\r\n        const input = document.createElement(\"input\");\r\n        input.type = \"text\";\r\n        input.id = \"geoleaf-table-search-input\";\r\n        input.name = \"geoleaf-table-search-input\";\r\n        input.placeholder = \"Rechercher...\";\r\n        input.className = \"gl-table-panel__search-input\";\r\n        input.setAttribute(\"data-table-search\", \"\");\r\n\r\n        // Debounce la recherche pour √©viter les appels trop fr√©quents\r\n        let timeout;\r\n        const inputHandler = (e) => {\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(() => {\r\n                const searchText = e.target.value.trim().toLowerCase();\r\n                filterTableRows(searchText);\r\n            }, 300);\r\n        };\r\n\r\n        wrapper.appendChild(input);\r\n        return wrapper;\r\n    }\r\n\r\n    /**\r\n     * Filtre les lignes du tableau selon le texte de recherche\r\n     * @param {string} searchText - Texte √† rechercher\r\n     * @private\r\n     */\r\n    function filterTableRows(searchText) {\r\n        const table = document.querySelector(\".gl-table-panel__table tbody\");\r\n        if (!table) return;\r\n\r\n        const rows = table.querySelectorAll(\"tr\");\r\n        let visibleCount = 0;\r\n\r\n        rows.forEach(row => {\r\n            if (!searchText) {\r\n                row.style.display = \"\";\r\n                visibleCount++;\r\n                return;\r\n            }\r\n\r\n            const cells = row.querySelectorAll(\"td\");\r\n            let match = false;\r\n\r\n            cells.forEach(cell => {\r\n                const text = cell.textContent.toLowerCase();\r\n                if (text.includes(searchText)) {\r\n                    match = true;\r\n                }\r\n            });\r\n\r\n            row.style.display = match ? \"\" : \"none\";\r\n            if (match) visibleCount++;\r\n        });\r\n\r\n        Log.debug(\"[TablePanel] Recherche:\", visibleCount, \"r√©sultats pour\", searchText);\r\n    }\r\n\r\n    /**\r\n     * Cr√©e un bouton g√©n√©rique\r\n     * @param {string} label - Libell√© du bouton\r\n     * @param {string} icon - Classe d'ic√¥ne (optionnel)\r\n     * @param {Function} onClick - Callback au clic\r\n     * @returns {HTMLElement}\r\n     * @private\r\n     */\r\n    function createButton(label, icon, onClick) {\r\n        const button = document.createElement(\"button\");\r\n        button.className = \"gl-table-panel__btn\";\r\n        button.textContent = label;\r\n\r\n        if (icon) {\r\n            button.classList.add(\"gl-table-panel__btn--\" + icon);\r\n        }\r\n\r\n        if (onClick) {\r\n            const events = GeoLeaf.Utils?.events;\r\n            if (events) {\r\n                GeoLeaf._TablePanel._eventCleanups.push(\r\n                    events.on(button, \"click\", onClick, false, 'TablePanel.button')\r\n                );\r\n            } else {\r\n                button.addEventListener(\"click\", onClick);\r\n            }\r\n        }\r\n\r\n        return button;\r\n    }\r\n\r\n    /**\r\n     * Met √† jour la position du bouton toggle en fonction de la hauteur du conteneur\r\n     * @param {HTMLElement} container - Conteneur du tableau\r\n     * @private\r\n     */\r\n    function updateToggleButtonPosition(container) {\r\n        const button = document.querySelector(\".gl-table-panel__toggle-btn\");\r\n        if (button && container.classList.contains(\"is-visible\")) {\r\n            const height = container.offsetHeight;\r\n            button.style.bottom = height + \"px\";\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Cr√©e le bouton toggle pour masquer le tableau (int√©gr√© dans le toolbar)\r\n     * @returns {HTMLElement}\r\n     * @private\r\n     */\r\n    function createToggleButton() {\r\n        const button = document.createElement(\"button\");\r\n        button.className = \"gl-table-panel__toggle-btn\";\r\n        button.title = \"Masquer le tableau\";\r\n        button.setAttribute(\"aria-label\", \"Masquer tableau\");\r\n\r\n        // Cr√©er l'ic√¥ne SVG (fl√®che vers le bas)\r\n        const icon = document.createElement(\"span\");\r\n        icon.className = \"gl-table-panel__toggle-btn__icon\";\r\n        // SAFE: SVG statique hardcod√©, pas de donn√©es utilisateur\r\n        const downSvg = GeoLeaf.DOMSecurity.createSVGIcon(16, 16, 'M6 9l6 6 6-6', {\r\n            stroke: 'currentColor',\r\n            strokeWidth: '6',\r\n            fill: 'none'\r\n        });\r\n        icon.appendChild(downSvg);\r\n        button.appendChild(icon);\r\n\r\n        const clickHandler = () => {\r\n            if (GeoLeaf.Table && typeof GeoLeaf.Table.toggle === \"function\") {\r\n                GeoLeaf.Table.toggle();\r\n            }\r\n        };\r\n\r\n        const events = GeoLeaf.Utils?.events;\r\n        if (events) {\r\n            GeoLeaf._TablePanel._eventCleanups.push(\r\n                events.on(button, \"click\", clickHandler, false, 'TablePanel.toggleBtn')\r\n            );\r\n        } else {\r\n            button.addEventListener(\"click\", clickHandler);\r\n        }\r\n\r\n        return button;\r\n        Log.debug(\"[TablePanel] Bouton toggle cr√©√©\");\r\n    }\r\n\r\n    /**\r\n     * Cr√©e le bouton flottant pour afficher le tableau (visible quand tableau masqu√©)\r\n     * @private\r\n     */\r\n    function createFloatingShowButton() {\r\n        const button = document.createElement(\"button\");\r\n        button.className = \"gl-table-panel__floating-show-btn\";\r\n        button.title = \"Afficher le tableau\";\r\n        button.setAttribute(\"aria-label\", \"Afficher tableau\");\r\n\r\n        // Cr√©er l'ic√¥ne SVG (fl√®che vers le haut)\r\n        const icon = document.createElement(\"span\");\r\n        icon.className = \"gl-table-panel__toggle-btn__icon\";\r\n        // SAFE: SVG statique hardcod√©, pas de donn√©es utilisateur\r\n        const upSvg = GeoLeaf.DOMSecurity.createSVGIcon(16, 16, 'M18 15l-6-6-6 6', {\r\n            stroke: 'currentColor',\r\n            strokeWidth: '6',\r\n            fill: 'none'\r\n        });\r\n        icon.appendChild(upSvg);\r\n        button.appendChild(icon);\r\n\r\n        const clickHandler = () => {\r\n            if (GeoLeaf.Table && typeof GeoLeaf.Table.show === \"function\") {\r\n                GeoLeaf.Table.show();\r\n            }\r\n        };\r\n\r\n        const events = GeoLeaf.Utils?.events;\r\n        if (events) {\r\n            GeoLeaf._TablePanel._eventCleanups.push(\r\n                events.on(button, \"click\", clickHandler, false, 'TablePanel.floatingShowBtn')\r\n            );\r\n        } else {\r\n            button.addEventListener(\"click\", clickHandler);\r\n        }\r\n\r\n        document.body.appendChild(button);\r\n        Log.debug(\"[TablePanel] Bouton flottant cr√©√©\");\r\n    }\r\n\r\n    /**\r\n     * Met √† jour l'√©tat des boutons de la toolbar selon la s√©lection\r\n     * @param {number} selectedCount - Nombre d'entit√©s s√©lectionn√©es\r\n     */\r\n    GeoLeaf._TablePanel.updateToolbarButtons = function (selectedCount) {\r\n        const hasSelection = selectedCount > 0;\r\n\r\n        const zoomBtn = document.querySelector(\"[data-table-btn='zoom']\");\r\n        const highlightBtn = document.querySelector(\"[data-table-btn='highlight']\");\r\n        const exportBtn = document.querySelector(\"[data-table-btn='export']\");\r\n\r\n        if (zoomBtn) zoomBtn.disabled = !hasSelection;\r\n        if (highlightBtn) {\r\n            highlightBtn.disabled = !hasSelection;\r\n            // Si plus aucune s√©lection, d√©sactiver la surbrillance\r\n            if (!hasSelection && highlightBtn.classList.contains(\"is-active\")) {\r\n                highlightBtn.classList.remove(\"is-active\");\r\n                if (GeoLeaf.Table && typeof GeoLeaf.Table.highlightSelection === \"function\") {\r\n                    GeoLeaf.Table.highlightSelection(false);\r\n                }\r\n            }\r\n        }\r\n        if (exportBtn) exportBtn.disabled = !hasSelection;\r\n\r\n        Log.debug(\"[TablePanel] Boutons mis √† jour. S√©lection:\", selectedCount);\r\n    };\r\n\r\n    /**\r\n     * Rafra√Æchit le s√©lecteur de couche (utile apr√®s chargement de nouvelles couches)\r\n     */\r\n    GeoLeaf._TablePanel.refreshLayerSelector = function () {\r\n        const select = document.querySelector(\"[data-table-layer-select]\");\r\n        if (!select) return;\r\n\r\n        // Sauvegarder la valeur actuelle\r\n        const currentValue = select.value;\r\n\r\n        // Vider les options (sauf la premi√®re)\r\n        while (select.options.length > 1) {\r\n            select.remove(1);\r\n        }\r\n\r\n        // Re-peupler\r\n        populateLayerSelector(select);\r\n\r\n        // V√©rifier si la valeur actuelle est toujours disponible\r\n        const optionValues = Array.from(select.options).map(o => o.value);\r\n        if (currentValue && optionValues.includes(currentValue)) {\r\n            select.value = currentValue;\r\n        } else if (currentValue && !optionValues.includes(currentValue)) {\r\n            // La couche active a √©t√© retir√©e (masqu√©e) ‚Äî basculer sur la premi√®re disponible\r\n            if (select.options.length > 1) {\r\n                select.value = select.options[1].value;\r\n                if (GeoLeaf.Table && typeof GeoLeaf.Table.setLayer === \"function\") {\r\n                    GeoLeaf.Table.setLayer(select.options[1].value);\r\n                }\r\n            } else {\r\n                // Aucune couche visible ‚Äî vider le tableau\r\n                select.value = \"\";\r\n                if (GeoLeaf.Table && typeof GeoLeaf.Table.setLayer === \"function\") {\r\n                    GeoLeaf.Table.setLayer(\"\");\r\n                }\r\n            }\r\n        }\r\n\r\n        // Mettre √† jour le placeholder si aucune couche visible\r\n        const defaultOption = select.options[0];\r\n        if (defaultOption) {\r\n            defaultOption.textContent = select.options.length > 1\r\n                ? \"S√©lectionner une couche...\"\r\n                : \"Aucune couche visible\";\r\n        }\r\n\r\n        Log.debug(\"[TablePanel] S√©lecteur de couche rafra√Æchi,\", (select.options.length - 1), \"couches disponibles\");\r\n    };\r\n\r\n    /**\r\n     * Cleanup all event listeners\r\n     */\r\n    GeoLeaf._TablePanel.destroy = function() {\r\n        if (GeoLeaf._TablePanel._eventCleanups && GeoLeaf._TablePanel._eventCleanups.length > 0) {\r\n            GeoLeaf._TablePanel._eventCleanups.forEach(cleanup => {\r\n                if (typeof cleanup === 'function') cleanup();\r\n            });\r\n            GeoLeaf._TablePanel._eventCleanups = [];\r\n            Log.info('[TablePanel] Event listeners cleaned up');\r\n        }\r\n    };\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/**\r\n * GeoLeaf Table - Renderer Module\r\n * Rendu des colonnes, lignes et pagination avec virtual scrolling\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Shorthand for createElement\r\n     */\r\n    const $create = (tag, props, ...children) => {\r\n        return GeoLeaf.Utils && GeoLeaf.Utils.createElement\r\n            ? GeoLeaf.Utils.createElement(tag, props, ...children)\r\n            : document.createElement(tag);\r\n    };\r\n\r\n    GeoLeaf._TableRenderer = GeoLeaf._TableRenderer || {};\r\n    GeoLeaf._TableRenderer._eventCleanups = [];\r\n\r\n    /**\r\n     * Rend le tableau avec les donn√©es fournies\r\n     * @param {HTMLElement} container - Conteneur du tableau\r\n     * @param {Object} options - Options de rendu\r\n     * @param {string} options.layerId - ID de la couche\r\n     * @param {Array} options.features - Features √† afficher\r\n     * @param {Set} options.selectedIds - IDs des entit√©s s√©lectionn√©es\r\n     * @param {Object} options.sortState - √âtat du tri\r\n     * @param {Object} options.config - Configuration du tableau\r\n     */\r\n    GeoLeaf._TableRenderer.render = function (container, options) {\r\n        Log.debug(\"[TableRenderer] render() - D√©but, options:\", options);\r\n\r\n        if (!container) {\r\n            Log.error(\"[TableRenderer] Conteneur invalide\");\r\n            return;\r\n        }\r\n\r\n        // R√©initialiser le compteur d'IDs synth√©tiques √† chaque rendu\r\n        _syntheticIdCounter = 0;\r\n\r\n        const { layerId, features, selectedIds, sortState, config } = options;\r\n        Log.debug(\"[TableRenderer] render() - layerId:\", layerId, \"features:\", features ? features.length : 0);\r\n\r\n        const table = container.querySelector(\".gl-table-panel__table\");\r\n        if (!table) {\r\n            Log.error(\"[TableRenderer] √âl√©ment table introuvable\");\r\n            return;\r\n        }\r\n\r\n        // Si pas de layerId, vider le tableau\r\n        if (!layerId) {\r\n            // SAFE: Cha√Æne vide pour nettoyer le contenu\r\n            GeoLeaf.DOMSecurity.clearElementFast(table);\r\n            Log.debug(\"[TableRenderer] Tableau vid√© (aucune couche s√©lectionn√©e)\");\r\n            return;\r\n        }\r\n\r\n        // R√©cup√©rer la config du layer\r\n        const layerData = GeoLeaf.GeoJSON ? GeoLeaf.GeoJSON.getLayerData(layerId) : null;\r\n        const layerConfig = layerData && layerData.config && layerData.config.table ? layerData.config.table : null;\r\n\r\n        if (!layerConfig || !layerConfig.columns) {\r\n            Log.warn(\"[TableRenderer] Aucune configuration de colonne pour\", layerId);\r\n            // SAFE: Cha√Æne vide pour nettoyer le contenu\r\n            GeoLeaf.DOMSecurity.clearElementFast(table);\r\n            return;\r\n        }\r\n\r\n        Log.debug(\"[TableRenderer] Colonnes:\", layerConfig.columns);\r\n\r\n        // Vider le tableau\r\n        // SAFE: Cha√Æne vide pour nettoyer le contenu avant reconstruction\r\n        GeoLeaf.DOMSecurity.clearElementFast(table);\r\n\r\n        // Cr√©er le thead\r\n        const thead = createTableHead(layerConfig.columns, sortState);\r\n        table.appendChild(thead);\r\n\r\n        // Cr√©er le tbody\r\n        const tbody = createTableBody(features, layerConfig.columns, selectedIds);\r\n        table.appendChild(tbody);\r\n\r\n        // Appliquer virtual scrolling si activ√©\r\n        if (config.virtualScrolling && features.length > config.pageSize) {\r\n            applyVirtualScrolling(container, features, config.pageSize);\r\n        }\r\n\r\n        Log.debug(\"[TableRenderer] Tableau rendu:\", features.length, \"lignes\");\r\n    };\r\n\r\n    /**\r\n     * Cr√©e l'en-t√™te du tableau (thead)\r\n     * @param {Array} columns - Configuration des colonnes\r\n     * @param {Object} sortState - √âtat du tri actuel\r\n     * @returns {HTMLElement}\r\n     * @private\r\n     */\r\n    function createTableHead(columns, sortState) {\r\n        const thead = $create(\"thead\");\r\n        const tr = $create(\"tr\");\r\n\r\n        // Colonne checkbox (s√©lection)\r\n        const thCheckbox = $create(\"th\", { className: \"gl-table-panel__th gl-table-panel__th--checkbox\" });\r\n\r\n        const checkboxAll = $create(\"input\", {\r\n            type: \"checkbox\",\r\n            className: \"gl-table-panel__checkbox-all\",\r\n            title: \"Tout s√©lectionner / Tout d√©s√©lectionner\"\r\n        });\r\n\r\n        const checkboxAllHandler = (e) => {\r\n            toggleAllRows(e.target.checked);\r\n        };\r\n\r\n        const events = GeoLeaf.Utils?.events;\r\n        if (events) {\r\n            GeoLeaf._TableRenderer._eventCleanups.push(\r\n                events.on(checkboxAll, \"change\", checkboxAllHandler, false, 'TableRenderer.checkboxAll')\r\n            );\r\n        } else {\r\n            checkboxAll.addEventListener(\"change\", checkboxAllHandler);\r\n        }\r\n\r\n        thCheckbox.appendChild(checkboxAll);\r\n        tr.appendChild(thCheckbox);\r\n\r\n        // Colonnes de donn√©es\r\n        columns.forEach(col => {\r\n            const th = $create(\"th\", { className: \"gl-table-panel__th\" });\r\n            th.textContent = col.label || col.field;\r\n\r\n            if (col.width) {\r\n                th.style.width = col.width;\r\n            }\r\n\r\n            // Rendre la colonne triable (par d√©faut toutes les colonnes sont triables)\r\n            const isSortable = col.sortable !== false;\r\n            if (isSortable) {\r\n                th.classList.add(\"gl-table-panel__th--sortable\");\r\n                th.setAttribute(\"data-field\", col.field);\r\n\r\n                // Ajouter les indicateurs de tri\r\n                const sortIcon = $create(\"span\", { className: \"gl-table-panel__sort-icon\" });\r\n\r\n                if (sortState.field === col.field) {\r\n                    if (sortState.direction === \"asc\") {\r\n                        sortIcon.textContent = \" ‚ñ≤\";\r\n                        th.classList.add(\"is-sorted-asc\");\r\n                    } else if (sortState.direction === \"desc\") {\r\n                        sortIcon.textContent = \" ‚ñº\";\r\n                        th.classList.add(\"is-sorted-desc\");\r\n                    }\r\n                } else {\r\n                    sortIcon.textContent = \" ‚áÖ\";\r\n                }\r\n\r\n                th.appendChild(sortIcon);\r\n\r\n                // √âv√©nement de tri - avec cleanup tracking\r\n                const sortHandler = () => {\r\n                    if (GeoLeaf.Table && typeof GeoLeaf.Table.sortByField === \"function\") {\r\n                        GeoLeaf.Table.sortByField(col.field);\r\n                    }\r\n                };\r\n\r\n                const events = GeoLeaf.Utils?.events;\r\n                if (events) {\r\n                    GeoLeaf._TableRenderer._eventCleanups.push(\r\n                        events.on(th, \"click\", sortHandler, false, 'TableRenderer.sort')\r\n                    );\r\n                } else {\r\n                    th.addEventListener(\"click\", sortHandler);\r\n                }\r\n            }\r\n\r\n            tr.appendChild(th);\r\n        });\r\n\r\n        thead.appendChild(tr);\r\n        return thead;\r\n    }\r\n\r\n    /**\r\n     * Cr√©e le corps du tableau (tbody)\r\n     * @param {Array} features - Features √† afficher\r\n     * @param {Array} columns - Configuration des colonnes\r\n     * @param {Set} selectedIds - IDs s√©lectionn√©s\r\n     * @returns {HTMLElement}\r\n     * @private\r\n     */\r\n    function createTableBody(features, columns, selectedIds) {\r\n        Log.debug(\"[TableRenderer] createTableBody() - features:\", features.length);\r\n\r\n        const tbody = $create(\"tbody\");\r\n\r\n        // Sprint 3.2: Use DocumentFragment for batch DOM operations\r\n        const fragment = document.createDocumentFragment();\r\n\r\n        features.forEach((feature, index) => {\r\n            const tr = createTableRow(feature, columns, selectedIds);\r\n            fragment.appendChild(tr);\r\n        });\r\n\r\n        tbody.appendChild(fragment);\r\n\r\n        Log.debug(\"[TableRenderer] tbody cr√©√© avec\", tbody.children.length, \"lignes\");\r\n        return tbody;\r\n    }\r\n\r\n    /**\r\n     * Cr√©e une ligne du tableau\r\n     * @param {Object} feature - Feature GeoJSON\r\n     * @param {Array} columns - Configuration des colonnes\r\n     * @param {Set} selectedIds - IDs s√©lectionn√©s\r\n     * @returns {HTMLElement}\r\n     * @private\r\n     */\r\n    function createTableRow(feature, columns, selectedIds) {\r\n        const tr = $create(\"tr\");\r\n        const featureId = getFeatureId(feature);\r\n        tr.setAttribute(\"data-feature-id\", featureId);\r\n\r\n        const isSelected = selectedIds.has(String(featureId));\r\n        if (isSelected) {\r\n            tr.classList.add(\"is-selected\");\r\n        }\r\n\r\n        // Cellule checkbox\r\n        const tdCheckbox = $create(\"td\", { className: \"gl-table-panel__td gl-table-panel__td--checkbox\" });\r\n\r\n        const checkbox = $create(\"input\", {\r\n            type: \"checkbox\",\r\n            className: \"gl-table-panel__checkbox\",\r\n            checked: isSelected\r\n        });\r\n\r\n        const checkboxHandler = (e) => {\r\n            // Pour les checkboxes, toujours traiter comme multi-s√©lection\r\n            handleRowSelection(featureId, e.target.checked, false, true, true);\r\n        };\r\n\r\n        const events = GeoLeaf.Utils?.events;\r\n        if (events) {\r\n            GeoLeaf._TableRenderer._eventCleanups.push(\r\n                events.on(checkbox, \"change\", checkboxHandler, false, 'TableRenderer.checkbox')\r\n            );\r\n        } else {\r\n            checkbox.addEventListener(\"change\", checkboxHandler);\r\n        }\r\n\r\n        tdCheckbox.appendChild(checkbox);\r\n        tr.appendChild(tdCheckbox);\r\n\r\n        // Cellules de donn√©es\r\n        columns.forEach((col, colIndex) => {\r\n            const td = $create(\"td\", { className: \"gl-table-panel__td\" });\r\n\r\n            const value = getNestedValue(feature, col.field);\r\n            const formattedValue = formatValue(value, col.type);\r\n\r\n            td.textContent = formattedValue;\r\n\r\n            // Aligner les nombres √† droite\r\n            if (col.type === \"number\") {\r\n                td.classList.add(\"gl-table-panel__td--number\");\r\n            }\r\n\r\n            tr.appendChild(td);\r\n        });\r\n\r\n        // √âv√©nement clic sur la ligne (s√©lection simple) - avec cleanup tracking\r\n        const rowClickHandler = (e) => {\r\n            // Ignorer si c'est le checkbox qui a √©t√© cliqu√©\r\n            if (e.target.type === \"checkbox\") return;\r\n            const currentState = tr.classList.contains(\"is-selected\");\r\n            handleRowSelection(featureId, !currentState, e.shiftKey, e.ctrlKey || e.metaKey);\r\n        };\r\n\r\n        // Reuse EventListenerManager from outer scope\r\n        if (events) {\r\n            GeoLeaf._TableRenderer._eventCleanups.push(\r\n                events.on(tr, \"click\", rowClickHandler, false, 'TableRenderer.rowClick')\r\n            );\r\n        } else {\r\n            tr.addEventListener(\"click\", rowClickHandler);\r\n        }\r\n\r\n        return tr;\r\n    }\r\n\r\n    /**\r\n     * G√®re la s√©lection d'une ligne\r\n     * @param {string} featureId - ID de la feature\r\n     * @param {boolean} selected - S√©lectionn√© ou non\r\n     * @param {boolean} shiftKey - Touche Shift enfonc√©e\r\n     * @param {boolean} ctrlKey - Touche Ctrl/Cmd enfonc√©e\r\n     * @param {boolean} isCheckbox - Si l'action vient d'une checkbox\r\n     * @private\r\n     */\r\n    function handleRowSelection(featureId, selected, shiftKey, ctrlKey, isCheckbox = false) {\r\n        Log.debug(\"[TableRenderer] handleRowSelection - featureId:\", featureId, \"selected:\", selected);\r\n\r\n        if (!GeoLeaf.Table) {\r\n            Log.error(\"[TableRenderer] GeoLeaf.Table non disponible\");\r\n            return;\r\n        }\r\n\r\n        const currentSelection = GeoLeaf.Table.getSelectedIds();\r\n\r\n        if (shiftKey && currentSelection.length > 0) {\r\n            // S√©lection par plage (Shift+clic)\r\n            Log.debug(\"[TableRenderer] Mode SHIFT - S√©lection par plage\");\r\n            selectRange(featureId);\r\n        } else if (ctrlKey || isCheckbox) {\r\n            // Multi-s√©lection (Ctrl+clic ou checkbox)\r\n            Log.debug(\"[TableRenderer] Mode MULTI - Multi-s√©lection\" + (isCheckbox ? \" (checkbox)\" : \" (Ctrl)\"));\r\n            if (selected) {\r\n                const newSelection = [...currentSelection, featureId];\r\n                GeoLeaf.Table.setSelection(newSelection, false);\r\n            } else {\r\n                const newSelection = currentSelection.filter(id => id !== featureId);\r\n                GeoLeaf.Table.setSelection(newSelection, false);\r\n            }\r\n        } else {\r\n            // S√©lection simple\r\n            Log.debug(\"[TableRenderer] Mode SIMPLE - S√©lection unique\");\r\n            if (selected) {\r\n                GeoLeaf.Table.setSelection([featureId], false);\r\n            } else {\r\n                GeoLeaf.Table.clearSelection();\r\n            }\r\n        }\r\n\r\n        // Mettre √† jour l'√©tat des boutons\r\n        updateToolbarButtonsState();\r\n    }\r\n\r\n    /**\r\n     * S√©lectionne une plage de lignes (Shift+clic)\r\n     * @param {string} targetId - ID de la feature cible\r\n     * @private\r\n     */\r\n    function selectRange(targetId) {\r\n        const tbody = document.querySelector(\".gl-table-panel__table tbody\");\r\n        if (!tbody) return;\r\n\r\n        const rows = Array.from(tbody.querySelectorAll(\"tr\"));\r\n        const currentSelection = GeoLeaf.Table.getSelectedIds();\r\n        const lastSelected = currentSelection[currentSelection.length - 1];\r\n\r\n        const targetIndex = rows.findIndex(r => r.getAttribute(\"data-feature-id\") === targetId);\r\n        const lastIndex = rows.findIndex(r => r.getAttribute(\"data-feature-id\") === lastSelected);\r\n\r\n        if (targetIndex === -1 || lastIndex === -1) return;\r\n\r\n        const start = Math.min(targetIndex, lastIndex);\r\n        const end = Math.max(targetIndex, lastIndex);\r\n\r\n        const rangeIds = [];\r\n        for (let i = start; i <= end; i++) {\r\n            const id = rows[i].getAttribute(\"data-feature-id\");\r\n            if (id) rangeIds.push(id);\r\n        }\r\n\r\n        GeoLeaf.Table.setSelection(rangeIds, false);\r\n        updateToolbarButtonsState();\r\n    }\r\n\r\n    /**\r\n     * Toggle toutes les lignes (checkbox \"tout s√©lectionner\")\r\n     * @param {boolean} checked - √âtat du checkbox\r\n     * @private\r\n     */\r\n    function toggleAllRows(checked) {\r\n        const tbody = document.querySelector(\".gl-table-panel__table tbody\");\r\n        if (!tbody) return;\r\n\r\n        const rows = tbody.querySelectorAll(\"tr\");\r\n        const ids = [];\r\n\r\n        rows.forEach(row => {\r\n            const id = row.getAttribute(\"data-feature-id\");\r\n            if (id) {\r\n                ids.push(id);\r\n                row.classList.toggle(\"is-selected\", checked);\r\n                const checkbox = row.querySelector(\".gl-table-panel__checkbox\");\r\n                if (checkbox) checkbox.checked = checked;\r\n            }\r\n        });\r\n\r\n        if (checked) {\r\n            GeoLeaf.Table.setSelection(ids, false);\r\n        } else {\r\n            GeoLeaf.Table.clearSelection();\r\n        }\r\n\r\n        updateToolbarButtonsState();\r\n    }\r\n\r\n    /**\r\n     * Met √† jour la s√©lection visuelle dans le tableau\r\n     * @param {HTMLElement} container - Conteneur du tableau\r\n     * @param {Set} selectedIds - IDs s√©lectionn√©s\r\n     */\r\n    GeoLeaf._TableRenderer.updateSelection = function (container, selectedIds) {\r\n        const tbody = container.querySelector(\".gl-table-panel__table tbody\");\r\n        if (!tbody) return;\r\n\r\n        const rows = tbody.querySelectorAll(\"tr\");\r\n\r\n        rows.forEach(row => {\r\n            const id = row.getAttribute(\"data-feature-id\");\r\n            const isSelected = selectedIds.has(String(id));\r\n\r\n            row.classList.toggle(\"is-selected\", isSelected);\r\n\r\n            const checkbox = row.querySelector(\".gl-table-panel__checkbox\");\r\n            if (checkbox) {\r\n                checkbox.checked = isSelected;\r\n            }\r\n        });\r\n\r\n        // Mettre √† jour le checkbox \"tout s√©lectionner\"\r\n        const checkboxAll = container.querySelector(\".gl-table-panel__checkbox-all\");\r\n        if (checkboxAll) {\r\n            const totalRows = rows.length;\r\n            const selectedCount = selectedIds.size;\r\n            checkboxAll.checked = totalRows > 0 && selectedCount === totalRows;\r\n            checkboxAll.indeterminate = selectedCount > 0 && selectedCount < totalRows;\r\n        }\r\n\r\n        updateToolbarButtonsState();\r\n    };\r\n\r\n    /**\r\n     * Applique le virtual scrolling pour de grandes listes\r\n     * @param {HTMLElement} container - Conteneur\r\n     * @param {Array} features - Features compl√®tes\r\n     * @param {number} pageSize - Taille de page\r\n     * @private\r\n     */\r\n    function applyVirtualScrolling(container, features, pageSize) {\r\n        // Implementation simple : pagination au scroll\r\n        // Pour un vrai virtual scrolling, utiliser IntersectionObserver\r\n        Log.debug(\"[TableRenderer] Virtual scrolling activ√© pour\", features.length, \"entit√©s\");\r\n        // TODO(v3.2): Implement custom cell renderers if necessary for advanced use cases\r\n    }\r\n\r\n    /**\r\n     * Met √† jour l'√©tat des boutons de la toolbar\r\n     * @private\r\n     */\r\n    function updateToolbarButtonsState() {\r\n        if (!GeoLeaf.Table) return;\r\n\r\n        const selectedCount = GeoLeaf.Table.getSelectedIds().length;\r\n\r\n        if (GeoLeaf._TablePanel && typeof GeoLeaf._TablePanel.updateToolbarButtons === \"function\") {\r\n            GeoLeaf._TablePanel.updateToolbarButtons(selectedCount);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Compteur interne pour g√©n√©rer des IDs synth√©tiques\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    let _syntheticIdCounter = 0;\r\n\r\n    /**\r\n     * R√©cup√®re l'ID d'une feature de mani√®re fiable\r\n     * Parcourt plusieurs propri√©t√©s candidates puis g√©n√®re un ID synth√©tique si n√©cessaire\r\n     * @param {Object} feature - Feature GeoJSON\r\n     * @returns {string}\r\n     * @private\r\n     */\r\n    function getFeatureId(feature) {\r\n        // 1. ID standard GeoJSON\r\n        if (feature.id != null && feature.id !== \"\") return String(feature.id);\r\n\r\n        const p = feature.properties;\r\n        if (!p) return \"__gl_row_\" + (_syntheticIdCounter++);\r\n\r\n        // 2. Propri√©t√©s d'identifiant courantes\r\n        if (p.id != null && p.id !== \"\") return String(p.id);\r\n        if (p.fid != null && p.fid !== \"\") return String(p.fid);\r\n        if (p.osm_id != null && p.osm_id !== \"\") return String(p.osm_id);\r\n        if (p.OBJECTID != null && p.OBJECTID !== \"\") return String(p.OBJECTID);\r\n        if (p.SITE_ID != null && p.SITE_ID !== \"\") return String(p.SITE_ID);\r\n        if (p.code != null && p.code !== \"\") return String(p.code);\r\n        if (p.IN1 != null && p.IN1 !== \"\") return String(p.IN1);\r\n\r\n        // 3. Fallback : ID synth√©tique bas√© sur un compteur\r\n        return \"__gl_row_\" + (_syntheticIdCounter++);\r\n    }\r\n\r\n    /**\r\n     * R√©cup√®re une valeur imbriqu√©e dans un objet\r\n     * @param {Object} obj - Objet source\r\n     * @param {string} path - Chemin avec notation point\r\n     * @returns {*}\r\n     * @private\r\n     */\r\n    function getNestedValue(obj, path) {\r\n        if (!obj || !path) return null;\r\n        return path.split('.').reduce((current, prop) =>\r\n            current && current[prop] !== undefined ? current[prop] : null, obj);\r\n    }\r\n\r\n    /**\r\n     * Formate une valeur selon son type\r\n     * @param {*} value - Valeur √† formater\r\n     * @param {string} type - Type de donn√©es (string, number, date)\r\n     * @returns {string}\r\n     * @private\r\n     */\r\n    function formatValue(value, type) {\r\n        if (value == null || value === \"\") return \"‚Äì\";\r\n\r\n        if (type === \"number\") {\r\n            const num = Number(value);\r\n            if (isNaN(num)) return String(value);\r\n            // Formater avec s√©parateurs de milliers\r\n            return num.toLocaleString(\"fr-FR\");\r\n        }\r\n\r\n        if (type === \"date\") {\r\n            const date = new Date(value);\r\n            if (isNaN(date.getTime())) return String(value);\r\n            return date.toLocaleDateString(\"fr-FR\");\r\n        }\r\n\r\n        return String(value);\r\n    }\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf Table Module\r\n * Affichage tabulaire des donn√©es cartographiques avec tri, recherche et s√©lection\r\n * Version: 1.0.0\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log;\r\n\r\n    /**\r\n     * Module GeoLeaf.Table\r\n     * Vue tabulaire compl√©mentaire √† la carte\r\n     */\r\n    const TableModule = {\r\n        /**\r\n         * R√©f√©rence vers la carte Leaflet\r\n         * @type {L.Map|null}\r\n         */\r\n        _map: null,\r\n\r\n        /**\r\n         * Configuration du module table depuis geoleaf.config.json\r\n         * @type {Object|null}\r\n         */\r\n        _config: null,\r\n\r\n        /**\r\n         * Couche actuellement affich√©e dans le tableau\r\n         * @type {string|null}\r\n         */\r\n        _currentLayerId: null,\r\n\r\n        /**\r\n         * IDs des entit√©s s√©lectionn√©es\r\n         * @type {Set<string>}\r\n         */\r\n        _selectedIds: new Set(),\r\n\r\n        /**\r\n         * Donn√©es en cache (features filtr√©es)\r\n         * @type {Array}\r\n         */\r\n        _cachedData: [],\r\n\r\n        /**\r\n         * Mapping featureId ‚Üí index dans _cachedData (synchronis√© avec le renderer)\r\n         * @type {Map<string, number>}\r\n         */\r\n        _featureIdMap: new Map(),\r\n\r\n        /**\r\n         * Couches Leaflet de surbrillance actuellement actives\r\n         * @type {Array<L.Layer>}\r\n         */\r\n        _highlightLayers: [],\r\n\r\n        /**\r\n         * Indique si la surbrillance est activ√©e\r\n         * @type {boolean}\r\n         */\r\n        _highlightActive: false,\r\n\r\n        /**\r\n         * √âtat actuel du tri\r\n         * @type {Object}\r\n         */\r\n        _sortState: {\r\n            field: null,\r\n            direction: null // 'asc' | 'desc' | null\r\n        },\r\n\r\n        /**\r\n         * Conteneur DOM du tableau\r\n         * @type {HTMLElement|null}\r\n         */\r\n        _container: null,\r\n\r\n        /**\r\n         * Indique si le tableau est visible\r\n         * @type {boolean}\r\n         */\r\n        _isVisible: false,\r\n\r\n        /**\r\n         * Initialise le module Table\r\n         * @param {Object} options - Options d'initialisation\r\n         * @param {L.Map} options.map - Instance de la carte Leaflet\r\n         * @param {Object} [options.config] - Configuration personnalis√©e\r\n         */\r\n        init(options) {\r\n            if (!options || !options.map) {\r\n                Log.error(\"[Table] init() n√©cessite une instance de carte Leaflet\");\r\n                return;\r\n            }\r\n\r\n            this._map = options.map;\r\n\r\n            // R√©cup√©rer la config depuis GeoLeaf.Config\r\n            const globalConfig = GeoLeaf.Config ? GeoLeaf.Config.get(\"tableConfig\") : null;\r\n            this._config = Object.assign({\r\n                enabled: true,\r\n                defaultVisible: false,\r\n                pageSize: 50,\r\n                maxRowsPerLayer: 1000,\r\n                enableExportButton: true,\r\n                virtualScrolling: true,\r\n                defaultHeight: \"40%\",\r\n                minHeight: \"20%\",\r\n                maxHeight: \"60%\",\r\n                resizable: false\r\n            }, globalConfig, options.config);\r\n\r\n            if (!this._config.enabled) {\r\n                Log.info(\"[Table] Module d√©sactiv√© via configuration\");\r\n                return;\r\n            }\r\n\r\n            Log.info(\"[Table] Initialisation du module Table\", this._config);\r\n\r\n            // Cr√©er le panel si besoin\r\n            if (GeoLeaf._TablePanel && typeof GeoLeaf._TablePanel.create === \"function\") {\r\n                this._container = GeoLeaf._TablePanel.create(this._map, this._config);\r\n            } else {\r\n                Log.error(\"[Table] Module table/panel.js non charg√©\");\r\n                return;\r\n            }\r\n\r\n            // D√©finir la visibilit√© initiale\r\n            if (this._config.defaultVisible) {\r\n                this.show();\r\n            }\r\n\r\n            // √âcouter les √©v√©nements carte\r\n            this._attachMapEvents();\r\n\r\n            Log.info(\"[Table] Module Table initialis√© avec succ√®s\");\r\n        },\r\n\r\n        /**\r\n         * Attache les listeners d'√©v√©nements Leaflet\r\n         * @private\r\n         */\r\n        _attachMapEvents() {\r\n            if (!this._map) return;\r\n\r\n            // Timer pour debounce du rafra√Æchissement du s√©lecteur\r\n            let refreshSelectorTimer = null;\r\n            const debouncedRefreshSelector = () => {\r\n                if (refreshSelectorTimer) clearTimeout(refreshSelectorTimer);\r\n                refreshSelectorTimer = setTimeout(() => {\r\n                    if (GeoLeaf._TablePanel && typeof GeoLeaf._TablePanel.refreshLayerSelector === \"function\") {\r\n                        GeoLeaf._TablePanel.refreshLayerSelector();\r\n                    }\r\n                }, 150);\r\n            };\r\n\r\n            // Synchroniser avec les changements de filtres\r\n            this._map.on(\"geoleaf:filters:changed\", () => {\r\n                if (this._isVisible && this._currentLayerId) {\r\n                    this.refresh();\r\n                }\r\n            });\r\n\r\n            // Rafra√Æchir le s√©lecteur quand les couches GeoJSON sont charg√©es\r\n            this._map.on(\"geoleaf:geojson:layers-loaded\", () => {\r\n                Log.debug(\"[Table] √âv√©nement layers-loaded re√ßu, rafra√Æchissement du s√©lecteur\");\r\n                debouncedRefreshSelector();\r\n            });\r\n\r\n            // Rafra√Æchir le s√©lecteur quand un th√®me est appliqu√©\r\n            // (c'est √† ce moment que la visibilit√© est r√©ellement d√©finie)\r\n            document.addEventListener(\"geoleaf:theme:applied\", () => {\r\n                Log.debug(\"[Table] √âv√©nement theme:applied re√ßu, rafra√Æchissement du s√©lecteur\");\r\n                debouncedRefreshSelector();\r\n            });\r\n\r\n            // Synchroniser avec les changements de visibilit√© des couches\r\n            this._map.on(\"geoleaf:geojson:visibility-changed\", (e) => {\r\n                // Rafra√Æchir le s√©lecteur (debounced pour grouper les changements multiples)\r\n                debouncedRefreshSelector();\r\n\r\n                // Si la couche active est celle qui a chang√© de visibilit√©\r\n                if (this._currentLayerId === e.layerId) {\r\n                    if (e.visible) {\r\n                        this.refresh();\r\n                    } else {\r\n                        // La couche active a √©t√© masqu√©e : basculer sur la premi√®re couche visible\r\n                        // Attendre le debounce pour que le s√©lecteur soit √† jour\r\n                        setTimeout(() => {\r\n                            const available = this._getAvailableVisibleLayers();\r\n                            if (available.length > 0) {\r\n                                this.setLayer(available[0].id);\r\n                                const select = document.querySelector(\"[data-table-layer-select]\");\r\n                                if (select) select.value = available[0].id;\r\n                            } else {\r\n                                this.setLayer(\"\");\r\n                            }\r\n                        }, 200);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Affiche le tableau\r\n         */\r\n        show() {\r\n            if (!this._container) {\r\n                Log.warn(\"[Table] Conteneur non initialis√©\");\r\n                return;\r\n            }\r\n\r\n            this._container.classList.add(\"is-visible\");\r\n            this._isVisible = true;\r\n\r\n            this._fireEvent(\"table:opened\", {});\r\n            Log.debug(\"[Table] Tableau affich√©\");\r\n        },\r\n\r\n        /**\r\n         * Masque le tableau\r\n         */\r\n        hide() {\r\n            if (!this._container) return;\r\n\r\n            // Nettoyer la surbrillance\r\n            this._clearHighlightLayers();\r\n            this._highlightActive = false;\r\n\r\n            this._container.classList.remove(\"is-visible\");\r\n            this._isVisible = false;\r\n\r\n            this._fireEvent(\"table:closed\", {});\r\n            Log.debug(\"[Table] Tableau masqu√©\");\r\n        },\r\n\r\n        /**\r\n         * Toggle la visibilit√© du tableau\r\n         */\r\n        toggle() {\r\n            if (this._isVisible) {\r\n                this.hide();\r\n            } else {\r\n                this.show();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * D√©finit la couche √† afficher dans le tableau\r\n         * @param {string} layerId - ID de la couche\r\n         */\r\n        setLayer(layerId) {\r\n            Log.debug(\"[Table] setLayer appel√© avec:\", layerId);\r\n\r\n            // Si layerId est vide, vider le tableau\r\n            if (!layerId) {\r\n                this._currentLayerId = null;\r\n                this._selectedIds.clear();\r\n                this._clearHighlightLayers();\r\n                this._highlightActive = false;\r\n                this._featureIdMap.clear();\r\n                this._sortState = { field: null, direction: null };\r\n                this._cachedData = [];\r\n\r\n                // Vider le tableau visuellement\r\n                if (GeoLeaf._TableRenderer && this._container) {\r\n                    GeoLeaf._TableRenderer.render(this._container, {\r\n                        layerId: null,\r\n                        features: [],\r\n                        selectedIds: this._selectedIds,\r\n                        sortState: this._sortState,\r\n                        config: this._config\r\n                    });\r\n                }\r\n\r\n                this._fireEvent(\"table:layerChanged\", { layerId: null });\r\n                Log.debug(\"[Table] Tableau vid√© (aucune couche s√©lectionn√©e)\");\r\n                return;\r\n            }\r\n\r\n            const layers = this._getAvailableLayers();\r\n            const layer = layers.find(l => l.id === layerId);\r\n\r\n            if (!layer) {\r\n                Log.warn(\"[Table] Couche introuvable ou non activ√©e pour le tableau:\", layerId);\r\n                return;\r\n            }\r\n\r\n            this._currentLayerId = layerId;\r\n            this._selectedIds.clear();\r\n            this._clearHighlightLayers();\r\n            this._highlightActive = false;\r\n            this._sortState = { field: null, direction: null };\r\n\r\n            // D√©finir le tri par d√©faut depuis la config du layer\r\n            const layerData = GeoLeaf.GeoJSON ? GeoLeaf.GeoJSON.getLayerData(layerId) : null;\r\n            if (layerData && layerData.config && layerData.config.table && layerData.config.table.defaultSort) {\r\n                this._sortState.field = layerData.config.table.defaultSort.field;\r\n                this._sortState.direction = layerData.config.table.defaultSort.direction || layerData.config.table.defaultSort.order || \"asc\";\r\n            }\r\n\r\n            this.refresh();\r\n\r\n            this._fireEvent(\"table:layerChanged\", { layerId });\r\n            Log.debug(\"[Table] Couche chang√©e:\", layerId);\r\n        },\r\n\r\n        /**\r\n         * Rafra√Æchit les donn√©es affich√©es dans le tableau\r\n         */\r\n        refresh() {\r\n            if (!this._currentLayerId) {\r\n                Log.debug(\"[Table] Aucune couche s√©lectionn√©e, impossible de rafra√Æchir\");\r\n                return;\r\n            }\r\n\r\n            // R√©cup√©rer les donn√©es depuis GeoJSON\r\n            const features = this._getLayerFeatures(this._currentLayerId);\r\n            this._cachedData = features;\r\n\r\n            // Construire le mapping ID‚Üíindex (miroir de la logique du renderer)\r\n            this._featureIdMap.clear();\r\n            let syntheticCounter = 0;\r\n            features.forEach((feature, index) => {\r\n                const id = this._resolveFeatureId(feature, syntheticCounter);\r\n                if (id.startsWith(\"__gl_row_\")) syntheticCounter++;\r\n                this._featureIdMap.set(id, index);\r\n            });\r\n\r\n            Log.debug(\"[Table] Features r√©cup√©r√©es:\", features.length);\r\n\r\n            // Appliquer le tri si d√©fini\r\n            if (this._sortState.field && this._sortState.direction) {\r\n                this._applySorting();\r\n            }\r\n\r\n            // Rafra√Æchir le rendu\r\n            if (GeoLeaf._TableRenderer && typeof GeoLeaf._TableRenderer.render === \"function\") {\r\n                GeoLeaf._TableRenderer.render(this._container, {\r\n                    layerId: this._currentLayerId,\r\n                    features: this._cachedData,\r\n                    selectedIds: this._selectedIds,\r\n                    sortState: this._sortState,\r\n                    config: this._config\r\n                });\r\n            } else {\r\n                Log.error(\"[Table] Renderer non disponible\");\r\n            }\r\n\r\n            Log.debug(\"[Table] Donn√©es rafra√Æchies:\", features.length, \"entit√©s\");\r\n        },\r\n\r\n        /**\r\n         * R√©cup√®re les features d'une couche avec les filtres appliqu√©s\r\n         * @param {string} layerId - ID de la couche\r\n         * @returns {Array} Features\r\n         * @private\r\n         */\r\n        _getLayerFeatures(layerId) {\r\n            if (!GeoLeaf.GeoJSON || typeof GeoLeaf.GeoJSON.getLayerData !== \"function\") {\r\n                Log.warn(\"[Table] Module GeoJSON non disponible\");\r\n                return [];\r\n            }\r\n\r\n            const layerData = GeoLeaf.GeoJSON.getLayerData(layerId);\r\n\r\n            if (!layerData || !layerData.features) {\r\n                Log.warn(\"[Table] Aucune donn√©e pour la couche:\", layerId);\r\n                return [];\r\n            }\r\n\r\n            Log.debug(\"[Table] _getLayerFeatures - Nombre de features:\", layerData.features.length);\r\n\r\n            // Appliquer la limite de lignes\r\n            const maxRows = this._config.maxRowsPerLayer || 1000;\r\n            if (layerData.features.length > maxRows) {\r\n                Log.warn(\"[Table] Donn√©es volumineuses (\" + layerData.features.length + \" entit√©s). Limit√© √† \" + maxRows);\r\n                return layerData.features.slice(0, maxRows);\r\n            }\r\n\r\n            return layerData.features || [];\r\n        },\r\n\r\n        /**\r\n         * R√©cup√®re les couches disponibles pour le tableau (table.enabled)\r\n         * @returns {Array} Liste des couches avec table.enabled = true\r\n         * @private\r\n         */\r\n        _getAvailableLayers() {\r\n            if (!GeoLeaf.GeoJSON || typeof GeoLeaf.GeoJSON.getAllLayers !== \"function\") {\r\n                return [];\r\n            }\r\n\r\n            const allLayers = GeoLeaf.GeoJSON.getAllLayers();\r\n            const availableLayers = [];\r\n\r\n            allLayers.forEach(layer => {\r\n                const layerData = GeoLeaf.GeoJSON.getLayerData(layer.id);\r\n                if (layerData && layerData.config && layerData.config.table && layerData.config.table.enabled) {\r\n                    availableLayers.push({\r\n                        id: layer.id,\r\n                        label: layer.label || layer.id,\r\n                        config: layerData.config.table\r\n                    });\r\n                }\r\n            });\r\n\r\n            return availableLayers;\r\n        },\r\n\r\n        /**\r\n         * R√©cup√®re les couches disponibles ET visibles pour le tableau\r\n         * @returns {Array} Liste des couches avec table.enabled = true et visibles sur la carte\r\n         * @private\r\n         */\r\n        _getAvailableVisibleLayers() {\r\n            const available = this._getAvailableLayers();\r\n            const VisibilityManager = GeoLeaf._LayerVisibilityManager;\r\n\r\n            return available.filter(layer => {\r\n                if (VisibilityManager && typeof VisibilityManager.getVisibilityState === \"function\") {\r\n                    const visState = VisibilityManager.getVisibilityState(layer.id);\r\n                    return visState && visState.current === true;\r\n                }\r\n                // Fallback : v√©rifier via layerData\r\n                const layerData = GeoLeaf.GeoJSON.getLayerData(layer.id);\r\n                return layerData && layerData._visibility && layerData._visibility.current === true;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Applique le tri sur les donn√©es en cache\r\n         * @private\r\n         */\r\n        _applySorting() {\r\n            if (!this._sortState.field || !this._sortState.direction) return;\r\n\r\n            const field = this._sortState.field;\r\n            const direction = this._sortState.direction;\r\n\r\n            this._cachedData.sort((a, b) => {\r\n                const valA = this._getNestedValue(a, field);\r\n                const valB = this._getNestedValue(b, field);\r\n\r\n                // Gestion des valeurs nulles\r\n                if (valA == null && valB == null) return 0;\r\n                if (valA == null) return direction === \"asc\" ? 1 : -1;\r\n                if (valB == null) return direction === \"asc\" ? -1 : 1;\r\n\r\n                // Comparaison\r\n                let result = 0;\r\n                if (typeof valA === \"number\" && typeof valB === \"number\") {\r\n                    result = valA - valB;\r\n                } else {\r\n                    result = String(valA).localeCompare(String(valB));\r\n                }\r\n\r\n                return direction === \"asc\" ? result : -result;\r\n            });\r\n\r\n            Log.debug(\"[Table] Tri appliqu√©:\", field, direction);\r\n        },\r\n\r\n        /**\r\n         * Change le tri sur une colonne\r\n         * @param {string} field - Chemin du champ\r\n         */\r\n        sortByField(field) {\r\n            if (this._sortState.field === field) {\r\n                // Cycle : asc ‚Üí desc ‚Üí null\r\n                if (this._sortState.direction === \"asc\") {\r\n                    this._sortState.direction = \"desc\";\r\n                } else if (this._sortState.direction === \"desc\") {\r\n                    this._sortState.field = null;\r\n                    this._sortState.direction = null;\r\n                } else {\r\n                    this._sortState.direction = \"asc\";\r\n                }\r\n            } else {\r\n                this._sortState.field = field;\r\n                this._sortState.direction = \"asc\";\r\n            }\r\n\r\n            this.refresh();\r\n            this._fireEvent(\"table:sortChanged\", this._sortState);\r\n        },\r\n\r\n        /**\r\n         * S√©lectionne ou d√©s√©lectionne des entit√©s\r\n         * @param {Array<string>} ids - IDs √† s√©lectionner\r\n         * @param {boolean} [add=false] - Ajouter √† la s√©lection existante ou remplacer\r\n         */\r\n        setSelection(ids, add = false) {\r\n            if (!add) {\r\n                this._selectedIds.clear();\r\n            }\r\n\r\n            ids.forEach(id => this._selectedIds.add(String(id)));\r\n\r\n            this._fireEvent(\"table:selectionChanged\", {\r\n                layerId: this._currentLayerId,\r\n                selectedIds: Array.from(this._selectedIds)\r\n            });\r\n\r\n            // Rafra√Æchir le rendu pour mettre √† jour les cases coch√©es\r\n            if (GeoLeaf._TableRenderer && typeof GeoLeaf._TableRenderer.updateSelection === \"function\") {\r\n                GeoLeaf._TableRenderer.updateSelection(this._container, this._selectedIds);\r\n            }\r\n\r\n            Log.debug(\"[Table] S√©lection mise √† jour:\", this._selectedIds.size, \"entit√©s\");\r\n        },\r\n\r\n        /**\r\n         * Retourne les IDs des entit√©s s√©lectionn√©es\r\n         * @returns {Array<string>}\r\n         */\r\n        getSelectedIds() {\r\n            return Array.from(this._selectedIds);\r\n        },\r\n\r\n        /**\r\n         * Efface la s√©lection\r\n         */\r\n        clearSelection() {\r\n            this._selectedIds.clear();\r\n            this._fireEvent(\"table:selectionChanged\", {\r\n                layerId: this._currentLayerId,\r\n                selectedIds: []\r\n            });\r\n\r\n            if (GeoLeaf._TableRenderer && typeof GeoLeaf._TableRenderer.updateSelection === \"function\") {\r\n                GeoLeaf._TableRenderer.updateSelection(this._container, this._selectedIds);\r\n            }\r\n\r\n            Log.debug(\"[Table] S√©lection effac√©e\");\r\n        },\r\n\r\n        /**\r\n         * Zoom sur les entit√©s s√©lectionn√©es\r\n         */\r\n        zoomToSelection() {\r\n            if (this._selectedIds.size === 0) {\r\n                Log.warn(\"[Table] Aucune entit√© s√©lectionn√©e pour le zoom\");\r\n                return;\r\n            }\r\n\r\n            const selectedFeatures = this._getSelectedFeatures();\r\n            if (selectedFeatures.length === 0) {\r\n                Log.warn(\"[Table] Aucune feature trouv√©e pour les IDs s√©lectionn√©s\");\r\n                return;\r\n            }\r\n\r\n            const bounds = L.latLngBounds([]);\r\n\r\n            selectedFeatures.forEach(feature => {\r\n                if (feature.geometry && feature.geometry.coordinates) {\r\n                    this._extendBoundsFromGeometry(bounds, feature.geometry);\r\n                }\r\n            });\r\n\r\n            if (bounds.isValid()) {\r\n                this._map.fitBounds(bounds, { padding: [50, 50], maxZoom: 16 });\r\n                this._fireEvent(\"table:zoomToSelection\", {\r\n                    layerId: this._currentLayerId,\r\n                    selectedIds: Array.from(this._selectedIds)\r\n                });\r\n                Log.debug(\"[Table] Zoom sur la s√©lection (\", selectedFeatures.length, \"entit√©s)\");\r\n            } else {\r\n                Log.warn(\"[Table] Bounds invalides pour la s√©lection\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Active/d√©sactive la surbrillance des entit√©s s√©lectionn√©es sur la carte\r\n         * @param {boolean} active - Activer ou non\r\n         */\r\n        highlightSelection(active) {\r\n            // Toujours nettoyer les anciennes surbrillances\r\n            this._clearHighlightLayers();\r\n\r\n            this._highlightActive = active;\r\n\r\n            if (!active) {\r\n                Log.debug(\"[Table] Surbrillance d√©sactiv√©e\");\r\n                this._fireEvent(\"table:highlightSelection\", {\r\n                    layerId: this._currentLayerId,\r\n                    selectedIds: Array.from(this._selectedIds),\r\n                    active: false\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (this._selectedIds.size === 0) {\r\n                Log.warn(\"[Table] Aucune entit√© s√©lectionn√©e pour la surbrillance\");\r\n                return;\r\n            }\r\n\r\n            const selectedFeatures = this._getSelectedFeatures();\r\n            if (selectedFeatures.length === 0) {\r\n                Log.warn(\"[Table] Aucune feature trouv√©e pour la surbrillance\");\r\n                return;\r\n            }\r\n\r\n            // Style de surbrillance (contour jaune √©pais)\r\n            const highlightStyle = {\r\n                color: \"#FFD600\",\r\n                weight: 4,\r\n                opacity: 1,\r\n                fillOpacity: 0.15,\r\n                fillColor: \"#FFD600\",\r\n                dashArray: \"\",\r\n                interactive: false\r\n            };\r\n\r\n            selectedFeatures.forEach(feature => {\r\n                try {\r\n                    if (feature.geometry) {\r\n                        const geomType = feature.geometry.type;\r\n                        if (geomType === \"Point\") {\r\n                            // Pour les points, cr√©er un cercle de surbrillance\r\n                            const coords = feature.geometry.coordinates;\r\n                            const circle = L.circleMarker(\r\n                                [coords[1], coords[0]],\r\n                                {\r\n                                    radius: 14,\r\n                                    color: \"#FFD600\",\r\n                                    weight: 4,\r\n                                    opacity: 1,\r\n                                    fillOpacity: 0.25,\r\n                                    fillColor: \"#FFD600\",\r\n                                    interactive: false\r\n                                }\r\n                            );\r\n                            circle.addTo(this._map);\r\n                            this._highlightLayers.push(circle);\r\n                        } else {\r\n                            // Pour les polygones/polylines, superposer le contour\r\n                            const highlightLayer = L.geoJSON(feature, {\r\n                                style: function() { return highlightStyle; },\r\n                                interactive: false,\r\n                                pointToLayer: function(f, latlng) {\r\n                                    return L.circleMarker(latlng, highlightStyle);\r\n                                }\r\n                            });\r\n                            highlightLayer.addTo(this._map);\r\n                            this._highlightLayers.push(highlightLayer);\r\n                        }\r\n                    }\r\n                } catch (e) {\r\n                    Log.warn(\"[Table] Erreur surbrillance feature:\", e);\r\n                }\r\n            });\r\n\r\n            this._fireEvent(\"table:highlightSelection\", {\r\n                layerId: this._currentLayerId,\r\n                selectedIds: Array.from(this._selectedIds),\r\n                active: true\r\n            });\r\n\r\n            Log.debug(\"[Table] Surbrillance activ√©e pour\", selectedFeatures.length, \"entit√©s\");\r\n        },\r\n\r\n        /**\r\n         * Supprime toutes les couches de surbrillance de la carte\r\n         * @private\r\n         */\r\n        _clearHighlightLayers() {\r\n            this._highlightLayers.forEach(layer => {\r\n                try {\r\n                    if (this._map && this._map.hasLayer(layer)) {\r\n                        this._map.removeLayer(layer);\r\n                    }\r\n                } catch (e) {\r\n                    // Silencieux\r\n                }\r\n            });\r\n            this._highlightLayers = [];\r\n        },\r\n\r\n        /**\r\n         * Exporte les entit√©s s√©lectionn√©es au format GeoJSON (t√©l√©chargement)\r\n         */\r\n        exportSelection() {\r\n            if (this._selectedIds.size === 0) {\r\n                Log.warn(\"[Table] Aucune entit√© s√©lectionn√©e pour l'export\");\r\n                return;\r\n            }\r\n\r\n            const selectedFeatures = this._getSelectedFeatures();\r\n\r\n            if (selectedFeatures.length === 0) {\r\n                Log.warn(\"[Table] Aucune feature trouv√©e pour l'export\");\r\n                return;\r\n            }\r\n\r\n            // Construire le GeoJSON FeatureCollection\r\n            const geojson = {\r\n                type: \"FeatureCollection\",\r\n                features: selectedFeatures.map(f => ({\r\n                    type: \"Feature\",\r\n                    properties: f.properties || {},\r\n                    geometry: f.geometry || null\r\n                }))\r\n            };\r\n\r\n            // T√©l√©charger le fichier\r\n            try {\r\n                const json = JSON.stringify(geojson, null, 2);\r\n                const blob = new Blob([json], { type: \"application/geo+json\" });\r\n                const url = URL.createObjectURL(blob);\r\n                const a = document.createElement(\"a\");\r\n                a.href = url;\r\n                a.download = (this._currentLayerId || \"export\") + \"_selection.geojson\";\r\n                document.body.appendChild(a);\r\n                a.click();\r\n                document.body.removeChild(a);\r\n                URL.revokeObjectURL(url);\r\n\r\n                Log.info(\"[Table] Export GeoJSON:\", selectedFeatures.length, \"entit√©s export√©es\");\r\n            } catch (e) {\r\n                Log.error(\"[Table] Erreur lors de l'export:\", e);\r\n            }\r\n\r\n            this._fireEvent(\"table:exportSelection\", {\r\n                layerId: this._currentLayerId,\r\n                selectedIds: Array.from(this._selectedIds),\r\n                rows: selectedFeatures\r\n            });\r\n        },\r\n\r\n        /**\r\n         * R√©cup√®re les features s√©lectionn√©es √† partir du cache via le mapping d'IDs\r\n         * @returns {Array} Features GeoJSON correspondant √† la s√©lection\r\n         * @private\r\n         */\r\n        _getSelectedFeatures() {\r\n            const result = [];\r\n            this._selectedIds.forEach(id => {\r\n                const index = this._featureIdMap.get(id);\r\n                if (index != null && this._cachedData[index]) {\r\n                    result.push(this._cachedData[index]);\r\n                }\r\n            });\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * R√©sout l'ID d'une feature en miroir de la logique du renderer\r\n         * @param {Object} feature - Feature GeoJSON\r\n         * @param {number} syntheticIndex - Index pour les IDs synth√©tiques\r\n         * @returns {string}\r\n         * @private\r\n         */\r\n        _resolveFeatureId(feature, syntheticIndex) {\r\n            // 1. ID standard GeoJSON\r\n            if (feature.id != null && feature.id !== \"\") return String(feature.id);\r\n\r\n            const p = feature.properties;\r\n            if (!p) return \"__gl_row_\" + syntheticIndex;\r\n\r\n            // 2. Propri√©t√©s d'identifiant courantes (miroir exact du renderer)\r\n            if (p.id != null && p.id !== \"\") return String(p.id);\r\n            if (p.fid != null && p.fid !== \"\") return String(p.fid);\r\n            if (p.osm_id != null && p.osm_id !== \"\") return String(p.osm_id);\r\n            if (p.OBJECTID != null && p.OBJECTID !== \"\") return String(p.OBJECTID);\r\n            if (p.SITE_ID != null && p.SITE_ID !== \"\") return String(p.SITE_ID);\r\n            if (p.code != null && p.code !== \"\") return String(p.code);\r\n            if (p.IN1 != null && p.IN1 !== \"\") return String(p.IN1);\r\n\r\n            // 3. Fallback : ID synth√©tique (miroir du renderer)\r\n            return \"__gl_row_\" + syntheticIndex;\r\n        },\r\n\r\n        /**\r\n         * √âtend les bounds √† partir d'une g√©om√©trie GeoJSON\r\n         * @param {L.LatLngBounds} bounds - Bounds √† √©tendre\r\n         * @param {Object} geometry - G√©om√©trie GeoJSON\r\n         * @private\r\n         */\r\n        _extendBoundsFromGeometry(bounds, geometry) {\r\n            const coords = geometry.coordinates;\r\n            const type = geometry.type;\r\n\r\n            if (type === \"Point\") {\r\n                bounds.extend([coords[1], coords[0]]);\r\n            } else if (type === \"LineString\") {\r\n                coords.forEach(c => bounds.extend([c[1], c[0]]));\r\n            } else if (type === \"MultiLineString\") {\r\n                coords.forEach(line => line.forEach(c => bounds.extend([c[1], c[0]])));\r\n            } else if (type === \"Polygon\") {\r\n                coords[0].forEach(c => bounds.extend([c[1], c[0]]));\r\n            } else if (type === \"MultiPolygon\") {\r\n                coords.forEach(poly => {\r\n                    poly[0].forEach(c => bounds.extend([c[1], c[0]]));\r\n                });\r\n            } else if (type === \"MultiPoint\") {\r\n                coords.forEach(c => bounds.extend([c[1], c[0]]));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * R√©cup√®re une valeur imbriqu√©e dans un objet\r\n         * @param {Object} obj - Objet source\r\n         * @param {string} path - Chemin avec notation point\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _getNestedValue(obj, path) {\r\n            if (!obj || !path) return null;\r\n            return path.split('.').reduce((current, prop) =>\r\n                current && current[prop] !== undefined ? current[prop] : null, obj);\r\n        },\r\n\r\n        /**\r\n         * √âmet un √©v√©nement personnalis√©\r\n         * @param {string} eventName - Nom de l'√©v√©nement\r\n         * @param {Object} detail - Donn√©es de l'√©v√©nement\r\n         * @private\r\n         */\r\n        _fireEvent(eventName, detail) {\r\n            if (this._map && typeof this._map.fire === \"function\") {\r\n                this._map.fire(\"geoleaf:\" + eventName, detail);\r\n            }\r\n\r\n            if (typeof document !== \"undefined\" && document.dispatchEvent) {\r\n                document.dispatchEvent(new CustomEvent(\"geoleaf:\" + eventName, { detail }));\r\n            }\r\n        }\r\n    };\r\n\r\n    // Exposer le module\r\n    GeoLeaf.Table = TableModule;\r\n\r\n})(typeof window !== \"undefined\" ? window : global);\r\n","/**\r\n * API Module Manager - Sprint 4.3 (Version Robuste)\r\n * Gestionnaire centralis√© d'acc√®s aux modules GeoLeaf\r\n * @module APIModuleManager\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log || console;\r\n\r\n    /**\r\n     * Gestionnaire d'acc√®s aux modules GeoLeaf\r\n     */\r\n    class APIModuleManager {\r\n        constructor() {\r\n            this.modules = new Map();\r\n            this.aliases = new Map();\r\n            this.isInitialized = false;\r\n            this.stats = {\r\n                totalModules: 0,\r\n                accessCount: 0,\r\n                errors: 0\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Initialise le gestionnaire avec les modules existants\r\n         * @returns {boolean} Succ√®s de l'initialisation\r\n         */\r\n        init() {\r\n            try {\r\n                if (this.isInitialized) {\r\n                    if (Log) Log.debug('[APIModuleManager] Already initialized');\r\n                    return true;\r\n                }\r\n\r\n                if (Log) Log.info('[APIModuleManager] Initializing module manager');\r\n\r\n                // Scanner tous les modules disponibles dans le namespace GeoLeaf\r\n                this._scanExistingModules();\r\n\r\n                // Configurer les alias pour compatibilit√©\r\n                this._setupAliases();\r\n\r\n                this.isInitialized = true;\r\n\r\n                if (Log) Log.info(`[APIModuleManager] Initialized with ${this.stats.totalModules} modules`);\r\n                return true;\r\n\r\n            } catch (error) {\r\n                this.stats.errors++;\r\n                if (Log) Log.error('[APIModuleManager] Initialization failed:', error);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Scanner les modules existants dans GeoLeaf\r\n         * @private\r\n         */\r\n        _scanExistingModules() {\r\n            if (!global.GeoLeaf) return;\r\n\r\n            const moduleList = [\r\n                'Core', 'UI', 'Config', 'Baselayers', 'BaseLayers',\r\n                'POI', 'GeoJSON', 'Route', 'Legend', 'LayerManager',\r\n                'Storage', 'Filters', 'Log', 'Security', 'Utils',\r\n                'Constants', 'Validators', 'Errors'\r\n            ];\r\n\r\n            moduleList.forEach(name => {\r\n                if (global.GeoLeaf[name]) {\r\n                    this.modules.set(name, global.GeoLeaf[name]);\r\n                    this.stats.totalModules++;\r\n                }\r\n            });\r\n\r\n            // Scanner les modules priv√©s (pr√©fixe _)\r\n            Object.keys(global.GeoLeaf).forEach(key => {\r\n                if (key.startsWith('_') && !this.modules.has(key)) {\r\n                    this.modules.set(key, global.GeoLeaf[key]);\r\n                    this.stats.totalModules++;\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Configure les alias pour compatibilit√©\r\n         * @private\r\n         */\r\n        _setupAliases() {\r\n            const aliases = {\r\n                'Baselayers': 'BaseLayers',\r\n                'BaseLayers': 'Baselayers',\r\n                'Logger': 'Log',\r\n                'Log': 'Logger'\r\n            };\r\n\r\n            Object.entries(aliases).forEach(([alias, target]) => {\r\n                if (this.modules.has(target)) {\r\n                    this.aliases.set(alias, target);\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Obtient un module par nom\r\n         * @param {string} name - Nom du module\r\n         * @returns {*} Module ou null si non trouv√©\r\n         */\r\n        getModule(name) {\r\n            try {\r\n                this.stats.accessCount++;\r\n\r\n                if (!name || typeof name !== 'string') {\r\n                    if (Log) Log.warn(`[APIModuleManager] Invalid module name:`, name);\r\n                    this.stats.errors++;\r\n                    return null;\r\n                }\r\n\r\n                // Recherche directe\r\n                if (this.modules.has(name)) {\r\n                    return this.modules.get(name);\r\n                }\r\n\r\n                // Recherche par alias\r\n                if (this.aliases.has(name)) {\r\n                    const targetName = this.aliases.get(name);\r\n                    return this.modules.get(targetName);\r\n                }\r\n\r\n                // Fallback vers acc√®s global direct\r\n                if (global.GeoLeaf && global.GeoLeaf[name]) {\r\n                    // Ajouter √† notre cache pour les prochains acc√®s\r\n                    this.modules.set(name, global.GeoLeaf[name]);\r\n                    this.stats.totalModules++;\r\n                    return global.GeoLeaf[name];\r\n                }\r\n\r\n                // Module non trouv√©\r\n                if (Log) Log.debug(`[APIModuleManager] Module '${name}' not found`);\r\n                return null;\r\n\r\n            } catch (error) {\r\n                this.stats.errors++;\r\n                if (Log) Log.error(`[APIModuleManager] Error accessing module '${name}':`, error);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Enregistre manuellement un module\r\n         * @param {string} name - Nom du module\r\n         * @param {*} module - Instance du module\r\n         */\r\n        registerModule(name, module) {\r\n            try {\r\n                if (!name || typeof name !== 'string') {\r\n                    throw new Error('Module name must be a non-empty string');\r\n                }\r\n\r\n                if (!module) {\r\n                    throw new Error('Module cannot be null or undefined');\r\n                }\r\n\r\n                this.modules.set(name, module);\r\n                this.stats.totalModules++;\r\n\r\n                if (Log) Log.debug(`[APIModuleManager] Module '${name}' registered`);\r\n                return true;\r\n\r\n            } catch (error) {\r\n                this.stats.errors++;\r\n                if (Log) Log.error(`[APIModuleManager] Failed to register module '${name}':`, error);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * V√©rifie si un module existe\r\n         * @param {string} name - Nom du module\r\n         * @returns {boolean}\r\n         */\r\n        hasModule(name) {\r\n            try {\r\n                return this.modules.has(name) ||\r\n                       this.aliases.has(name) ||\r\n                       !!(global.GeoLeaf && global.GeoLeaf[name]);\r\n            } catch (error) {\r\n                if (Log) Log.error(`[APIModuleManager] Error checking module '${name}':`, error);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtient la liste des modules disponibles\r\n         * @returns {Array<string>}\r\n         */\r\n        getModuleList() {\r\n            const moduleNames = Array.from(this.modules.keys());\r\n\r\n            // Ajouter les modules du namespace global non encore dans notre cache\r\n            if (global.GeoLeaf) {\r\n                Object.keys(global.GeoLeaf).forEach(key => {\r\n                    if (!moduleNames.includes(key)) {\r\n                        moduleNames.push(key);\r\n                    }\r\n                });\r\n            }\r\n\r\n            return moduleNames.sort();\r\n        }\r\n\r\n        /**\r\n         * Obtient les statistiques d'usage\r\n         * @returns {Object}\r\n         */\r\n        getStats() {\r\n            return {\r\n                ...this.stats,\r\n                cachedModules: this.modules.size,\r\n                aliases: this.aliases.size,\r\n                isInitialized: this.isInitialized\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Rafra√Æchit le cache des modules\r\n         */\r\n        refresh() {\r\n            if (Log) Log.info('[APIModuleManager] Refreshing module cache');\r\n\r\n            this.modules.clear();\r\n            this.aliases.clear();\r\n            this.stats.totalModules = 0;\r\n\r\n            this._scanExistingModules();\r\n            this._setupAliases();\r\n        }\r\n\r\n        /**\r\n         * R√©initialise le gestionnaire\r\n         */\r\n        reset() {\r\n            this.modules.clear();\r\n            this.aliases.clear();\r\n            this.isInitialized = false;\r\n            this.stats = {\r\n                totalModules: 0,\r\n                accessCount: 0,\r\n                errors: 0\r\n            };\r\n\r\n            if (Log) Log.info('[APIModuleManager] Manager reset');\r\n        }\r\n    }\r\n\r\n    // Export vers le namespace GeoLeaf\r\n    GeoLeaf.API = GeoLeaf.API || {};\r\n    GeoLeaf.API.APIModuleManager = APIModuleManager; // Nom correct pour controller\r\n    GeoLeaf.API.ModuleManager = APIModuleManager; // Alias pour compatibilit√©\r\n\r\n    if (Log) Log.info('[APIModuleManager] Module manager loaded (Sprint 4.3 - Robust)');\r\n\r\n})(window);\r\n","/**\r\n * API Initialization Manager - Sprint 4.3 (Version Robuste)\r\n * Gestionnaire des op√©rations d'initialisation GeoLeaf\r\n * @module APIInitializationManager\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log || console;\r\n\r\n    /**\r\n     * Gestionnaire d'initialisation pour GeoLeaf\r\n     */\r\n    class APIInitializationManager {\r\n        constructor() {\r\n            this.isReady = true; // Manager pr√™t sans init s√©par√©e\r\n            this.pendingPromise = null;\r\n            this.cancelled = false;\r\n            this.stats = {\r\n                initCalls: 0,\r\n                configLoads: 0,\r\n                errors: 0\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Initialise GeoLeaf avec les options fournies\r\n         * @param {Object} options - Options d'initialisation\r\n         * @param {Function} getModule - Fonction d'acc√®s aux modules\r\n         * @returns {*} R√©sultat de l'initialisation\r\n         */\r\n        init(options, getModule) {\r\n            try {\r\n                this.stats.initCalls++;\r\n\r\n                if (Log) Log.info('[APIInitializationManager] Initializing GeoLeaf');\r\n\r\n                // Validation des param√®tres\r\n                const validationResult = this._validateInitParams(options, getModule);\r\n                if (!validationResult.valid) {\r\n                    throw new Error(validationResult.error);\r\n                }\r\n\r\n                // Obtenir le module Core\r\n                const Core = getModule(\"Core\");\r\n                if (!Core || typeof Core.init !== \"function\") {\r\n                    throw new Error(\"[GeoLeaf.init] GeoLeaf.Core.init() is not available. Core module must be loaded before API.\");\r\n                }\r\n\r\n                // Normaliser les options\r\n                const normalizedOptions = this._normalizeInitOptions(options);\r\n                if (Log) Log.info('[APIInitializationManager] Initializing with options:', normalizedOptions);\r\n\r\n                // Appeler l'initialisation du Core\r\n                const result = Core.init(normalizedOptions);\r\n\r\n                if (Log) Log.info('[APIInitializationManager] Initialization completed successfully');\r\n                return result;\r\n\r\n            } catch (error) {\r\n                this.stats.errors++;\r\n                if (Log) Log.error('[APIInitializationManager] Initialization failed:', error);\r\n                throw error;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Charge une configuration depuis URL ou donn√©es\r\n         * @param {string|Object} input - Source de configuration\r\n         * @param {Function} getModule - Fonction d'acc√®s aux modules\r\n         * @returns {Promise<Object>} Donn√©es de configuration\r\n         */\r\n        async loadConfig(input, getModule) {\r\n            try {\r\n                this.stats.configLoads++;\r\n\r\n                if (Log) Log.info('[APIInitializationManager] Loading configuration');\r\n\r\n                // Validation des param√®tres\r\n                if (!input) {\r\n                    throw new Error('Configuration input is required');\r\n                }\r\n\r\n                if (!getModule || typeof getModule !== 'function') {\r\n                    throw new Error('getModule function is required');\r\n                }\r\n\r\n                // Obtenir le module Config\r\n                const Config = getModule(\"Config\");\r\n                if (!Config || typeof Config.init !== \"function\") {\r\n                    throw new Error(\"[GeoLeaf.loadConfig] GeoLeaf.Config.init() is not available. Config module must be loaded.\");\r\n                }\r\n\r\n                // Normaliser les options de configuration\r\n                const options = this._normalizeConfigOptions(input);\r\n\r\n                // Annuler la requ√™te pr√©c√©dente si elle existe\r\n                if (this.pendingPromise) {\r\n                    this.cancelled = true;\r\n                    if (Log) Log.info('[APIInitializationManager] Cancelling previous config load request');\r\n                }\r\n\r\n                this.cancelled = false;\r\n\r\n                // Charger la configuration\r\n                this.pendingPromise = Config.init(options);\r\n                const result = await this.pendingPromise;\r\n\r\n                this.pendingPromise = null;\r\n\r\n                if (this.cancelled) {\r\n                    if (Log) Log.info('[APIInitializationManager] Config load was cancelled');\r\n                    return null;\r\n                }\r\n\r\n                if (Log) Log.info('[APIInitializationManager] Configuration loaded successfully');\r\n                return result;\r\n\r\n            } catch (error) {\r\n                this.stats.errors++;\r\n                this.pendingPromise = null;\r\n                if (Log) Log.error('[APIInitializationManager] Config loading failed:', error);\r\n                throw error;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Change le th√®me de l'interface\r\n         * @param {string} theme - Nom du th√®me\r\n         * @param {Function} getModule - Fonction d'acc√®s aux modules\r\n         * @returns {boolean} Succ√®s du changement\r\n         */\r\n        setTheme(theme, getModule) {\r\n            try {\r\n                if (Log) Log.info(`[APIInitializationManager] Setting theme: ${theme}`);\r\n\r\n                // Validation\r\n                if (!theme || typeof theme !== 'string') {\r\n                    throw new Error('Theme name must be a non-empty string');\r\n                }\r\n\r\n                if (!getModule || typeof getModule !== 'function') {\r\n                    throw new Error('getModule function is required');\r\n                }\r\n\r\n                // Obtenir le module UI\r\n                const UI = getModule(\"UI\");\r\n                if (!UI) {\r\n                    throw new Error(\"[GeoLeaf.setTheme] GeoLeaf.UI is not available. UI module must be loaded.\");\r\n                }\r\n\r\n                // Appliquer le th√®me - utilise applyTheme comme dans geoleaf.ui.js\r\n                let result = false;\r\n                if (typeof UI.applyTheme === 'function') {\r\n                    result = UI.applyTheme(theme);\r\n                } else if (typeof UI.setTheme === 'function') {\r\n                    result = UI.setTheme(theme);\r\n                } else if (typeof UI.theme === 'function') {\r\n                    result = UI.theme(theme);\r\n                } else {\r\n                    throw new Error('UI module does not provide applyTheme, setTheme or theme method');\r\n                }\r\n\r\n                if (Log) Log.info(`[APIInitializationManager] Theme '${theme}' applied successfully`);\r\n                return result;\r\n\r\n            } catch (error) {\r\n                this.stats.errors++;\r\n                if (Log) Log.error(`[APIInitializationManager] Failed to set theme '${theme}':`, error);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Valide les param√®tres d'initialisation\r\n         * @private\r\n         */\r\n        _validateInitParams(options, getModule) {\r\n            if (!options || typeof options !== \"object\") {\r\n                return { valid: false, error: \"[GeoLeaf.init] An options object is required.\" };\r\n            }\r\n\r\n            if (!getModule || typeof getModule !== 'function') {\r\n                return { valid: false, error: \"getModule function is required\" };\r\n            }\r\n\r\n            return { valid: true };\r\n        }\r\n\r\n        /**\r\n         * Normalise les options d'initialisation\r\n         * @private\r\n         */\r\n        _normalizeInitOptions(options) {\r\n            // Mode \"structur√©\" (recommand√©) : options.map / options.ui\r\n            let mapOpts = options.map || {};\r\n            let uiOpts = options.ui || {};\r\n\r\n            // Mode \"aplati\" (legacy) : target/mapId / center / zoom / theme √† la racine\r\n            if (!options.map) {\r\n                mapOpts = {\r\n                    target: options.target || options.mapId,\r\n                    center: options.center,\r\n                    zoom: options.zoom\r\n                };\r\n                uiOpts = {\r\n                    theme: options.theme\r\n                };\r\n            }\r\n\r\n            // Validation du target\r\n            const target = mapOpts.target || mapOpts.mapId;\r\n            if (!target) {\r\n                throw new Error(\"[GeoLeaf.init] The 'map.target' (or 'target'/'mapId') option is required.\");\r\n            }\r\n\r\n            // R√©cup√©rer les constantes par d√©faut\r\n            const CONSTANTS = global.GeoLeaf.CONSTANTS || {};\r\n            const center = Array.isArray(mapOpts.center) ? mapOpts.center : CONSTANTS.DEFAULT_CENTER || [0, 0];\r\n            const zoom = Number.isFinite(mapOpts.zoom) ? mapOpts.zoom : CONSTANTS.DEFAULT_ZOOM || 12;\r\n            const theme = uiOpts.theme || mapOpts.theme || \"light\";\r\n\r\n            // Adapter √† la signature Core.init\r\n            return {\r\n                mapId: String(target), // Core.init attend 'mapId' pas 'target'\r\n                center,\r\n                zoom,\r\n                theme\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Normalise les options de configuration\r\n         * @private\r\n         */\r\n        _normalizeConfigOptions(input) {\r\n            if (typeof input === 'string') {\r\n                // URL string\r\n                return {\r\n                    source: 'url',\r\n                    url: input,\r\n                    autoEvent: true\r\n                };\r\n            } else if (input && typeof input === 'object') {\r\n                // Configuration object\r\n                return {\r\n                    source: input.url ? 'url' : 'data',\r\n                    url: input.url,\r\n                    data: input.data,\r\n                    profileId: input.profileId,\r\n                    autoEvent: input.autoEvent !== false, // true par d√©faut\r\n                    ...input\r\n                };\r\n            } else {\r\n                throw new Error('Configuration input must be a URL string or options object');\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtient les statistiques du manager\r\n         * @returns {Object}\r\n         */\r\n        getStats() {\r\n            return {\r\n                ...this.stats,\r\n                isReady: this.isReady,\r\n                hasPendingRequest: !!this.pendingPromise\r\n            };\r\n        }\r\n\r\n        /**\r\n         * R√©initialise le manager\r\n         */\r\n        reset() {\r\n            if (this.pendingPromise) {\r\n                this.cancelled = true;\r\n            }\r\n\r\n            this.pendingPromise = null;\r\n            this.cancelled = false;\r\n            this.stats = {\r\n                initCalls: 0,\r\n                configLoads: 0,\r\n                errors: 0\r\n            };\r\n\r\n            if (Log) Log.info('[APIInitializationManager] Manager reset');\r\n        }\r\n    }\r\n\r\n    // Export vers le namespace GeoLeaf\r\n    GeoLeaf.API = GeoLeaf.API || {};\r\n    GeoLeaf.API.APIInitializationManager = APIInitializationManager; // Nom correct pour controller\r\n    GeoLeaf.API.InitializationManager = APIInitializationManager; // Alias pour compatibilit√©\r\n\r\n    if (Log) Log.info('[APIInitializationManager] Initialization manager loaded (Sprint 4.3 - Robust)');\r\n\r\n})(window);\r\n","/**\r\n * API Namespace Manager - Sprint 4.3 (Version Robuste)\r\n * Gestionnaire des op√©rations sur les namespaces GeoLeaf\r\n * @module APINamespaceManager\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log || console;\r\n\r\n    /**\r\n     * Gestionnaire des namespaces GeoLeaf\r\n     */\r\n    class APINamespaceManager {\r\n        constructor() {\r\n            this.isReady = true;\r\n            this.stats = {\r\n                operations: 0,\r\n                errors: 0\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Initialise le gestionnaire avec la fonction d'acc√®s aux modules\r\n         * @param {Function} getModule - Fonction d'acc√®s aux modules\r\n         * @returns {boolean} Succ√®s\r\n         */\r\n        init(getModule) {\r\n            try {\r\n                if (!getModule || typeof getModule !== 'function') {\r\n                    throw new Error('getModule function is required');\r\n                }\r\n\r\n                this.getModule = getModule;\r\n\r\n                if (Log) Log.info('[APINamespaceManager] Namespace manager initialized');\r\n                return true;\r\n\r\n            } catch (error) {\r\n                this.stats.errors++;\r\n                if (Log) Log.error('[APINamespaceManager] Initialization failed:', error);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtient les statistiques\r\n         */\r\n        getStats() {\r\n            return {\r\n                ...this.stats,\r\n                isReady: this.isReady\r\n            };\r\n        }\r\n\r\n        /**\r\n         * R√©initialise le gestionnaire\r\n         */\r\n        reset() {\r\n            this.getModule = null;\r\n            this.stats = {\r\n                operations: 0,\r\n                errors: 0\r\n            };\r\n\r\n            if (Log) Log.info('[APINamespaceManager] Manager reset');\r\n        }\r\n    }\r\n\r\n    // Export vers le namespace GeoLeaf\r\n    GeoLeaf.API = GeoLeaf.API || {};\r\n    GeoLeaf.API.APINamespaceManager = APINamespaceManager; // Nom correct pour controller\r\n    GeoLeaf.API.NamespaceManager = APINamespaceManager; // Alias pour compatibilit√©\r\n\r\n    if (Log) Log.info('[APINamespaceManager] Namespace manager loaded (Sprint 4.3 - Robust)');\r\n\r\n})(window);\r\n","/**\r\n * API Factory Manager - Sprint 4.3 (Version Robuste)\r\n * Gestionnaire pour la cr√©ation d'instances multi-cartes\r\n * @module APIFactoryManager\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log || console;\r\n\r\n    /**\r\n     * Gestionnaire de factory pour multi-cartes\r\n     */\r\n    class APIFactoryManager {\r\n        constructor() {\r\n            this.isReady = true;\r\n            this.mapInstances = new Map();\r\n            this.stats = {\r\n                mapsCreated: 0,\r\n                errors: 0\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Initialise le gestionnaire avec la fonction d'acc√®s aux modules\r\n         * @param {Function} getModule - Fonction d'acc√®s aux modules\r\n         * @returns {boolean} Succ√®s\r\n         */\r\n        init(getModule) {\r\n            try {\r\n                if (!getModule || typeof getModule !== 'function') {\r\n                    throw new Error('getModule function is required');\r\n                }\r\n\r\n                this.getModule = getModule;\r\n\r\n                if (Log) Log.info('[APIFactoryManager] Factory manager initialized');\r\n                return true;\r\n\r\n            } catch (error) {\r\n                this.stats.errors++;\r\n                if (Log) Log.error('[APIFactoryManager] Initialization failed:', error);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Cr√©e une nouvelle instance de carte\r\n         * @param {string} targetId - ID de l'√©l√©ment cible\r\n         * @param {Object} options - Options de configuration\r\n         * @param {Function} getModule - Fonction d'acc√®s aux modules\r\n         * @returns {*} Instance de carte ou null\r\n         */\r\n        createMap(targetId, options, getModule) {\r\n            try {\r\n                this.stats.mapsCreated++;\r\n\r\n                if (!targetId) {\r\n                    throw new Error('Target ID is required');\r\n                }\r\n\r\n                const Core = getModule('Core');\r\n                if (!Core || typeof Core.init !== 'function') {\r\n                    throw new Error('Core module not available for map creation');\r\n                }\r\n\r\n                // Cr√©er la carte avec les options fournies\r\n                const mapOptions = {\r\n                    target: targetId,\r\n                    ...options\r\n                };\r\n\r\n                const mapInstance = Core.init(mapOptions);\r\n\r\n                if (mapInstance) {\r\n                    this.mapInstances.set(targetId, mapInstance);\r\n                    if (Log) Log.info(`[APIFactoryManager] Map created for target: ${targetId}`);\r\n                }\r\n\r\n                return mapInstance;\r\n\r\n            } catch (error) {\r\n                this.stats.errors++;\r\n                if (Log) Log.error(`[APIFactoryManager] Failed to create map for ${targetId}:`, error);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtient une instance de carte par ID\r\n         * @param {string} targetId - ID de l'√©l√©ment cible\r\n         * @returns {*} Instance de carte ou null\r\n         */\r\n        getMapInstance(targetId) {\r\n            return this.mapInstances.get(targetId) || null;\r\n        }\r\n\r\n        /**\r\n         * Obtient toutes les instances de carte\r\n         * @returns {Array} Liste des instances\r\n         */\r\n        getAllMapInstances() {\r\n            return Array.from(this.mapInstances.values());\r\n        }\r\n\r\n        /**\r\n         * Obtient les statistiques\r\n         */\r\n        getStats() {\r\n            return {\r\n                ...this.stats,\r\n                activeInstances: this.mapInstances.size,\r\n                isReady: this.isReady\r\n            };\r\n        }\r\n\r\n        /**\r\n         * R√©initialise le gestionnaire\r\n         */\r\n        reset() {\r\n            this.mapInstances.clear();\r\n            this.getModule = null;\r\n            this.stats = {\r\n                mapsCreated: 0,\r\n                errors: 0\r\n            };\r\n\r\n            if (Log) Log.info('[APIFactoryManager] Manager reset');\r\n        }\r\n    }\r\n\r\n    // Export vers le namespace GeoLeaf\r\n    GeoLeaf.API = GeoLeaf.API || {};\r\n    GeoLeaf.API.APIFactoryManager = APIFactoryManager; // Nom correct pour controller\r\n    GeoLeaf.API.FactoryManager = APIFactoryManager; // Alias pour compatibilit√©\r\n\r\n    if (Log) Log.info('[APIFactoryManager] Factory manager loaded (Sprint 4.3 - Robust)');\r\n\r\n})(window);\r\n","/**\r\n * API Controller - Sprint 4.3 (Version Robuste)\r\n * Orchestrateur principal pour les op√©rations API GeoLeaf\r\n * Architecture modulaire avec validation renforc√©e\r\n * @module APIController\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const Log = GeoLeaf.Log || console;\r\n\r\n    /**\r\n     * Contr√¥leur principal pour l'API GeoLeaf\r\n     * G√®re l'orchestration des managers sp√©cialis√©s\r\n     */\r\n    class APIController {\r\n        constructor() {\r\n            this.isInitialized = false;\r\n            this.managers = {};\r\n            this.moduleAccessFn = null;\r\n\r\n            // √âtat de sanit√© du contr√¥leur\r\n            this.healthStatus = {\r\n                managers: 0,\r\n                errors: [],\r\n                lastUpdate: null\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Initialise le contr√¥leur et tous ses managers\r\n         * @returns {boolean} Succ√®s de l'initialisation\r\n         */\r\n        init() {\r\n            try {\r\n                if (this.isInitialized) {\r\n                    if (Log) Log.debug('[APIController] Already initialized');\r\n                    return true;\r\n                }\r\n\r\n                if (Log) Log.info('[APIController] Initializing API controller (Sprint 4.3 - Robust)');\r\n\r\n                // Initialiser les managers dans l'ordre\r\n                this._initializeManagers();\r\n\r\n                // Configurer l'acc√®s aux modules\r\n                const success = this._setupModuleAccess();\r\n                if (!success) {\r\n                    throw new Error('Module access setup failed');\r\n                }\r\n\r\n                // Valider l'√©tat final\r\n                this._validateInitialization();\r\n\r\n                this.isInitialized = true;\r\n                this.healthStatus.lastUpdate = new Date().toISOString();\r\n\r\n                if (Log) Log.info('[APIController] API controller initialized successfully');\r\n                return true;\r\n\r\n            } catch (error) {\r\n                this.healthStatus.errors.push({\r\n                    message: error.message,\r\n                    timestamp: new Date().toISOString(),\r\n                    stack: error.stack\r\n                });\r\n\r\n                if (Log) Log.error('[APIController] Initialization failed:', error);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Initialise tous les managers disponibles\r\n         * @private\r\n         */\r\n        _initializeManagers() {\r\n            const managerTypes = ['module', 'initialization', 'namespace', 'factory'];\r\n\r\n            managerTypes.forEach(type => {\r\n                const ManagerClass = this._getManagerClass(type);\r\n                if (ManagerClass) {\r\n                    try {\r\n                        this.managers[type] = new ManagerClass();\r\n                        this.healthStatus.managers++;\r\n                        if (Log) Log.debug(`[APIController] ${type} manager loaded`);\r\n                    } catch (error) {\r\n                        if (Log) Log.warn(`[APIController] Failed to load ${type} manager:`, error);\r\n                        this.healthStatus.errors.push({\r\n                            manager: type,\r\n                            error: error.message\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (Log) Log.info(`[APIController] Loaded ${this.healthStatus.managers} managers`);\r\n        }\r\n\r\n        /**\r\n         * Obtient la classe d'un manager\r\n         * @private\r\n         */\r\n        _getManagerClass(type) {\r\n            const classNames = {\r\n                module: 'APIModuleManager',\r\n                initialization: 'APIInitializationManager',\r\n                namespace: 'APINamespaceManager',\r\n                factory: 'APIFactoryManager'\r\n            };\r\n\r\n            const className = classNames[type];\r\n            return GeoLeaf.API && GeoLeaf.API[className] ? GeoLeaf.API[className] : null;\r\n        }\r\n\r\n        /**\r\n         * Configure l'acc√®s aux modules\r\n         * @private\r\n         */\r\n        _setupModuleAccess() {\r\n            // Le module manager doit √™tre initialis√© en premier\r\n            if (!this.managers.module) {\r\n                if (Log) Log.error('[APIController] Module manager not available');\r\n                return false;\r\n            }\r\n\r\n            // Initialiser le module manager avec les modules existants\r\n            const initSuccess = this.managers.module.init ? this.managers.module.init() : true;\r\n            if (!initSuccess) {\r\n                if (Log) Log.error('[APIController] Module manager initialization failed');\r\n                return false;\r\n            }\r\n\r\n            // Cr√©er la fonction d'acc√®s aux modules avec validation\r\n            this.moduleAccessFn = (name) => {\r\n                try {\r\n                    if (!name || typeof name !== 'string') {\r\n                        if (Log) Log.warn('[APIController] Invalid module name:', name);\r\n                        return null;\r\n                    }\r\n\r\n                    if (this.managers.module && typeof this.managers.module.getModule === 'function') {\r\n                        return this.managers.module.getModule(name);\r\n                    }\r\n\r\n                    // Fallback vers l'acc√®s global\r\n                    if (global.GeoLeaf && global.GeoLeaf[name]) {\r\n                        return global.GeoLeaf[name];\r\n                    }\r\n\r\n                    return null;\r\n                } catch (error) {\r\n                    if (Log) Log.warn(`[APIController] Error accessing module ${name}:`, error);\r\n                    return null;\r\n                }\r\n            };\r\n\r\n            if (Log) Log.info('[APIController] Module access configured');\r\n            return true;\r\n        }\r\n\r\n        /**\r\n         * Valide l'√©tat de l'initialisation\r\n         * @private\r\n         */\r\n        _validateInitialization() {\r\n            const checks = [\r\n                { name: 'moduleAccessFn', value: this.moduleAccessFn, type: 'function' },\r\n                { name: 'managers', value: this.managers, type: 'object' },\r\n                { name: 'moduleManager', value: this.managers.module, type: 'object' }\r\n            ];\r\n\r\n            const failures = checks.filter(check => {\r\n                return !check.value || typeof check.value !== check.type;\r\n            });\r\n\r\n            if (failures.length > 0) {\r\n                const failureNames = failures.map(f => f.name).join(', ');\r\n                throw new Error(`Validation failed for: ${failureNames}`);\r\n            }\r\n\r\n            if (Log) Log.debug('[APIController] Validation passed');\r\n        }\r\n\r\n        /**\r\n         * GeoLeaf.init() - Initialisation de carte\r\n         */\r\n        geoleafInit(options) {\r\n            if (!this._ensureInitialized()) return null;\r\n\r\n            try {\r\n                if (!this.managers.initialization) {\r\n                    throw new Error('Initialization manager not available');\r\n                }\r\n\r\n                return this.managers.initialization.init(options, this.moduleAccessFn);\r\n            } catch (error) {\r\n                if (Log) Log.error('[APIController] geoleafInit failed:', error);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * GeoLeaf.loadConfig() - Chargement configuration\r\n         */\r\n        geoleafLoadConfig(input) {\r\n            if (!this._ensureInitialized()) return Promise.resolve(null);\r\n\r\n            try {\r\n                if (!this.managers.initialization) {\r\n                    throw new Error('Initialization manager not available');\r\n                }\r\n\r\n                return this.managers.initialization.loadConfig(input, this.moduleAccessFn);\r\n            } catch (error) {\r\n                if (Log) Log.error('[APIController] geoleafLoadConfig failed:', error);\r\n                return Promise.resolve(null);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * GeoLeaf.setTheme() - Changement de th√®me\r\n         */\r\n        geoleafSetTheme(theme) {\r\n            if (!this._ensureInitialized()) return false;\r\n\r\n            try {\r\n                if (!this.managers.initialization) {\r\n                    throw new Error('Initialization manager not available');\r\n                }\r\n\r\n                return this.managers.initialization.setTheme(theme, this.moduleAccessFn);\r\n            } catch (error) {\r\n                if (Log) Log.error('[APIController] geoleafSetTheme failed:', error);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * GeoLeaf.createMap() - Cr√©ation multi-cartes\r\n         */\r\n        geoleafCreateMap(targetId, options) {\r\n            if (!this._ensureInitialized()) return null;\r\n\r\n            try {\r\n                if (!this.managers.factory) {\r\n                    throw new Error('Factory manager not available');\r\n                }\r\n\r\n                return this.managers.factory.createMap(targetId, options, this.moduleAccessFn);\r\n            } catch (error) {\r\n                if (Log) Log.error('[APIController] geoleafCreateMap failed:', error);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * S'assure que le contr√¥leur est initialis√©\r\n         * @private\r\n         */\r\n        _ensureInitialized() {\r\n            if (!this.isInitialized) {\r\n                if (Log) Log.error('[APIController] Controller not initialized');\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n\r\n        /**\r\n         * Obtient l'√©tat de sant√© du contr√¥leur\r\n         */\r\n        getHealthStatus() {\r\n            return {\r\n                ...this.healthStatus,\r\n                isInitialized: this.isInitialized,\r\n                managersCount: Object.keys(this.managers).length,\r\n                hasModuleAccess: !!this.moduleAccessFn\r\n            };\r\n        }\r\n\r\n        /**\r\n         * R√©initialise le contr√¥leur\r\n         */\r\n        reset() {\r\n            this.isInitialized = false;\r\n            this.managers = {};\r\n            this.moduleAccessFn = null;\r\n            this.healthStatus = {\r\n                managers: 0,\r\n                errors: [],\r\n                lastUpdate: null\r\n            };\r\n\r\n            if (Log) Log.info('[APIController] Controller reset');\r\n        }\r\n    }\r\n\r\n    // Export vers le namespace GeoLeaf\r\n    GeoLeaf.API = GeoLeaf.API || {};\r\n    GeoLeaf.API.Controller = APIController;\r\n\r\n    // Cr√©er et exposer une instance globale _APIController\r\n    if (!GeoLeaf._APIController) {\r\n        const controllerInstance = new APIController();\r\n\r\n        // Tentative d'initialisation automatique\r\n        const initSuccess = controllerInstance.init();\r\n        if (initSuccess) {\r\n            GeoLeaf._APIController = controllerInstance;\r\n            if (Log) Log.info('[APIController] Global instance created and initialized successfully');\r\n        } else {\r\n            if (Log) Log.warn('[APIController] Failed to auto-initialize - will try manual init later');\r\n            GeoLeaf._APIController = controllerInstance; // Exposer quand m√™me pour debug\r\n        }\r\n    }\r\n\r\n    if (Log) Log.info('[APIController] Controller class loaded (Sprint 4.3 - Robust)');\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/*!\r\n * GeoLeaf ‚Äì API publique unifi√©e\r\n * Point d'entr√©e pour futurs bundles (CDN / UMD / ESM)\r\n * Phase 4.3 ‚Äî Architecture Controller refactoris√©e robuste\r\n */\r\n/* global define */\r\n(function (root, factory) {\r\n    \"use strict\";\r\n\r\n    // UMD minimal : AMD, CommonJS, global\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define([], function () {\r\n            return factory(root);\r\n        });\r\n    } else if (typeof module === \"object\" && module.exports) {\r\n        module.exports = factory(root);\r\n    } else {\r\n        root.GeoLeaf = factory(root);\r\n    }\r\n}(typeof self !== \"undefined\" ? self : this, function (root) {\r\n    \"use strict\";\r\n\r\n    // ---------------------------------------------------------------------\r\n    // Architecture Controller - D√©l√©gation robuste vers APIController\r\n    // ---------------------------------------------------------------------\r\n\r\n    // R√©cup√©ration de l'√©ventuel GeoLeaf d√©j√† attach√© par les modules\r\n    const existing = root.GeoLeaf || {};\r\n\r\n    // Logger unifi√© (d√©fini par geoleaf.logger-shim.js)\r\n    const Log = existing.Log;\r\n\r\n    // V√©rification de la disponibilit√© d'APIController\r\n    const APIController = existing._APIController;\r\n\r\n    if (!APIController) {\r\n        Log.error(\"[GeoLeaf.API] APIController non disponible. Les modules API Controller doivent √™tre charg√©s avant geoleaf.api.js\");\r\n        throw new Error(\"APIController manquant - v√©rifiez que les modules API sont charg√©s\");\r\n    }\r\n\r\n    // Validation de l'√©tat de l'APIController\r\n    if (!APIController.isInitialized) {\r\n        Log.error(\"[GeoLeaf.API] APIController en √©tat d√©faillant. V√©rification de l'√©tat :\", APIController.getHealthStatus());\r\n        throw new Error(\"APIController en √©tat d√©faillant\");\r\n    }\r\n\r\n    // ---------------------------------------------------------------------\r\n    // API publique d√©l√©gu√©e vers APIController\r\n    // ---------------------------------------------------------------------\r\n\r\n    /**\r\n     * GeoLeaf.init(options) - Initialisation compl√®te\r\n     * D√©l√®gue vers APIController.geoleafInit()\r\n     */\r\n    function geoleafInit(options) {\r\n        try {\r\n            return APIController.geoleafInit(options);\r\n        } catch (error) {\r\n            Log.error(\"[GeoLeaf.init] Erreur lors de l'initialisation :\", error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * GeoLeaf.setTheme(theme) - Application de th√®me\r\n     * D√©l√®gue vers APIController.geoleafSetTheme()\r\n     */\r\n    function geoleafSetTheme(theme) {\r\n        try {\r\n            return APIController.geoleafSetTheme(theme);\r\n        } catch (error) {\r\n            Log.error(\"[GeoLeaf.setTheme] Erreur lors de l'application du th√®me :\", error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * GeoLeaf.loadConfig(input) - Chargement de configuration\r\n     * D√©l√®gue vers APIController.geoleafLoadConfig()\r\n     */\r\n    function geoleafLoadConfig(input) {\r\n        try {\r\n            return APIController.geoleafLoadConfig(input);\r\n        } catch (error) {\r\n            Log.error(\"[GeoLeaf.loadConfig] Erreur lors du chargement de configuration :\", error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    // ---------------------------------------------------------------------\r\n    // Constantes et utilitaires\r\n    // ---------------------------------------------------------------------\r\n\r\n    const CONSTANTS = {\r\n        VERSION: \"4.3.0-robust\",\r\n        DEFAULT_CENTER: [0, 0],\r\n        DEFAULT_ZOOM: 3,\r\n        THEMES: [\"light\", \"dark\", \"satellite\", \"custom\"]\r\n    };\r\n\r\n    // ---------------------------------------------------------------------\r\n    // Construction de l'API finale\r\n    // ---------------------------------------------------------------------\r\n\r\n    const GeoLeaf = Object.assign(existing, {\r\n        // M√©thodes principales\r\n        init: geoleafInit,\r\n        setTheme: geoleafSetTheme,\r\n        loadConfig: geoleafLoadConfig,\r\n\r\n        // Constantes\r\n        CONSTANTS,\r\n\r\n        // Acc√®s aux modules via APIController\r\n        getModule: function(name) {\r\n            return APIController.moduleAccessFn ? APIController.moduleAccessFn(name) : null;\r\n        },\r\n\r\n        hasModule: function(name) {\r\n            const module = APIController.moduleAccessFn ? APIController.moduleAccessFn(name) : null;\r\n            return !!module;\r\n        },\r\n\r\n        // Acc√®s aux namespaces via APIController\r\n        getNamespace: function(name) {\r\n            return APIController.managers && APIController.managers.namespace ?\r\n                APIController.managers.namespace.get(name) : null;\r\n        },\r\n\r\n        // Gestion des instances de cartes via APIController\r\n        createMap: function(id, options) {\r\n            return APIController.geoleafCreateMap ? APIController.geoleafCreateMap(id, options) : null;\r\n        },\r\n\r\n        getMap: function(id) {\r\n            return APIController.managers && APIController.managers.factory ?\r\n                APIController.managers.factory.get(id) : null;\r\n        },\r\n\r\n        getAllMaps: function() {\r\n            return APIController.managers && APIController.managers.factory ?\r\n                APIController.managers.factory.getAll() : {};\r\n        },\r\n\r\n        removeMap: function(id) {\r\n            return APIController.managers && APIController.managers.factory ?\r\n                APIController.managers.factory.remove(id) : false;\r\n        },\r\n\r\n        // M√©triques et monitoring\r\n        getHealth: function() {\r\n            return APIController.getHealthStatus ? APIController.getHealthStatus() : null;\r\n        },\r\n\r\n        getMetrics: function() {\r\n            return APIController.getHealthStatus ? APIController.getHealthStatus() : null;\r\n        },\r\n\r\n        // Acc√®s interne pour modules (ne pas utiliser publiquement)\r\n        _APIController: APIController\r\n    });\r\n\r\n    // Log de l'initialisation r√©ussie\r\n    if (Log) {\r\n        Log.info(`[GeoLeaf.API] API publique v${CONSTANTS.VERSION} initialis√©e avec succ√®s`);\r\n        Log.info(`[GeoLeaf.API] Sant√© APIController :`, APIController.getHealthStatus());\r\n    }\r\n\r\n    return GeoLeaf;\r\n}));\r\n","/*!\r\n * GeoLeaf Core ‚Äì App / Helpers\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf Application Helpers\r\n * Syst√®me de logs production, d√©tection de chemin, v√©rification des plugins,\r\n * et helper de notification.\r\n *\r\n * Ce fichier cr√©e le namespace partag√© GeoLeaf._app utilis√© par\r\n * app/init.js et app/boot.js.\r\n *\r\n * @module app/helpers\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n\r\n    /**\r\n     * Namespace interne pour le module Application Bootstrap.\r\n     * Partag√© entre app/helpers.js, app/init.js et app/boot.js.\r\n     * @namespace GeoLeaf._app\r\n     * @private\r\n     */\r\n    const _app = GeoLeaf._app = GeoLeaf._app || {};\r\n\r\n    // ============================================================\r\n    // Syst√®me de logs production\r\n    // ============================================================\r\n    _app.AppLog = {\r\n        log(...args) {\r\n            if (location.search.includes('debug=true')) {\r\n                console.log('[GeoLeaf]', ...args);\r\n            }\r\n        },\r\n        info(...args) {\r\n            console.info('[GeoLeaf]', ...args);\r\n        },\r\n        error(...args) {\r\n            console.error('[GeoLeaf]', ...args);\r\n        },\r\n        warn(...args) {\r\n            console.warn('[GeoLeaf]', ...args);\r\n        }\r\n    };\r\n\r\n    // ============================================================\r\n    // D√©tection automatique du chemin vers profiles/\r\n    // ============================================================\r\n    /**\r\n     * D√©tecte automatiquement le chemin de base vers le dossier profiles/\r\n     * en fonction de l'URL courante.\r\n     * @returns {string} Chemin relatif vers profiles/\r\n     */\r\n    _app.getProfilesBasePath = function () {\r\n        const currentPath = global.location.pathname;\r\n        if (currentPath.includes('/demo/')) {\r\n            return '../profiles/';\r\n        }\r\n        return './profiles/';\r\n    };\r\n\r\n    // ============================================================\r\n    // V√©rification des plugins au boot\r\n    // ============================================================\r\n    /**\r\n     * V√©rifie que les plugins requis par la configuration sont bien charg√©s\r\n     * et affiche des avertissements dans la console si ce n'est pas le cas.\r\n     * @param {Object} cfg - Configuration du profil actif\r\n     */\r\n    _app.checkPlugins = function (cfg) {\r\n        const AppLog = _app.AppLog;\r\n\r\n        // Avertissement si config attend AddPOI mais plugin non charg√©\r\n        if (cfg && cfg.ui && cfg.ui.showAddPoi === true) {\r\n            if (!GeoLeaf.POI || !GeoLeaf.POI.AddForm) {\r\n                AppLog.warn(\r\n                    '‚ö†Ô∏è Config has showAddPoi=true but AddPOI plugin is not loaded. ' +\r\n                    'Load geoleaf-addpoi.plugin.js before calling GeoLeaf.boot().'\r\n                );\r\n            }\r\n        }\r\n\r\n        // Avertissement si config attend Storage mais plugin non charg√©\r\n        if (cfg && cfg.storage) {\r\n            if (!GeoLeaf.Storage) {\r\n                AppLog.warn(\r\n                    '‚ö†Ô∏è Config references storage but Storage plugin is not loaded. ' +\r\n                    'Load geoleaf-storage.plugin.js before calling GeoLeaf.boot().'\r\n                );\r\n            }\r\n\r\n            // Avertissement si enableServiceWorker mais sw-register absent\r\n            if (cfg.storage.enableServiceWorker && !GeoLeaf._SWRegister) {\r\n                AppLog.warn(\r\n                    '‚ö†Ô∏è Config has enableServiceWorker=true but SW Register module is not available. ' +\r\n                    'Ensure sw-register.js is included in the Storage plugin bundle.'\r\n                );\r\n            }\r\n        }\r\n\r\n        // Avertissement si SyncHandler est charg√© sans Storage\r\n        if (GeoLeaf.POI && GeoLeaf.POI.SyncHandler && !GeoLeaf.Storage) {\r\n            AppLog.warn(\r\n                '‚ö†Ô∏è SyncHandler loaded without Storage plugin ‚Äî sync operations will be disabled. ' +\r\n                'POI add/edit/delete will work in online-only mode.'\r\n            );\r\n        }\r\n    };\r\n\r\n    // ============================================================\r\n    // Helper : afficher une notification\r\n    // ============================================================\r\n    /**\r\n     * Affiche une notification via le syst√®me UI de GeoLeaf.\r\n     * Tente d'abord GeoLeaf.UI.Notifications, puis GeoLeaf._UINotifications.\r\n     * @param {string} message - Message √† afficher\r\n     * @param {number} [duration=3500] - Dur√©e d'affichage en millisecondes\r\n     * @returns {boolean} true si la notification a √©t√© affich√©e\r\n     */\r\n    _app.showNotification = function (message, duration) {\r\n        duration = duration || 3500;\r\n        if (GeoLeaf.UI && GeoLeaf.UI.Notifications && typeof GeoLeaf.UI.Notifications.success === \"function\") {\r\n            try { GeoLeaf.UI.Notifications.success(message, duration); return true; } catch (e) {}\r\n        }\r\n        if (GeoLeaf._UINotifications && typeof GeoLeaf._UINotifications.success === \"function\") {\r\n            try { GeoLeaf._UINotifications.success(message, duration); return true; } catch (e) {}\r\n        }\r\n        _app.AppLog.log(message + \" (notifications indisponibles)\");\r\n        return false;\r\n    };\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core ‚Äì App / Init\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf Application Init\r\n * Fonction principale d'initialisation de l'application :\r\n * - Initialisation de la carte\r\n * - Chargement des modules (POI, Routes, GeoJSON, etc.)\r\n * - Configuration des composants UI\r\n * - M√©canisme de reveal (loader / spinner)\r\n *\r\n * @module app/init\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const _app = GeoLeaf._app = GeoLeaf._app || {};\r\n\r\n    // ============================================================\r\n    // Fonction principale : initialiser l'application\r\n    // ============================================================\r\n    _app.initApp = function (cfg) {\r\n        cfg = cfg || {};\r\n        const AppLog = _app.AppLog;\r\n        AppLog.log(\"Initialisation avec config:\", cfg);\r\n\r\n        // V√©rifier les plugins\r\n        _app.checkPlugins(cfg);\r\n\r\n        // ========================================================\r\n        // Initialisation de la carte\r\n        // La carte est cr√©√©e directement sur l'emprise du profil\r\n        // (map.bounds obligatoire dans le profil).\r\n        // ========================================================\r\n        const mapTarget = (cfg.map && (cfg.map.target || cfg.map.id)) || \"geoleaf-map\";\r\n        const uiTheme = (cfg.ui && cfg.ui.theme) || \"light\";\r\n\r\n        // Bounds obligatoires ‚Äî pas de fallback carte monde\r\n        if (!cfg.map || !Array.isArray(cfg.map.bounds) || cfg.map.bounds.length !== 2) {\r\n            AppLog.error(\r\n                \"[GeoLeaf] Le profil actif ne d√©finit pas de map.bounds valide. \" +\r\n                \"L'emprise (map.bounds) est obligatoire dans le fichier profile.json. \" +\r\n                \"Exemple : \\\"bounds\\\": [[43.0, 1.0], [44.0, 2.0]]\"\r\n            );\r\n            return;\r\n        }\r\n\r\n        // Calculer le centre depuis les bounds pour √©viter le flash carte monde\r\n        const profileBounds = cfg.map.bounds;\r\n        const profileMaxZoom = cfg.map.maxZoom || 12;\r\n        const profilePadding = cfg.map.padding || [50, 50];\r\n        const mapCenter = [\r\n            (profileBounds[0][0] + profileBounds[1][0]) / 2,\r\n            (profileBounds[0][1] + profileBounds[1][1]) / 2\r\n        ];\r\n\r\n        let map = null;\r\n\r\n        try {\r\n            map = GeoLeaf.init({\r\n                map: {\r\n                    target: mapTarget,\r\n                    center: mapCenter,\r\n                    zoom: profileMaxZoom\r\n                },\r\n                ui: {\r\n                    theme: uiTheme\r\n                }\r\n            });\r\n        } catch (e) {\r\n            AppLog.error(\"GeoLeaf.init() a lev√© une erreur :\", e);\r\n            return;\r\n        }\r\n\r\n        if (!map) {\r\n            AppLog.error(\"GeoLeaf.init() n'a pas renvoy√© de carte valide.\");\r\n            return;\r\n        }\r\n\r\n        // Positionnement pr√©cis via fitBounds (ajuste le zoom aux dimensions r√©elles du conteneur)\r\n        try {\r\n            map.fitBounds(profileBounds, {\r\n                maxZoom: profileMaxZoom,\r\n                padding: profilePadding,\r\n                animate: false\r\n            });\r\n            AppLog.log(\"Carte positionn√©e via map.bounds du profil.\");\r\n        } catch (e) {\r\n            AppLog.warn(\"Erreur fitBounds depuis profile.map.bounds :\", e);\r\n        }\r\n\r\n        // ========================================================\r\n        // Initialiser le Storage avec la config du profil (si plugin charg√©)\r\n        // ========================================================\r\n        if (GeoLeaf.Storage && typeof GeoLeaf.Storage.init === \"function\") {\r\n            try {\r\n                const storageConfig = cfg.storage || {};\r\n                AppLog.log(\"Initialisation du Storage avec config:\", storageConfig);\r\n\r\n                GeoLeaf.Storage.init({\r\n                    indexedDB: { name: 'geoleaf-db', version: 2 },\r\n                    cache: storageConfig.cache || {\r\n                        enableProfileCache: true,\r\n                        enableTileCache: true\r\n                    },\r\n                    offline: {},\r\n                    enableOfflineDetector: !!(storageConfig.enableOfflineDetector),\r\n                    enableServiceWorker: !!(storageConfig.enableServiceWorker)\r\n                }).then(() => {\r\n                    AppLog.log(\"Storage initialis√© avec succ√®s\");\r\n                }).catch(err => {\r\n                    AppLog.warn(\"Erreur initialisation Storage:\", err);\r\n                });\r\n            } catch (e) {\r\n                AppLog.warn(\"Erreur lors de l'initialisation du Storage:\", e);\r\n            }\r\n        } else {\r\n            AppLog.log(\"Plugin Storage non charg√© ‚Äî fonctionnement en mode cache navigateur standard.\");\r\n        }\r\n\r\n        // ========================================================\r\n        // Initialiser le syst√®me de notifications UI\r\n        // ========================================================\r\n        if (GeoLeaf._UINotifications && typeof GeoLeaf._UINotifications.init === \"function\") {\r\n            try {\r\n                let notificationContainer = document.getElementById('gl-notifications');\r\n                if (!notificationContainer) {\r\n                    notificationContainer = document.createElement('div');\r\n                    notificationContainer.id = 'gl-notifications';\r\n                    notificationContainer.className = 'gl-notifications gl-notifications--bottom-center';\r\n                    document.body.appendChild(notificationContainer);\r\n                }\r\n\r\n                GeoLeaf._UINotifications.init({\r\n                    container: '#gl-notifications',\r\n                    position: 'bottom-center',\r\n                    maxVisible: 3,\r\n                    animations: true\r\n                });\r\n\r\n                AppLog.log(\"Syst√®me de notifications initialis√©\");\r\n            } catch (e) {\r\n                AppLog.warn(\"Erreur lors de l'initialisation des notifications:\", e);\r\n            }\r\n        }\r\n\r\n        // ========================================================\r\n        // Toast de chargement persistant pendant le chargement des couches\r\n        // Affich√© d√®s que le ThemeApplier commence √† charger un th√®me,\r\n        // ferm√© quand geoleaf:theme:applied est √©mis.\r\n        // ========================================================\r\n        let _loadingToast = null;\r\n\r\n        document.addEventListener('geoleaf:theme:applying', function(event) {\r\n            // Afficher un toast persistant si le syst√®me de notifications est pr√™t\r\n            if (GeoLeaf._UINotifications && GeoLeaf._UINotifications.container) {\r\n                _loadingToast = GeoLeaf._UINotifications.info(\r\n                    'Chargement des donn√©es en cours, patientez‚Ä¶',\r\n                    { persistent: true, dismissible: false }\r\n                );\r\n            }\r\n        });\r\n\r\n        // ========================================================\r\n        // √âcouteurs d'√©v√©nements (notifications profile & theme)\r\n        // ========================================================\r\n        let pendingProfileToastDetail = null;\r\n\r\n        function notificationsReady() {\r\n            try {\r\n                if (GeoLeaf.UI && GeoLeaf.UI.Notifications && typeof GeoLeaf.UI.Notifications.getStatus === \"function\") {\r\n                    return !!GeoLeaf.UI.Notifications.getStatus().initialized;\r\n                }\r\n                if (GeoLeaf._UINotifications && GeoLeaf._UINotifications.container) {\r\n                    return true;\r\n                }\r\n            } catch (e) {}\r\n            return false;\r\n        }\r\n\r\n        function tryShowProfileToast(detail) {\r\n            if (!detail || !detail.data) return false;\r\n            const profile = detail.data.profile || {};\r\n            const profileName = profile.label || profile.name || profile.title || detail.profileId || 'Profil';\r\n            const message = profileName + \" charg√©\";\r\n            if (!notificationsReady()) {\r\n                pendingProfileToastDetail = detail;\r\n                return false;\r\n            }\r\n            const shown = _app.showNotification(message);\r\n            if (shown) pendingProfileToastDetail = null;\r\n            else pendingProfileToastDetail = detail;\r\n            return shown;\r\n        }\r\n\r\n        document.addEventListener(\"geoleaf:profile:loaded\", function(event) {\r\n            if (event && event.detail) {\r\n                pendingProfileToastDetail = event.detail;\r\n                tryShowProfileToast(event.detail);\r\n            }\r\n        });\r\n\r\n        document.addEventListener(\"geoleaf:theme:applied\", function(event) {\r\n            // Fermer le toast de chargement persistant\r\n            if (_loadingToast && GeoLeaf._UINotifications && typeof GeoLeaf._UINotifications.dismiss === 'function') {\r\n                GeoLeaf._UINotifications.dismiss(_loadingToast);\r\n                _loadingToast = null;\r\n            }\r\n            if (event && event.detail) {\r\n                const detail = event.detail;\r\n                _app.showNotification(`Th√®me \"${detail.themeName}\" charg√© (${detail.layerCount} couches visibles)`, 3500);\r\n            }\r\n        });\r\n\r\n        // √âcouter la fin de chargement pour les notifications en attente\r\n        document.addEventListener(\"geoleaf:map:ready\", function() {\r\n            if (pendingProfileToastDetail) {\r\n                tryShowProfileToast(pendingProfileToastDetail);\r\n            }\r\n        });\r\n\r\n        // ========================================================\r\n        // Th√®me UI via GeoLeaf.setTheme() + initialisation UI\r\n        // ========================================================\r\n        try {\r\n            if (typeof GeoLeaf.setTheme === \"function\") {\r\n                GeoLeaf.setTheme(uiTheme);\r\n            }\r\n        } catch (e) {\r\n            AppLog.warn(\"Erreur lors de l'appel √† GeoLeaf.setTheme :\", e);\r\n        }\r\n\r\n        if (GeoLeaf.UI && typeof GeoLeaf.UI.init === \"function\") {\r\n            try {\r\n                const mapContainer = document.querySelector('.gl-main') || document.getElementById(mapTarget);\r\n                GeoLeaf.UI.init({\r\n                    buttonSelector: '[data-gl-role=\"theme-toggle\"]',\r\n                    map: map,\r\n                    mapContainer: mapContainer,\r\n                    config: cfg\r\n                });\r\n            } catch (e) {\r\n                AppLog.warn(\"GeoLeaf.UI.init() a lev√© une erreur :\", e);\r\n            }\r\n        }\r\n\r\n        // Construction du panneau de filtres\r\n        if (GeoLeaf.UI && typeof GeoLeaf.UI.buildFilterPanelFromActiveProfile === \"function\") {\r\n            try {\r\n                let filterContainer = document.getElementById(\"gl-filter-panel\");\r\n                if (!filterContainer) {\r\n                    filterContainer = document.createElement(\"div\");\r\n                    filterContainer.id = \"gl-filter-panel\";\r\n                    filterContainer.setAttribute(\"data-gl-role\", \"filter-panel\");\r\n                    const glMain = document.querySelector('.gl-main');\r\n                    if (glMain) glMain.appendChild(filterContainer);\r\n                    else document.body.appendChild(filterContainer);\r\n                }\r\n\r\n                GeoLeaf.UI.buildFilterPanelFromActiveProfile({ container: filterContainer });\r\n\r\n                if (typeof GeoLeaf.UI.initFilterToggle === \"function\") {\r\n                    GeoLeaf.UI.initFilterToggle();\r\n                }\r\n                if (typeof GeoLeaf.UI.initProximityFilter === \"function\") {\r\n                    GeoLeaf.UI.initProximityFilter(map);\r\n                }\r\n            } catch (e) {\r\n                AppLog.warn(\"Erreur lors de la construction du panneau de filtres :\", e);\r\n            }\r\n        }\r\n\r\n        // Initialisation du module Table\r\n        if (GeoLeaf.Table && typeof GeoLeaf.Table.init === \"function\" && cfg.tableConfig && cfg.tableConfig.enabled) {\r\n            try {\r\n                GeoLeaf.Table.init({ map: map, config: cfg.tableConfig });\r\n                AppLog.log(\"Module Table initialis√©.\");\r\n            } catch (e) {\r\n                AppLog.warn(\"Erreur lors de l'initialisation du module Table :\", e);\r\n            }\r\n        }\r\n\r\n        // Initialisation du bouton de cache offline (si plugin Storage charg√©)\r\n        if (GeoLeaf.UI && GeoLeaf.UI.CacheButton && typeof GeoLeaf.UI.CacheButton.init === \"function\") {\r\n            try {\r\n                GeoLeaf.UI.CacheButton.init(map, cfg);\r\n                AppLog.log(\"Bouton de cache initialis√©.\");\r\n            } catch (e) {\r\n                AppLog.warn(\"Erreur lors de l'initialisation du bouton de cache :\", e);\r\n            }\r\n        }\r\n\r\n        // ========================================================\r\n        // Basemaps via GeoLeaf.BaseLayers\r\n        // ========================================================\r\n        (function initBasemaps() {\r\n            const baseLayersModule = GeoLeaf.BaseLayers || GeoLeaf.Baselayers;\r\n            if (!baseLayersModule || typeof baseLayersModule.init !== \"function\") {\r\n                AppLog.warn(\"Module BaseLayers introuvable.\");\r\n                return;\r\n            }\r\n\r\n            let activeKey = \"street\";\r\n            const basemapsFromConfig = {};\r\n            if (cfg.basemaps && typeof cfg.basemaps === 'object') {\r\n                Object.keys(cfg.basemaps).forEach(function(key) {\r\n                    const def = cfg.basemaps[key];\r\n                    if (def.defaultBasemap === true) activeKey = def.id || key;\r\n                    basemapsFromConfig[key] = {\r\n                        id: def.id || key,\r\n                        label: def.label || key,\r\n                        url: def.url,\r\n                        options: {\r\n                            minZoom: def.minZoom || 0,\r\n                            maxZoom: def.maxZoom || 19,\r\n                            attribution: def.attribution || ''\r\n                        }\r\n                    };\r\n                });\r\n            }\r\n\r\n            try {\r\n                baseLayersModule.init({\r\n                    map: map,\r\n                    baselayers: basemapsFromConfig,\r\n                    activeKey: activeKey,\r\n                    ui: cfg.ui,\r\n                    basemaps: cfg.basemaps\r\n                });\r\n            } catch (e) {\r\n                AppLog.warn(\"BaseLayers.init a lev√© une exception :\", e);\r\n            }\r\n        })();\r\n\r\n        // ========================================================\r\n        // POI via GeoLeaf.POI\r\n        // ========================================================\r\n        (function initPOI() {\r\n            const poiApi = GeoLeaf.POI;\r\n            if (!poiApi || typeof poiApi.add !== \"function\") {\r\n                AppLog.warn(\"GeoLeaf.POI.add() indisponible, aucun POI ne sera affich√©.\");\r\n                return;\r\n            }\r\n\r\n            try {\r\n                if (typeof poiApi.init === \"function\") {\r\n                    poiApi.init({ map: map, config: cfg.poiConfig || {} });\r\n\r\n                    // Chargement des l√©gendes POI\r\n                    if (GeoLeaf.Legend && typeof GeoLeaf.Legend.loadLayerLegend === \"function\" && cfg.layers && Array.isArray(cfg.layers)) {\r\n                        cfg.layers.forEach(function(layerRef) {\r\n                            if (layerRef.id && layerRef.id.includes('poi') && layerRef.configFile) {\r\n                                fetch(layerRef.configFile)\r\n                                    .then(response => response.json())\r\n                                    .then(layerConfig => {\r\n                                        let styleId = 'default';\r\n                                        if (layerConfig.styles && layerConfig.styles.available && layerConfig.styles.available.length > 0) {\r\n                                            styleId = layerConfig.styles.available[0].id || 'default';\r\n                                        }\r\n                                        GeoLeaf.Legend.loadLayerLegend(layerRef.id, styleId, layerConfig);\r\n                                        if (typeof GeoLeaf.Legend.setLayerVisibility === \"function\") {\r\n                                            GeoLeaf.Legend.setLayerVisibility(layerRef.id, true);\r\n                                        }\r\n                                    })\r\n                                    .catch(err => AppLog.warn(`Erreur chargement config couche ${layerRef.id}:`, err));\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                AppLog.warn(\"GeoLeaf.POI.init() a lev√© une erreur :\", e);\r\n            }\r\n\r\n            const showFilterPanel = cfg.ui && cfg.ui.showFilterPanel === true;\r\n            if (showFilterPanel) {\r\n                AppLog.info(\"Panneau de filtres activ√© : les POI seront charg√©s via le syst√®me de filtres.\");\r\n                if (GeoLeaf.UI && typeof GeoLeaf.UI.applyFiltersInitial === \"function\") {\r\n                    GeoLeaf.UI.applyFiltersInitial();\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (!Array.isArray(cfg.poi) || cfg.poi.length === 0) {\r\n                return;\r\n            }\r\n\r\n            const bounds = [];\r\n            cfg.poi.forEach(function (poiItem) {\r\n                let latlng = null;\r\n                if (poiItem.latlng && Array.isArray(poiItem.latlng) && poiItem.latlng.length === 2) {\r\n                    latlng = poiItem.latlng;\r\n                } else if (poiItem.location && typeof poiItem.location.lat === \"number\" && typeof poiItem.location.lng === \"number\") {\r\n                    latlng = [poiItem.location.lat, poiItem.location.lng];\r\n                }\r\n                if (latlng) bounds.push(latlng);\r\n            });\r\n\r\n            if (bounds.length > 0) {\r\n                // fitBounds POI uniquement si pas de bounds dans le profil ET pas de couches GeoJSON\r\n                const hasBoundsFromProfile = cfg.map && Array.isArray(cfg.map.bounds) && cfg.map.bounds.length === 2;\r\n                const hasGeoJSONLayers = cfg.layers && Array.isArray(cfg.layers) && cfg.layers.length > 0;\r\n                if (!hasBoundsFromProfile && !hasGeoJSONLayers) {\r\n                    try {\r\n                        map.fitBounds(L.latLngBounds(bounds), { padding: [80, 80], maxZoom: 12, animate: false });\r\n                    } catch (e) {\r\n                        AppLog.warn(\"Erreur lors de fitBounds :\", e);\r\n                    }\r\n                }\r\n                if (GeoLeaf.UI && typeof GeoLeaf.UI.refreshFilterTags === \"function\") {\r\n                    GeoLeaf.UI.refreshFilterTags();\r\n                }\r\n            }\r\n        })();\r\n\r\n        // ========================================================\r\n        // Itin√©raires via GeoLeaf.Route\r\n        // ========================================================\r\n        (function initRoute() {\r\n            const routeApi = GeoLeaf.Route;\r\n            if (!routeApi || typeof routeApi.init !== \"function\" || typeof routeApi.loadFromConfig !== \"function\") {\r\n                return;\r\n            }\r\n            try {\r\n                routeApi.init({ map: map, fitBoundsOnLoad: false, maxZoomOnFit: 12 });\r\n            } catch (e) {\r\n                AppLog.warn(\"GeoLeaf.Route.init() a lev√© une erreur :\", e);\r\n                return;\r\n            }\r\n            if (Array.isArray(cfg.routes) && cfg.routes.length > 0) {\r\n                try {\r\n                    routeApi.loadFromConfig(cfg.routes);\r\n                    AppLog.log(\"Itin√©raires charg√©s.\");\r\n                } catch (e) {\r\n                    AppLog.warn(\"GeoLeaf.Route.loadFromConfig() a lev√© une erreur :\", e);\r\n                }\r\n            }\r\n        })();\r\n\r\n        // ========================================================\r\n        // Couches GeoJSON via GeoLeaf.GeoJSON\r\n        // ========================================================\r\n        (function initGeoJSON() {\r\n            const geoJsonApi = GeoLeaf.GeoJSON;\r\n            if (!geoJsonApi || typeof geoJsonApi.init !== \"function\") {\r\n                AppLog.log(\"GeoLeaf.GeoJSON.init() indisponible ‚Äî pas de couches GeoJSON.\");\r\n                return;\r\n            }\r\n\r\n            try {\r\n                geoJsonApi.init({ map: map, fitBoundsOnLoad: false, maxZoomOnFit: 12 });\r\n            } catch (e) {\r\n                AppLog.warn(\"GeoLeaf.GeoJSON.init() a lev√© une erreur :\", e);\r\n                return;\r\n            }\r\n\r\n            if (map && typeof map.on === \"function\") {\r\n                map.on(\"geoleaf:geojson:layers-loaded\", function(event) {\r\n                    if (event && event.detail && typeof event.detail.count === \"number\") {\r\n                        const count = event.detail.count;\r\n                        const message = count === 1 ? \"1 couche GeoJSON charg√©e\" : count + \" couches GeoJSON charg√©es\";\r\n                        _app.showNotification(message, 3000);\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Initialisation du syst√®me de th√®mes\r\n            const loadAllConfigsPromise = (function() {\r\n                if (GeoLeaf._GeoJSONLoader && typeof GeoLeaf._GeoJSONLoader.loadAllLayersConfigsForLayerManager === \"function\") {\r\n                    const activeProfile = GeoLeaf.Config && typeof GeoLeaf.Config.getActiveProfile === \"function\"\r\n                        ? GeoLeaf.Config.getActiveProfile() : null;\r\n                    if (activeProfile) {\r\n                        return GeoLeaf._GeoJSONLoader.loadAllLayersConfigsForLayerManager(activeProfile)\r\n                            .catch(err => { AppLog.warn(\"Erreur chargement configs couches:\", err); return []; });\r\n                    }\r\n                }\r\n                return Promise.resolve();\r\n            })();\r\n\r\n            loadAllConfigsPromise.then(function() {\r\n                if (!GeoLeaf.ThemeSelector || typeof GeoLeaf.ThemeSelector.init !== \"function\") {\r\n                    AppLog.warn(\"ThemeSelector non disponible\");\r\n                    return;\r\n                }\r\n\r\n                let currentProfileId = null;\r\n                if (GeoLeaf.Config && typeof GeoLeaf.Config.getActiveProfileId === \"function\") {\r\n                    currentProfileId = GeoLeaf.Config.getActiveProfileId();\r\n                }\r\n\r\n                const primaryContainer = document.getElementById(\"gl-theme-primary-container\");\r\n                const secondaryContainer = document.getElementById(\"gl-theme-secondary-container\");\r\n\r\n                if (!currentProfileId || !primaryContainer || !secondaryContainer) {\r\n                    AppLog.warn(\"ThemeSelector : conteneurs ou profil manquants\");\r\n                    return;\r\n                }\r\n\r\n                GeoLeaf.ThemeSelector.init({\r\n                    profileId: currentProfileId,\r\n                    primaryContainer: primaryContainer,\r\n                    secondaryContainer: secondaryContainer\r\n                }).then(function() {\r\n                    AppLog.log(\"ThemeSelector initialis√© et th√®me appliqu√©\");\r\n\r\n                    if (GeoLeaf._GeoJSONLayerManager && typeof GeoLeaf._GeoJSONLayerManager.populateLayerManagerWithAllConfigs === \"function\") {\r\n                        const activeThemeConfig = GeoLeaf.ThemeSelector.getActiveTheme ? GeoLeaf.ThemeSelector.getActiveTheme() : null;\r\n                        GeoLeaf._GeoJSONLayerManager.populateLayerManagerWithAllConfigs(activeThemeConfig);\r\n                    }\r\n\r\n                    document.addEventListener('geoleaf:theme:applied', function() {\r\n                        if (GeoLeaf._GeoJSONLayerManager && typeof GeoLeaf._GeoJSONLayerManager.populateLayerManagerWithAllConfigs === \"function\") {\r\n                            const activeThemeConfig = GeoLeaf.ThemeSelector.getActiveTheme ? GeoLeaf.ThemeSelector.getActiveTheme() : null;\r\n                            GeoLeaf._GeoJSONLayerManager.populateLayerManagerWithAllConfigs(activeThemeConfig);\r\n                        }\r\n                    });\r\n                }).catch(function(e) {\r\n                    AppLog.warn(\"Erreur initialisation ThemeSelector:\", e);\r\n                });\r\n            });\r\n        })();\r\n\r\n        // ========================================================\r\n        // Branding\r\n        // ========================================================\r\n        if (GeoLeaf.UI && GeoLeaf.UI.Branding && typeof GeoLeaf.UI.Branding.init === \"function\") {\r\n            try {\r\n                GeoLeaf.UI.Branding.init(map);\r\n            } catch (e) {\r\n                AppLog.warn(\"GeoLeaf.UI.Branding.init() a lev√© une erreur :\", e);\r\n            }\r\n        }\r\n\r\n        // ========================================================\r\n        // L√©gende et gestionnaire de couches\r\n        // ========================================================\r\n        if (cfg.ui && cfg.ui.showLegend !== false && GeoLeaf.Legend && typeof GeoLeaf.Legend.init === \"function\") {\r\n            try {\r\n                GeoLeaf.Legend.init(map, {\r\n                    position: \"bottomleft\",\r\n                    collapsible: true,\r\n                    collapsed: false,\r\n                    title: \"L√©gende\"\r\n                });\r\n            } catch (e) {\r\n                AppLog.warn(\"Erreur lors de l'initialisation du module Legend:\", e);\r\n            }\r\n        }\r\n\r\n        if (cfg.ui && cfg.ui.showLayerManager !== false && GeoLeaf.LayerManager && typeof GeoLeaf.LayerManager.init === \"function\") {\r\n            try {\r\n                GeoLeaf.LayerManager.init({ map: map, position: \"bottomright\" });\r\n            } catch (e) {\r\n                AppLog.warn(\"GeoLeaf.LayerManager.init() a lev√© une erreur :\", e);\r\n            }\r\n        }\r\n\r\n        // ========================================================\r\n        // Contr√¥le d'√©chelle\r\n        // ========================================================\r\n        if (GeoLeaf.initScaleControl && typeof GeoLeaf.initScaleControl === \"function\") {\r\n            try { GeoLeaf.initScaleControl(map); } catch (e) {\r\n                AppLog.warn(\"GeoLeaf.initScaleControl() a lev√© une erreur :\", e);\r\n            }\r\n        }\r\n\r\n        // ========================================================\r\n        // Syst√®me de labels\r\n        // ========================================================\r\n        if (GeoLeaf.Labels && typeof GeoLeaf.Labels.init === \"function\") {\r\n            try { GeoLeaf.Labels.init({ map: map }); } catch (e) {\r\n                AppLog.warn(\"GeoLeaf.Labels.init() a lev√© une erreur :\", e);\r\n            }\r\n        }\r\n\r\n        // ========================================================\r\n        // Affichage des coordonn√©es\r\n        // ========================================================\r\n        if (cfg.ui && cfg.ui.showCoordinates !== false && GeoLeaf.UI && GeoLeaf.UI.CoordinatesDisplay && typeof GeoLeaf.UI.CoordinatesDisplay.init === \"function\") {\r\n            try {\r\n                GeoLeaf.UI.CoordinatesDisplay.init(map, { position: \"bottomleft\", decimals: 6 });\r\n            } catch (e) {\r\n                AppLog.warn(\"GeoLeaf.UI.CoordinatesDisplay.init() a lev√© une erreur :\", e);\r\n            }\r\n        }\r\n\r\n        // ========================================================\r\n        // R√©v√©ler l'application quand les couches sont pr√™tes\r\n        // Le spinner #gl-loader reste opaque pendant que la carte\r\n        // et les couches GeoJSON se chargent derri√®re.\r\n        // On attend l'√©v√©nement geoleaf:theme:applied (= toutes\r\n        // les couches visibles sont charg√©es) avant de r√©v√©ler.\r\n        // ========================================================\r\n        let _appRevealed = false;\r\n        function revealApp(reason) {\r\n            if (_appRevealed) return;\r\n            _appRevealed = true;\r\n            const loader = document.getElementById('gl-loader');\r\n            if (loader) {\r\n                loader.classList.add('gl-loader--fade');\r\n                // Supprimer du DOM apr√®s la transition CSS (400ms)\r\n                loader.addEventListener('transitionend', function() {\r\n                    loader.style.display = 'none';\r\n                }, { once: true });\r\n                // Fallback si transitionend ne se d√©clenche pas\r\n                setTimeout(function() { loader.style.display = 'none'; }, 500);\r\n            }\r\n\r\n            // Correctif : le loader (#gl-loader) recouvrait la carte (position: fixed; inset: 0)\r\n            // ‚Üí Leaflet calculait fitBounds sur un conteneur de dimensions incorrectes.\r\n            // On recalcule apr√®s le retrait du loader.\r\n            if (map) {\r\n                map.invalidateSize({ pan: false });\r\n                setTimeout(function() {\r\n                    try {\r\n                        map.fitBounds(profileBounds, {\r\n                            maxZoom:  profileMaxZoom,\r\n                            padding:  profilePadding,\r\n                            animate:  true,\r\n                            duration: 0.6\r\n                        });\r\n                    } catch (e) {\r\n                        AppLog.warn(\"[GeoLeaf] Correctif fitBounds au reveal :\", e);\r\n                    }\r\n                }, 120);\r\n            }\r\n\r\n            document.dispatchEvent(new CustomEvent(\"geoleaf:map:ready\"));\r\n            AppLog.info(\"Application pr√™te ‚Äî \" + reason);\r\n        }\r\n\r\n        // Attendre que toutes les couches du th√®me soient charg√©es\r\n        document.addEventListener('geoleaf:theme:applied', function() {\r\n            revealApp('th√®me appliqu√©, couches charg√©es');\r\n        }, { once: true });\r\n\r\n        // S√©curit√© : r√©v√©ler apr√®s 15s max (r√©seau lent, erreur‚Ä¶)\r\n        setTimeout(function() { revealApp('timeout s√©curit√© 15s'); }, 15000);\r\n\r\n        AppLog.info(\"Application initialis√©e, chargement des couches en arri√®re-plan‚Ä¶\");\r\n    };\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core ‚Äì App / Boot\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf Application Boot\r\n * Chargement de la configuration et lancement de l'initialisation.\r\n * Expose l'API publique GeoLeaf.boot().\r\n *\r\n * Usage : <script>GeoLeaf.boot();</script>\r\n *\r\n * @module app/boot\r\n */\r\n(function (global) {\r\n    \"use strict\";\r\n\r\n    const GeoLeaf = (global.GeoLeaf = global.GeoLeaf || {});\r\n    const _app = GeoLeaf._app = GeoLeaf._app || {};\r\n\r\n    // ============================================================\r\n    // Fonction startApp : chargement config + lancement initApp\r\n    // ============================================================\r\n    _app.startApp = function () {\r\n        const AppLog = _app.AppLog;\r\n\r\n        if (!GeoLeaf) {\r\n            AppLog.error(\"GeoLeaf global introuvable. Le bundle core doit √™tre charg√© avant GeoLeaf.boot().\");\r\n            return;\r\n        }\r\n\r\n        if (typeof GeoLeaf.loadConfig !== \"function\") {\r\n            AppLog.error(\"GeoLeaf.loadConfig() est introuvable. V√©rifiez que le bundle core est complet.\");\r\n            return;\r\n        }\r\n\r\n        AppLog.info(\"D√©marrage de l'application...\");\r\n\r\n        let selectedProfile = null;\r\n        try {\r\n            selectedProfile = sessionStorage.getItem('gl-selected-profile');\r\n            if (selectedProfile) {\r\n                AppLog.log('Profil s√©lectionn√© depuis sessionStorage:', selectedProfile);\r\n                sessionStorage.removeItem('gl-selected-profile');\r\n            }\r\n        } catch (e) {\r\n            AppLog.warn('Impossible de lire sessionStorage:', e);\r\n        }\r\n\r\n        const profilesPath = _app.getProfilesBasePath();\r\n\r\n        GeoLeaf.loadConfig({\r\n            url: profilesPath + \"geoleaf.config.json\",\r\n            profileId: selectedProfile,\r\n            autoEvent: true,\r\n\r\n            onLoaded: function (cfg) {\r\n                AppLog.log(\"Configuration charg√©e via GeoLeaf.loadConfig :\", cfg || {});\r\n\r\n                if (GeoLeaf.Config && typeof GeoLeaf.Config.getCategories === \"function\") {\r\n                    try { GeoLeaf.Config.getCategories(); } catch (e) {\r\n                        AppLog.warn(\"Erreur lors de la lecture du mapping cat√©gories :\", e);\r\n                    }\r\n                }\r\n\r\n                const baseCfg = cfg || {};\r\n\r\n                if (GeoLeaf.Config && typeof GeoLeaf.Config.loadActiveProfileResources === \"function\") {\r\n                    GeoLeaf.Config.loadActiveProfileResources()\r\n                        .then(function (profileCfg) {\r\n                            AppLog.info(\"Ressources du profil actif charg√©es.\");\r\n                            _app.initApp(profileCfg || baseCfg);\r\n                        })\r\n                        .catch(function (err) {\r\n                            AppLog.warn(\"Erreur lors du chargement des ressources de profil :\", err);\r\n                            _app.initApp(baseCfg);\r\n                        });\r\n                } else {\r\n                    _app.initApp(baseCfg);\r\n                }\r\n            },\r\n\r\n            onError: function (err) {\r\n                AppLog.error(\"Erreur chargement config via GeoLeaf.loadConfig :\", err);\r\n            }\r\n        });\r\n    };\r\n\r\n    // ============================================================\r\n    // Exposer GeoLeaf.boot() ‚Äî API publique\r\n    // ============================================================\r\n\r\n    /**\r\n     * D√©marre l'application GeoLeaf.\r\n     * Charge la configuration, initialise la carte et tous les modules.\r\n     * Les plugins optionnels (Storage, AddPOI) doivent √™tre charg√©s avant cet appel.\r\n     *\r\n     * @example\r\n     * <script src=\"dist/geoleaf.umd.js\"></script>\r\n     * <script src=\"dist/geoleaf-storage.plugin.js\"></script>  <!-- optionnel -->\r\n     * <script src=\"dist/geoleaf-addpoi.plugin.js\"></script>   <!-- optionnel -->\r\n     * <script>GeoLeaf.boot();</script>\r\n     */\r\n    GeoLeaf.boot = function() {\r\n        if (document.readyState === 'loading') {\r\n            document.addEventListener('DOMContentLoaded', _app.startApp);\r\n        } else {\r\n            _app.startApp();\r\n        }\r\n    };\r\n\r\n})(window);\r\n","/*!\r\n * GeoLeaf Core\r\n * ¬© 2026 Mattieu Pottier\r\n * Released under the MIT License\r\n * https://geoleaf.dev\r\n */\r\n\r\n/**\r\n * GeoLeaf Bundle Entry Point\r\n * Point d'entr√©e pour la g√©n√©ration du bundle UMD via Rollup\r\n *\r\n * Ce fichier charge tous les modules GeoLeaf dans l'ordre correct des d√©pendances.\r\n * Chaque module est un IIFE qui attache ses exports sur window.GeoLeaf.\r\n *\r\n * @version 3.1.0\r\n */\r\n\r\n// Import des modules dans l'ordre des d√©pendances (identique √† main.js ligne par ligne)\r\n\r\n// Modules utilitaires (doivent √™tre charg√©s en premier)\r\nimport './static/js/geoleaf.log.js';\r\nimport './static/js/geoleaf.log.config.js';\r\nimport './static/js/geoleaf.security.js';\r\nimport './static/js/geoleaf.constants.js';\r\nimport './static/js/geoleaf.utils.js';\r\nimport './static/js/utils/dom-security.js';\r\nimport './static/js/utils/dom-helpers.js';\r\nimport './static/js/utils/event-listener-manager.js';\r\nimport './static/js/utils/timer-manager.js';\r\nimport './static/js/utils/scale-utils.js';\r\n\r\n// Helpers\r\nimport './static/js/helpers/style-resolver.js';\r\n\r\n// Validators\r\nimport './static/js/validators/style-validator-rules.js';\r\nimport './static/js/validators/style-validator.js';\r\n\r\n// Modules principaux\r\nimport './static/js/geoleaf.core.js';\r\n\r\n// UI - Sous-modules\r\nimport './static/js/ui/theme.js';\r\nimport './static/js/ui/controls.js';\r\nimport './static/js/ui/panel-builder.js';\r\nimport './static/js/ui/dom-utils.js';\r\nimport './static/js/ui/coordinates-display.js';\r\nimport './static/js/ui/branding.js';\r\n\r\n// UI - Content Builder\r\nimport './static/js/ui/content-builder/core.js';\r\nimport './static/js/ui/content-builder/templates.js';\r\nimport './static/js/ui/content-builder/assemblers.js';\r\nimport './static/js/ui/content-builder.js';\r\nimport './static/js/ui/components.js';\r\nimport './static/js/ui/notifications.js';\r\n\r\n// UI - Sprint 4.4\r\nimport './static/js/ui/event-delegation.js';\r\nimport './static/js/ui/filter-state-manager.js';\r\n\r\n// Map\r\nimport './static/js/map/scale-control.js';\r\n\r\n// UI - Filter Control Builder\r\nimport './static/js/ui/filter-control-builder.js';\r\n\r\n// UI - Filter Panel\r\nimport './static/js/ui/filter-panel/shared.js';\r\nimport './static/js/ui/filter-panel/state-reader.js';\r\nimport './static/js/ui/filter-panel/lazy-loader.js';\r\nimport './static/js/ui/filter-panel/applier.js';\r\nimport './static/js/ui/filter-panel/renderer.js';\r\nimport './static/js/ui/filter-panel/proximity.js';\r\nimport './static/js/ui/filter-panel/core.js';\r\nimport './static/js/ui/filter-panel.js';\r\n\r\n// Main UI\r\nimport './static/js/geoleaf.ui.js';\r\n\r\n// Data\r\nimport './static/js/data/normalizer.js';\r\n\r\n// Loaders\r\nimport './static/js/loaders/style-loader.js';\r\n\r\n// Config - Sous-modules\r\nimport './static/js/config/loader.js';\r\nimport './static/js/config/storage.js';\r\nimport './static/js/config/normalization.js';\r\nimport './static/js/config/taxonomy.js';\r\nimport './static/js/config/profile-v3-loader.js';\r\nimport './static/js/config/profile.js';\r\nimport './static/js/config/data-converter.js';\r\n// Config - GeoLeaf.Config (√©clat√© en 4 sous-modules)\r\nimport './static/js/config/geoleaf-config/config-core.js';\r\nimport './static/js/config/geoleaf-config/config-validation.js';\r\nimport './static/js/config/geoleaf-config/config-loaders.js';\r\nimport './static/js/config/geoleaf-config/config-accessors.js';\r\n\r\n// Autres modules\r\nimport './static/js/geoleaf.baselayers.js';\r\nimport './static/js/geoleaf.filters.js';\r\n\r\n// POI - Sous-modules\r\nimport './static/js/poi/shared.js';\r\nimport './static/js/poi/normalizers.js';\r\nimport './static/js/poi/popup.js';\r\nimport './static/js/poi/markers.js';\r\n\r\n// POI Renderers\r\nimport './static/js/renderers/abstract-renderer.js';\r\nimport './static/js/poi/renderers/field-renderers.js';\r\nimport './static/js/poi/renderers/media-renderers.js';\r\nimport './static/js/poi/renderers/lightbox-manager.js';\r\nimport './static/js/poi/renderers/ui-behaviors.js';\r\nimport './static/js/poi/renderers/component-renderers.js';\r\nimport './static/js/poi/renderers/section-orchestrator.js';\r\nimport './static/js/poi/renderers/links.js';\r\nimport './static/js/poi/renderers/core.js';\r\nimport './static/js/poi/renderers.js';\r\nimport './static/js/poi/sidepanel.js';\r\nimport './static/js/poi/core.js';\r\nimport './static/js/geoleaf.poi.js';\r\n\r\n// POI Sync Handler + Placement Mode ‚Üí charg√©s via geoleaf-addpoi.plugin.js (optionnel)\r\n\r\n// GeoJSON - Sous-modules\r\nimport './static/js/geojson/shared.js';\r\nimport './static/js/geojson/style-resolver.js';\r\nimport './static/js/geojson/visibility-manager.js';\r\n\r\n// GeoJSON Layer Manager (√©clat√© en 4 sous-modules)\r\nimport './static/js/geojson/layer-manager/store.js';\r\nimport './static/js/geojson/layer-manager/visibility.js';\r\nimport './static/js/geojson/layer-manager/style.js';\r\nimport './static/js/geojson/layer-manager/integration.js';\r\nimport './static/js/geojson/popup-tooltip.js';\r\nimport './static/js/geojson/clustering.js';\r\nimport './static/js/geojson/layer-config-manager.js';\r\nimport './static/js/geojson/feature-validator.js';\r\n// GeoJSON Loader (√©clat√© en 4 sous-modules)\r\nimport './static/js/geojson/loader/config-helpers.js';\r\nimport './static/js/geojson/loader/data.js';\r\nimport './static/js/geojson/loader/single-layer.js';\r\nimport './static/js/geojson/loader/profile.js';\r\nimport './static/js/geojson/core.js';\r\n\r\n// Route - Sous-modules\r\nimport './static/js/route/style-resolver.js';\r\nimport './static/js/route/popup-builder.js';\r\nimport './static/js/route/loaders.js';\r\nimport './static/js/route/layer-manager.js';\r\nimport './static/js/geoleaf.route.js';\r\n\r\n// LayerManager - Sous-modules\r\nimport './static/js/layer-manager/shared.js';\r\nimport './static/js/layer-manager/renderer.js';\r\nimport './static/js/layer-manager/cache-section.js';\r\nimport './static/js/layer-manager/basemap-selector.js';\r\nimport './static/js/layer-manager/style-selector.js';\r\nimport './static/js/layer-manager/control.js';\r\nimport './static/js/geoleaf.layer-manager.js';\r\n\r\n// Legend\r\nimport './static/js/legend/legend-generator.js';\r\nimport './static/js/legend/legend-renderer.js';\r\nimport './static/js/legend/legend-control.js';\r\nimport './static/js/geoleaf.legend.js';\r\n\r\n// Labels\r\nimport './static/js/labels/label-renderer.js';\r\nimport './static/js/labels/label-button-manager.js';\r\nimport './static/js/labels/labels.js';\r\n\r\n// Themes\r\nimport './static/js/themes/theme-loader.js';\r\n\r\n// Theme Applier (√©clat√© en 4 sous-modules)\r\nimport './static/js/themes/theme-applier/core.js';\r\nimport './static/js/themes/theme-applier/visibility.js';\r\nimport './static/js/themes/theme-applier/deferred.js';\r\nimport './static/js/themes/theme-applier/ui-sync.js';\r\n\r\nimport './static/js/themes/theme-selector.js';\r\n\r\n// Table\r\nimport './static/js/table/panel.js';\r\nimport './static/js/table/renderer.js';\r\nimport './static/js/geoleaf.table.js';\r\n\r\n// Storage + Cache Button ‚Üí charg√©s via geoleaf-storage.plugin.js (optionnel)\r\n\r\n// POI Add Form ‚Üí charg√© via geoleaf-addpoi.plugin.js (optionnel)\r\n\r\n// API Controller\r\nimport './static/js/api/module-manager.js';\r\nimport './static/js/api/initialization-manager.js';\r\nimport './static/js/api/namespace-manager.js';\r\nimport './static/js/api/factory-manager.js';\r\nimport './static/js/api/controller.js';\r\n\r\n// API publique - Doit √™tre charg√© en dernier\r\nimport './static/js/geoleaf.api.js';\r\n\r\n// Application bootstrap (√©clat√© en 3 sous-modules)\r\nimport './app/helpers.js';\r\nimport './app/init.js';\r\nimport './app/boot.js';\r\n\r\n// Export du namespace global GeoLeaf\r\nexport default (typeof window !== 'undefined' ? window.GeoLeaf : {});\r\n"],"names":["global","this"],"mappings":"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"}